<?xml version="1.0" encoding="utf-8"?>

<image schemaversion="7.2" name="initrd-strip-metadata">
    <description type="boot">
        <author>Marcus Sch√§fer</author>
        <contact>ms@suse.com</contact>
        <specification>default items to keep or delete from the kiwi initrd</specification>
    </description>
    <preferences>
        <type image="cpio"/>
        <version>2.7.1</version>
    </preferences>
    <repository>
        <source path="nope"/>
    </repository>
<!---
    remove all files listed here
    -->
    <strip type="delete">
        <file name="usr/share/bash-completion"/>
        <file name="usr/share/zsh"/>
        <file name="usr/share/sgml"/>
        <file name="usr/share/emacs"/>
        <file name="usr/share/zoneinfo"/>
        <file name="usr/share/bash/helpfiles"/>
        <file name="usr/share/zypp"/>
        <file name="usr/share/zypper"/>
        <file name="usr/share/polkit-1"/>
        <file name="usr/share/sounds"/>
        <file name="usr/share/ssl"/>
        <file name="usr/share/pixmaps"/>
        <file name="usr/share/pkgconfig"/>
        <file name="usr/share/help"/>
        <file name="usr/share/gnupg"/>
        <file name="var/lib/zypp"/>
        <file name="var/adm/fillup-templates"/>
        <file name="var/adm/backup"/>
        <file name="usr/share/info"/>
        <file name="usr/share/splashy"/>
        <file name="lib/i686/nosegneg"/>
        <file name="usr/lib*/gconv"/>
        <file name="usr/src/packages"/>
        <file name="usr/share/X11/locale"/>
        <file name="usr/share/backgrounds"/>
        <file name="usr/share/grub2/backgrounds"/>
        <file name="usr/lib/rpm"/>
        <file name="var/log/*"/>
    </strip>
<!--
    remove all binaries from bin|sbin /usr/bin|sbin
    locations except for the ones listed here
    -->
    <strip type="tools">
        <file name="systemd-detect-virt"/>
        <file name="kbd_mode"/>
        <file name="stty"/>
        <file name="sulogin"/>
        <file name="reset"/>
        <file name="tset"/>
        <file name="setfont"/>
        <file name="lvmetad"/>
        <file name="loadkeys"/>
        <file name="klogconsole"/>
        <file name="multipath"/>
        <file name="multipathd"/>
        <file name="mpathpersist"/>
        <file name="mountpoint"/>
        <file name="checkproc"/>
        <file name="date"/>
        <file name="dbus-uuidgen"/>
        <file name="ifup"/>
        <file name="isoinfo"/>
        <file name="ip"/>
        <file name="arch"/>
        <file name="ata_id"/>
        <file name="atftp"/>
        <file name="atftpd"/>
        <file name="awk"/>
        <file name="basename"/>
        <file name="bash"/>
        <file name="dash"/>
        <file name="bc"/>
        <file name="blkid"/>
        <file name="blockdev"/>
        <file name="blogd"/>
        <file name="btrfsctl"/>
        <file name="btrfs"/>
        <file name="btrfstune"/>
        <file name="btrfsck"/>
        <file name="busybox"/>
        <file name="bzip2"/>
        <file name="cat"/>
        <file name="checkmedia"/>
        <file name="chroot"/>
        <file name="clear"/>
        <file name="clicfs"/>
        <file name="cmp"/>
        <file name="column"/>
        <file name="cp"/>
        <file name="cryptsetup"/>
        <file name="ctc_configure"/>
        <file name="curl"/>
        <file name="cut"/>
        <file name="dasd_configure"/>
        <file name="dasdinfo"/>
        <file name="dcounter"/>
        <file name="dd"/>
        <file name="debugreiserfs"/>
        <file name="depmod"/>
        <file name="df"/>
        <file name="dhcpcd"/>
        <file name="dialog"/>
        <file name="diff"/>
        <file name="dirname"/>
        <file name="dmesg"/>
        <file name="dmevent_tool"/>
        <file name="dmsetup"/>
        <file name="dropbear"/>
        <file name="dropbearkey"/>
        <file name="du"/>
        <file name="dumpe2fs"/>
        <file name="e2fsck"/>
        <file name="echo"/>
        <file name="edd_id"/>
        <file name="egrep"/>
        <file name="eject"/>
        <file name="env"/>
        <file name="expr"/>
        <file name="false"/>
        <file name="fbiterm"/>
        <file name="fbmngplay"/>
        <file name="fdasd"/>
        <file name="fdisk"/>
        <file name="file"/>
        <file name="find"/>
        <file name="free"/>
        <file name="fsck.ext2"/>
        <file name="fsck.ext3"/>
        <file name="fsck.ext4"/>
        <file name="fsck.btrfs"/>
        <file name="fuser"/>
        <file name="gawk"/>
        <file name="gettext"/>
        <file name="grep"/>
        <file name="grub"/>
        <file name="gzip"/>
        <file name="halt"/>
        <file name="hdparm"/>
        <file name="head"/>
        <file name="hexdump"/>
        <file name="host"/>
        <file name="hostname"/>
        <file name="hwinfo"/>
        <file name="nvram"/>
        <file name="ofpathname"/>
        <file name="pseries_platform"/>
        <file name="hwup"/>
        <file name="init"/>
        <file name="insmod"/>
        <file name="id"/>
        <file name="ifplugstatus"/>
        <file name="iucv_configure"/>
        <file name="kexec"/>
        <file name="kill"/>
        <file name="killall"/>
        <file name="killall5"/>
        <file name="killproc"/>
        <file name="kpartx"/>
        <file name="kpartx_id"/>
        <file name="ldconfig"/>
        <file name="ldconfig.real"/>
        <file name="ldd"/>
        <file name="ln"/>
        <file name="losetup"/>
        <file name="ls"/>
        <file name="lsdasd"/>
        <file name="lsmod"/>
        <file name="lvchange"/>
        <file name="lvcreate"/>
        <file name="lvextend"/>
        <file name="lvm"/>
        <file name="lvresize"/>
        <file name="md5sum"/>
        <file name="mdadm"/>
        <file name="mdmon"/>
        <file name="mkdir"/>
        <file name="mkdosfs"/>
        <file name="mke2fs"/>
        <file name="mkfifo"/>
        <file name="mkfs.btrfs"/>
        <file name="mkfs.cramfs"/>
        <file name="mkfs.fat"/>
        <file name="mkfs.ext2"/>
        <file name="mkfs.ext3"/>
        <file name="mkfs.ext4"/>
        <file name="mkfs.ntfs"/>
        <file name="mkfs.xfs"/>
        <file name="mkfs.exfat"/>
        <file name="xfs_growfs"/>
        <file name="xfs_repair"/>
        <file name="xfs_admin"/>
        <file name="xfs_db"/>
        <file name="mkinitrd"/>
        <file name="mknod"/>
        <file name="mkreiserfs"/>
        <file name="mkswap"/>
        <file name="modinfo"/>
        <file name="modprobe"/>
        <file name="mount"/>
        <file name="mount.nfs"/>
        <file name="mount.nfs4"/>
        <file name="mpath_id"/>
        <file name="mpath_wait"/>
        <file name="mv"/>
        <file name="nbd-client"/>
        <file name="pam_console_apply"/>
        <file name="parted"/>
        <file name="gdisk"/>
        <file name="sgdisk"/>
        <file name="path_id"/>
        <file name="pidof"/>
        <file name="ping"/>
        <file name="pivot_root"/>
        <file name="portmap"/>
        <file name="posbios"/>
        <file name="printf"/>
        <file name="ps"/>
        <file name="pvchange"/>
        <file name="pvcreate"/>
        <file name="pvresize"/>
        <file name="pvscan"/>
        <file name="pwd"/>
        <file name="plymouth"/>
        <file name="plymouthd"/>
        <file name="plymouth-set-default-theme"/>
        <file name="qeth_configure"/>
        <file name="qemu-img"/>
        <file name="readlink"/>
        <file name="reboot"/>
        <file name="systemctl"/>
        <file name="reiserfsck"/>
        <file name="resize2fs"/>
        <file name="resize_reiserfs"/>
        <file name="rm"/>
        <file name="rmdir"/>
        <file name="rmmod"/>
        <file name="route"/>
        <file name="haveged"/>
        <file name="rpcbind"/>
        <file name="rpc.idmapd"/>
        <file name="rpc.statd"/>
        <file name="scsi_id"/>
        <file name="scsi_tur"/>
        <file name="rsync"/>
        <file name="switch_root"/>
        <file name="sed"/>
        <file name="seq"/>
        <file name="setsid"/>
        <file name="setctsid"/>
        <file name="setterm"/>
        <file name="sfdisk"/>
        <file name="sg_inq"/>
        <file name="sh"/>
        <file name="showconsole"/>
        <file name="shutdown"/>
        <file name="sleep"/>
        <file name="sm-notify"/>
        <file name="sort"/>
        <file name="splash"/>
        <file name="startproc"/>
        <file name="start-statd"/>
        <file name="stat"/>
        <file name="swapoff"/>
        <file name="swapon"/>
        <file name="tac"/>
        <file name="rev"/>
        <file name="tail"/>
        <file name="tar"/>
        <file name="test"/>
        <file name="touch"/>
        <file name="tr"/>
        <file name="true"/>
        <file name="tty"/>
        <file name="tune2fs"/>
        <file name="udevadm"/>
        <file name="udevcontrol"/>
        <file name="udevd"/>
        <file name="udevsettle"/>
        <file name="udevtrigger"/>
        <file name="umount"/>
        <file name="uname"/>
        <file name="unionfs"/>
        <file name="uniq"/>
        <file name="usb_id"/>
        <file name="usleep"/>
        <file name="utimer"/>
        <file name="vgcfgbackup"/>
        <file name="vgcfgrestore"/>
        <file name="vgchange"/>
        <file name="vgcreate"/>
        <file name="vgdisplay"/>
        <file name="vgextend"/>
        <file name="vgremove"/>
        <file name="vgrename"/>
        <file name="vgscan"/>
        <file name="vgs"/>
        <file name="vol_id"/>
        <file name="wc"/>
        <file name="which"/>
        <file name="wicked"/>
        <file name="wpa_supplicant"/>
        <file name="xargs"/>
        <file name="xz"/>
        <file name="yes"/>
        <file name="zfcp_disk_configure"/>
        <file name="zfcp_host_configure"/>
        <file name="kmod"/>
        <file name="zpool"/>
        <file name="getopt"/>
        <file name="chzdev"/>
    </strip>
<!--
    check with ldd and remove all those libraries with
    no reference except for the ones listed here
    -->
    <strip type="libs">
        <file name="libfontenc"/>
        <file name="libfreetype"/>
        <file name="libgcc_s"/>
        <file name="libnsl"/>
        <file name="libnss_compat"/>
        <file name="libnss_dns"/>
        <file name="libnss_files"/>
        <file name="libpng"/>
        <file name="libresolv"/>
        <file name="librt"/>
        <file name="libsysfs"/>
        <file name="libutempter"/>
        <file name="libutil"/>
        <file name="libkmod"/>
        <file name="libselinux"/>
        <file name="libsepol"/>
        <file name="libdevmapper"/>
        <file name="libply-boot-client"/>
        <file name="libply-splash-graphics"/>
        <file name="libsplashy"/>
        <file name="libsplashycnf"/>
        <file name="libjpeg"/>
        <file name="libkms"/>
        <file name="libaio"/>
        <file name="libdrm"/>
    </strip>
</image>
