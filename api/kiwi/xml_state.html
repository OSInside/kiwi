<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>kiwi.xml_state API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../kiwi.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;kiwi</a>

            <img src="https://osinside.github.io/kiwi/_static/kiwi-logo.png" class="logo" alt="project logo"/>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#log">log</a>
            </li>
            <li>
                    <a class="class" href="#description_type">description_type</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#description_type.__init__">description_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#description_type.author">author</a>
                        </li>
                        <li>
                                <a class="variable" href="#description_type.contact">contact</a>
                        </li>
                        <li>
                                <a class="variable" href="#description_type.specification">specification</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#package_type">package_type</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#package_type.__init__">package_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#package_type.packages_section">packages_section</a>
                        </li>
                        <li>
                                <a class="variable" href="#package_type.package_section">package_section</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#size_type">size_type</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#size_type.__init__">size_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#size_type.mbytes">mbytes</a>
                        </li>
                        <li>
                                <a class="variable" href="#size_type.additive">additive</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#volume_type">volume_type</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#volume_type.__init__">volume_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.size">size</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.realpath">realpath</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.mountpoint">mountpoint</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.fullsize">fullsize</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.label">label</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.attributes">attributes</a>
                        </li>
                        <li>
                                <a class="variable" href="#volume_type.is_root_volume">is_root_volume</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#DracutT">DracutT</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#DracutT.__init__">DracutT</a>
                        </li>
                        <li>
                                <a class="variable" href="#DracutT.uefi">uefi</a>
                        </li>
                        <li>
                                <a class="variable" href="#DracutT.modules">modules</a>
                        </li>
                        <li>
                                <a class="variable" href="#DracutT.drivers">drivers</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FileT">FileT</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FileT.__init__">FileT</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileT.target">target</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileT.owner">owner</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileT.permissions">permissions</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ContainerT">ContainerT</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ContainerT.__init__">ContainerT</a>
                        </li>
                        <li>
                                <a class="variable" href="#ContainerT.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#ContainerT.backend">backend</a>
                        </li>
                        <li>
                                <a class="variable" href="#ContainerT.container_file">container_file</a>
                        </li>
                        <li>
                                <a class="variable" href="#ContainerT.fetch_only">fetch_only</a>
                        </li>
                        <li>
                                <a class="variable" href="#ContainerT.fetch_command">fetch_command</a>
                        </li>
                        <li>
                                <a class="variable" href="#ContainerT.load_command">load_command</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#XMLState">XMLState</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#XMLState.__init__">XMLState</a>
                        </li>
                        <li>
                                <a class="variable" href="#XMLState.root_partition_uuid">root_partition_uuid</a>
                        </li>
                        <li>
                                <a class="variable" href="#XMLState.root_filesystem_uuid">root_filesystem_uuid</a>
                        </li>
                        <li>
                                <a class="variable" href="#XMLState.host_architecture">host_architecture</a>
                        </li>
                        <li>
                                <a class="variable" href="#XMLState.xml_data">xml_data</a>
                        </li>
                        <li>
                                <a class="variable" href="#XMLState.profiles">profiles</a>
                        </li>
                        <li>
                                <a class="variable" href="#XMLState.build_type">build_type</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_preferences_sections">get_preferences_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_description_section">get_description_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_users_sections">get_users_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bundle_format">get_build_type_bundle_format</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_name">get_build_type_name</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.btrfs_default_volume_requested">btrfs_default_volume_requested</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_image_version">get_image_version</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_initrd_system">get_initrd_system</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_locale">get_locale</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_rpm_locale">get_rpm_locale</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_rpm_locale_filtering">get_rpm_locale_filtering</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_rpm_excludedocs">get_rpm_excludedocs</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_rpm_check_signatures">get_rpm_check_signatures</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_package_manager">get_package_manager</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_release_version">get_release_version</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_packages_sections">get_packages_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.volume_matches_host_architecture">volume_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.package_matches_host_architecture">package_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.users_matches_host_architecture">users_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.collection_matches_host_architecture">collection_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.profile_matches_host_architecture">profile_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.preferences_matches_host_architecture">preferences_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.repository_matches_host_architecture">repository_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.containers_matches_host_architecture">containers_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.container_matches_host_architecture">container_matches_host_architecture</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_package_sections">get_package_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_to_become_deleted_packages">get_to_become_deleted_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_packages_sections">get_bootstrap_packages_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_image_packages_sections">get_image_packages_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_packages">get_bootstrap_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_packages">get_system_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_files">get_bootstrap_files</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_files">get_system_files</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_archives">get_bootstrap_archives</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_archives">get_system_archives</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_ignore_packages">get_ignore_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_files_ignore_packages">get_system_files_ignore_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_ignore_packages">get_system_ignore_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_ignore_packages">get_bootstrap_ignore_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_package_name">get_bootstrap_package_name</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_collection_type">get_collection_type</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_collection_type">get_bootstrap_collection_type</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_collection_type">get_system_collection_type</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_collection_modules">get_collection_modules</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_collections">get_collections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_collections">get_bootstrap_collections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_collections">get_system_collections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_products">get_products</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_products">get_bootstrap_products</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_products">get_system_products</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.is_xen_server">is_xen_server</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.is_xen_guest">is_xen_guest</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_partitions_section">get_build_type_partitions_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_system_disk_section">get_build_type_system_disk_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_machine_section">get_build_type_machine_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_vagrant_config_section">get_build_type_vagrant_config_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_vagrant_config_virtualbox_guest_additions">get_vagrant_config_virtualbox_guest_additions</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_vmdisk_section">get_build_type_vmdisk_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_vmnic_entries">get_build_type_vmnic_entries</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_vmdvd_section">get_build_type_vmdvd_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_vmconfig_entries">get_build_type_vmconfig_entries</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_section">get_build_type_bootloader_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_name">get_build_type_bootloader_name</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_bls">get_build_type_bootloader_bls</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_console">get_build_type_bootloader_console</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_serial_line_setup">get_build_type_bootloader_serial_line_setup</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_timeout">get_build_type_bootloader_timeout</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_timeout_style">get_build_type_bootloader_timeout_style</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_targettype">get_build_type_bootloader_targettype</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_settings_section">get_build_type_bootloader_settings_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_securelinux_section">get_build_type_bootloader_securelinux_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_environment_variables">get_build_type_bootloader_environment_variables</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootloader_options">get_bootloader_options</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootloader_shim_options">get_bootloader_shim_options</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootloader_install_options">get_bootloader_install_options</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootloader_config_options">get_bootloader_config_options</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_bootloader_use_disk_password">get_build_type_bootloader_use_disk_password</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_oemconfig_section">get_build_type_oemconfig_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_oemconfig_oem_resize">get_oemconfig_oem_resize</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_oemconfig_oem_systemsize">get_oemconfig_oem_systemsize</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_oemconfig_oem_multipath_scan">get_oemconfig_oem_multipath_scan</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_oemconfig_swap_mbytes">get_oemconfig_swap_mbytes</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_oemconfig_swap_name">get_oemconfig_swap_name</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_containerconfig_section">get_build_type_containerconfig_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_dracut_config">get_dracut_config</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_installmedia_initrd_modules">get_installmedia_initrd_modules</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_installmedia_initrd_drivers">get_installmedia_initrd_drivers</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_size">get_build_type_size</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_unpartitioned_bytes">get_build_type_unpartitioned_bytes</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_disk_start_sector">get_disk_start_sector</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_spare_part_size">get_build_type_spare_part_size</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_spare_part_fs_attributes">get_build_type_spare_part_fs_attributes</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_build_type_format_options">get_build_type_format_options</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_volume_group_name">get_volume_group_name</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_users">get_users</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_user_groups">get_user_groups</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_container_config">get_container_config</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.set_container_config_tag">set_container_config_tag</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.add_container_config_label">add_container_config_label</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_partitions">get_partitions</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_host_key_certificates">get_host_key_certificates</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_containers">get_containers</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_volumes">get_volumes</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_volume_management">get_volume_management</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_drivers_list">get_drivers_list</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_strip_list">get_strip_list</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_strip_files_to_delete">get_strip_files_to_delete</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_strip_tools_to_keep">get_strip_tools_to_keep</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_strip_libraries_to_keep">get_strip_libraries_to_keep</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_include_section_reference_file_names">get_include_section_reference_file_names</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_repository_sections">get_repository_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_containers_sections">get_containers_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_repository_sections_used_for_build">get_repository_sections_used_for_build</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_repository_sections_used_in_image">get_repository_sections_used_in_image</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.delete_repository_sections">delete_repository_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.delete_repository_sections_used_for_build">delete_repository_sections_used_for_build</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_repositories_signing_keys">get_repositories_signing_keys</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.set_repository">set_repository</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.add_repository">add_repository</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.add_certificate">add_certificate</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_certificates">get_certificates</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_certificates_target_distribution">get_certificates_target_distribution</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.resolve_this_path">resolve_this_path</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_displayname">copy_displayname</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_name">copy_name</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_drivers_sections">copy_drivers_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_systemdisk_section">copy_systemdisk_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_strip_sections">copy_strip_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_machine_section">copy_machine_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_bootloader_section">copy_bootloader_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_oemconfig_section">copy_oemconfig_section</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_repository_sections">copy_repository_sections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_preferences_subsections">copy_preferences_subsections</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_build_type_attributes">copy_build_type_attributes</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_bootincluded_packages">copy_bootincluded_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_bootincluded_archives">copy_bootincluded_archives</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.copy_bootdelete_packages">copy_bootdelete_packages</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_distribution_name_from_boot_attribute">get_distribution_name_from_boot_attribute</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_fs_mount_option_list">get_fs_mount_option_list</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_fs_create_option_list">get_fs_create_option_list</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_luks_credentials">get_luks_credentials</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_luks_format_options">get_luks_format_options</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_derived_from_image_uri">get_derived_from_image_uri</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.set_derived_from_image_uri">set_derived_from_image_uri</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.set_root_partition_uuid">set_root_partition_uuid</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_root_partition_uuid">get_root_partition_uuid</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.set_root_filesystem_uuid">set_root_filesystem_uuid</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_root_filesystem_uuid">get_root_filesystem_uuid</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_archives_target_dirs">get_archives_target_dirs</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_bootstrap_archives_target_dirs">get_bootstrap_archives_target_dirs</a>
                        </li>
                        <li>
                                <a class="function" href="#XMLState.get_system_archives_target_dirs">get_system_archives_target_dirs</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../kiwi.html">kiwi</a><wbr>.xml_state    </h1>

                
                        <input id="mod-xml_state-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-xml_state-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="c1"># Copyright (c) 2015 SUSE Linux GmbH.  All rights reserved.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="c1">#</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="c1"># This file is part of kiwi.</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="c1">#</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="c1"># kiwi is free software: you can redistribute it and/or modify</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="c1"># it under the terms of the GNU General Public License as published by</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="c1"># (at your option) any later version.</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="c1">#</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="c1"># kiwi is distributed in the hope that it will be useful,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="c1"># GNU General Public License for more details.</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="c1">#</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="c1"># You should have received a copy of the GNU General Public License</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="c1"># along with kiwi.  If not, see &lt;http://www.gnu.org/licenses/&gt;</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="c1">#</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a>    <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">NamedTuple</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Union</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="p">)</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">textwrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">dedent</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="c1"># project</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">kiwi.defaults</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">defaults</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiwi</span><span class="w"> </span><span class="kn">import</span> <span class="n">xml_parse</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiwi.storage.disk</span><span class="w"> </span><span class="kn">import</span> <span class="n">ptable_entry_type</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiwi.system.uri</span><span class="w"> </span><span class="kn">import</span> <span class="n">Uri</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiwi.defaults</span><span class="w"> </span><span class="kn">import</span> <span class="n">Defaults</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiwi.utils.size</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringToSize</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiwi.command</span><span class="w"> </span><span class="kn">import</span> <span class="n">Command</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kiwi.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>    <span class="n">KiwiProfileNotFound</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>    <span class="n">KiwiTypeNotFound</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a>    <span class="n">KiwiDistributionNameError</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>    <span class="n">KiwiFileAccessError</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="p">)</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;kiwi&#39;</span><span class="p">)</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="n">description_type</span> <span class="o">=</span> <span class="n">NamedTuple</span><span class="p">(</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>    <span class="s1">&#39;description_type&#39;</span><span class="p">,</span> <span class="p">[</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>        <span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>        <span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>        <span class="p">(</span><span class="s1">&#39;specification&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>    <span class="p">]</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="p">)</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="n">package_type</span> <span class="o">=</span> <span class="n">NamedTuple</span><span class="p">(</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>    <span class="s1">&#39;package_type&#39;</span><span class="p">,</span> <span class="p">[</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>        <span class="p">(</span><span class="s1">&#39;packages_section&#39;</span><span class="p">,</span> <span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">),</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>        <span class="p">(</span><span class="s1">&#39;package_section&#39;</span><span class="p">,</span> <span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span><span class="p">)</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>    <span class="p">]</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="p">)</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="n">size_type</span> <span class="o">=</span> <span class="n">NamedTuple</span><span class="p">(</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>    <span class="s1">&#39;size_type&#39;</span><span class="p">,</span> <span class="p">[</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>        <span class="p">(</span><span class="s1">&#39;mbytes&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>        <span class="p">(</span><span class="s1">&#39;additive&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>    <span class="p">]</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="p">)</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="n">volume_type</span> <span class="o">=</span> <span class="n">NamedTuple</span><span class="p">(</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>    <span class="s1">&#39;volume_type&#39;</span><span class="p">,</span> <span class="p">[</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>        <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>        <span class="p">(</span><span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>        <span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>        <span class="p">(</span><span class="s1">&#39;realpath&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>        <span class="p">(</span><span class="s1">&#39;mountpoint&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]),</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>        <span class="p">(</span><span class="s1">&#39;fullsize&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>        <span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]),</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>        <span class="p">(</span><span class="s1">&#39;attributes&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>        <span class="p">(</span><span class="s1">&#39;is_root_volume&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>    <span class="p">]</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="p">)</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DracutT</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>    <span class="n">uefi</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>    <span class="n">modules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>    <span class="n">drivers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FileT</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>    <span class="n">owner</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>    <span class="n">permissions</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ContainerT</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>    <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>    <span class="n">container_file</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>    <span class="n">fetch_only</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>    <span class="n">fetch_command</span><span class="p">:</span> <span class="n">Callable</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>    <span class="n">load_command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a><span class="k">class</span><span class="w"> </span><span class="nc">XMLState</span><span class="p">:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a><span class="sd">    **Implements methods to get stateful information from the XML data**</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="sd">    :param object xml_data: parse result from XMLDescription.load()</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a><span class="sd">    :param list profiles: list of used profiles</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a><span class="sd">    :param object build_type: build &lt;type&gt; section reference</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">xml_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">profiles</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>        <span class="n">build_type</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>    <span class="p">):</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">PLATFORM_MACHINE</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span> <span class="o">=</span> <span class="n">xml_data</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_used_profiles</span><span class="p">(</span><span class="n">profiles</span><span class="p">)</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_type_section</span><span class="p">(</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>            <span class="n">build_type</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>        <span class="p">)</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resolve_this_path</span><span class="p">()</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_preferences_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="sd">        All preferences sections for the selected profiles that match the</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="sd">        host architecture</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="sd">        :return: list of &lt;preferences&gt; section reference(s)</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>        <span class="n">preferences_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_preferences</span><span class="p">()):</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences_matches_host_architecture</span><span class="p">(</span><span class="n">preferences</span><span class="p">):</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>                <span class="n">preferences_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">preferences</span><span class="p">)</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>        <span class="k">return</span> <span class="n">preferences_list</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_description_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">description_type</span><span class="p">:</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="sd">        The description section</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="sd">        :return:</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="sd">            description_type tuple providing the elements</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a><span class="sd">            author contact and specification</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">        :rtype: tuple</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_description</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>        <span class="k">return</span> <span class="n">description_type</span><span class="p">(</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>            <span class="n">author</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_author</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>            <span class="n">contact</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_contact</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>            <span class="n">specification</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_specification</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>        <span class="p">)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_users_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="sd">        All users sections for the selected profiles</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a><span class="sd">        :return: list of &lt;users&gt; section reference(s)</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>        <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_users</span><span class="p">()):</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_matches_host_architecture</span><span class="p">(</span><span class="n">users_section</span><span class="p">):</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>                <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">users_section</span><span class="p">)</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>        <span class="k">return</span> <span class="n">users</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bundle_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">        Return bundle_format for build type</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">        The bundle_format string is validated against the available</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="sd">        name tags from kiwi.system.result::result_name_tags.</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">        :return: bundle format string</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_bundle_format</span><span class="p">()</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">        Default build type name</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">        :return: Content of image attribute from build type</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_image</span><span class="p">()</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">btrfs_default_volume_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">        Check if setting a default volume for btrfs is requested</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_btrfs_set_default_volume</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>            <span class="c1"># Setting a default volume is explicitly switched off</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>            <span class="c1"># In any other case (True | None) a default volume</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>            <span class="c1"># is wanted and will be set</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a><span class="sd">        Image version from preferences section.</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a><span class="sd">        Multiple occurences of version in preferences sections are not</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="sd">        forbidden, however only the first version found defines the</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a><span class="sd">        final image version</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a><span class="sd">        :return: Content of &lt;version&gt; section</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>            <span class="n">version</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>            <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>                <span class="k">return</span> <span class="n">version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_initrd_system</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a><span class="sd">        Name of initrd system to use</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">        Depending on the image type a specific initrd system is</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a><span class="sd">        either pre selected or free of choice according to the</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a><span class="sd">        XML type setup.</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a><span class="sd">        :return: &#39;dracut&#39;, &#39;kiwi&#39; or &#39;none&#39;</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>        <span class="n">pre_selection_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>            <span class="s1">&#39;vmx&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>            <span class="s1">&#39;oem&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>            <span class="s1">&#39;iso&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>            <span class="s1">&#39;kis&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>            <span class="s1">&#39;pxe&#39;</span><span class="p">:</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>        <span class="p">}</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>        <span class="n">build_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>        <span class="n">default_initrd_system</span> <span class="o">=</span> <span class="n">pre_selection_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">build_type</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;none&#39;</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>        <span class="k">if</span> <span class="n">build_type</span> <span class="o">==</span> <span class="s1">&#39;iso&#39;</span><span class="p">:</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>            <span class="c1"># iso type always use dracut as initrd system</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>            <span class="k">return</span> <span class="n">default_initrd_system</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>        <span class="c1"># Allow to choose for any other build type</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_initrd_system</span><span class="p">()</span> <span class="ow">or</span> <span class="n">default_initrd_system</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_locale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="sd">        Gets list of locale names if configured. Takes</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">        the first locale setup from the existing preferences</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a><span class="sd">        sections into account.</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">        :return: List of names or None</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">        :rtype: list|None</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>            <span class="n">locale_section</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_locale</span><span class="p">()</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>            <span class="k">if</span> <span class="n">locale_section</span><span class="p">:</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>                <span class="k">return</span> <span class="n">locale_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_locale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a><span class="sd">        Gets list of locale names to filter out by rpm</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a><span class="sd">        if rpm-locale-filtering is switched on the</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a><span class="sd">        the list always contains: [POSIX, C, C.UTF-8]</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a><span class="sd">        and is extended by the optionaly configured</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a><span class="sd">        locale</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a><span class="sd">        :return: List of names or None</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">        :rtype: list|None</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rpm_locale_filtering</span><span class="p">():</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>            <span class="n">rpm_locale</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POSIX&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C.UTF-8&#39;</span><span class="p">]</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>            <span class="n">configured_locale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_locale</span><span class="p">()</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>            <span class="k">if</span> <span class="n">configured_locale</span><span class="p">:</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>                <span class="k">for</span> <span class="n">locale</span> <span class="ow">in</span> <span class="n">configured_locale</span><span class="p">:</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>                    <span class="n">rpm_locale</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>            <span class="k">return</span> <span class="n">rpm_locale</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_locale_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="sd">        Gets the rpm-locale-filtering configuration flag. Returns</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">        False if not present.</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>            <span class="n">locale_filtering</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_locale_filtering</span><span class="p">()</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>            <span class="k">if</span> <span class="n">locale_filtering</span><span class="p">:</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>                <span class="k">return</span> <span class="n">locale_filtering</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_excludedocs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">        Gets the rpm-excludedocs configuration flag. Returns</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a><span class="sd">        False if not present.</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>            <span class="n">exclude_docs</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_excludedocs</span><span class="p">()</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>            <span class="k">if</span> <span class="n">exclude_docs</span><span class="p">:</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>                <span class="k">return</span> <span class="n">exclude_docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_check_signatures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">        Gets the rpm-check-signatures configuration flag. Returns</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">        False if not present.</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>            <span class="n">check_signatures</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_check_signatures</span><span class="p">()</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>            <span class="k">if</span> <span class="n">check_signatures</span><span class="p">:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>                <span class="k">return</span> <span class="n">check_signatures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_package_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a><span class="sd">        Get configured package manager from selected preferences section</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a><span class="sd">        :return: Content of the &lt;packagemanager&gt; section</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>            <span class="n">package_manager</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_packagemanager</span><span class="p">()</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>            <span class="k">if</span> <span class="n">package_manager</span><span class="p">:</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>                <span class="k">return</span> <span class="n">package_manager</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>        <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_package_manager</span><span class="p">()</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_release_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a><span class="sd">        Get configured release version from selected preferences section</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="sd">        :return: Content of the &lt;release-version&gt; section or &#39;&#39;</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>        <span class="n">release_version</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>            <span class="n">release_version</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_release_version</span><span class="p">()</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>            <span class="k">if</span> <span class="n">release_version</span><span class="p">:</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>                <span class="n">release_version</span> <span class="o">=</span> <span class="n">release_version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>                <span class="k">break</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>        <span class="k">return</span> <span class="n">release_version</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_types</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">        List of packages sections matching given section type(s)</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">        :param list section_types: type name(s) from packages sections</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>        <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_packages</span><span class="p">()</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>        <span class="p">)</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>            <span class="n">packages_type</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>            <span class="k">if</span> <span class="n">packages_type</span> <span class="ow">in</span> <span class="n">section_types</span><span class="p">:</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">packages</span><span class="p">)</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volume_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volume</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="sd">        Tests if the given volume section is applicable for the current host</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">volume</span><span class="p">)</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">package_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">        Tests if the given package section is applicable for the current host</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">users_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">users</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a><span class="sd">        Tests if the given users section is applicable for the current host</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collection_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">        Tests if the given namedcollection section is applicable for</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">        the current host architecture. If no architecture is specified</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a><span class="sd">        within the section it is considered as a match returning True.</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">profile_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="sd">        Tests if the given profile section is applicable for the current host</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">preferences_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preferences</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="sd">        Tests if the given preferences section is applicable for the</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">        current host architecture. If no architecture is specified within</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="sd">        the section it is considered as a match returning True.</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">preferences</span><span class="p">)</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repository_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a><span class="sd">        Tests if the given repository section is applicable for the</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a><span class="sd">        current host architecture. If no architecture is specified within</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a><span class="sd">        the section it is considered as a match returning True.</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">containers_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">containers</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a><span class="sd">        Tests if the given containers section is applicable for the</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a><span class="sd">        current host architecture. If no arch attribute is provided in</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a><span class="sd">        the section it is considered as a match and returns: True.</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">container_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="sd">        Tests if the given container section is applicable for the</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="sd">        current host architecture. If no arch attribute is provided in</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">        the section it is considered as a match and returns: True.</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_package_sections</span><span class="p">(</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">packages_sections</span><span class="p">:</span> <span class="n">List</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">package_type</span><span class="p">]:</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a><span class="sd">        List of package sections from the given packages sections.</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a><span class="sd">        Each list element contains a tuple with the &lt;package&gt; section</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="sd">        reference and the &lt;packages&gt; section this package belongs to</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">        If a package entry specfies an architecture, it is only taken if</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">        the host architecture matches the configured architecture</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a><span class="sd">        :param list packages_sections: &lt;packages&gt;</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="sd">        :return:</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="sd">            Contains list of package_type tuples</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="sd">            .. code:: python</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">                [package_type(packages_section=object, package_section=object)]</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>        <span class="k">if</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>            <span class="k">for</span> <span class="n">packages_section</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>                <span class="n">package_list</span> <span class="o">=</span> <span class="n">packages_section</span><span class="o">.</span><span class="n">get_package</span><span class="p">()</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>                <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>                    <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>                            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>                                <span class="n">package_type</span><span class="p">(</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>                                    <span class="n">packages_section</span><span class="o">=</span><span class="n">packages_section</span><span class="p">,</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>                                    <span class="n">package_section</span><span class="o">=</span><span class="n">package</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>                                <span class="p">)</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>                            <span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_to_become_deleted_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="sd">        List of package names from the type=&quot;delete&quot; or type=&quot;uninstall&quot;</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a><span class="sd">        packages section(s)</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a><span class="sd">        :param bool force: return &quot;delete&quot; type if True, &quot;uninstall&quot; type</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a><span class="sd">            otherwise</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a><span class="sd">        :return: package names</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>        <span class="n">to_become_deleted_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="p">[</span><span class="s1">&#39;delete&#39;</span> <span class="k">if</span> <span class="n">force</span> <span class="k">else</span> <span class="s1">&#39;uninstall&#39;</span><span class="p">]</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>        <span class="p">)</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>            <span class="n">to_become_deleted_packages_sections</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>        <span class="p">)</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a><span class="sd">        List of packages sections matching type=&quot;bootstrap&quot;</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">])</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a><span class="sd">        List of packages sections matching type=&quot;image&quot;</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;image&#39;</span><span class="p">])</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plus_packages</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">        List of package names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">        The list gets the selected package manager appended</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">        if there is a request to install packages inside of</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">        the image via a chroot operation</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">        :param list plus_packages: list of additional packages</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">        :return: package names</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>            <span class="n">bootstrap_packages_sections</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>        <span class="p">)</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_system_packages</span><span class="p">():</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>                <span class="n">package_manager_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_manager</span><span class="p">()</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>                <span class="k">if</span> <span class="n">package_manager_name</span> <span class="o">==</span> <span class="s1">&#39;dnf4&#39;</span><span class="p">:</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>                    <span class="c1"># The package name for dnf4 is just dnf. Thus</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>                    <span class="c1"># the name must be adapted in this case</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>                    <span class="n">package_manager_name</span> <span class="o">=</span> <span class="s1">&#39;dnf&#39;</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>                <span class="k">elif</span> <span class="n">package_manager_name</span> <span class="o">==</span> <span class="s1">&#39;apk&#39;</span><span class="p">:</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>                    <span class="n">package_manager_name</span> <span class="o">=</span> <span class="s1">&#39;apk-tools&#39;</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package_manager_name</span><span class="p">)</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>        <span class="k">if</span> <span class="n">plus_packages</span><span class="p">:</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">plus_packages</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a><span class="sd">        List of package names from the packages sections matching</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">        :return: package names</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>        <span class="p">)</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>            <span class="n">image_packages_sections</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>        <span class="p">)</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FileT</span><span class="p">]:</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a><span class="sd">        List of file names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a><span class="sd">        :return: file names</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>        <span class="k">if</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>            <span class="k">for</span> <span class="n">bootstrap_packages_section</span> <span class="ow">in</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>                <span class="n">file_list</span> <span class="o">=</span> <span class="n">bootstrap_packages_section</span><span class="o">.</span><span class="n">get_file</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> <span class="n">FileT</span><span class="p">(</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>                        <span class="n">target</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_target</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>                        <span class="n">owner</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_owner</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>                        <span class="n">permissions</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_permissions</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>                    <span class="p">)</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FileT</span><span class="p">]:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a><span class="sd">        List of file names from the packages sections matching</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a><span class="sd">        :return: file names</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>        <span class="p">)</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>                <span class="n">result</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> <span class="n">FileT</span><span class="p">(</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>                    <span class="n">target</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_target</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>                    <span class="n">owner</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_owner</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>                    <span class="n">permissions</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_permissions</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>                <span class="p">)</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a><span class="sd">        List of archive names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a><span class="sd">        :return: archive names</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>        <span class="k">if</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>            <span class="k">for</span> <span class="n">bootstrap_packages_section</span> <span class="ow">in</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>                <span class="n">archive_list</span> <span class="o">=</span> <span class="n">bootstrap_packages_section</span><span class="o">.</span><span class="n">get_archive</span><span class="p">()</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>                <span class="k">if</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>                    <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a><span class="sd">        List of archive names from the packages sections matching</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a><span class="sd">        :return: archive names</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>        <span class="p">)</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>            <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_archive</span><span class="p">():</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a><span class="sd">        section_type and type=build_type</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a><span class="sd">        :return: package names</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>        <span class="p">)</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_ignore</span><span class="p">():</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_files_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">        List of ignore package names from the type=&quot;systemfiles&quot;</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="sd">        packages section(s)</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a><span class="sd">        :return: package names</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;systemfiles&#39;</span><span class="p">)</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a><span class="sd">        :return: package names</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a><span class="sd">        :return: package names</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_package_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a><span class="sd">        bootstrap_package name from type=&quot;bootstrap&quot; packages section</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a><span class="sd">        :return: bootstrap_package name</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>            <span class="p">[</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>        <span class="p">)</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>        <span class="n">bootstrap_package</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>            <span class="n">bootstrap_package</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_bootstrap_package</span><span class="p">()</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>            <span class="k">if</span> <span class="n">bootstrap_package</span><span class="p">:</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>                <span class="k">break</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>        <span class="k">return</span> <span class="n">bootstrap_package</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a><span class="sd">        Collection type from packages sections matching given section</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a><span class="sd">        type.</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a><span class="sd">        If no collection type is specified the default collection</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a><span class="sd">        type is set to: onlyRequired</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a><span class="sd">        :return: collection type name</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>        <span class="p">)</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>        <span class="n">collection_type</span> <span class="o">=</span> <span class="s1">&#39;onlyRequired&#39;</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>            <span class="n">packages_collection_type</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_patternType</span><span class="p">()</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>            <span class="k">if</span> <span class="n">packages_collection_type</span><span class="p">:</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>                <span class="n">collection_type</span> <span class="o">=</span> <span class="n">packages_collection_type</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>                <span class="k">break</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>        <span class="k">return</span> <span class="n">collection_type</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">        Collection type for packages sections matching type=&quot;bootstrap&quot;</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a><span class="sd">        :return: collection type name</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a><span class="sd">        Collection type for packages sections matching type=&quot;image&quot;</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a><span class="sd">        :return: collection type name</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collection_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">        Dict of collection modules to enable and/or disable</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">        :return:</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">            Dict of the form:</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a><span class="sd">            .. code:: python</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a><span class="sd">                {</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a><span class="sd">                    &#39;enable&#39;: [</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a><span class="sd">                        &quot;module:stream&quot;, &quot;module&quot;</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a><span class="sd">                    ],</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a><span class="sd">                    &#39;disable&#39;: [</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a><span class="sd">                        &quot;module&quot;</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a><span class="sd">                    ]</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a><span class="sd">                }</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>        <span class="n">modules</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>            <span class="s1">&#39;disable&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>            <span class="s1">&#39;enable&#39;</span><span class="p">:</span> <span class="p">[]</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>        <span class="p">}</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">():</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>            <span class="k">for</span> <span class="n">collection_module</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_collectionModule</span><span class="p">():</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>                <span class="n">module_name</span> <span class="o">=</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>                <span class="k">if</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_enable</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>                    <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;disable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>                    <span class="n">stream</span> <span class="o">=</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_stream</span><span class="p">()</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>                    <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>                        <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">stream</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>                        <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="k">return</span> <span class="n">modules</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a><span class="sd">        List of collection names from the packages sections matching</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a><span class="sd">        type=section_type and type=build_type</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a><span class="sd">        :return: collection names</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>        <span class="p">)</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>            <span class="k">for</span> <span class="n">collection</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_namedCollection</span><span class="p">():</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_matches_host_architecture</span><span class="p">(</span><span class="n">collection</span><span class="p">):</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">        List of collection names from the packages sections</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="sd">        matching type=&quot;bootstrap&quot;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a><span class="sd">        :return: collection names</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collections</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a><span class="sd">        List of collection names from the packages sections</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a><span class="sd">        matching type=&quot;image&quot;</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a><span class="sd">        :return: collection names</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collections</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_products</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">        List of product names from the packages sections matching</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a><span class="sd">        type=section_type and type=build_type</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a><span class="sd">        :return: product names</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>        <span class="p">)</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>            <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_product</span><span class="p">():</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a><span class="sd">        List of product names from the packages sections</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a><span class="sd">        matching type=&quot;bootstrap&quot;</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a><span class="sd">        :return: product names</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="sd">        List of product names from the packages sections</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a><span class="sd">        matching type=&quot;image&quot;</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">        :return: product names</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_xen_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a><span class="sd">        Check if build type domain setup specifies a Xen Server (dom0)</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_xen_server</span><span class="p">()</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_xen_guest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a><span class="sd">        Check if build type setup specifies a Xen Guest (domX)</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="sd">        The check is based on the architecture, the firmware and</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="sd">        xen_loader configuration values:</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a><span class="sd">        * We only support Xen setup on the x86_64 architecture</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a><span class="sd">        * Firmware pointing to ec2 means the image is targeted to run</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a><span class="sd">          in Amazon EC2 which is a Xen guest</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a><span class="sd">        * Machine setup with a xen_loader attribute also indicates a</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a><span class="sd">          Xen guest target</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="o">!=</span> <span class="s1">&#39;x86_64&#39;</span><span class="p">:</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>            <span class="c1"># We only support Xen stuff on x86_64</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>        <span class="n">firmware</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_firmware</span><span class="p">()</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>        <span class="k">if</span> <span class="n">firmware</span> <span class="ow">and</span> <span class="n">firmware</span> <span class="ow">in</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_ec2_capable_firmware_names</span><span class="p">():</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>            <span class="c1"># the image is targeted to run in Amazon EC2 which is a Xen system</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>        <span class="k">elif</span> <span class="n">machine_section</span> <span class="ow">and</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_xen_loader</span><span class="p">():</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>            <span class="c1"># the image provides a machine section with a guest loader setup</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_partitions_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">        First partitions section from the build type section</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">        :return: &lt;partitions&gt; section reference</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="sd">        :rtype: xml_parse::partitions</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>        <span class="n">partitions_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_partitions</span><span class="p">()</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>        <span class="k">if</span> <span class="n">partitions_sections</span><span class="p">:</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>            <span class="k">return</span> <span class="n">partitions_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_system_disk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a><span class="sd">        First system disk section from the build type section</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a><span class="sd">        :return: &lt;systemdisk&gt; section reference</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a><span class="sd">        :rtype: xml_parse::systemdisk</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>        <span class="n">systemdisk_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_systemdisk</span><span class="p">()</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>        <span class="k">if</span> <span class="n">systemdisk_sections</span><span class="p">:</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>            <span class="k">return</span> <span class="n">systemdisk_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_machine_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a><span class="sd">        First machine section from the build type section</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a><span class="sd">        :return: &lt;machine&gt; section reference</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a><span class="sd">        :rtype: xml_parse::machine</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>        <span class="n">machine_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_machine</span><span class="p">()</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>        <span class="k">if</span> <span class="n">machine_sections</span><span class="p">:</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>            <span class="k">return</span> <span class="n">machine_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vagrant_config_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a><span class="sd">        First vagrantconfig section from the build type section</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="sd">        :return: &lt;vagrantconfig&gt; section reference</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="sd">        :rtype: xml_parse::vagrantconfig</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>        <span class="n">vagrant_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_vagrantconfig</span><span class="p">()</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>        <span class="k">if</span> <span class="n">vagrant_config_sections</span><span class="p">:</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>            <span class="k">return</span> <span class="n">vagrant_config_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_vagrant_config_virtualbox_guest_additions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a><span class="sd">        Attribute virtualbox_guest_additions_present from the first</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a><span class="sd">        vagrantconfig section.</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a><span class="sd">        :return: True|False</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>        <span class="n">vagrant_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_vagrant_config_section</span><span class="p">()</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">vagrant_config_sections</span><span class="o">.</span><span class="n">virtualbox_guest_additions_present</span><span class="p">:</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>            <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_vagrant_config_virtualbox_guest_additions</span><span class="p">()</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>            <span class="k">return</span> <span class="n">vagrant_config_sections</span><span class="o">.</span><span class="n">virtualbox_guest_additions_present</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmdisk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a><span class="sd">        First vmdisk section from the first machine section in the</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a><span class="sd">        build type section</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a><span class="sd">        :return: &lt;vmdisk&gt; section reference</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a><span class="sd">        :rtype: xml_parse::vmdisk</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>            <span class="n">vmdisk_sections</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmdisk</span><span class="p">()</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>            <span class="k">if</span> <span class="n">vmdisk_sections</span><span class="p">:</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>                <span class="k">return</span> <span class="n">vmdisk_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmnic_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a><span class="sd">        vmnic section(s) from the first machine section in the</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a><span class="sd">        build type section</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="sd">        :return: list of &lt;vmnic&gt; section reference(s)</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>            <span class="k">return</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmnic</span><span class="p">()</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmdvd_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a><span class="sd">        First vmdvd section from the first machine section in the</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a><span class="sd">        build type section</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="sd">        :return: &lt;vmdvd&gt; section reference</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a><span class="sd">        :rtype: xml_parse::vmdvd</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>            <span class="n">vmdvd_sections</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmdvd</span><span class="p">()</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>            <span class="k">if</span> <span class="n">vmdvd_sections</span><span class="p">:</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>                <span class="k">return</span> <span class="n">vmdvd_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmconfig_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a><span class="sd">        List of vmconfig-entry section values from the first</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a><span class="sd">        machine section in the build type section</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a><span class="sd">        :return: &lt;vmconfig_entry&gt; section reference(s)</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>            <span class="n">vmconfig_entries</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmconfig_entry</span><span class="p">()</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>            <span class="k">if</span> <span class="n">vmconfig_entries</span><span class="p">:</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>                <span class="k">return</span> <span class="n">vmconfig_entries</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a><span class="sd">        First bootloader section from the build type section</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a><span class="sd">        :return: &lt;bootloader&gt; section reference</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a><span class="sd">        :rtype: xml_parse::bootloader</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>        <span class="n">bootloader_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_bootloader</span><span class="p">()</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>        <span class="k">if</span> <span class="n">bootloader_sections</span><span class="p">:</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>            <span class="k">return</span> <span class="n">bootloader_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a><span class="sd">        Return bootloader name for selected build type</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a><span class="sd">        :return: bootloader name</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>        <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">if</span> <span class="n">bootloader</span> <span class="k">else</span> \
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>            <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_bootloader</span><span class="p">()</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_bls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a><span class="sd">        Return bootloader bls setting for selected build type</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a><span class="sd">        :return: True or False</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>        <span class="k">if</span> <span class="n">bootloader</span> <span class="ow">and</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_bls</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_bls</span><span class="p">()</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_console</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a><span class="sd">        Return bootloader console setting for selected build type</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a><span class="sd">        :return:</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a><span class="sd">            list of console settings for output (first element)</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a><span class="sd">            and input (second element)</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>            <span class="n">console_out</span> <span class="o">=</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_output_console</span><span class="p">()</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>            <span class="n">console_in</span> <span class="o">=</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_input_console</span><span class="p">()</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>            <span class="n">console_in</span> <span class="o">=</span> <span class="n">console_in</span> <span class="k">if</span> <span class="n">console_in</span> <span class="k">else</span> <span class="n">console_out</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>                <span class="n">console_out</span> <span class="k">if</span> <span class="n">console_out</span> <span class="ow">and</span> <span class="n">console_out</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>                <span class="n">console_in</span> <span class="k">if</span> <span class="n">console_in</span> <span class="ow">and</span> <span class="n">console_in</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>            <span class="p">]</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_serial_line_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a><span class="sd">        Return bootloader serial line setup parameters for the</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a><span class="sd">        selected build type</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a><span class="sd">        :return: serial line setup</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_serial_line</span><span class="p">()</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a><span class="sd">        Return bootloader timeout setting for selected build type</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a><span class="sd">        :return: timeout string</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_timeout</span><span class="p">()</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_timeout_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a><span class="sd">        Return bootloader timeout style setting for selected build type</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a><span class="sd">        :return: timeout_style string</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_timeout_style</span><span class="p">()</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_targettype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a><span class="sd">        Return bootloader target type setting. Only relevant for</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a><span class="sd">        the zipl bootloader because zipl is installed differently</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a><span class="sd">        depending on the storage target it runs later</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a><span class="sd">        :return: target type string</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_targettype</span><span class="p">()</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_settings_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a><span class="sd">        First bootloadersettings section from the build</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a><span class="sd">        type bootloader section</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a><span class="sd">        :return: &lt;bootloadersettings&gt; section reference</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a><span class="sd">        :rtype: xml_parse::bootloadersettings</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>        <span class="n">bootloader_settings_section</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span> <span class="ow">and</span> <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_bootloadersettings</span><span class="p">():</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>            <span class="n">bootloader_settings_section</span> <span class="o">=</span> \
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>                <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_bootloadersettings</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>        <span class="k">return</span> <span class="n">bootloader_settings_section</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_securelinux_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a><span class="sd">        First securelinux section from the build</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a><span class="sd">        type bootloader section</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a><span class="sd">        :return: &lt;securelinux&gt; section reference</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a><span class="sd">        :rtype: xml_parse::securelinux</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>        <span class="n">bootloader_securelinux_section</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span> <span class="ow">and</span> <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_securelinux</span><span class="p">():</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>            <span class="n">bootloader_securelinux_section</span> <span class="o">=</span> \
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>                <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_securelinux</span><span class="p">()</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>        <span class="k">return</span> <span class="n">bootloader_securelinux_section</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_environment_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a><span class="sd">        List of bootloader variables from the build</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a><span class="sd">        type &gt; bootloader &gt; bootloadersettings section</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>        <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>        <span class="n">bootloader_settings_section</span> <span class="o">=</span> \
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_settings_section</span><span class="p">()</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>        <span class="k">if</span> <span class="n">bootloader_settings_section</span><span class="p">:</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>            <span class="n">environment</span> <span class="o">=</span> <span class="n">bootloader_settings_section</span><span class="o">.</span><span class="n">get_environment</span><span class="p">()</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>            <span class="k">if</span> <span class="n">environment</span> <span class="ow">and</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>                <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>                        <span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>                            <span class="n">env</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>                            <span class="sa">f</span><span class="s1">&#39;=</span><span class="si">{</span><span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>                        <span class="p">)</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>                    <span class="p">)</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>        <span class="k">return</span> <span class="n">variable_list</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a><span class="sd">        List of custom options used in the process to</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a><span class="sd">        run bootloader setup workloads</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>        <span class="n">result</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>        <span class="n">bootloader_settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_settings_section</span><span class="p">()</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>        <span class="k">if</span> <span class="n">bootloader_settings</span><span class="p">:</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>            <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>            <span class="k">if</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;shim&#39;</span><span class="p">:</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_shimoption</span><span class="p">()</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>            <span class="k">elif</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;install&#39;</span><span class="p">:</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_installoption</span><span class="p">()</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>            <span class="k">elif</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;config&#39;</span><span class="p">:</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_configoption</span><span class="p">()</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>                <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">():</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_shim_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a><span class="sd">        List of custom options used in the process to setup secure boot</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;shim&#39;</span><span class="p">)</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_install_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a><span class="sd">        List of custom options used in the bootloader installation</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;install&#39;</span><span class="p">)</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_config_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a><span class="sd">        List of custom options used in the bootloader configuration</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_use_disk_password</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a><span class="sd">        Indicate whether the bootloader configuration should use the</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a><span class="sd">        password protecting the encrypted root volume.</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a><span class="sd">        :return: True|False</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_use_disk_password</span><span class="p">()</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_oemconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a><span class="sd">        First oemconfig section from the build type section</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a><span class="sd">        :return: &lt;oemconfig&gt; section reference</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a><span class="sd">        :rtype: xml_parse::oemconfig</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>        <span class="n">oemconfig_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_oemconfig</span><span class="p">()</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>        <span class="k">if</span> <span class="n">oemconfig_sections</span><span class="p">:</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>            <span class="k">return</span> <span class="n">oemconfig_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a><span class="sd">        State value to activate/deactivate disk resize. Returns a</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a><span class="sd">        boolean value if specified or True to set resize on by default</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a><span class="sd">        :return: Content of &lt;oem-resize&gt; section value</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_resize</span><span class="p">():</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_resize</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_systemsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a><span class="sd">        State value to retrieve root partition size</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a><span class="sd">        :return: Content of &lt;oem-systemsize&gt; section value</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a><span class="sd">        :rtype: int</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_systemsize</span><span class="p">():</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_systemsize</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_multipath_scan</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a><span class="sd">        State value to activate multipath maps. Returns a boolean</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a><span class="sd">        value if specified or False</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a><span class="sd">        :return: Content of &lt;oem-multipath-scan&gt; section value</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a><span class="sd">        :rtype: bool</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_multipath_scan</span><span class="p">():</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_multipath_scan</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_swap_mbytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a><span class="sd">        Return swapsize in MB if requested or None</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a><span class="sd">        Operates on the value of oem-swap and if set to true</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a><span class="sd">        returns the given size or the default value.</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a><span class="sd">        :return: Content of &lt;oem-swapsize&gt; section value or default</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a><span class="sd">        :rtype: int</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swap</span><span class="p">():</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>            <span class="n">swap_requested</span> <span class="o">=</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swap</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>            <span class="k">if</span> <span class="n">swap_requested</span><span class="p">:</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>                <span class="n">swapsize</span> <span class="o">=</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapsize</span><span class="p">()</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>                <span class="k">if</span> <span class="n">swapsize</span><span class="p">:</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>                    <span class="k">return</span> <span class="n">swapsize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>                    <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_swapsize_mbytes</span><span class="p">()</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_swap_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a><span class="sd">        Return the swap space name</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">        Operates on the value of oem-swapname and if set</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a><span class="sd">        returns the configured name or the default name: LVSwap</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a><span class="sd">        The name of the swap space is used only if the</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a><span class="sd">        image is configured to use the LVM volume manager.</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a><span class="sd">        In this case swap is a volume and the volume takes</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a><span class="sd">        a name. In any other case the given name will have</span>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a><span class="sd">        no effect.</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a><span class="sd">        :return: Content of &lt;oem-swapname&gt; section value or default</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapname</span><span class="p">():</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapname</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>        <span class="k">return</span> <span class="s1">&#39;LVSwap&#39;</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_containerconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a><span class="sd">        First containerconfig section from the build type section</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a><span class="sd">        :return: &lt;containerconfig&gt; section reference</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a><span class="sd">        :rtype: xml_parse::containerconfig</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>        <span class="n">container_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_containerconfig</span><span class="p">()</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>        <span class="k">if</span> <span class="n">container_config_sections</span><span class="p">:</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>            <span class="k">return</span> <span class="n">container_config_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_dracut_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DracutT</span><span class="p">:</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a><span class="sd">        Get dracut initrd config for the specified action</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>        <span class="n">uefi</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>        <span class="n">modules</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a>        <span class="n">drivers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a>                <span class="k">for</span> <span class="n">dracut</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>                    <span class="n">uefi</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_uefi</span><span class="p">())</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>                    <span class="k">if</span> <span class="n">dracut</span><span class="o">.</span><span class="n">get_module</span><span class="p">():</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>                        <span class="n">modules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_module</span><span class="p">())</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>                    <span class="k">if</span> <span class="n">dracut</span><span class="o">.</span><span class="n">get_driver</span><span class="p">():</span>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>                        <span class="n">drivers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_driver</span><span class="p">())</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>        <span class="k">return</span> <span class="n">DracutT</span><span class="p">(</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>            <span class="n">uefi</span><span class="o">=</span><span class="n">uefi</span><span class="p">,</span> <span class="n">modules</span><span class="o">=</span><span class="n">modules</span><span class="p">,</span> <span class="n">drivers</span><span class="o">=</span><span class="n">drivers</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>        <span class="p">)</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_installmedia_initrd_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a><span class="sd">        Gets the list of modules to append in installation initrds</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a><span class="sd">        :return: a list of dracut module names</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>        <span class="n">modules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a>        <span class="n">installmedia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_installmedia</span><span class="p">()</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">installmedia</span><span class="p">:</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a>            <span class="k">return</span> <span class="n">modules</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="n">installmedia</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>                <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>                    <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="n">get_module</span><span class="p">():</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>                        <span class="n">modules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">get_module</span><span class="p">())</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a>        <span class="k">return</span> <span class="n">modules</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_installmedia_initrd_drivers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a><span class="sd">        Gets the list of drivers to append in installation initrds</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a><span class="sd">        :return: a list of dracut driver names</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>        <span class="n">drivers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a>        <span class="n">installmedia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_installmedia</span><span class="p">()</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">installmedia</span><span class="p">:</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>            <span class="k">return</span> <span class="n">drivers</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="n">installmedia</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>                <span class="k">for</span> <span class="n">driver</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>                    <span class="k">if</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_driver</span><span class="p">():</span>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>                        <span class="n">drivers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">get_driver</span><span class="p">())</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>        <span class="k">return</span> <span class="n">drivers</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_size</span><span class="p">(</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">include_unpartitioned</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">size_type</span><span class="p">]:</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a><span class="sd">        Size information from the build type section.</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a><span class="sd">        If no unit is set the value is treated as mbytes</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a><span class="sd">        :param bool include_unpartitioned: sets if the unpartitioned area</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a><span class="sd">            should be included in the computed size or not</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a><span class="sd">        :return: mbytes</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a><span class="sd">        :rtype: int</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>        <span class="n">size_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>        <span class="k">if</span> <span class="n">size_section</span><span class="p">:</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unit</span><span class="p">()</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>            <span class="n">additive</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_additive</span><span class="p">()</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>            <span class="n">unpartitioned</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unpartitioned</span><span class="p">()</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_valueOf_</span><span class="p">())</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">include_unpartitioned</span> <span class="ow">and</span> <span class="n">unpartitioned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a>                <span class="n">value</span> <span class="o">-=</span> <span class="n">unpartitioned</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>            <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a>                <span class="n">value</span> <span class="o">*=</span> <span class="mi">1024</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a>            <span class="k">return</span> <span class="n">size_type</span><span class="p">(</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a>                <span class="n">mbytes</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">additive</span><span class="o">=</span><span class="n">additive</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a>            <span class="p">)</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_unpartitioned_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a><span class="sd">        Size of the unpartitioned area for image in megabytes</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a><span class="sd">        :return: mbytes</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a><span class="sd">        :rtype: int</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>        <span class="n">size_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>        <span class="k">if</span> <span class="n">size_section</span><span class="p">:</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unit</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;M&#39;</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>            <span class="n">unpartitioned</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unpartitioned</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>            <span class="k">return</span> <span class="n">StringToSize</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unpartitioned</span><span class="p">,</span> <span class="n">unit</span><span class="p">))</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>        <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_disk_start_sector</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a><span class="sd">        First disk sector number to be used by the first disk partition.</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a><span class="sd">        :return: number</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a><span class="sd">        :rtype: int</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>        <span class="n">disk_start_sector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_disk_start_sector</span><span class="p">()</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>        <span class="k">if</span> <span class="n">disk_start_sector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>            <span class="n">disk_start_sector</span> <span class="o">=</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_disk_start_sector</span><span class="p">()</span>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>        <span class="k">return</span> <span class="n">disk_start_sector</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_spare_part_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a><span class="sd">        Size information for the spare_part size from the build</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a><span class="sd">        type. If no unit is set the value is treated as mbytes</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a><span class="sd">        :return: mbytes</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a><span class="sd">        :rtype: int</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>        <span class="n">spare_part_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_spare_part</span><span class="p">()</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>        <span class="k">if</span> <span class="n">spare_part_size</span><span class="p">:</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">spare_part_size</span><span class="p">)</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_spare_part_fs_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a><span class="sd">        Build type specific list of filesystem attributes applied to</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a><span class="sd">        the spare partition.</span>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a><span class="sd">        :return: list of strings or empty list</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>        <span class="n">spare_part_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_spare_part_fs_attributes</span><span class="p">()</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a>        <span class="k">if</span> <span class="n">spare_part_attributes</span><span class="p">:</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a>            <span class="k">return</span> <span class="n">spare_part_attributes</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_format_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a><span class="sd">        Disk format options returned as a dictionary</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a><span class="sd">        :return: format options</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>        <span class="n">format_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_formatoptions</span><span class="p">()</span>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>        <span class="k">if</span> <span class="n">format_options</span><span class="p">:</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">format_options</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>                <span class="n">key_value_list</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_value_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">key_value_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">key_value_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">key_value_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volume_group_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a><span class="sd">        Volume group name from selected &lt;systemdisk&gt; section</span>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a><span class="sd">        :return: volume group name</span>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a>        <span class="n">volume_group_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a>        <span class="k">if</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a>            <span class="n">volume_group_name</span> <span class="o">=</span> <span class="n">systemdisk_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">volume_group_name</span><span class="p">:</span>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>            <span class="n">volume_group_name</span> <span class="o">=</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_volume_group_name</span><span class="p">()</span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>        <span class="k">return</span> <span class="n">volume_group_name</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a><span class="sd">        List of configured users.</span>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a><span class="sd">        Each entry in the list is a single xml_parse::user instance.</span>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a><span class="sd">        :return: list of &lt;user&gt; section reference(s)</span>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a>        <span class="n">users_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a>        <span class="n">users_names_added</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users_sections</span><span class="p">():</span>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a>            <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">():</span>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a>                <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">users_names_added</span><span class="p">:</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a>                    <span class="n">users_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a>                    <span class="n">users_names_added</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a>        <span class="k">return</span> <span class="n">users_list</span>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a><span class="sd">        List of group names matching specified user</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a><span class="sd">        Each entry in the list is the name of a group and optionally its</span>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a><span class="sd">        group ID separated by a colon, that the specified user belongs to.</span>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a><span class="sd">        The first item in the list is the login or primary group. The</span>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a><span class="sd">        list will be empty if no groups are specified in the</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a><span class="sd">        description file.</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a><span class="sd">        :return: groups data for the given user</span>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a>        <span class="n">groups_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users_sections</span><span class="p">():</span>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a>            <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">():</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a>                <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="n">user_name</span><span class="p">:</span>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a>                    <span class="n">user_groups</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a>                    <span class="k">if</span> <span class="n">user_groups</span><span class="p">:</span>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a>                        <span class="n">groups_list</span> <span class="o">+=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a>        <span class="c1"># order of list items matter, thus we don&#39;t use set() here</span>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a>        <span class="c1"># better faster, nicer solutions welcome :)</span>
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a>        <span class="n">result_group_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">groups_list</span><span class="p">:</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a>            <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result_group_list</span><span class="p">:</span>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a>                <span class="n">result_group_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a>        <span class="k">return</span> <span class="n">result_group_list</span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_container_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a><span class="sd">        Dictionary of containerconfig information</span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a><span class="sd">        Takes attributes and subsection data from the selected</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a><span class="sd">        &lt;containerconfig&gt; section and stores it in a dictionary</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a>        <span class="n">container_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_base_data</span><span class="p">()</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_entrypoint</span><span class="p">()</span>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a>        <span class="p">)</span>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_subcommand</span><span class="p">()</span>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a>        <span class="p">)</span>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_expose_ports</span><span class="p">()</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a>        <span class="p">)</span>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_volumes</span><span class="p">()</span>
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a>        <span class="p">)</span>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_stopsignal</span><span class="p">()</span>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a>        <span class="p">)</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_environment</span><span class="p">()</span>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a>        <span class="p">)</span>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_labels</span><span class="p">()</span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a>        <span class="p">)</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_history</span><span class="p">()</span>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a>        <span class="p">)</span>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a>        <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_description_section</span><span class="p">()</span>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a>        <span class="n">author_contact</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> &lt;</span><span class="si">{1}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">desc</span><span class="o">.</span><span class="n">author</span><span class="p">,</span> <span class="n">desc</span><span class="o">.</span><span class="n">contact</span><span class="p">)</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a>        <span class="k">if</span> <span class="s1">&#39;history&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">:</span>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a>        <span class="k">if</span> <span class="s1">&#39;author&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]:</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">author_contact</span>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a>        <span class="k">if</span> <span class="s1">&#39;maintainer&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">:</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;maintainer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">author_contact</span>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a>        <span class="k">return</span> <span class="n">container_config</span>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_container_config_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a><span class="sd">        Set new tag name in containerconfig section</span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a><span class="sd">        In order to set a new tag value an existing containerconfig and</span>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a><span class="sd">        tag setup is required</span>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a><span class="sd">        :param str tag: tag name</span>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a>        <span class="k">if</span> <span class="n">container_config_section</span> <span class="ow">and</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_tag</span><span class="p">():</span>
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>            <span class="n">container_config_section</span><span class="o">.</span><span class="n">set_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a><span class="s1">                No &lt;containerconfig&gt; section and/or tag attribute configured</span>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a><span class="s1">                In order to set the tag </span><span class="si">{0}</span><span class="s1"> as new container tag,</span>
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a><span class="s1">                an initial containerconfig section including a tag</span>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a><span class="s1">                setup is required</span>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_container_config_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a><span class="sd">        Adds a new label in the containerconfig section, if a label with the</span>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a><span class="sd">        same name is already defined in containerconfig it gets overwritten by</span>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a><span class="sd">        this method.</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a><span class="sd">        :param str label_name: the string representing the label name</span>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a><span class="sd">        :param str value: the value of the label</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;docker&#39;</span><span class="p">,</span> <span class="s1">&#39;oci&#39;</span><span class="p">]:</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a><span class="s1">                Labels can only be configured for container image types</span>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a><span class="s1">                docker and oci.</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a>            <span class="k">return</span>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a>            <span class="n">container_config_section</span> <span class="o">=</span> <span class="n">xml_parse</span><span class="o">.</span><span class="n">containerconfig</span><span class="p">(</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a>                <span class="n">name</span><span class="o">=</span><span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_container_name</span><span class="p">(),</span>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a>                <span class="n">tag</span><span class="o">=</span><span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_container_tag</span><span class="p">()</span>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a>            <span class="p">)</span>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_containerconfig</span><span class="p">([</span><span class="n">container_config_section</span><span class="p">])</span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a>        <span class="n">labels</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">labels</span><span class="p">:</span>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a>            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">labels</span><span class="p">()]</span>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>        <span class="n">label_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a>        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a>            <span class="n">label_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a>        <span class="k">if</span> <span class="n">label_name</span> <span class="ow">in</span> <span class="n">label_names</span><span class="p">:</span>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a>            <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace_label_at</span><span class="p">(</span>
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a>                <span class="n">label_names</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">label_name</span><span class="p">),</span>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a>            <span class="p">)</span>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a>            <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_label</span><span class="p">(</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a>        <span class="n">container_config_section</span><span class="o">.</span><span class="n">set_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ptable_entry_type</span><span class="p">]:</span>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a><span class="sd">        Dictionary of configured partitions.</span>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a><span class="sd">        Each entry in the dict references a ptable_entry_type</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a><span class="sd">        Each key in the dict references the name of the</span>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a><span class="sd">        partition entry as handled by KIWI</span>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a><span class="sd">        :return:</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a><span class="sd">            Contains dict of ptable_entry_type tuples</span>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a><span class="sd">            .. code:: python</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a><span class="sd">                {</span>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a><span class="sd">                    &#39;NAME&#39;: ptable_entry_type(</span>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a><span class="sd">                        mbsize=int,</span>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a><span class="sd">                        clone=int,</span>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a><span class="sd">                        partition_name=str,</span>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a><span class="sd">                        partition_type=str,</span>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a><span class="sd">                        partition_id=Optional[int],</span>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a><span class="sd">                        mountpoint=str,</span>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a><span class="sd">                        filesystem=str,</span>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a><span class="sd">                        label=str</span>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a><span class="sd">                    )</span>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a><span class="sd">                }</span>
</span><span id="L-1847"><a href="#L-1847"><span class="linenos">1847</span></a>
</span><span id="L-1848"><a href="#L-1848"><span class="linenos">1848</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-1849"><a href="#L-1849"><span class="linenos">1849</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1850"><a href="#L-1850"><span class="linenos">1850</span></a>        <span class="n">partitions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ptable_entry_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1851"><a href="#L-1851"><span class="linenos">1851</span></a>        <span class="n">partitions_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_partitions_section</span><span class="p">()</span>
</span><span id="L-1852"><a href="#L-1852"><span class="linenos">1852</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">partitions_section</span><span class="p">:</span>
</span><span id="L-1853"><a href="#L-1853"><span class="linenos">1853</span></a>            <span class="k">return</span> <span class="n">partitions</span>
</span><span id="L-1854"><a href="#L-1854"><span class="linenos">1854</span></a>        <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitions_section</span><span class="o">.</span><span class="n">get_partition</span><span class="p">():</span>
</span><span id="L-1855"><a href="#L-1855"><span class="linenos">1855</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-1856"><a href="#L-1856"><span class="linenos">1856</span></a>            <span class="n">partition_name</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_partition_name</span><span class="p">()</span> <span class="ow">or</span> <span class="sa">f</span><span class="s1">&#39;p.lx</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-1857"><a href="#L-1857"><span class="linenos">1857</span></a>            <span class="n">partitions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptable_entry_type</span><span class="p">(</span>
</span><span id="L-1858"><a href="#L-1858"><span class="linenos">1858</span></a>                <span class="n">mbsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">partition</span><span class="o">.</span><span class="n">get_size</span><span class="p">()),</span>
</span><span id="L-1859"><a href="#L-1859"><span class="linenos">1859</span></a>                <span class="n">clone</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">partition</span><span class="o">.</span><span class="n">get_clone</span><span class="p">())</span> <span class="k">if</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_clone</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-1860"><a href="#L-1860"><span class="linenos">1860</span></a>                <span class="n">partition_name</span><span class="o">=</span><span class="n">partition_name</span><span class="p">,</span>
</span><span id="L-1861"><a href="#L-1861"><span class="linenos">1861</span></a>                <span class="n">partition_type</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_partition_type</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;t.linux&#39;</span><span class="p">,</span>
</span><span id="L-1862"><a href="#L-1862"><span class="linenos">1862</span></a>                <span class="n">partition_id</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_part_id</span><span class="p">(),</span>
</span><span id="L-1863"><a href="#L-1863"><span class="linenos">1863</span></a>                <span class="n">mountpoint</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_mountpoint</span><span class="p">(),</span>
</span><span id="L-1864"><a href="#L-1864"><span class="linenos">1864</span></a>                <span class="n">filesystem</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">(),</span>
</span><span id="L-1865"><a href="#L-1865"><span class="linenos">1865</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-1866"><a href="#L-1866"><span class="linenos">1866</span></a>            <span class="p">)</span>
</span><span id="L-1867"><a href="#L-1867"><span class="linenos">1867</span></a>        <span class="k">return</span> <span class="n">partitions</span>
</span><span id="L-1868"><a href="#L-1868"><span class="linenos">1868</span></a>
</span><span id="L-1869"><a href="#L-1869"><span class="linenos">1869</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_host_key_certificates</span><span class="p">(</span>
</span><span id="L-1870"><a href="#L-1870"><span class="linenos">1870</span></a>        <span class="bp">self</span>
</span><span id="L-1871"><a href="#L-1871"><span class="linenos">1871</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]],</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]:</span>
</span><span id="L-1872"><a href="#L-1872"><span class="linenos">1872</span></a>        <span class="n">cc_result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1873"><a href="#L-1873"><span class="linenos">1873</span></a>        <span class="n">cc_certificates</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1874"><a href="#L-1874"><span class="linenos">1874</span></a>        <span class="n">securelinux_list</span> <span class="o">=</span> \
</span><span id="L-1875"><a href="#L-1875"><span class="linenos">1875</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_securelinux_section</span><span class="p">()</span>
</span><span id="L-1876"><a href="#L-1876"><span class="linenos">1876</span></a>        <span class="k">for</span> <span class="n">securelinux</span> <span class="ow">in</span> <span class="n">securelinux_list</span><span class="p">:</span>
</span><span id="L-1877"><a href="#L-1877"><span class="linenos">1877</span></a>            <span class="n">cc_certificates</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1878"><a href="#L-1878"><span class="linenos">1878</span></a>                <span class="s1">&#39;hkd_cert&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="L-1879"><a href="#L-1879"><span class="linenos">1879</span></a>                <span class="s1">&#39;hkd_revocation_list&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="L-1880"><a href="#L-1880"><span class="linenos">1880</span></a>                <span class="s1">&#39;hkd_ca_cert&#39;</span><span class="p">:</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_ca_cert</span><span class="p">(),</span>
</span><span id="L-1881"><a href="#L-1881"><span class="linenos">1881</span></a>                <span class="s1">&#39;hkd_sign_cert&#39;</span><span class="p">:</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_sign_cert</span><span class="p">()</span>
</span><span id="L-1882"><a href="#L-1882"><span class="linenos">1882</span></a>            <span class="p">}</span>
</span><span id="L-1883"><a href="#L-1883"><span class="linenos">1883</span></a>            <span class="k">for</span> <span class="n">hkd_cert</span> <span class="ow">in</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_cert</span><span class="p">():</span>
</span><span id="L-1884"><a href="#L-1884"><span class="linenos">1884</span></a>                <span class="n">cc_certificates</span><span class="p">[</span><span class="s1">&#39;hkd_cert&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hkd_cert</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-1885"><a href="#L-1885"><span class="linenos">1885</span></a>            <span class="k">for</span> <span class="n">hkd_revocation_list</span> <span class="ow">in</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_revocation_list</span><span class="p">():</span>
</span><span id="L-1886"><a href="#L-1886"><span class="linenos">1886</span></a>                <span class="n">cc_certificates</span><span class="p">[</span><span class="s1">&#39;hkd_revocation_list&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-1887"><a href="#L-1887"><span class="linenos">1887</span></a>                    <span class="n">hkd_revocation_list</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-1888"><a href="#L-1888"><span class="linenos">1888</span></a>                <span class="p">)</span>
</span><span id="L-1889"><a href="#L-1889"><span class="linenos">1889</span></a>            <span class="n">cc_result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cc_certificates</span><span class="p">)</span>
</span><span id="L-1890"><a href="#L-1890"><span class="linenos">1890</span></a>        <span class="k">return</span> <span class="n">cc_result</span>
</span><span id="L-1891"><a href="#L-1891"><span class="linenos">1891</span></a>
</span><span id="L-1892"><a href="#L-1892"><span class="linenos">1892</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_containers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ContainerT</span><span class="p">]:</span>
</span><span id="L-1893"><a href="#L-1893"><span class="linenos">1893</span></a>        <span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1894"><a href="#L-1894"><span class="linenos">1894</span></a>
</span><span id="L-1895"><a href="#L-1895"><span class="linenos">1895</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="L-1896"><a href="#L-1896"><span class="linenos">1896</span></a>            <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-1897"><a href="#L-1897"><span class="linenos">1897</span></a>            <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-1898"><a href="#L-1898"><span class="linenos">1898</span></a>            <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-1899"><a href="#L-1899"><span class="linenos">1899</span></a>            <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-1900"><a href="#L-1900"><span class="linenos">1900</span></a>        <span class="p">):</span>
</span><span id="L-1901"><a href="#L-1901"><span class="linenos">1901</span></a>            <span class="k">pass</span>  <span class="c1"># pragma: nocover</span>
</span><span id="L-1902"><a href="#L-1902"><span class="linenos">1902</span></a>        <span class="k">for</span> <span class="n">containers_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_containers_sections</span><span class="p">():</span>
</span><span id="L-1903"><a href="#L-1903"><span class="linenos">1903</span></a>            <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">containers_section</span><span class="o">.</span><span class="n">get_container</span><span class="p">():</span>
</span><span id="L-1904"><a href="#L-1904"><span class="linenos">1904</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container_matches_host_architecture</span><span class="p">(</span><span class="n">container</span><span class="p">):</span>
</span><span id="L-1905"><a href="#L-1905"><span class="linenos">1905</span></a>                    <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="L-1906"><a href="#L-1906"><span class="linenos">1906</span></a>                    <span class="n">load_command</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1907"><a href="#L-1907"><span class="linenos">1907</span></a>                    <span class="n">container_tag</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_tag</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;latest&#39;</span>
</span><span id="L-1908"><a href="#L-1908"><span class="linenos">1908</span></a>                    <span class="n">container_path</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-1909"><a href="#L-1909"><span class="linenos">1909</span></a>                    <span class="n">container_endpoint</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span>
</span><span id="L-1910"><a href="#L-1910"><span class="linenos">1910</span></a>                        <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">/</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1911"><a href="#L-1911"><span class="linenos">1911</span></a>                            <span class="n">containers_section</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="n">container_path</span><span class="p">,</span>
</span><span id="L-1912"><a href="#L-1912"><span class="linenos">1912</span></a>                            <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">container_tag</span>
</span><span id="L-1913"><a href="#L-1913"><span class="linenos">1913</span></a>                        <span class="p">)</span>
</span><span id="L-1914"><a href="#L-1914"><span class="linenos">1914</span></a>                    <span class="p">)</span>
</span><span id="L-1915"><a href="#L-1915"><span class="linenos">1915</span></a>                    <span class="n">container_file_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">_</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1916"><a href="#L-1916"><span class="linenos">1916</span></a>                        <span class="n">defaults</span><span class="o">.</span><span class="n">LOCAL_CONTAINERS</span><span class="p">,</span> <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">container_tag</span>
</span><span id="L-1917"><a href="#L-1917"><span class="linenos">1917</span></a>                    <span class="p">)</span>
</span><span id="L-1918"><a href="#L-1918"><span class="linenos">1918</span></a>                    <span class="n">container_backend</span> <span class="o">=</span> <span class="n">containers_section</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-1919"><a href="#L-1919"><span class="linenos">1919</span></a>                    <span class="k">if</span> <span class="n">container_backend</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;podman&#39;</span><span class="p">,</span> <span class="s1">&#39;docker&#39;</span><span class="p">,</span> <span class="s1">&#39;container-snap&#39;</span><span class="p">]:</span>
</span><span id="L-1920"><a href="#L-1920"><span class="linenos">1920</span></a>                        <span class="k">if</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">is_buildservice_worker</span><span class="p">():</span>
</span><span id="L-1921"><a href="#L-1921"><span class="linenos">1921</span></a>                            <span class="n">container_uri</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span>
</span><span id="L-1922"><a href="#L-1922"><span class="linenos">1922</span></a>                                <span class="s1">&#39;obsrepositories:/</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1923"><a href="#L-1923"><span class="linenos">1923</span></a>                                    <span class="n">container_endpoint</span>
</span><span id="L-1924"><a href="#L-1924"><span class="linenos">1924</span></a>                                <span class="p">),</span> <span class="s1">&#39;container&#39;</span>
</span><span id="L-1925"><a href="#L-1925"><span class="linenos">1925</span></a>                            <span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="L-1926"><a href="#L-1926"><span class="linenos">1926</span></a>
</span><span id="L-1927"><a href="#L-1927"><span class="linenos">1927</span></a>                            <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="L-1928"><a href="#L-1928"><span class="linenos">1928</span></a>                                <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-1929"><a href="#L-1929"><span class="linenos">1929</span></a>                                <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_uri</span><span class="p">,</span>
</span><span id="L-1930"><a href="#L-1930"><span class="linenos">1930</span></a>                                <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="L-1931"><a href="#L-1931"><span class="linenos">1931</span></a>                                <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_endpoint</span>
</span><span id="L-1932"><a href="#L-1932"><span class="linenos">1932</span></a>                            <span class="p">):</span>
</span><span id="L-1933"><a href="#L-1933"><span class="linenos">1933</span></a>                                <span class="k">def</span><span class="w"> </span><span class="nf">perform</span><span class="p">():</span>
</span><span id="L-1934"><a href="#L-1934"><span class="linenos">1934</span></a>                                    <span class="n">Command</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="L-1935"><a href="#L-1935"><span class="linenos">1935</span></a>                                        <span class="p">[</span>
</span><span id="L-1936"><a href="#L-1936"><span class="linenos">1936</span></a>                                            <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.ociarchive&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1937"><a href="#L-1937"><span class="linenos">1937</span></a>                                                <span class="n">container_uri</span>
</span><span id="L-1938"><a href="#L-1938"><span class="linenos">1938</span></a>                                            <span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span>
</span><span id="L-1939"><a href="#L-1939"><span class="linenos">1939</span></a>                                                <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1940"><a href="#L-1940"><span class="linenos">1940</span></a>                                                    <span class="n">root_dir</span><span class="p">,</span>
</span><span id="L-1941"><a href="#L-1941"><span class="linenos">1941</span></a>                                                    <span class="n">container_file_name</span>
</span><span id="L-1942"><a href="#L-1942"><span class="linenos">1942</span></a>                                                <span class="p">)</span>
</span><span id="L-1943"><a href="#L-1943"><span class="linenos">1943</span></a>                                            <span class="p">)</span>
</span><span id="L-1944"><a href="#L-1944"><span class="linenos">1944</span></a>                                        <span class="p">]</span>
</span><span id="L-1945"><a href="#L-1945"><span class="linenos">1945</span></a>                                    <span class="p">)</span>
</span><span id="L-1946"><a href="#L-1946"><span class="linenos">1946</span></a>                                <span class="n">perform</span><span class="p">()</span>
</span><span id="L-1947"><a href="#L-1947"><span class="linenos">1947</span></a>                            <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="L-1948"><a href="#L-1948"><span class="linenos">1948</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1949"><a href="#L-1949"><span class="linenos">1949</span></a>
</span><span id="L-1950"><a href="#L-1950"><span class="linenos">1950</span></a>                            <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="L-1951"><a href="#L-1951"><span class="linenos">1951</span></a>                                <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-1952"><a href="#L-1952"><span class="linenos">1952</span></a>                                <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-1953"><a href="#L-1953"><span class="linenos">1953</span></a>                                <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="L-1954"><a href="#L-1954"><span class="linenos">1954</span></a>                                <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_endpoint</span>
</span><span id="L-1955"><a href="#L-1955"><span class="linenos">1955</span></a>                            <span class="p">):</span>
</span><span id="L-1956"><a href="#L-1956"><span class="linenos">1956</span></a>                                <span class="k">def</span><span class="w"> </span><span class="nf">perform</span><span class="p">():</span>
</span><span id="L-1957"><a href="#L-1957"><span class="linenos">1957</span></a>                                    <span class="n">Command</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="L-1958"><a href="#L-1958"><span class="linenos">1958</span></a>                                        <span class="p">[</span>
</span><span id="L-1959"><a href="#L-1959"><span class="linenos">1959</span></a>                                            <span class="s1">&#39;chroot&#39;</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">,</span>
</span><span id="L-1960"><a href="#L-1960"><span class="linenos">1960</span></a>                                            <span class="s1">&#39;/usr/bin/skopeo&#39;</span><span class="p">,</span> <span class="s1">&#39;copy&#39;</span><span class="p">,</span>
</span><span id="L-1961"><a href="#L-1961"><span class="linenos">1961</span></a>                                            <span class="s1">&#39;docker://</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1962"><a href="#L-1962"><span class="linenos">1962</span></a>                                                <span class="n">container_endpoint</span>
</span><span id="L-1963"><a href="#L-1963"><span class="linenos">1963</span></a>                                            <span class="p">),</span>
</span><span id="L-1964"><a href="#L-1964"><span class="linenos">1964</span></a>                                            <span class="s1">&#39;oci-archive:</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1965"><a href="#L-1965"><span class="linenos">1965</span></a>                                                <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="L-1966"><a href="#L-1966"><span class="linenos">1966</span></a>                                                <span class="n">container_endpoint</span>
</span><span id="L-1967"><a href="#L-1967"><span class="linenos">1967</span></a>                                            <span class="p">)</span>
</span><span id="L-1968"><a href="#L-1968"><span class="linenos">1968</span></a>                                        <span class="p">]</span>
</span><span id="L-1969"><a href="#L-1969"><span class="linenos">1969</span></a>                                    <span class="p">)</span>
</span><span id="L-1970"><a href="#L-1970"><span class="linenos">1970</span></a>                                <span class="n">perform</span><span class="p">()</span>
</span><span id="L-1971"><a href="#L-1971"><span class="linenos">1971</span></a>                            <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="L-1972"><a href="#L-1972"><span class="linenos">1972</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">container</span><span class="o">.</span><span class="n">get_fetch_only</span><span class="p">():</span>
</span><span id="L-1973"><a href="#L-1973"><span class="linenos">1973</span></a>                            <span class="n">load_command</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-1974"><a href="#L-1974"><span class="linenos">1974</span></a>                                <span class="sa">f</span><span class="s1">&#39;/usr/bin/</span><span class="si">{</span><span class="n">container_backend</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="L-1975"><a href="#L-1975"><span class="linenos">1975</span></a>                                <span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="n">container_file_name</span>
</span><span id="L-1976"><a href="#L-1976"><span class="linenos">1976</span></a>                            <span class="p">]</span>
</span><span id="L-1977"><a href="#L-1977"><span class="linenos">1977</span></a>                    <span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-1978"><a href="#L-1978"><span class="linenos">1978</span></a>                        <span class="n">ContainerT</span><span class="p">(</span>
</span><span id="L-1979"><a href="#L-1979"><span class="linenos">1979</span></a>                            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">container_tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="L-1980"><a href="#L-1980"><span class="linenos">1980</span></a>                            <span class="n">backend</span><span class="o">=</span><span class="n">container_backend</span><span class="p">,</span>
</span><span id="L-1981"><a href="#L-1981"><span class="linenos">1981</span></a>                            <span class="n">container_file</span><span class="o">=</span><span class="n">container_file_name</span><span class="p">,</span>
</span><span id="L-1982"><a href="#L-1982"><span class="linenos">1982</span></a>                            <span class="n">fetch_only</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">get_fetch_only</span><span class="p">()),</span>
</span><span id="L-1983"><a href="#L-1983"><span class="linenos">1983</span></a>                            <span class="n">fetch_command</span><span class="o">=</span><span class="n">fetch_command</span><span class="p">,</span>
</span><span id="L-1984"><a href="#L-1984"><span class="linenos">1984</span></a>                            <span class="n">load_command</span><span class="o">=</span><span class="n">load_command</span>
</span><span id="L-1985"><a href="#L-1985"><span class="linenos">1985</span></a>                        <span class="p">)</span>
</span><span id="L-1986"><a href="#L-1986"><span class="linenos">1986</span></a>                    <span class="p">)</span>
</span><span id="L-1987"><a href="#L-1987"><span class="linenos">1987</span></a>        <span class="k">return</span> <span class="n">containers</span>
</span><span id="L-1988"><a href="#L-1988"><span class="linenos">1988</span></a>
</span><span id="L-1989"><a href="#L-1989"><span class="linenos">1989</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">volume_type</span><span class="p">]:</span>
</span><span id="L-1990"><a href="#L-1990"><span class="linenos">1990</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1991"><a href="#L-1991"><span class="linenos">1991</span></a><span class="sd">        List of configured systemdisk volumes.</span>
</span><span id="L-1992"><a href="#L-1992"><span class="linenos">1992</span></a>
</span><span id="L-1993"><a href="#L-1993"><span class="linenos">1993</span></a><span class="sd">        Each entry in the list is a tuple with the following information</span>
</span><span id="L-1994"><a href="#L-1994"><span class="linenos">1994</span></a>
</span><span id="L-1995"><a href="#L-1995"><span class="linenos">1995</span></a><span class="sd">        * name: name of the volume</span>
</span><span id="L-1996"><a href="#L-1996"><span class="linenos">1996</span></a><span class="sd">        * size: size of the volume</span>
</span><span id="L-1997"><a href="#L-1997"><span class="linenos">1997</span></a><span class="sd">        * realpath: system path to lookup volume data. If no mountpoint</span>
</span><span id="L-1998"><a href="#L-1998"><span class="linenos">1998</span></a><span class="sd">          is set the volume name is used as data path.</span>
</span><span id="L-1999"><a href="#L-1999"><span class="linenos">1999</span></a><span class="sd">        * mountpoint: volume mount point and volume data path</span>
</span><span id="L-2000"><a href="#L-2000"><span class="linenos">2000</span></a><span class="sd">        * fullsize: takes all space True|False</span>
</span><span id="L-2001"><a href="#L-2001"><span class="linenos">2001</span></a><span class="sd">        * attributes: list of volume attributes handled via chattr</span>
</span><span id="L-2002"><a href="#L-2002"><span class="linenos">2002</span></a>
</span><span id="L-2003"><a href="#L-2003"><span class="linenos">2003</span></a><span class="sd">        :return:</span>
</span><span id="L-2004"><a href="#L-2004"><span class="linenos">2004</span></a><span class="sd">            Contains list of volume_type tuples</span>
</span><span id="L-2005"><a href="#L-2005"><span class="linenos">2005</span></a>
</span><span id="L-2006"><a href="#L-2006"><span class="linenos">2006</span></a><span class="sd">            .. code:: python</span>
</span><span id="L-2007"><a href="#L-2007"><span class="linenos">2007</span></a>
</span><span id="L-2008"><a href="#L-2008"><span class="linenos">2008</span></a><span class="sd">                [</span>
</span><span id="L-2009"><a href="#L-2009"><span class="linenos">2009</span></a><span class="sd">                    volume_type(</span>
</span><span id="L-2010"><a href="#L-2010"><span class="linenos">2010</span></a><span class="sd">                        name=volume_name,</span>
</span><span id="L-2011"><a href="#L-2011"><span class="linenos">2011</span></a><span class="sd">                        parent=volume_parent,</span>
</span><span id="L-2012"><a href="#L-2012"><span class="linenos">2012</span></a><span class="sd">                        size=volume_size,</span>
</span><span id="L-2013"><a href="#L-2013"><span class="linenos">2013</span></a><span class="sd">                        realpath=path,</span>
</span><span id="L-2014"><a href="#L-2014"><span class="linenos">2014</span></a><span class="sd">                        mountpoint=path,</span>
</span><span id="L-2015"><a href="#L-2015"><span class="linenos">2015</span></a><span class="sd">                        fullsize=True,</span>
</span><span id="L-2016"><a href="#L-2016"><span class="linenos">2016</span></a><span class="sd">                        label=volume_label,</span>
</span><span id="L-2017"><a href="#L-2017"><span class="linenos">2017</span></a><span class="sd">                        attributes=[&#39;no-copy-on-write&#39;],</span>
</span><span id="L-2018"><a href="#L-2018"><span class="linenos">2018</span></a><span class="sd">                        is_root_volume=True|False</span>
</span><span id="L-2019"><a href="#L-2019"><span class="linenos">2019</span></a><span class="sd">                    )</span>
</span><span id="L-2020"><a href="#L-2020"><span class="linenos">2020</span></a><span class="sd">                ]</span>
</span><span id="L-2021"><a href="#L-2021"><span class="linenos">2021</span></a>
</span><span id="L-2022"><a href="#L-2022"><span class="linenos">2022</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2023"><a href="#L-2023"><span class="linenos">2023</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2024"><a href="#L-2024"><span class="linenos">2024</span></a>        <span class="n">volume_type_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">volume_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2025"><a href="#L-2025"><span class="linenos">2025</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="L-2026"><a href="#L-2026"><span class="linenos">2026</span></a>        <span class="n">selected_filesystem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">()</span>
</span><span id="L-2027"><a href="#L-2027"><span class="linenos">2027</span></a>        <span class="n">swap_mbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oemconfig_swap_mbytes</span><span class="p">()</span>
</span><span id="L-2028"><a href="#L-2028"><span class="linenos">2028</span></a>        <span class="n">swap_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oemconfig_swap_name</span><span class="p">()</span>
</span><span id="L-2029"><a href="#L-2029"><span class="linenos">2029</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="L-2030"><a href="#L-2030"><span class="linenos">2030</span></a>            <span class="k">return</span> <span class="n">volume_type_list</span>
</span><span id="L-2031"><a href="#L-2031"><span class="linenos">2031</span></a>        <span class="n">volumes</span> <span class="o">=</span> <span class="n">systemdisk_section</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>
</span><span id="L-2032"><a href="#L-2032"><span class="linenos">2032</span></a>        <span class="n">have_root_volume_setup</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2033"><a href="#L-2033"><span class="linenos">2033</span></a>        <span class="n">have_full_size_volume</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2034"><a href="#L-2034"><span class="linenos">2034</span></a>        <span class="k">if</span> <span class="n">volumes</span><span class="p">:</span>
</span><span id="L-2035"><a href="#L-2035"><span class="linenos">2035</span></a>            <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">volumes</span><span class="p">:</span>
</span><span id="L-2036"><a href="#L-2036"><span class="linenos">2036</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_matches_host_architecture</span><span class="p">(</span><span class="n">volume</span><span class="p">):</span>
</span><span id="L-2037"><a href="#L-2037"><span class="linenos">2037</span></a>                    <span class="k">continue</span>
</span><span id="L-2038"><a href="#L-2038"><span class="linenos">2038</span></a>                <span class="c1"># volume setup for a full qualified volume with name and</span>
</span><span id="L-2039"><a href="#L-2039"><span class="linenos">2039</span></a>                <span class="c1"># mountpoint information. See below for exceptions</span>
</span><span id="L-2040"><a href="#L-2040"><span class="linenos">2040</span></a>                <span class="n">name</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-2041"><a href="#L-2041"><span class="linenos">2041</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-2042"><a href="#L-2042"><span class="linenos">2042</span></a>                <span class="n">mountpoint</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_mountpoint</span><span class="p">()</span>
</span><span id="L-2043"><a href="#L-2043"><span class="linenos">2043</span></a>                <span class="n">realpath</span> <span class="o">=</span> <span class="n">mountpoint</span>
</span><span id="L-2044"><a href="#L-2044"><span class="linenos">2044</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="L-2045"><a href="#L-2045"><span class="linenos">2045</span></a>                <span class="n">freespace</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_freespace</span><span class="p">()</span>
</span><span id="L-2046"><a href="#L-2046"><span class="linenos">2046</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2047"><a href="#L-2047"><span class="linenos">2047</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="L-2048"><a href="#L-2048"><span class="linenos">2048</span></a>                <span class="n">attributes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2049"><a href="#L-2049"><span class="linenos">2049</span></a>                <span class="n">is_root_volume</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2050"><a href="#L-2050"><span class="linenos">2050</span></a>
</span><span id="L-2051"><a href="#L-2051"><span class="linenos">2051</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_quota</span><span class="p">():</span>
</span><span id="L-2052"><a href="#L-2052"><span class="linenos">2052</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;quota=</span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get_quota</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-2053"><a href="#L-2053"><span class="linenos">2053</span></a>
</span><span id="L-2054"><a href="#L-2054"><span class="linenos">2054</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_copy_on_write</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-2055"><a href="#L-2055"><span class="linenos">2055</span></a>                    <span class="c1"># by default copy-on-write is switched on for any</span>
</span><span id="L-2056"><a href="#L-2056"><span class="linenos">2056</span></a>                    <span class="c1"># filesystem. Thus only if no copy on write is requested</span>
</span><span id="L-2057"><a href="#L-2057"><span class="linenos">2057</span></a>                    <span class="c1"># the attribute is handled</span>
</span><span id="L-2058"><a href="#L-2058"><span class="linenos">2058</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;no-copy-on-write&#39;</span><span class="p">)</span>
</span><span id="L-2059"><a href="#L-2059"><span class="linenos">2059</span></a>
</span><span id="L-2060"><a href="#L-2060"><span class="linenos">2060</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_filesystem_check</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2061"><a href="#L-2061"><span class="linenos">2061</span></a>                    <span class="c1"># by default filesystem check is switched off for any</span>
</span><span id="L-2062"><a href="#L-2062"><span class="linenos">2062</span></a>                    <span class="c1"># filesystem except the rootfs. Thus only if filesystem</span>
</span><span id="L-2063"><a href="#L-2063"><span class="linenos">2063</span></a>                    <span class="c1"># check is requested the attribute is handled</span>
</span><span id="L-2064"><a href="#L-2064"><span class="linenos">2064</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;enable-for-filesystem-check&#39;</span><span class="p">)</span>
</span><span id="L-2065"><a href="#L-2065"><span class="linenos">2065</span></a>
</span><span id="L-2066"><a href="#L-2066"><span class="linenos">2066</span></a>                <span class="k">if</span> <span class="s1">&#39;@root&#39;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
</span><span id="L-2067"><a href="#L-2067"><span class="linenos">2067</span></a>                    <span class="c1"># setup root volume, it takes an optional volume</span>
</span><span id="L-2068"><a href="#L-2068"><span class="linenos">2068</span></a>                    <span class="c1"># name if specified as @root=name and has no specific</span>
</span><span id="L-2069"><a href="#L-2069"><span class="linenos">2069</span></a>                    <span class="c1"># mountpoint. The default name is set to</span>
</span><span id="L-2070"><a href="#L-2070"><span class="linenos">2070</span></a>                    <span class="c1"># defaults.ROOT_VOLUME_NAME if no other root volume</span>
</span><span id="L-2071"><a href="#L-2071"><span class="linenos">2071</span></a>                    <span class="c1"># name is provided</span>
</span><span id="L-2072"><a href="#L-2072"><span class="linenos">2072</span></a>                    <span class="n">mountpoint</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2073"><a href="#L-2073"><span class="linenos">2073</span></a>                    <span class="n">realpath</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>
</span><span id="L-2074"><a href="#L-2074"><span class="linenos">2074</span></a>                    <span class="n">is_root_volume</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2075"><a href="#L-2075"><span class="linenos">2075</span></a>                    <span class="n">root_volume_expression</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="L-2076"><a href="#L-2076"><span class="linenos">2076</span></a>                        <span class="sa">r</span><span class="s1">&#39;@root=(.+)&#39;</span><span class="p">,</span> <span class="n">name</span>
</span><span id="L-2077"><a href="#L-2077"><span class="linenos">2077</span></a>                    <span class="p">)</span>
</span><span id="L-2078"><a href="#L-2078"><span class="linenos">2078</span></a>                    <span class="k">if</span> <span class="n">root_volume_expression</span><span class="p">:</span>
</span><span id="L-2079"><a href="#L-2079"><span class="linenos">2079</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="n">root_volume_expression</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2080"><a href="#L-2080"><span class="linenos">2080</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2081"><a href="#L-2081"><span class="linenos">2081</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">ROOT_VOLUME_NAME</span>
</span><span id="L-2082"><a href="#L-2082"><span class="linenos">2082</span></a>                    <span class="n">have_root_volume_setup</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2083"><a href="#L-2083"><span class="linenos">2083</span></a>                <span class="k">elif</span> <span class="ow">not</span> <span class="n">mountpoint</span><span class="p">:</span>
</span><span id="L-2084"><a href="#L-2084"><span class="linenos">2084</span></a>                    <span class="c1"># setup volume without mountpoint. In this case the name</span>
</span><span id="L-2085"><a href="#L-2085"><span class="linenos">2085</span></a>                    <span class="c1"># attribute is used as mountpoint path and a name for the</span>
</span><span id="L-2086"><a href="#L-2086"><span class="linenos">2086</span></a>                    <span class="c1"># volume is created from that path information</span>
</span><span id="L-2087"><a href="#L-2087"><span class="linenos">2087</span></a>                    <span class="n">mountpoint</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-2088"><a href="#L-2088"><span class="linenos">2088</span></a>                    <span class="n">realpath</span> <span class="o">=</span> <span class="n">mountpoint</span>
</span><span id="L-2089"><a href="#L-2089"><span class="linenos">2089</span></a>                    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_volume_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-2090"><a href="#L-2090"><span class="linenos">2090</span></a>
</span><span id="L-2091"><a href="#L-2091"><span class="linenos">2091</span></a>                <span class="k">if</span> <span class="n">size</span><span class="p">:</span>
</span><span id="L-2092"><a href="#L-2092"><span class="linenos">2092</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;size:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="L-2093"><a href="#L-2093"><span class="linenos">2093</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-2094"><a href="#L-2094"><span class="linenos">2094</span></a>                    <span class="p">)</span>
</span><span id="L-2095"><a href="#L-2095"><span class="linenos">2095</span></a>                <span class="k">elif</span> <span class="n">freespace</span><span class="p">:</span>
</span><span id="L-2096"><a href="#L-2096"><span class="linenos">2096</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="L-2097"><a href="#L-2097"><span class="linenos">2097</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">freespace</span><span class="p">)</span>
</span><span id="L-2098"><a href="#L-2098"><span class="linenos">2098</span></a>                    <span class="p">)</span>
</span><span id="L-2099"><a href="#L-2099"><span class="linenos">2099</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2100"><a href="#L-2100"><span class="linenos">2100</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="L-2101"><a href="#L-2101"><span class="linenos">2101</span></a>                        <span class="n">Defaults</span><span class="o">.</span><span class="n">get_min_volume_mbytes</span><span class="p">(</span><span class="n">selected_filesystem</span><span class="p">)</span>
</span><span id="L-2102"><a href="#L-2102"><span class="linenos">2102</span></a>                    <span class="p">)</span>
</span><span id="L-2103"><a href="#L-2103"><span class="linenos">2103</span></a>
</span><span id="L-2104"><a href="#L-2104"><span class="linenos">2104</span></a>                <span class="k">if</span> <span class="s1">&#39;:all&#39;</span> <span class="ow">in</span> <span class="n">size</span><span class="p">:</span>
</span><span id="L-2105"><a href="#L-2105"><span class="linenos">2105</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2106"><a href="#L-2106"><span class="linenos">2106</span></a>                    <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2107"><a href="#L-2107"><span class="linenos">2107</span></a>                    <span class="n">have_full_size_volume</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2108"><a href="#L-2108"><span class="linenos">2108</span></a>
</span><span id="L-2109"><a href="#L-2109"><span class="linenos">2109</span></a>                <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-2110"><a href="#L-2110"><span class="linenos">2110</span></a>                    <span class="n">volume_type</span><span class="p">(</span>
</span><span id="L-2111"><a href="#L-2111"><span class="linenos">2111</span></a>                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-2112"><a href="#L-2112"><span class="linenos">2112</span></a>                        <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
</span><span id="L-2113"><a href="#L-2113"><span class="linenos">2113</span></a>                        <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="L-2114"><a href="#L-2114"><span class="linenos">2114</span></a>                        <span class="n">fullsize</span><span class="o">=</span><span class="n">fullsize</span><span class="p">,</span>
</span><span id="L-2115"><a href="#L-2115"><span class="linenos">2115</span></a>                        <span class="n">mountpoint</span><span class="o">=</span><span class="n">mountpoint</span><span class="p">,</span>
</span><span id="L-2116"><a href="#L-2116"><span class="linenos">2116</span></a>                        <span class="n">realpath</span><span class="o">=</span><span class="n">realpath</span><span class="p">,</span>
</span><span id="L-2117"><a href="#L-2117"><span class="linenos">2117</span></a>                        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
</span><span id="L-2118"><a href="#L-2118"><span class="linenos">2118</span></a>                        <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
</span><span id="L-2119"><a href="#L-2119"><span class="linenos">2119</span></a>                        <span class="n">is_root_volume</span><span class="o">=</span><span class="n">is_root_volume</span>
</span><span id="L-2120"><a href="#L-2120"><span class="linenos">2120</span></a>                    <span class="p">)</span>
</span><span id="L-2121"><a href="#L-2121"><span class="linenos">2121</span></a>                <span class="p">)</span>
</span><span id="L-2122"><a href="#L-2122"><span class="linenos">2122</span></a>
</span><span id="L-2123"><a href="#L-2123"><span class="linenos">2123</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">have_root_volume_setup</span><span class="p">:</span>
</span><span id="L-2124"><a href="#L-2124"><span class="linenos">2124</span></a>            <span class="c1"># There must always be a root volume setup. It will be the</span>
</span><span id="L-2125"><a href="#L-2125"><span class="linenos">2125</span></a>            <span class="c1"># full size volume if no other volume has this setup</span>
</span><span id="L-2126"><a href="#L-2126"><span class="linenos">2126</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_management</span><span class="p">()</span>
</span><span id="L-2127"><a href="#L-2127"><span class="linenos">2127</span></a>            <span class="n">root_volume_name</span> <span class="o">=</span> \
</span><span id="L-2128"><a href="#L-2128"><span class="linenos">2128</span></a>                <span class="n">defaults</span><span class="o">.</span><span class="n">ROOT_VOLUME_NAME</span> <span class="k">if</span> <span class="n">volume_management</span> <span class="o">==</span> <span class="s1">&#39;lvm&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-2129"><a href="#L-2129"><span class="linenos">2129</span></a>            <span class="k">if</span> <span class="n">have_full_size_volume</span><span class="p">:</span>
</span><span id="L-2130"><a href="#L-2130"><span class="linenos">2130</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="L-2131"><a href="#L-2131"><span class="linenos">2131</span></a>                    <span class="n">Defaults</span><span class="o">.</span><span class="n">get_min_volume_mbytes</span><span class="p">(</span><span class="n">selected_filesystem</span><span class="p">)</span>
</span><span id="L-2132"><a href="#L-2132"><span class="linenos">2132</span></a>                <span class="p">)</span>
</span><span id="L-2133"><a href="#L-2133"><span class="linenos">2133</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2134"><a href="#L-2134"><span class="linenos">2134</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2135"><a href="#L-2135"><span class="linenos">2135</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2136"><a href="#L-2136"><span class="linenos">2136</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2137"><a href="#L-2137"><span class="linenos">2137</span></a>            <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-2138"><a href="#L-2138"><span class="linenos">2138</span></a>                <span class="n">volume_type</span><span class="p">(</span>
</span><span id="L-2139"><a href="#L-2139"><span class="linenos">2139</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">root_volume_name</span><span class="p">,</span>
</span><span id="L-2140"><a href="#L-2140"><span class="linenos">2140</span></a>                    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-2141"><a href="#L-2141"><span class="linenos">2141</span></a>                    <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="L-2142"><a href="#L-2142"><span class="linenos">2142</span></a>                    <span class="n">fullsize</span><span class="o">=</span><span class="n">fullsize</span><span class="p">,</span>
</span><span id="L-2143"><a href="#L-2143"><span class="linenos">2143</span></a>                    <span class="n">mountpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-2144"><a href="#L-2144"><span class="linenos">2144</span></a>                    <span class="n">realpath</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span><span id="L-2145"><a href="#L-2145"><span class="linenos">2145</span></a>                    <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-2146"><a href="#L-2146"><span class="linenos">2146</span></a>                    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
</span><span id="L-2147"><a href="#L-2147"><span class="linenos">2147</span></a>                    <span class="n">is_root_volume</span><span class="o">=</span><span class="kc">True</span>
</span><span id="L-2148"><a href="#L-2148"><span class="linenos">2148</span></a>                <span class="p">)</span>
</span><span id="L-2149"><a href="#L-2149"><span class="linenos">2149</span></a>            <span class="p">)</span>
</span><span id="L-2150"><a href="#L-2150"><span class="linenos">2150</span></a>
</span><span id="L-2151"><a href="#L-2151"><span class="linenos">2151</span></a>        <span class="k">if</span> <span class="n">swap_mbytes</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_management</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;lvm&#39;</span><span class="p">:</span>
</span><span id="L-2152"><a href="#L-2152"><span class="linenos">2152</span></a>            <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-2153"><a href="#L-2153"><span class="linenos">2153</span></a>                <span class="n">volume_type</span><span class="p">(</span>
</span><span id="L-2154"><a href="#L-2154"><span class="linenos">2154</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">swap_name</span><span class="p">,</span>
</span><span id="L-2155"><a href="#L-2155"><span class="linenos">2155</span></a>                    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="L-2156"><a href="#L-2156"><span class="linenos">2156</span></a>                    <span class="n">size</span><span class="o">=</span><span class="s1">&#39;size:</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">swap_mbytes</span><span class="p">),</span>
</span><span id="L-2157"><a href="#L-2157"><span class="linenos">2157</span></a>                    <span class="n">fullsize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-2158"><a href="#L-2158"><span class="linenos">2158</span></a>                    <span class="n">mountpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-2159"><a href="#L-2159"><span class="linenos">2159</span></a>                    <span class="n">realpath</span><span class="o">=</span><span class="s1">&#39;swap&#39;</span><span class="p">,</span>
</span><span id="L-2160"><a href="#L-2160"><span class="linenos">2160</span></a>                    <span class="n">label</span><span class="o">=</span><span class="s1">&#39;SWAP&#39;</span><span class="p">,</span>
</span><span id="L-2161"><a href="#L-2161"><span class="linenos">2161</span></a>                    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
</span><span id="L-2162"><a href="#L-2162"><span class="linenos">2162</span></a>                    <span class="n">is_root_volume</span><span class="o">=</span><span class="kc">False</span>
</span><span id="L-2163"><a href="#L-2163"><span class="linenos">2163</span></a>                <span class="p">)</span>
</span><span id="L-2164"><a href="#L-2164"><span class="linenos">2164</span></a>            <span class="p">)</span>
</span><span id="L-2165"><a href="#L-2165"><span class="linenos">2165</span></a>
</span><span id="L-2166"><a href="#L-2166"><span class="linenos">2166</span></a>        <span class="k">return</span> <span class="n">volume_type_list</span>
</span><span id="L-2167"><a href="#L-2167"><span class="linenos">2167</span></a>
</span><span id="L-2168"><a href="#L-2168"><span class="linenos">2168</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volume_management</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-2169"><a href="#L-2169"><span class="linenos">2169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2170"><a href="#L-2170"><span class="linenos">2170</span></a><span class="sd">        Provides information which volume management system is used</span>
</span><span id="L-2171"><a href="#L-2171"><span class="linenos">2171</span></a>
</span><span id="L-2172"><a href="#L-2172"><span class="linenos">2172</span></a><span class="sd">        :return: name of volume manager</span>
</span><span id="L-2173"><a href="#L-2173"><span class="linenos">2173</span></a>
</span><span id="L-2174"><a href="#L-2174"><span class="linenos">2174</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-2175"><a href="#L-2175"><span class="linenos">2175</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2176"><a href="#L-2176"><span class="linenos">2176</span></a>        <span class="n">volume_filesystems</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;btrfs&#39;</span><span class="p">]</span>
</span><span id="L-2177"><a href="#L-2177"><span class="linenos">2177</span></a>        <span class="n">selected_filesystem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">()</span>
</span><span id="L-2178"><a href="#L-2178"><span class="linenos">2178</span></a>        <span class="n">selected_system_disk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="L-2179"><a href="#L-2179"><span class="linenos">2179</span></a>        <span class="n">volume_management</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2180"><a href="#L-2180"><span class="linenos">2180</span></a>        <span class="k">if</span> <span class="n">selected_system_disk</span> <span class="ow">and</span> <span class="n">selected_system_disk</span><span class="o">.</span><span class="n">get_preferlvm</span><span class="p">():</span>
</span><span id="L-2181"><a href="#L-2181"><span class="linenos">2181</span></a>            <span class="c1"># LVM volume management is preferred, use it</span>
</span><span id="L-2182"><a href="#L-2182"><span class="linenos">2182</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="s1">&#39;lvm&#39;</span>
</span><span id="L-2183"><a href="#L-2183"><span class="linenos">2183</span></a>        <span class="k">elif</span> <span class="n">selected_filesystem</span> <span class="ow">in</span> <span class="n">volume_filesystems</span> <span class="ow">and</span> <span class="n">selected_system_disk</span><span class="p">:</span>
</span><span id="L-2184"><a href="#L-2184"><span class="linenos">2184</span></a>            <span class="c1"># specified filesystem has its own volume management system</span>
</span><span id="L-2185"><a href="#L-2185"><span class="linenos">2185</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="n">selected_filesystem</span>
</span><span id="L-2186"><a href="#L-2186"><span class="linenos">2186</span></a>        <span class="k">elif</span> <span class="n">selected_system_disk</span><span class="p">:</span>
</span><span id="L-2187"><a href="#L-2187"><span class="linenos">2187</span></a>            <span class="c1"># systemdisk section is specified with non volume capable</span>
</span><span id="L-2188"><a href="#L-2188"><span class="linenos">2188</span></a>            <span class="c1"># filesystem and no volume management preference. So let&#39;s</span>
</span><span id="L-2189"><a href="#L-2189"><span class="linenos">2189</span></a>            <span class="c1"># use LVM by default</span>
</span><span id="L-2190"><a href="#L-2190"><span class="linenos">2190</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="s1">&#39;lvm&#39;</span>
</span><span id="L-2191"><a href="#L-2191"><span class="linenos">2191</span></a>        <span class="k">return</span> <span class="n">volume_management</span>
</span><span id="L-2192"><a href="#L-2192"><span class="linenos">2192</span></a>
</span><span id="L-2193"><a href="#L-2193"><span class="linenos">2193</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_drivers_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2194"><a href="#L-2194"><span class="linenos">2194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2195"><a href="#L-2195"><span class="linenos">2195</span></a><span class="sd">        List of driver names from all drivers sections matching</span>
</span><span id="L-2196"><a href="#L-2196"><span class="linenos">2196</span></a><span class="sd">        configured profiles</span>
</span><span id="L-2197"><a href="#L-2197"><span class="linenos">2197</span></a>
</span><span id="L-2198"><a href="#L-2198"><span class="linenos">2198</span></a><span class="sd">        :return: driver names</span>
</span><span id="L-2199"><a href="#L-2199"><span class="linenos">2199</span></a>
</span><span id="L-2200"><a href="#L-2200"><span class="linenos">2200</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2201"><a href="#L-2201"><span class="linenos">2201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2202"><a href="#L-2202"><span class="linenos">2202</span></a>        <span class="n">drivers_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2203"><a href="#L-2203"><span class="linenos">2203</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_drivers</span><span class="p">()</span>
</span><span id="L-2204"><a href="#L-2204"><span class="linenos">2204</span></a>        <span class="p">)</span>
</span><span id="L-2205"><a href="#L-2205"><span class="linenos">2205</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2206"><a href="#L-2206"><span class="linenos">2206</span></a>        <span class="k">if</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="L-2207"><a href="#L-2207"><span class="linenos">2207</span></a>            <span class="k">for</span> <span class="n">driver</span> <span class="ow">in</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="L-2208"><a href="#L-2208"><span class="linenos">2208</span></a>                <span class="k">for</span> <span class="n">file_section</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="L-2209"><a href="#L-2209"><span class="linenos">2209</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-2210"><a href="#L-2210"><span class="linenos">2210</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-2211"><a href="#L-2211"><span class="linenos">2211</span></a>
</span><span id="L-2212"><a href="#L-2212"><span class="linenos">2212</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2213"><a href="#L-2213"><span class="linenos">2213</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2214"><a href="#L-2214"><span class="linenos">2214</span></a><span class="sd">        List of strip names matching the given section type</span>
</span><span id="L-2215"><a href="#L-2215"><span class="linenos">2215</span></a><span class="sd">        and profiles</span>
</span><span id="L-2216"><a href="#L-2216"><span class="linenos">2216</span></a>
</span><span id="L-2217"><a href="#L-2217"><span class="linenos">2217</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="L-2218"><a href="#L-2218"><span class="linenos">2218</span></a>
</span><span id="L-2219"><a href="#L-2219"><span class="linenos">2219</span></a><span class="sd">        :return: strip names</span>
</span><span id="L-2220"><a href="#L-2220"><span class="linenos">2220</span></a>
</span><span id="L-2221"><a href="#L-2221"><span class="linenos">2221</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2222"><a href="#L-2222"><span class="linenos">2222</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2223"><a href="#L-2223"><span class="linenos">2223</span></a>        <span class="n">strip_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2224"><a href="#L-2224"><span class="linenos">2224</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_strip</span><span class="p">()</span>
</span><span id="L-2225"><a href="#L-2225"><span class="linenos">2225</span></a>        <span class="p">)</span>
</span><span id="L-2226"><a href="#L-2226"><span class="linenos">2226</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2227"><a href="#L-2227"><span class="linenos">2227</span></a>        <span class="k">if</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="L-2228"><a href="#L-2228"><span class="linenos">2228</span></a>            <span class="k">for</span> <span class="n">strip</span> <span class="ow">in</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="L-2229"><a href="#L-2229"><span class="linenos">2229</span></a>                <span class="k">if</span> <span class="n">strip</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span> <span class="o">==</span> <span class="n">section_type</span><span class="p">:</span>
</span><span id="L-2230"><a href="#L-2230"><span class="linenos">2230</span></a>                    <span class="k">for</span> <span class="n">file_section</span> <span class="ow">in</span> <span class="n">strip</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="L-2231"><a href="#L-2231"><span class="linenos">2231</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-2232"><a href="#L-2232"><span class="linenos">2232</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-2233"><a href="#L-2233"><span class="linenos">2233</span></a>
</span><span id="L-2234"><a href="#L-2234"><span class="linenos">2234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_files_to_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2235"><a href="#L-2235"><span class="linenos">2235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2236"><a href="#L-2236"><span class="linenos">2236</span></a><span class="sd">        Items to delete from strip section</span>
</span><span id="L-2237"><a href="#L-2237"><span class="linenos">2237</span></a>
</span><span id="L-2238"><a href="#L-2238"><span class="linenos">2238</span></a><span class="sd">        :return: item names</span>
</span><span id="L-2239"><a href="#L-2239"><span class="linenos">2239</span></a>
</span><span id="L-2240"><a href="#L-2240"><span class="linenos">2240</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2241"><a href="#L-2241"><span class="linenos">2241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2242"><a href="#L-2242"><span class="linenos">2242</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</span><span id="L-2243"><a href="#L-2243"><span class="linenos">2243</span></a>
</span><span id="L-2244"><a href="#L-2244"><span class="linenos">2244</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_tools_to_keep</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2245"><a href="#L-2245"><span class="linenos">2245</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2246"><a href="#L-2246"><span class="linenos">2246</span></a><span class="sd">        Tools to keep from strip section</span>
</span><span id="L-2247"><a href="#L-2247"><span class="linenos">2247</span></a>
</span><span id="L-2248"><a href="#L-2248"><span class="linenos">2248</span></a><span class="sd">        :return: tool names</span>
</span><span id="L-2249"><a href="#L-2249"><span class="linenos">2249</span></a>
</span><span id="L-2250"><a href="#L-2250"><span class="linenos">2250</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2251"><a href="#L-2251"><span class="linenos">2251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2252"><a href="#L-2252"><span class="linenos">2252</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;tools&#39;</span><span class="p">)</span>
</span><span id="L-2253"><a href="#L-2253"><span class="linenos">2253</span></a>
</span><span id="L-2254"><a href="#L-2254"><span class="linenos">2254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_libraries_to_keep</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2255"><a href="#L-2255"><span class="linenos">2255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2256"><a href="#L-2256"><span class="linenos">2256</span></a><span class="sd">        Libraries to keep from strip section</span>
</span><span id="L-2257"><a href="#L-2257"><span class="linenos">2257</span></a>
</span><span id="L-2258"><a href="#L-2258"><span class="linenos">2258</span></a><span class="sd">        :return: librarie names</span>
</span><span id="L-2259"><a href="#L-2259"><span class="linenos">2259</span></a>
</span><span id="L-2260"><a href="#L-2260"><span class="linenos">2260</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2261"><a href="#L-2261"><span class="linenos">2261</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2262"><a href="#L-2262"><span class="linenos">2262</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;libs&#39;</span><span class="p">)</span>
</span><span id="L-2263"><a href="#L-2263"><span class="linenos">2263</span></a>
</span><span id="L-2264"><a href="#L-2264"><span class="linenos">2264</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_include_section_reference_file_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-2265"><a href="#L-2265"><span class="linenos">2265</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2266"><a href="#L-2266"><span class="linenos">2266</span></a><span class="sd">        List of all &lt;include&gt; section file name references</span>
</span><span id="L-2267"><a href="#L-2267"><span class="linenos">2267</span></a>
</span><span id="L-2268"><a href="#L-2268"><span class="linenos">2268</span></a><span class="sd">        :return: List[str]</span>
</span><span id="L-2269"><a href="#L-2269"><span class="linenos">2269</span></a>
</span><span id="L-2270"><a href="#L-2270"><span class="linenos">2270</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2271"><a href="#L-2271"><span class="linenos">2271</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2272"><a href="#L-2272"><span class="linenos">2272</span></a>        <span class="n">include_files</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2273"><a href="#L-2273"><span class="linenos">2273</span></a>        <span class="k">for</span> <span class="n">include</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_include</span><span class="p">():</span>
</span><span id="L-2274"><a href="#L-2274"><span class="linenos">2274</span></a>            <span class="n">include_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">include</span><span class="o">.</span><span class="n">get_from</span><span class="p">())</span>
</span><span id="L-2275"><a href="#L-2275"><span class="linenos">2275</span></a>        <span class="k">return</span> <span class="n">include_files</span>
</span><span id="L-2276"><a href="#L-2276"><span class="linenos">2276</span></a>
</span><span id="L-2277"><a href="#L-2277"><span class="linenos">2277</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2278"><a href="#L-2278"><span class="linenos">2278</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2279"><a href="#L-2279"><span class="linenos">2279</span></a><span class="sd">        List of all repository sections for the selected profiles that</span>
</span><span id="L-2280"><a href="#L-2280"><span class="linenos">2280</span></a><span class="sd">        matches the host architecture</span>
</span><span id="L-2281"><a href="#L-2281"><span class="linenos">2281</span></a>
</span><span id="L-2282"><a href="#L-2282"><span class="linenos">2282</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="L-2283"><a href="#L-2283"><span class="linenos">2283</span></a>
</span><span id="L-2284"><a href="#L-2284"><span class="linenos">2284</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2285"><a href="#L-2285"><span class="linenos">2285</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2286"><a href="#L-2286"><span class="linenos">2286</span></a>        <span class="n">repository_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2287"><a href="#L-2287"><span class="linenos">2287</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_repository</span><span class="p">()):</span>
</span><span id="L-2288"><a href="#L-2288"><span class="linenos">2288</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">repository_matches_host_architecture</span><span class="p">(</span><span class="n">repository</span><span class="p">):</span>
</span><span id="L-2289"><a href="#L-2289"><span class="linenos">2289</span></a>                <span class="n">repository_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</span><span id="L-2290"><a href="#L-2290"><span class="linenos">2290</span></a>        <span class="k">return</span> <span class="n">repository_list</span>
</span><span id="L-2291"><a href="#L-2291"><span class="linenos">2291</span></a>
</span><span id="L-2292"><a href="#L-2292"><span class="linenos">2292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_containers_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2293"><a href="#L-2293"><span class="linenos">2293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2294"><a href="#L-2294"><span class="linenos">2294</span></a><span class="sd">        List of all containers sections for the selected profiles that</span>
</span><span id="L-2295"><a href="#L-2295"><span class="linenos">2295</span></a><span class="sd">        matches the host architecture</span>
</span><span id="L-2296"><a href="#L-2296"><span class="linenos">2296</span></a>
</span><span id="L-2297"><a href="#L-2297"><span class="linenos">2297</span></a><span class="sd">        :return: &lt;containers&gt; section reference(s)</span>
</span><span id="L-2298"><a href="#L-2298"><span class="linenos">2298</span></a>
</span><span id="L-2299"><a href="#L-2299"><span class="linenos">2299</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2300"><a href="#L-2300"><span class="linenos">2300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2301"><a href="#L-2301"><span class="linenos">2301</span></a>        <span class="n">containers_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2302"><a href="#L-2302"><span class="linenos">2302</span></a>        <span class="k">for</span> <span class="n">containers</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_containers</span><span class="p">()):</span>
</span><span id="L-2303"><a href="#L-2303"><span class="linenos">2303</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">containers_matches_host_architecture</span><span class="p">(</span><span class="n">containers</span><span class="p">):</span>
</span><span id="L-2304"><a href="#L-2304"><span class="linenos">2304</span></a>                <span class="n">containers_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
</span><span id="L-2305"><a href="#L-2305"><span class="linenos">2305</span></a>        <span class="k">return</span> <span class="n">containers_list</span>
</span><span id="L-2306"><a href="#L-2306"><span class="linenos">2306</span></a>
</span><span id="L-2307"><a href="#L-2307"><span class="linenos">2307</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections_used_for_build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2308"><a href="#L-2308"><span class="linenos">2308</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2309"><a href="#L-2309"><span class="linenos">2309</span></a><span class="sd">        List of all repositorys sections used to build the image and</span>
</span><span id="L-2310"><a href="#L-2310"><span class="linenos">2310</span></a><span class="sd">        matching configured profiles.</span>
</span><span id="L-2311"><a href="#L-2311"><span class="linenos">2311</span></a>
</span><span id="L-2312"><a href="#L-2312"><span class="linenos">2312</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="L-2313"><a href="#L-2313"><span class="linenos">2313</span></a>
</span><span id="L-2314"><a href="#L-2314"><span class="linenos">2314</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2315"><a href="#L-2315"><span class="linenos">2315</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2316"><a href="#L-2316"><span class="linenos">2316</span></a>        <span class="n">repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="L-2317"><a href="#L-2317"><span class="linenos">2317</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2318"><a href="#L-2318"><span class="linenos">2318</span></a>            <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repos</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageonly</span><span class="p">()</span>
</span><span id="L-2319"><a href="#L-2319"><span class="linenos">2319</span></a>        <span class="p">)</span>
</span><span id="L-2320"><a href="#L-2320"><span class="linenos">2320</span></a>
</span><span id="L-2321"><a href="#L-2321"><span class="linenos">2321</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections_used_in_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2322"><a href="#L-2322"><span class="linenos">2322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2323"><a href="#L-2323"><span class="linenos">2323</span></a><span class="sd">        List of all repositorys sections to be configured in the resulting</span>
</span><span id="L-2324"><a href="#L-2324"><span class="linenos">2324</span></a><span class="sd">        image matching configured profiles.</span>
</span><span id="L-2325"><a href="#L-2325"><span class="linenos">2325</span></a>
</span><span id="L-2326"><a href="#L-2326"><span class="linenos">2326</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="L-2327"><a href="#L-2327"><span class="linenos">2327</span></a>
</span><span id="L-2328"><a href="#L-2328"><span class="linenos">2328</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2329"><a href="#L-2329"><span class="linenos">2329</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2330"><a href="#L-2330"><span class="linenos">2330</span></a>        <span class="n">repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="L-2331"><a href="#L-2331"><span class="linenos">2331</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2332"><a href="#L-2332"><span class="linenos">2332</span></a>            <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repos</span>
</span><span id="L-2333"><a href="#L-2333"><span class="linenos">2333</span></a>            <span class="k">if</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageinclude</span><span class="p">()</span> <span class="ow">or</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageonly</span><span class="p">()</span>
</span><span id="L-2334"><a href="#L-2334"><span class="linenos">2334</span></a>        <span class="p">)</span>
</span><span id="L-2335"><a href="#L-2335"><span class="linenos">2335</span></a>
</span><span id="L-2336"><a href="#L-2336"><span class="linenos">2336</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_repository_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2337"><a href="#L-2337"><span class="linenos">2337</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2338"><a href="#L-2338"><span class="linenos">2338</span></a><span class="sd">        Delete all repository sections matching configured profiles</span>
</span><span id="L-2339"><a href="#L-2339"><span class="linenos">2339</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2340"><a href="#L-2340"><span class="linenos">2340</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">([])</span>
</span><span id="L-2341"><a href="#L-2341"><span class="linenos">2341</span></a>
</span><span id="L-2342"><a href="#L-2342"><span class="linenos">2342</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_repository_sections_used_for_build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2343"><a href="#L-2343"><span class="linenos">2343</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2344"><a href="#L-2344"><span class="linenos">2344</span></a><span class="sd">        Delete all repository sections used to build the image matching</span>
</span><span id="L-2345"><a href="#L-2345"><span class="linenos">2345</span></a><span class="sd">        configured profiles</span>
</span><span id="L-2346"><a href="#L-2346"><span class="linenos">2346</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2347"><a href="#L-2347"><span class="linenos">2347</span></a>        <span class="n">used_for_build</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections_used_for_build</span><span class="p">()</span>
</span><span id="L-2348"><a href="#L-2348"><span class="linenos">2348</span></a>        <span class="n">all_repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="L-2349"><a href="#L-2349"><span class="linenos">2349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">(</span>
</span><span id="L-2350"><a href="#L-2350"><span class="linenos">2350</span></a>            <span class="p">[</span>
</span><span id="L-2351"><a href="#L-2351"><span class="linenos">2351</span></a>                <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">all_repos</span> <span class="k">if</span> <span class="n">repo</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_for_build</span>
</span><span id="L-2352"><a href="#L-2352"><span class="linenos">2352</span></a>            <span class="p">]</span>
</span><span id="L-2353"><a href="#L-2353"><span class="linenos">2353</span></a>        <span class="p">)</span>
</span><span id="L-2354"><a href="#L-2354"><span class="linenos">2354</span></a>
</span><span id="L-2355"><a href="#L-2355"><span class="linenos">2355</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repositories_signing_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-2356"><a href="#L-2356"><span class="linenos">2356</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2357"><a href="#L-2357"><span class="linenos">2357</span></a><span class="sd">        Get list of signing keys specified on the repositories</span>
</span><span id="L-2358"><a href="#L-2358"><span class="linenos">2358</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2359"><a href="#L-2359"><span class="linenos">2359</span></a>        <span class="n">key_file_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2360"><a href="#L-2360"><span class="linenos">2360</span></a>        <span class="n">release_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_release_version</span><span class="p">()</span>
</span><span id="L-2361"><a href="#L-2361"><span class="linenos">2361</span></a>        <span class="n">release_vars</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-2362"><a href="#L-2362"><span class="linenos">2362</span></a>            <span class="s1">&#39;$releasever&#39;</span><span class="p">,</span>
</span><span id="L-2363"><a href="#L-2363"><span class="linenos">2363</span></a>            <span class="s1">&#39;$</span><span class="si">{releasever}</span><span class="s1">&#39;</span>
</span><span id="L-2364"><a href="#L-2364"><span class="linenos">2364</span></a>        <span class="p">]</span>
</span><span id="L-2365"><a href="#L-2365"><span class="linenos">2365</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="L-2366"><a href="#L-2366"><span class="linenos">2366</span></a>            <span class="k">for</span> <span class="n">signing</span> <span class="ow">in</span> <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">get_signing</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="L-2367"><a href="#L-2367"><span class="linenos">2367</span></a>                <span class="n">normalized_key_url</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">signing</span><span class="o">.</span><span class="n">get_key</span><span class="p">())</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="L-2368"><a href="#L-2368"><span class="linenos">2368</span></a>                <span class="k">if</span> <span class="n">release_version</span><span class="p">:</span>
</span><span id="L-2369"><a href="#L-2369"><span class="linenos">2369</span></a>                    <span class="k">for</span> <span class="n">release_var</span> <span class="ow">in</span> <span class="n">release_vars</span><span class="p">:</span>
</span><span id="L-2370"><a href="#L-2370"><span class="linenos">2370</span></a>                        <span class="k">if</span> <span class="n">release_var</span> <span class="ow">in</span> <span class="n">normalized_key_url</span><span class="p">:</span>
</span><span id="L-2371"><a href="#L-2371"><span class="linenos">2371</span></a>                            <span class="n">normalized_key_url</span> <span class="o">=</span> <span class="n">normalized_key_url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="L-2372"><a href="#L-2372"><span class="linenos">2372</span></a>                                <span class="n">release_var</span><span class="p">,</span> <span class="n">release_version</span>
</span><span id="L-2373"><a href="#L-2373"><span class="linenos">2373</span></a>                            <span class="p">)</span>
</span><span id="L-2374"><a href="#L-2374"><span class="linenos">2374</span></a>                <span class="k">if</span> <span class="n">normalized_key_url</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">key_file_list</span><span class="p">:</span>
</span><span id="L-2375"><a href="#L-2375"><span class="linenos">2375</span></a>                    <span class="n">key_file_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normalized_key_url</span><span class="p">)</span>
</span><span id="L-2376"><a href="#L-2376"><span class="linenos">2376</span></a>        <span class="k">return</span> <span class="n">key_file_list</span>
</span><span id="L-2377"><a href="#L-2377"><span class="linenos">2377</span></a>
</span><span id="L-2378"><a href="#L-2378"><span class="linenos">2378</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_repository</span><span class="p">(</span>
</span><span id="L-2379"><a href="#L-2379"><span class="linenos">2379</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-2380"><a href="#L-2380"><span class="linenos">2380</span></a>        <span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2381"><a href="#L-2381"><span class="linenos">2381</span></a>        <span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2382"><a href="#L-2382"><span class="linenos">2382</span></a>        <span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2383"><a href="#L-2383"><span class="linenos">2383</span></a>        <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2384"><a href="#L-2384"><span class="linenos">2384</span></a>        <span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2385"><a href="#L-2385"><span class="linenos">2385</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2386"><a href="#L-2386"><span class="linenos">2386</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2387"><a href="#L-2387"><span class="linenos">2387</span></a><span class="sd">        Overwrite repository data of the first repository</span>
</span><span id="L-2388"><a href="#L-2388"><span class="linenos">2388</span></a>
</span><span id="L-2389"><a href="#L-2389"><span class="linenos">2389</span></a><span class="sd">        :param str repo_source: repository URI</span>
</span><span id="L-2390"><a href="#L-2390"><span class="linenos">2390</span></a><span class="sd">        :param str repo_type: type name defined by schema</span>
</span><span id="L-2391"><a href="#L-2391"><span class="linenos">2391</span></a><span class="sd">        :param str repo_alias: alias name</span>
</span><span id="L-2392"><a href="#L-2392"><span class="linenos">2392</span></a><span class="sd">        :param str repo_prio: priority number, package manager specific</span>
</span><span id="L-2393"><a href="#L-2393"><span class="linenos">2393</span></a><span class="sd">        :param bool repo_imageinclude: setup repository inside of the image</span>
</span><span id="L-2394"><a href="#L-2394"><span class="linenos">2394</span></a><span class="sd">        :param bool repo_package_gpgcheck: enable/disable package gpg checks</span>
</span><span id="L-2395"><a href="#L-2395"><span class="linenos">2395</span></a><span class="sd">        :param list repo_signing_keys: list of signing key file names</span>
</span><span id="L-2396"><a href="#L-2396"><span class="linenos">2396</span></a><span class="sd">        :param str components: component names for debian repos</span>
</span><span id="L-2397"><a href="#L-2397"><span class="linenos">2397</span></a><span class="sd">        :param str distribution: base distribution name for debian repos</span>
</span><span id="L-2398"><a href="#L-2398"><span class="linenos">2398</span></a><span class="sd">        :param bool repo_gpgcheck: enable/disable repo gpg checks</span>
</span><span id="L-2399"><a href="#L-2399"><span class="linenos">2399</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2400"><a href="#L-2400"><span class="linenos">2400</span></a>        <span class="n">repository_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="L-2401"><a href="#L-2401"><span class="linenos">2401</span></a>        <span class="k">if</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="L-2402"><a href="#L-2402"><span class="linenos">2402</span></a>            <span class="n">repository</span> <span class="o">=</span> <span class="n">repository_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2403"><a href="#L-2403"><span class="linenos">2403</span></a>            <span class="k">if</span> <span class="n">repo_alias</span><span class="p">:</span>
</span><span id="L-2404"><a href="#L-2404"><span class="linenos">2404</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_alias</span><span class="p">(</span><span class="n">repo_alias</span><span class="p">)</span>
</span><span id="L-2405"><a href="#L-2405"><span class="linenos">2405</span></a>            <span class="k">if</span> <span class="n">repo_type</span><span class="p">:</span>
</span><span id="L-2406"><a href="#L-2406"><span class="linenos">2406</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_type</span><span class="p">(</span><span class="n">repo_type</span><span class="p">)</span>
</span><span id="L-2407"><a href="#L-2407"><span class="linenos">2407</span></a>            <span class="k">if</span> <span class="n">repo_source</span><span class="p">:</span>
</span><span id="L-2408"><a href="#L-2408"><span class="linenos">2408</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span><span class="n">repo_source</span><span class="p">)</span>
</span><span id="L-2409"><a href="#L-2409"><span class="linenos">2409</span></a>            <span class="k">if</span> <span class="n">repo_prio</span><span class="p">:</span>
</span><span id="L-2410"><a href="#L-2410"><span class="linenos">2410</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_priority</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">repo_prio</span><span class="p">))</span>
</span><span id="L-2411"><a href="#L-2411"><span class="linenos">2411</span></a>            <span class="k">if</span> <span class="n">repo_imageinclude</span><span class="p">:</span>
</span><span id="L-2412"><a href="#L-2412"><span class="linenos">2412</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_imageinclude</span><span class="p">(</span><span class="n">repo_imageinclude</span><span class="p">)</span>
</span><span id="L-2413"><a href="#L-2413"><span class="linenos">2413</span></a>            <span class="k">if</span> <span class="n">repo_package_gpgcheck</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2414"><a href="#L-2414"><span class="linenos">2414</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_package_gpgcheck</span><span class="p">(</span><span class="n">repo_package_gpgcheck</span><span class="p">)</span>
</span><span id="L-2415"><a href="#L-2415"><span class="linenos">2415</span></a>            <span class="k">if</span> <span class="n">repo_signing_keys</span><span class="p">:</span>
</span><span id="L-2416"><a href="#L-2416"><span class="linenos">2416</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">set_signing</span><span class="p">(</span>
</span><span id="L-2417"><a href="#L-2417"><span class="linenos">2417</span></a>                    <span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">signing</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">repo_signing_keys</span><span class="p">]</span>
</span><span id="L-2418"><a href="#L-2418"><span class="linenos">2418</span></a>                <span class="p">)</span>
</span><span id="L-2419"><a href="#L-2419"><span class="linenos">2419</span></a>            <span class="k">if</span> <span class="n">components</span><span class="p">:</span>
</span><span id="L-2420"><a href="#L-2420"><span class="linenos">2420</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_components</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
</span><span id="L-2421"><a href="#L-2421"><span class="linenos">2421</span></a>            <span class="k">if</span> <span class="n">distribution</span><span class="p">:</span>
</span><span id="L-2422"><a href="#L-2422"><span class="linenos">2422</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_distribution</span><span class="p">(</span><span class="n">distribution</span><span class="p">)</span>
</span><span id="L-2423"><a href="#L-2423"><span class="linenos">2423</span></a>            <span class="k">if</span> <span class="n">repo_gpgcheck</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2424"><a href="#L-2424"><span class="linenos">2424</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_repository_gpgcheck</span><span class="p">(</span><span class="n">repo_gpgcheck</span><span class="p">)</span>
</span><span id="L-2425"><a href="#L-2425"><span class="linenos">2425</span></a>            <span class="k">if</span> <span class="n">repo_sourcetype</span><span class="p">:</span>
</span><span id="L-2426"><a href="#L-2426"><span class="linenos">2426</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_sourcetype</span><span class="p">(</span><span class="n">repo_sourcetype</span><span class="p">)</span>
</span><span id="L-2427"><a href="#L-2427"><span class="linenos">2427</span></a>
</span><span id="L-2428"><a href="#L-2428"><span class="linenos">2428</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_repository</span><span class="p">(</span>
</span><span id="L-2429"><a href="#L-2429"><span class="linenos">2429</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2430"><a href="#L-2430"><span class="linenos">2430</span></a>        <span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2431"><a href="#L-2431"><span class="linenos">2431</span></a>        <span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2432"><a href="#L-2432"><span class="linenos">2432</span></a>        <span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2433"><a href="#L-2433"><span class="linenos">2433</span></a>        <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2434"><a href="#L-2434"><span class="linenos">2434</span></a>        <span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2435"><a href="#L-2435"><span class="linenos">2435</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2436"><a href="#L-2436"><span class="linenos">2436</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2437"><a href="#L-2437"><span class="linenos">2437</span></a><span class="sd">        Add a new repository section at the end of the list</span>
</span><span id="L-2438"><a href="#L-2438"><span class="linenos">2438</span></a>
</span><span id="L-2439"><a href="#L-2439"><span class="linenos">2439</span></a><span class="sd">        :param str repo_source: repository URI</span>
</span><span id="L-2440"><a href="#L-2440"><span class="linenos">2440</span></a><span class="sd">        :param str repo_type: type name defined by schema</span>
</span><span id="L-2441"><a href="#L-2441"><span class="linenos">2441</span></a><span class="sd">        :param str repo_alias: alias name</span>
</span><span id="L-2442"><a href="#L-2442"><span class="linenos">2442</span></a><span class="sd">        :param str repo_prio: priority number, package manager specific</span>
</span><span id="L-2443"><a href="#L-2443"><span class="linenos">2443</span></a><span class="sd">        :param bool repo_imageinclude: setup repository inside of the image</span>
</span><span id="L-2444"><a href="#L-2444"><span class="linenos">2444</span></a><span class="sd">        :param bool repo_package_gpgcheck: enable/disable package gpg checks</span>
</span><span id="L-2445"><a href="#L-2445"><span class="linenos">2445</span></a><span class="sd">        :param list repo_signing_keys: list of signing key file names</span>
</span><span id="L-2446"><a href="#L-2446"><span class="linenos">2446</span></a><span class="sd">        :param str components: component names for debian repos</span>
</span><span id="L-2447"><a href="#L-2447"><span class="linenos">2447</span></a><span class="sd">        :param str distribution: base distribution name for debian repos</span>
</span><span id="L-2448"><a href="#L-2448"><span class="linenos">2448</span></a><span class="sd">        :param bool repo_gpgcheck: enable/disable repo gpg checks</span>
</span><span id="L-2449"><a href="#L-2449"><span class="linenos">2449</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2450"><a href="#L-2450"><span class="linenos">2450</span></a>        <span class="n">priority_number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2451"><a href="#L-2451"><span class="linenos">2451</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-2452"><a href="#L-2452"><span class="linenos">2452</span></a>            <span class="n">priority_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">repo_prio</span><span class="p">)</span>
</span><span id="L-2453"><a href="#L-2453"><span class="linenos">2453</span></a>        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="L-2454"><a href="#L-2454"><span class="linenos">2454</span></a>            <span class="k">pass</span>
</span><span id="L-2455"><a href="#L-2455"><span class="linenos">2455</span></a>
</span><span id="L-2456"><a href="#L-2456"><span class="linenos">2456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_repository</span><span class="p">(</span>
</span><span id="L-2457"><a href="#L-2457"><span class="linenos">2457</span></a>            <span class="n">xml_parse</span><span class="o">.</span><span class="n">repository</span><span class="p">(</span>
</span><span id="L-2458"><a href="#L-2458"><span class="linenos">2458</span></a>                <span class="n">type_</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
</span><span id="L-2459"><a href="#L-2459"><span class="linenos">2459</span></a>                <span class="n">alias</span><span class="o">=</span><span class="n">repo_alias</span><span class="p">,</span>
</span><span id="L-2460"><a href="#L-2460"><span class="linenos">2460</span></a>                <span class="n">priority</span><span class="o">=</span><span class="n">priority_number</span><span class="p">,</span>
</span><span id="L-2461"><a href="#L-2461"><span class="linenos">2461</span></a>                <span class="n">source</span><span class="o">=</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">source</span><span class="p">(</span>
</span><span id="L-2462"><a href="#L-2462"><span class="linenos">2462</span></a>                    <span class="n">path</span><span class="o">=</span><span class="n">repo_source</span><span class="p">,</span>
</span><span id="L-2463"><a href="#L-2463"><span class="linenos">2463</span></a>                    <span class="n">signing</span><span class="o">=</span><span class="p">[</span>
</span><span id="L-2464"><a href="#L-2464"><span class="linenos">2464</span></a>                        <span class="n">xml_parse</span><span class="o">.</span><span class="n">signing</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">repo_signing_keys</span>
</span><span id="L-2465"><a href="#L-2465"><span class="linenos">2465</span></a>                    <span class="p">]</span>
</span><span id="L-2466"><a href="#L-2466"><span class="linenos">2466</span></a>                <span class="p">),</span>
</span><span id="L-2467"><a href="#L-2467"><span class="linenos">2467</span></a>                <span class="n">imageinclude</span><span class="o">=</span><span class="n">repo_imageinclude</span><span class="p">,</span>
</span><span id="L-2468"><a href="#L-2468"><span class="linenos">2468</span></a>                <span class="n">package_gpgcheck</span><span class="o">=</span><span class="n">repo_package_gpgcheck</span><span class="p">,</span>
</span><span id="L-2469"><a href="#L-2469"><span class="linenos">2469</span></a>                <span class="n">repository_gpgcheck</span><span class="o">=</span><span class="n">repo_gpgcheck</span><span class="p">,</span>
</span><span id="L-2470"><a href="#L-2470"><span class="linenos">2470</span></a>                <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
</span><span id="L-2471"><a href="#L-2471"><span class="linenos">2471</span></a>                <span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span>
</span><span id="L-2472"><a href="#L-2472"><span class="linenos">2472</span></a>                <span class="n">sourcetype</span><span class="o">=</span><span class="n">repo_sourcetype</span>
</span><span id="L-2473"><a href="#L-2473"><span class="linenos">2473</span></a>            <span class="p">)</span>
</span><span id="L-2474"><a href="#L-2474"><span class="linenos">2474</span></a>        <span class="p">)</span>
</span><span id="L-2475"><a href="#L-2475"><span class="linenos">2475</span></a>
</span><span id="L-2476"><a href="#L-2476"><span class="linenos">2476</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cert_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_distribution</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2477"><a href="#L-2477"><span class="linenos">2477</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2478"><a href="#L-2478"><span class="linenos">2478</span></a><span class="sd">        Add &lt;certificate name=&quot;cert_file&quot;&gt; to main &lt;certificates&gt; section</span>
</span><span id="L-2479"><a href="#L-2479"><span class="linenos">2479</span></a><span class="sd">        The main section will be created if it does not exist. Also</span>
</span><span id="L-2480"><a href="#L-2480"><span class="linenos">2480</span></a><span class="sd">        setup the target_distribution in the resulting main section.</span>
</span><span id="L-2481"><a href="#L-2481"><span class="linenos">2481</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2482"><a href="#L-2482"><span class="linenos">2482</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2483"><a href="#L-2483"><span class="linenos">2483</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="L-2484"><a href="#L-2484"><span class="linenos">2484</span></a>        <span class="p">)</span>
</span><span id="L-2485"><a href="#L-2485"><span class="linenos">2485</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="L-2486"><a href="#L-2486"><span class="linenos">2486</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_certificates</span><span class="p">(</span>
</span><span id="L-2487"><a href="#L-2487"><span class="linenos">2487</span></a>                <span class="p">[</span>
</span><span id="L-2488"><a href="#L-2488"><span class="linenos">2488</span></a>                    <span class="n">xml_parse</span><span class="o">.</span><span class="n">certificates</span><span class="p">(</span>
</span><span id="L-2489"><a href="#L-2489"><span class="linenos">2489</span></a>                        <span class="n">target_distribution</span><span class="o">=</span><span class="n">target_distribution</span><span class="p">,</span>
</span><span id="L-2490"><a href="#L-2490"><span class="linenos">2490</span></a>                        <span class="n">certificate</span><span class="o">=</span><span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">certificate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">cert_file</span><span class="p">)]</span>
</span><span id="L-2491"><a href="#L-2491"><span class="linenos">2491</span></a>                    <span class="p">)</span>
</span><span id="L-2492"><a href="#L-2492"><span class="linenos">2492</span></a>                <span class="p">]</span>
</span><span id="L-2493"><a href="#L-2493"><span class="linenos">2493</span></a>            <span class="p">)</span>
</span><span id="L-2494"><a href="#L-2494"><span class="linenos">2494</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2495"><a href="#L-2495"><span class="linenos">2495</span></a>            <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_target_distribution</span><span class="p">(</span>
</span><span id="L-2496"><a href="#L-2496"><span class="linenos">2496</span></a>                <span class="n">target_distribution</span>
</span><span id="L-2497"><a href="#L-2497"><span class="linenos">2497</span></a>            <span class="p">)</span>
</span><span id="L-2498"><a href="#L-2498"><span class="linenos">2498</span></a>            <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_certificate</span><span class="p">(</span>
</span><span id="L-2499"><a href="#L-2499"><span class="linenos">2499</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">certificate</span><span class="p">(</span>
</span><span id="L-2500"><a href="#L-2500"><span class="linenos">2500</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">cert_file</span>
</span><span id="L-2501"><a href="#L-2501"><span class="linenos">2501</span></a>                <span class="p">)</span>
</span><span id="L-2502"><a href="#L-2502"><span class="linenos">2502</span></a>            <span class="p">)</span>
</span><span id="L-2503"><a href="#L-2503"><span class="linenos">2503</span></a>
</span><span id="L-2504"><a href="#L-2504"><span class="linenos">2504</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_certificates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-2505"><a href="#L-2505"><span class="linenos">2505</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2506"><a href="#L-2506"><span class="linenos">2506</span></a><span class="sd">        Read list of certificates</span>
</span><span id="L-2507"><a href="#L-2507"><span class="linenos">2507</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2508"><a href="#L-2508"><span class="linenos">2508</span></a>        <span class="n">cert_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2509"><a href="#L-2509"><span class="linenos">2509</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2510"><a href="#L-2510"><span class="linenos">2510</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="L-2511"><a href="#L-2511"><span class="linenos">2511</span></a>        <span class="p">)</span>
</span><span id="L-2512"><a href="#L-2512"><span class="linenos">2512</span></a>        <span class="k">if</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="L-2513"><a href="#L-2513"><span class="linenos">2513</span></a>            <span class="k">for</span> <span class="n">certificate</span> <span class="ow">in</span> <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_certificate</span><span class="p">():</span>
</span><span id="L-2514"><a href="#L-2514"><span class="linenos">2514</span></a>                <span class="n">cert_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">certificate</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-2515"><a href="#L-2515"><span class="linenos">2515</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cert_list</span><span class="p">)))</span>
</span><span id="L-2516"><a href="#L-2516"><span class="linenos">2516</span></a>
</span><span id="L-2517"><a href="#L-2517"><span class="linenos">2517</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_certificates_target_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2518"><a href="#L-2518"><span class="linenos">2518</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2519"><a href="#L-2519"><span class="linenos">2519</span></a><span class="sd">        Read CA target distribution</span>
</span><span id="L-2520"><a href="#L-2520"><span class="linenos">2520</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2521"><a href="#L-2521"><span class="linenos">2521</span></a>        <span class="n">target_distribution</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-2522"><a href="#L-2522"><span class="linenos">2522</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2523"><a href="#L-2523"><span class="linenos">2523</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="L-2524"><a href="#L-2524"><span class="linenos">2524</span></a>        <span class="p">)</span>
</span><span id="L-2525"><a href="#L-2525"><span class="linenos">2525</span></a>        <span class="k">if</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="L-2526"><a href="#L-2526"><span class="linenos">2526</span></a>            <span class="n">target_distribution</span> <span class="o">=</span> \
</span><span id="L-2527"><a href="#L-2527"><span class="linenos">2527</span></a>                <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_target_distribution</span><span class="p">()</span>
</span><span id="L-2528"><a href="#L-2528"><span class="linenos">2528</span></a>        <span class="k">return</span> <span class="n">target_distribution</span>
</span><span id="L-2529"><a href="#L-2529"><span class="linenos">2529</span></a>
</span><span id="L-2530"><a href="#L-2530"><span class="linenos">2530</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_this_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2531"><a href="#L-2531"><span class="linenos">2531</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2532"><a href="#L-2532"><span class="linenos">2532</span></a><span class="sd">        Resolve any this:// repo source path into the path</span>
</span><span id="L-2533"><a href="#L-2533"><span class="linenos">2533</span></a><span class="sd">        representing the target inside of the image description</span>
</span><span id="L-2534"><a href="#L-2534"><span class="linenos">2534</span></a><span class="sd">        directory</span>
</span><span id="L-2535"><a href="#L-2535"><span class="linenos">2535</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2536"><a href="#L-2536"><span class="linenos">2536</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="L-2537"><a href="#L-2537"><span class="linenos">2537</span></a>            <span class="n">repo_source</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span>
</span><span id="L-2538"><a href="#L-2538"><span class="linenos">2538</span></a>            <span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_source</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
</span><span id="L-2539"><a href="#L-2539"><span class="linenos">2539</span></a>            <span class="k">if</span> <span class="n">repo_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;this://&#39;</span><span class="p">):</span>
</span><span id="L-2540"><a href="#L-2540"><span class="linenos">2540</span></a>                <span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;this://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="L-2541"><a href="#L-2541"><span class="linenos">2541</span></a>                <span class="n">repo_source</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span>
</span><span id="L-2542"><a href="#L-2542"><span class="linenos">2542</span></a>                    <span class="s1">&#39;dir://</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-2543"><a href="#L-2543"><span class="linenos">2543</span></a>                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span>
</span><span id="L-2544"><a href="#L-2544"><span class="linenos">2544</span></a>                            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-2545"><a href="#L-2545"><span class="linenos">2545</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">description_dir</span><span class="p">,</span> <span class="n">repo_path</span>
</span><span id="L-2546"><a href="#L-2546"><span class="linenos">2546</span></a>                            <span class="p">)</span>
</span><span id="L-2547"><a href="#L-2547"><span class="linenos">2547</span></a>                        <span class="p">)</span>
</span><span id="L-2548"><a href="#L-2548"><span class="linenos">2548</span></a>                    <span class="p">)</span>
</span><span id="L-2549"><a href="#L-2549"><span class="linenos">2549</span></a>                <span class="p">)</span>
</span><span id="L-2550"><a href="#L-2550"><span class="linenos">2550</span></a>
</span><span id="L-2551"><a href="#L-2551"><span class="linenos">2551</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_displayname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2552"><a href="#L-2552"><span class="linenos">2552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2553"><a href="#L-2553"><span class="linenos">2553</span></a><span class="sd">        Copy image displayname from this xml state to the target xml state</span>
</span><span id="L-2554"><a href="#L-2554"><span class="linenos">2554</span></a>
</span><span id="L-2555"><a href="#L-2555"><span class="linenos">2555</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2556"><a href="#L-2556"><span class="linenos">2556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2557"><a href="#L-2557"><span class="linenos">2557</span></a>        <span class="n">displayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_displayname</span><span class="p">()</span>
</span><span id="L-2558"><a href="#L-2558"><span class="linenos">2558</span></a>        <span class="k">if</span> <span class="n">displayname</span><span class="p">:</span>
</span><span id="L-2559"><a href="#L-2559"><span class="linenos">2559</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_displayname</span><span class="p">(</span><span class="n">displayname</span><span class="p">)</span>
</span><span id="L-2560"><a href="#L-2560"><span class="linenos">2560</span></a>
</span><span id="L-2561"><a href="#L-2561"><span class="linenos">2561</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2562"><a href="#L-2562"><span class="linenos">2562</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2563"><a href="#L-2563"><span class="linenos">2563</span></a><span class="sd">        Copy image name from this xml state to the target xml state</span>
</span><span id="L-2564"><a href="#L-2564"><span class="linenos">2564</span></a>
</span><span id="L-2565"><a href="#L-2565"><span class="linenos">2565</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2566"><a href="#L-2566"><span class="linenos">2566</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2567"><a href="#L-2567"><span class="linenos">2567</span></a>        <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span>
</span><span id="L-2568"><a href="#L-2568"><span class="linenos">2568</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-2569"><a href="#L-2569"><span class="linenos">2569</span></a>        <span class="p">)</span>
</span><span id="L-2570"><a href="#L-2570"><span class="linenos">2570</span></a>
</span><span id="L-2571"><a href="#L-2571"><span class="linenos">2571</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_drivers_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2572"><a href="#L-2572"><span class="linenos">2572</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2573"><a href="#L-2573"><span class="linenos">2573</span></a><span class="sd">        Copy drivers sections from this xml state to the target xml state</span>
</span><span id="L-2574"><a href="#L-2574"><span class="linenos">2574</span></a>
</span><span id="L-2575"><a href="#L-2575"><span class="linenos">2575</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2576"><a href="#L-2576"><span class="linenos">2576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2577"><a href="#L-2577"><span class="linenos">2577</span></a>        <span class="n">drivers_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2578"><a href="#L-2578"><span class="linenos">2578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_drivers</span><span class="p">()</span>
</span><span id="L-2579"><a href="#L-2579"><span class="linenos">2579</span></a>        <span class="p">)</span>
</span><span id="L-2580"><a href="#L-2580"><span class="linenos">2580</span></a>        <span class="k">if</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="L-2581"><a href="#L-2581"><span class="linenos">2581</span></a>            <span class="k">for</span> <span class="n">drivers_section</span> <span class="ow">in</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="L-2582"><a href="#L-2582"><span class="linenos">2582</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_drivers</span><span class="p">(</span><span class="n">drivers_section</span><span class="p">)</span>
</span><span id="L-2583"><a href="#L-2583"><span class="linenos">2583</span></a>
</span><span id="L-2584"><a href="#L-2584"><span class="linenos">2584</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_systemdisk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2585"><a href="#L-2585"><span class="linenos">2585</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2586"><a href="#L-2586"><span class="linenos">2586</span></a><span class="sd">        Copy systemdisk sections from this xml state to the target xml state</span>
</span><span id="L-2587"><a href="#L-2587"><span class="linenos">2587</span></a>
</span><span id="L-2588"><a href="#L-2588"><span class="linenos">2588</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2589"><a href="#L-2589"><span class="linenos">2589</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2590"><a href="#L-2590"><span class="linenos">2590</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="L-2591"><a href="#L-2591"><span class="linenos">2591</span></a>        <span class="k">if</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="L-2592"><a href="#L-2592"><span class="linenos">2592</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_systemdisk</span><span class="p">(</span>
</span><span id="L-2593"><a href="#L-2593"><span class="linenos">2593</span></a>                <span class="p">[</span><span class="n">systemdisk_section</span><span class="p">]</span>
</span><span id="L-2594"><a href="#L-2594"><span class="linenos">2594</span></a>            <span class="p">)</span>
</span><span id="L-2595"><a href="#L-2595"><span class="linenos">2595</span></a>
</span><span id="L-2596"><a href="#L-2596"><span class="linenos">2596</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_strip_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2597"><a href="#L-2597"><span class="linenos">2597</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2598"><a href="#L-2598"><span class="linenos">2598</span></a><span class="sd">        Copy strip sections from this xml state to the target xml state</span>
</span><span id="L-2599"><a href="#L-2599"><span class="linenos">2599</span></a>
</span><span id="L-2600"><a href="#L-2600"><span class="linenos">2600</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2601"><a href="#L-2601"><span class="linenos">2601</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2602"><a href="#L-2602"><span class="linenos">2602</span></a>        <span class="n">strip_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2603"><a href="#L-2603"><span class="linenos">2603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_strip</span><span class="p">()</span>
</span><span id="L-2604"><a href="#L-2604"><span class="linenos">2604</span></a>        <span class="p">)</span>
</span><span id="L-2605"><a href="#L-2605"><span class="linenos">2605</span></a>        <span class="k">if</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="L-2606"><a href="#L-2606"><span class="linenos">2606</span></a>            <span class="k">for</span> <span class="n">strip_section</span> <span class="ow">in</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="L-2607"><a href="#L-2607"><span class="linenos">2607</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_strip</span><span class="p">(</span><span class="n">strip_section</span><span class="p">)</span>
</span><span id="L-2608"><a href="#L-2608"><span class="linenos">2608</span></a>
</span><span id="L-2609"><a href="#L-2609"><span class="linenos">2609</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_machine_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2610"><a href="#L-2610"><span class="linenos">2610</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2611"><a href="#L-2611"><span class="linenos">2611</span></a><span class="sd">        Copy machine sections from this xml state to the target xml state</span>
</span><span id="L-2612"><a href="#L-2612"><span class="linenos">2612</span></a>
</span><span id="L-2613"><a href="#L-2613"><span class="linenos">2613</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2614"><a href="#L-2614"><span class="linenos">2614</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2615"><a href="#L-2615"><span class="linenos">2615</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="L-2616"><a href="#L-2616"><span class="linenos">2616</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="L-2617"><a href="#L-2617"><span class="linenos">2617</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_machine</span><span class="p">(</span>
</span><span id="L-2618"><a href="#L-2618"><span class="linenos">2618</span></a>                <span class="p">[</span><span class="n">machine_section</span><span class="p">]</span>
</span><span id="L-2619"><a href="#L-2619"><span class="linenos">2619</span></a>            <span class="p">)</span>
</span><span id="L-2620"><a href="#L-2620"><span class="linenos">2620</span></a>
</span><span id="L-2621"><a href="#L-2621"><span class="linenos">2621</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootloader_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2622"><a href="#L-2622"><span class="linenos">2622</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2623"><a href="#L-2623"><span class="linenos">2623</span></a><span class="sd">        Copy bootloader section from this xml state to the target xml state</span>
</span><span id="L-2624"><a href="#L-2624"><span class="linenos">2624</span></a>
</span><span id="L-2625"><a href="#L-2625"><span class="linenos">2625</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2626"><a href="#L-2626"><span class="linenos">2626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2627"><a href="#L-2627"><span class="linenos">2627</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="L-2628"><a href="#L-2628"><span class="linenos">2628</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span><span class="p">:</span>
</span><span id="L-2629"><a href="#L-2629"><span class="linenos">2629</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_bootloader</span><span class="p">(</span>
</span><span id="L-2630"><a href="#L-2630"><span class="linenos">2630</span></a>                <span class="p">[</span><span class="n">bootloader_section</span><span class="p">]</span>
</span><span id="L-2631"><a href="#L-2631"><span class="linenos">2631</span></a>            <span class="p">)</span>
</span><span id="L-2632"><a href="#L-2632"><span class="linenos">2632</span></a>
</span><span id="L-2633"><a href="#L-2633"><span class="linenos">2633</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_oemconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2634"><a href="#L-2634"><span class="linenos">2634</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2635"><a href="#L-2635"><span class="linenos">2635</span></a><span class="sd">        Copy oemconfig sections from this xml state to the target xml state</span>
</span><span id="L-2636"><a href="#L-2636"><span class="linenos">2636</span></a>
</span><span id="L-2637"><a href="#L-2637"><span class="linenos">2637</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2638"><a href="#L-2638"><span class="linenos">2638</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2639"><a href="#L-2639"><span class="linenos">2639</span></a>        <span class="n">oemconfig_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="L-2640"><a href="#L-2640"><span class="linenos">2640</span></a>        <span class="k">if</span> <span class="n">oemconfig_section</span><span class="p">:</span>
</span><span id="L-2641"><a href="#L-2641"><span class="linenos">2641</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_oemconfig</span><span class="p">(</span>
</span><span id="L-2642"><a href="#L-2642"><span class="linenos">2642</span></a>                <span class="p">[</span><span class="n">oemconfig_section</span><span class="p">]</span>
</span><span id="L-2643"><a href="#L-2643"><span class="linenos">2643</span></a>            <span class="p">)</span>
</span><span id="L-2644"><a href="#L-2644"><span class="linenos">2644</span></a>
</span><span id="L-2645"><a href="#L-2645"><span class="linenos">2645</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_repository_sections</span><span class="p">(</span>
</span><span id="L-2646"><a href="#L-2646"><span class="linenos">2646</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">wipe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2647"><a href="#L-2647"><span class="linenos">2647</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2648"><a href="#L-2648"><span class="linenos">2648</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2649"><a href="#L-2649"><span class="linenos">2649</span></a><span class="sd">        Copy repository sections from this xml state to the target xml state</span>
</span><span id="L-2650"><a href="#L-2650"><span class="linenos">2650</span></a>
</span><span id="L-2651"><a href="#L-2651"><span class="linenos">2651</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2652"><a href="#L-2652"><span class="linenos">2652</span></a><span class="sd">        :param bool wipe: delete all repos in target prior to copy</span>
</span><span id="L-2653"><a href="#L-2653"><span class="linenos">2653</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2654"><a href="#L-2654"><span class="linenos">2654</span></a>        <span class="n">repository_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="L-2655"><a href="#L-2655"><span class="linenos">2655</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_repository</span><span class="p">()</span>
</span><span id="L-2656"><a href="#L-2656"><span class="linenos">2656</span></a>        <span class="p">)</span>
</span><span id="L-2657"><a href="#L-2657"><span class="linenos">2657</span></a>        <span class="k">if</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="L-2658"><a href="#L-2658"><span class="linenos">2658</span></a>            <span class="k">if</span> <span class="n">wipe</span><span class="p">:</span>
</span><span id="L-2659"><a href="#L-2659"><span class="linenos">2659</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">([])</span>
</span><span id="L-2660"><a href="#L-2660"><span class="linenos">2660</span></a>            <span class="k">for</span> <span class="n">repository_section</span> <span class="ow">in</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="L-2661"><a href="#L-2661"><span class="linenos">2661</span></a>                <span class="n">repository_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">repository_section</span><span class="p">)</span>
</span><span id="L-2662"><a href="#L-2662"><span class="linenos">2662</span></a>                <span class="c1"># profiles are not copied because they might not exist</span>
</span><span id="L-2663"><a href="#L-2663"><span class="linenos">2663</span></a>                <span class="c1"># in the target description</span>
</span><span id="L-2664"><a href="#L-2664"><span class="linenos">2664</span></a>                <span class="n">repository_copy</span><span class="o">.</span><span class="n">set_profiles</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span><span id="L-2665"><a href="#L-2665"><span class="linenos">2665</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_repository</span><span class="p">(</span><span class="n">repository_copy</span><span class="p">)</span>
</span><span id="L-2666"><a href="#L-2666"><span class="linenos">2666</span></a>
</span><span id="L-2667"><a href="#L-2667"><span class="linenos">2667</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_preferences_subsections</span><span class="p">(</span>
</span><span id="L-2668"><a href="#L-2668"><span class="linenos">2668</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">section_names</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="L-2669"><a href="#L-2669"><span class="linenos">2669</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2670"><a href="#L-2670"><span class="linenos">2670</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2671"><a href="#L-2671"><span class="linenos">2671</span></a><span class="sd">        Copy subsections of the preferences sections, matching given</span>
</span><span id="L-2672"><a href="#L-2672"><span class="linenos">2672</span></a><span class="sd">        section names, from this xml state to the target xml state</span>
</span><span id="L-2673"><a href="#L-2673"><span class="linenos">2673</span></a>
</span><span id="L-2674"><a href="#L-2674"><span class="linenos">2674</span></a><span class="sd">        :param list section_names: preferences subsection names</span>
</span><span id="L-2675"><a href="#L-2675"><span class="linenos">2675</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2676"><a href="#L-2676"><span class="linenos">2676</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2677"><a href="#L-2677"><span class="linenos">2677</span></a>        <span class="n">target_preferences_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">()</span>
</span><span id="L-2678"><a href="#L-2678"><span class="linenos">2678</span></a>        <span class="k">if</span> <span class="n">target_preferences_sections</span><span class="p">:</span>
</span><span id="L-2679"><a href="#L-2679"><span class="linenos">2679</span></a>            <span class="n">target_preferences_section</span> <span class="o">=</span> <span class="n">target_preferences_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2680"><a href="#L-2680"><span class="linenos">2680</span></a>            <span class="k">for</span> <span class="n">preferences_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-2681"><a href="#L-2681"><span class="linenos">2681</span></a>                <span class="k">for</span> <span class="n">section_name</span> <span class="ow">in</span> <span class="n">section_names</span><span class="p">:</span>
</span><span id="L-2682"><a href="#L-2682"><span class="linenos">2682</span></a>                    <span class="n">get_section_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="L-2683"><a href="#L-2683"><span class="linenos">2683</span></a>                        <span class="n">preferences_section</span><span class="p">,</span> <span class="s1">&#39;get_&#39;</span> <span class="o">+</span> <span class="n">section_name</span>
</span><span id="L-2684"><a href="#L-2684"><span class="linenos">2684</span></a>                    <span class="p">)</span>
</span><span id="L-2685"><a href="#L-2685"><span class="linenos">2685</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">get_section_method</span><span class="p">()</span>
</span><span id="L-2686"><a href="#L-2686"><span class="linenos">2686</span></a>                    <span class="k">if</span> <span class="n">section</span><span class="p">:</span>
</span><span id="L-2687"><a href="#L-2687"><span class="linenos">2687</span></a>                        <span class="n">set_section_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="L-2688"><a href="#L-2688"><span class="linenos">2688</span></a>                            <span class="n">target_preferences_section</span><span class="p">,</span> <span class="s1">&#39;set_&#39;</span> <span class="o">+</span> <span class="n">section_name</span>
</span><span id="L-2689"><a href="#L-2689"><span class="linenos">2689</span></a>                        <span class="p">)</span>
</span><span id="L-2690"><a href="#L-2690"><span class="linenos">2690</span></a>                        <span class="n">set_section_method</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span><span id="L-2691"><a href="#L-2691"><span class="linenos">2691</span></a>
</span><span id="L-2692"><a href="#L-2692"><span class="linenos">2692</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_build_type_attributes</span><span class="p">(</span>
</span><span id="L-2693"><a href="#L-2693"><span class="linenos">2693</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">attribute_names</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="L-2694"><a href="#L-2694"><span class="linenos">2694</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2695"><a href="#L-2695"><span class="linenos">2695</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2696"><a href="#L-2696"><span class="linenos">2696</span></a><span class="sd">        Copy specified attributes from this build type section to the</span>
</span><span id="L-2697"><a href="#L-2697"><span class="linenos">2697</span></a><span class="sd">        target xml state build type section</span>
</span><span id="L-2698"><a href="#L-2698"><span class="linenos">2698</span></a>
</span><span id="L-2699"><a href="#L-2699"><span class="linenos">2699</span></a><span class="sd">        :param list attribute_names: type section attributes</span>
</span><span id="L-2700"><a href="#L-2700"><span class="linenos">2700</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2701"><a href="#L-2701"><span class="linenos">2701</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2702"><a href="#L-2702"><span class="linenos">2702</span></a>        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attribute_names</span><span class="p">:</span>
</span><span id="L-2703"><a href="#L-2703"><span class="linenos">2703</span></a>            <span class="n">get_type_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="L-2704"><a href="#L-2704"><span class="linenos">2704</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="p">,</span> <span class="s1">&#39;get_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
</span><span id="L-2705"><a href="#L-2705"><span class="linenos">2705</span></a>            <span class="p">)</span>
</span><span id="L-2706"><a href="#L-2706"><span class="linenos">2706</span></a>            <span class="n">attribute_value</span> <span class="o">=</span> <span class="n">get_type_method</span><span class="p">()</span>
</span><span id="L-2707"><a href="#L-2707"><span class="linenos">2707</span></a>            <span class="k">if</span> <span class="n">attribute_value</span><span class="p">:</span>
</span><span id="L-2708"><a href="#L-2708"><span class="linenos">2708</span></a>                <span class="n">set_type_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="L-2709"><a href="#L-2709"><span class="linenos">2709</span></a>                    <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="p">,</span> <span class="s1">&#39;set_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
</span><span id="L-2710"><a href="#L-2710"><span class="linenos">2710</span></a>                <span class="p">)</span>
</span><span id="L-2711"><a href="#L-2711"><span class="linenos">2711</span></a>                <span class="n">set_type_method</span><span class="p">(</span><span class="n">attribute_value</span><span class="p">)</span>
</span><span id="L-2712"><a href="#L-2712"><span class="linenos">2712</span></a>
</span><span id="L-2713"><a href="#L-2713"><span class="linenos">2713</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootincluded_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2714"><a href="#L-2714"><span class="linenos">2714</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2715"><a href="#L-2715"><span class="linenos">2715</span></a><span class="sd">        Copy packages marked as bootinclude to the packages</span>
</span><span id="L-2716"><a href="#L-2716"><span class="linenos">2716</span></a><span class="sd">        type=bootstrap section in the target xml state. The package</span>
</span><span id="L-2717"><a href="#L-2717"><span class="linenos">2717</span></a><span class="sd">        will also be removed from the packages type=delete section</span>
</span><span id="L-2718"><a href="#L-2718"><span class="linenos">2718</span></a><span class="sd">        in the target xml state if present there</span>
</span><span id="L-2719"><a href="#L-2719"><span class="linenos">2719</span></a>
</span><span id="L-2720"><a href="#L-2720"><span class="linenos">2720</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2721"><a href="#L-2721"><span class="linenos">2721</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2722"><a href="#L-2722"><span class="linenos">2722</span></a>        <span class="n">target_packages_sections</span> <span class="o">=</span> \
</span><span id="L-2723"><a href="#L-2723"><span class="linenos">2723</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="L-2724"><a href="#L-2724"><span class="linenos">2724</span></a>        <span class="k">if</span> <span class="n">target_packages_sections</span><span class="p">:</span>
</span><span id="L-2725"><a href="#L-2725"><span class="linenos">2725</span></a>            <span class="n">target_packages_section</span> <span class="o">=</span> \
</span><span id="L-2726"><a href="#L-2726"><span class="linenos">2726</span></a>                <span class="n">target_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2727"><a href="#L-2727"><span class="linenos">2727</span></a>            <span class="n">package_names_added</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2728"><a href="#L-2728"><span class="linenos">2728</span></a>            <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-2729"><a href="#L-2729"><span class="linenos">2729</span></a>                <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-2730"><a href="#L-2730"><span class="linenos">2730</span></a>            <span class="p">)</span>
</span><span id="L-2731"><a href="#L-2731"><span class="linenos">2731</span></a>            <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="L-2732"><a href="#L-2732"><span class="linenos">2732</span></a>                <span class="n">packages_sections</span>
</span><span id="L-2733"><a href="#L-2733"><span class="linenos">2733</span></a>            <span class="p">)</span>
</span><span id="L-2734"><a href="#L-2734"><span class="linenos">2734</span></a>            <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-2735"><a href="#L-2735"><span class="linenos">2735</span></a>                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-2736"><a href="#L-2736"><span class="linenos">2736</span></a>                    <span class="k">if</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_bootinclude</span><span class="p">():</span>
</span><span id="L-2737"><a href="#L-2737"><span class="linenos">2737</span></a>                        <span class="n">target_packages_section</span><span class="o">.</span><span class="n">add_package</span><span class="p">(</span>
</span><span id="L-2738"><a href="#L-2738"><span class="linenos">2738</span></a>                            <span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span><span class="p">(</span>
</span><span id="L-2739"><a href="#L-2739"><span class="linenos">2739</span></a>                                <span class="n">name</span><span class="o">=</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-2740"><a href="#L-2740"><span class="linenos">2740</span></a>                            <span class="p">)</span>
</span><span id="L-2741"><a href="#L-2741"><span class="linenos">2741</span></a>                        <span class="p">)</span>
</span><span id="L-2742"><a href="#L-2742"><span class="linenos">2742</span></a>                        <span class="n">package_names_added</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-2743"><a href="#L-2743"><span class="linenos">2743</span></a>                            <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-2744"><a href="#L-2744"><span class="linenos">2744</span></a>                        <span class="p">)</span>
</span><span id="L-2745"><a href="#L-2745"><span class="linenos">2745</span></a>            <span class="n">delete_packages_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-2746"><a href="#L-2746"><span class="linenos">2746</span></a>                <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">]</span>
</span><span id="L-2747"><a href="#L-2747"><span class="linenos">2747</span></a>            <span class="p">)</span>
</span><span id="L-2748"><a href="#L-2748"><span class="linenos">2748</span></a>            <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="L-2749"><a href="#L-2749"><span class="linenos">2749</span></a>                <span class="n">delete_packages_sections</span>
</span><span id="L-2750"><a href="#L-2750"><span class="linenos">2750</span></a>            <span class="p">)</span>
</span><span id="L-2751"><a href="#L-2751"><span class="linenos">2751</span></a>            <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-2752"><a href="#L-2752"><span class="linenos">2752</span></a>                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-2753"><a href="#L-2753"><span class="linenos">2753</span></a>                    <span class="n">package_name</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-2754"><a href="#L-2754"><span class="linenos">2754</span></a>                    <span class="k">if</span> <span class="n">package_name</span> <span class="ow">in</span> <span class="n">package_names_added</span><span class="p">:</span>
</span><span id="L-2755"><a href="#L-2755"><span class="linenos">2755</span></a>                        <span class="n">package</span><span class="o">.</span><span class="n">packages_section</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span>
</span><span id="L-2756"><a href="#L-2756"><span class="linenos">2756</span></a>                            <span class="n">package</span><span class="o">.</span><span class="n">package_section</span>
</span><span id="L-2757"><a href="#L-2757"><span class="linenos">2757</span></a>                        <span class="p">)</span>
</span><span id="L-2758"><a href="#L-2758"><span class="linenos">2758</span></a>
</span><span id="L-2759"><a href="#L-2759"><span class="linenos">2759</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootincluded_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2760"><a href="#L-2760"><span class="linenos">2760</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2761"><a href="#L-2761"><span class="linenos">2761</span></a><span class="sd">        Copy archives marked as bootinclude to the packages type=bootstrap</span>
</span><span id="L-2762"><a href="#L-2762"><span class="linenos">2762</span></a><span class="sd">        section in the target xml state</span>
</span><span id="L-2763"><a href="#L-2763"><span class="linenos">2763</span></a>
</span><span id="L-2764"><a href="#L-2764"><span class="linenos">2764</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2765"><a href="#L-2765"><span class="linenos">2765</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2766"><a href="#L-2766"><span class="linenos">2766</span></a>        <span class="n">target_bootstrap_packages_sections</span> <span class="o">=</span> \
</span><span id="L-2767"><a href="#L-2767"><span class="linenos">2767</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="L-2768"><a href="#L-2768"><span class="linenos">2768</span></a>        <span class="k">if</span> <span class="n">target_bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="L-2769"><a href="#L-2769"><span class="linenos">2769</span></a>            <span class="n">target_bootstrap_packages_section</span> <span class="o">=</span> \
</span><span id="L-2770"><a href="#L-2770"><span class="linenos">2770</span></a>                <span class="n">target_bootstrap_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2771"><a href="#L-2771"><span class="linenos">2771</span></a>            <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-2772"><a href="#L-2772"><span class="linenos">2772</span></a>                <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-2773"><a href="#L-2773"><span class="linenos">2773</span></a>            <span class="p">)</span>
</span><span id="L-2774"><a href="#L-2774"><span class="linenos">2774</span></a>            <span class="k">for</span> <span class="n">packages_section</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="L-2775"><a href="#L-2775"><span class="linenos">2775</span></a>                <span class="n">archive_list</span> <span class="o">=</span> <span class="n">packages_section</span><span class="o">.</span><span class="n">get_archive</span><span class="p">()</span>
</span><span id="L-2776"><a href="#L-2776"><span class="linenos">2776</span></a>                <span class="k">if</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="L-2777"><a href="#L-2777"><span class="linenos">2777</span></a>                    <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="L-2778"><a href="#L-2778"><span class="linenos">2778</span></a>                        <span class="k">if</span> <span class="n">archive</span><span class="o">.</span><span class="n">get_bootinclude</span><span class="p">():</span>
</span><span id="L-2779"><a href="#L-2779"><span class="linenos">2779</span></a>                            <span class="n">target_bootstrap_packages_section</span><span class="o">.</span><span class="n">add_archive</span><span class="p">(</span>
</span><span id="L-2780"><a href="#L-2780"><span class="linenos">2780</span></a>                                <span class="n">xml_parse</span><span class="o">.</span><span class="n">archive</span><span class="p">(</span>
</span><span id="L-2781"><a href="#L-2781"><span class="linenos">2781</span></a>                                    <span class="n">name</span><span class="o">=</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-2782"><a href="#L-2782"><span class="linenos">2782</span></a>                                <span class="p">)</span>
</span><span id="L-2783"><a href="#L-2783"><span class="linenos">2783</span></a>                            <span class="p">)</span>
</span><span id="L-2784"><a href="#L-2784"><span class="linenos">2784</span></a>
</span><span id="L-2785"><a href="#L-2785"><span class="linenos">2785</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootdelete_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2786"><a href="#L-2786"><span class="linenos">2786</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2787"><a href="#L-2787"><span class="linenos">2787</span></a><span class="sd">        Copy packages marked as bootdelete to the packages type=delete</span>
</span><span id="L-2788"><a href="#L-2788"><span class="linenos">2788</span></a><span class="sd">        section in the target xml state</span>
</span><span id="L-2789"><a href="#L-2789"><span class="linenos">2789</span></a>
</span><span id="L-2790"><a href="#L-2790"><span class="linenos">2790</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="L-2791"><a href="#L-2791"><span class="linenos">2791</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2792"><a href="#L-2792"><span class="linenos">2792</span></a>        <span class="n">target_delete_packages_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-2793"><a href="#L-2793"><span class="linenos">2793</span></a>            <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">]</span>
</span><span id="L-2794"><a href="#L-2794"><span class="linenos">2794</span></a>        <span class="p">)</span>
</span><span id="L-2795"><a href="#L-2795"><span class="linenos">2795</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">target_delete_packages_sections</span><span class="p">:</span>
</span><span id="L-2796"><a href="#L-2796"><span class="linenos">2796</span></a>            <span class="n">target_delete_packages_sections</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-2797"><a href="#L-2797"><span class="linenos">2797</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</span><span id="L-2798"><a href="#L-2798"><span class="linenos">2798</span></a>            <span class="p">]</span>
</span><span id="L-2799"><a href="#L-2799"><span class="linenos">2799</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_packages</span><span class="p">(</span>
</span><span id="L-2800"><a href="#L-2800"><span class="linenos">2800</span></a>                <span class="n">target_delete_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2801"><a href="#L-2801"><span class="linenos">2801</span></a>            <span class="p">)</span>
</span><span id="L-2802"><a href="#L-2802"><span class="linenos">2802</span></a>
</span><span id="L-2803"><a href="#L-2803"><span class="linenos">2803</span></a>        <span class="n">target_delete_packages_section</span> <span class="o">=</span> \
</span><span id="L-2804"><a href="#L-2804"><span class="linenos">2804</span></a>            <span class="n">target_delete_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2805"><a href="#L-2805"><span class="linenos">2805</span></a>        <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="L-2806"><a href="#L-2806"><span class="linenos">2806</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="L-2807"><a href="#L-2807"><span class="linenos">2807</span></a>        <span class="p">)</span>
</span><span id="L-2808"><a href="#L-2808"><span class="linenos">2808</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="L-2809"><a href="#L-2809"><span class="linenos">2809</span></a>            <span class="n">packages_sections</span>
</span><span id="L-2810"><a href="#L-2810"><span class="linenos">2810</span></a>        <span class="p">)</span>
</span><span id="L-2811"><a href="#L-2811"><span class="linenos">2811</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-2812"><a href="#L-2812"><span class="linenos">2812</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="L-2813"><a href="#L-2813"><span class="linenos">2813</span></a>                <span class="k">if</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_bootdelete</span><span class="p">():</span>
</span><span id="L-2814"><a href="#L-2814"><span class="linenos">2814</span></a>                    <span class="n">target_delete_packages_section</span><span class="o">.</span><span class="n">add_package</span><span class="p">(</span>
</span><span id="L-2815"><a href="#L-2815"><span class="linenos">2815</span></a>                        <span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span><span class="p">(</span>
</span><span id="L-2816"><a href="#L-2816"><span class="linenos">2816</span></a>                            <span class="n">name</span><span class="o">=</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-2817"><a href="#L-2817"><span class="linenos">2817</span></a>                        <span class="p">)</span>
</span><span id="L-2818"><a href="#L-2818"><span class="linenos">2818</span></a>                    <span class="p">)</span>
</span><span id="L-2819"><a href="#L-2819"><span class="linenos">2819</span></a>
</span><span id="L-2820"><a href="#L-2820"><span class="linenos">2820</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_distribution_name_from_boot_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2821"><a href="#L-2821"><span class="linenos">2821</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2822"><a href="#L-2822"><span class="linenos">2822</span></a><span class="sd">        Extract the distribution name from the boot attribute of the</span>
</span><span id="L-2823"><a href="#L-2823"><span class="linenos">2823</span></a><span class="sd">        build type section.</span>
</span><span id="L-2824"><a href="#L-2824"><span class="linenos">2824</span></a>
</span><span id="L-2825"><a href="#L-2825"><span class="linenos">2825</span></a><span class="sd">        If no boot attribute is configured or the contents does not</span>
</span><span id="L-2826"><a href="#L-2826"><span class="linenos">2826</span></a><span class="sd">        match the kiwi defined naming schema for boot image descriptions,</span>
</span><span id="L-2827"><a href="#L-2827"><span class="linenos">2827</span></a><span class="sd">        an exception is thrown</span>
</span><span id="L-2828"><a href="#L-2828"><span class="linenos">2828</span></a>
</span><span id="L-2829"><a href="#L-2829"><span class="linenos">2829</span></a><span class="sd">        :return: lowercase distribution name</span>
</span><span id="L-2830"><a href="#L-2830"><span class="linenos">2830</span></a>
</span><span id="L-2831"><a href="#L-2831"><span class="linenos">2831</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-2832"><a href="#L-2832"><span class="linenos">2832</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2833"><a href="#L-2833"><span class="linenos">2833</span></a>        <span class="n">boot_attribute</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_boot</span><span class="p">()</span>
</span><span id="L-2834"><a href="#L-2834"><span class="linenos">2834</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">boot_attribute</span><span class="p">:</span>
</span><span id="L-2835"><a href="#L-2835"><span class="linenos">2835</span></a>            <span class="k">raise</span> <span class="n">KiwiDistributionNameError</span><span class="p">(</span>
</span><span id="L-2836"><a href="#L-2836"><span class="linenos">2836</span></a>                <span class="s1">&#39;No boot attribute to extract distribution name from found&#39;</span>
</span><span id="L-2837"><a href="#L-2837"><span class="linenos">2837</span></a>            <span class="p">)</span>
</span><span id="L-2838"><a href="#L-2838"><span class="linenos">2838</span></a>        <span class="n">boot_attribute_format</span> <span class="o">=</span> <span class="s1">&#39;^.*-(.*)$&#39;</span>
</span><span id="L-2839"><a href="#L-2839"><span class="linenos">2839</span></a>        <span class="n">boot_attribute_expression</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="L-2840"><a href="#L-2840"><span class="linenos">2840</span></a>            <span class="n">boot_attribute_format</span><span class="p">,</span> <span class="n">boot_attribute</span>
</span><span id="L-2841"><a href="#L-2841"><span class="linenos">2841</span></a>        <span class="p">)</span>
</span><span id="L-2842"><a href="#L-2842"><span class="linenos">2842</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">boot_attribute_expression</span><span class="p">:</span>
</span><span id="L-2843"><a href="#L-2843"><span class="linenos">2843</span></a>            <span class="k">raise</span> <span class="n">KiwiDistributionNameError</span><span class="p">(</span>
</span><span id="L-2844"><a href="#L-2844"><span class="linenos">2844</span></a>                <span class="s1">&#39;Boot attribute &quot;</span><span class="si">%s</span><span class="s1">&quot; does not match expected format </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="L-2845"><a href="#L-2845"><span class="linenos">2845</span></a>                <span class="p">(</span><span class="n">boot_attribute</span><span class="p">,</span> <span class="n">boot_attribute_format</span><span class="p">)</span>
</span><span id="L-2846"><a href="#L-2846"><span class="linenos">2846</span></a>            <span class="p">)</span>
</span><span id="L-2847"><a href="#L-2847"><span class="linenos">2847</span></a>        <span class="k">return</span> <span class="n">boot_attribute_expression</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-2848"><a href="#L-2848"><span class="linenos">2848</span></a>
</span><span id="L-2849"><a href="#L-2849"><span class="linenos">2849</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_fs_mount_option_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2850"><a href="#L-2850"><span class="linenos">2850</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2851"><a href="#L-2851"><span class="linenos">2851</span></a><span class="sd">        List of root filesystem mount options</span>
</span><span id="L-2852"><a href="#L-2852"><span class="linenos">2852</span></a>
</span><span id="L-2853"><a href="#L-2853"><span class="linenos">2853</span></a><span class="sd">        The list contains one element with the information from the</span>
</span><span id="L-2854"><a href="#L-2854"><span class="linenos">2854</span></a><span class="sd">        fsmountoptions attribute. The value there is passed along to</span>
</span><span id="L-2855"><a href="#L-2855"><span class="linenos">2855</span></a><span class="sd">        the -o mount option</span>
</span><span id="L-2856"><a href="#L-2856"><span class="linenos">2856</span></a>
</span><span id="L-2857"><a href="#L-2857"><span class="linenos">2857</span></a><span class="sd">        :return: max one element list with mount option string</span>
</span><span id="L-2858"><a href="#L-2858"><span class="linenos">2858</span></a>
</span><span id="L-2859"><a href="#L-2859"><span class="linenos">2859</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2860"><a href="#L-2860"><span class="linenos">2860</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2861"><a href="#L-2861"><span class="linenos">2861</span></a>        <span class="n">option_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2862"><a href="#L-2862"><span class="linenos">2862</span></a>        <span class="n">mount_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_fsmountoptions</span><span class="p">()</span>
</span><span id="L-2863"><a href="#L-2863"><span class="linenos">2863</span></a>        <span class="k">if</span> <span class="n">mount_options</span><span class="p">:</span>
</span><span id="L-2864"><a href="#L-2864"><span class="linenos">2864</span></a>            <span class="n">option_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">mount_options</span><span class="p">]</span>
</span><span id="L-2865"><a href="#L-2865"><span class="linenos">2865</span></a>
</span><span id="L-2866"><a href="#L-2866"><span class="linenos">2866</span></a>        <span class="k">return</span> <span class="n">option_list</span>
</span><span id="L-2867"><a href="#L-2867"><span class="linenos">2867</span></a>
</span><span id="L-2868"><a href="#L-2868"><span class="linenos">2868</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_fs_create_option_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="L-2869"><a href="#L-2869"><span class="linenos">2869</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2870"><a href="#L-2870"><span class="linenos">2870</span></a><span class="sd">        List of root filesystem creation options</span>
</span><span id="L-2871"><a href="#L-2871"><span class="linenos">2871</span></a>
</span><span id="L-2872"><a href="#L-2872"><span class="linenos">2872</span></a><span class="sd">        The list contains elements with the information from the</span>
</span><span id="L-2873"><a href="#L-2873"><span class="linenos">2873</span></a><span class="sd">        fscreateoptions attribute string that got split into its</span>
</span><span id="L-2874"><a href="#L-2874"><span class="linenos">2874</span></a><span class="sd">        substring components</span>
</span><span id="L-2875"><a href="#L-2875"><span class="linenos">2875</span></a>
</span><span id="L-2876"><a href="#L-2876"><span class="linenos">2876</span></a><span class="sd">        :return: list with create options</span>
</span><span id="L-2877"><a href="#L-2877"><span class="linenos">2877</span></a>
</span><span id="L-2878"><a href="#L-2878"><span class="linenos">2878</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2879"><a href="#L-2879"><span class="linenos">2879</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2880"><a href="#L-2880"><span class="linenos">2880</span></a>        <span class="n">option_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2881"><a href="#L-2881"><span class="linenos">2881</span></a>        <span class="n">create_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_fscreateoptions</span><span class="p">()</span>
</span><span id="L-2882"><a href="#L-2882"><span class="linenos">2882</span></a>        <span class="k">if</span> <span class="n">create_options</span><span class="p">:</span>
</span><span id="L-2883"><a href="#L-2883"><span class="linenos">2883</span></a>            <span class="n">option_list</span> <span class="o">=</span> <span class="n">create_options</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</span><span id="L-2884"><a href="#L-2884"><span class="linenos">2884</span></a>
</span><span id="L-2885"><a href="#L-2885"><span class="linenos">2885</span></a>        <span class="k">return</span> <span class="n">option_list</span>
</span><span id="L-2886"><a href="#L-2886"><span class="linenos">2886</span></a>
</span><span id="L-2887"><a href="#L-2887"><span class="linenos">2887</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_luks_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-2888"><a href="#L-2888"><span class="linenos">2888</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2889"><a href="#L-2889"><span class="linenos">2889</span></a><span class="sd">        Return key or passphrase credentials to open the luks pool</span>
</span><span id="L-2890"><a href="#L-2890"><span class="linenos">2890</span></a>
</span><span id="L-2891"><a href="#L-2891"><span class="linenos">2891</span></a><span class="sd">        :return: data</span>
</span><span id="L-2892"><a href="#L-2892"><span class="linenos">2892</span></a>
</span><span id="L-2893"><a href="#L-2893"><span class="linenos">2893</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-2894"><a href="#L-2894"><span class="linenos">2894</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2895"><a href="#L-2895"><span class="linenos">2895</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks</span><span class="p">()</span>
</span><span id="L-2896"><a href="#L-2896"><span class="linenos">2896</span></a>        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
</span><span id="L-2897"><a href="#L-2897"><span class="linenos">2897</span></a>            <span class="n">keyfile_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2898"><a href="#L-2898"><span class="linenos">2898</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-2899"><a href="#L-2899"><span class="linenos">2899</span></a>                <span class="c1"># try to interpret data as an URI</span>
</span><span id="L-2900"><a href="#L-2900"><span class="linenos">2900</span></a>                <span class="n">uri</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-2901"><a href="#L-2901"><span class="linenos">2901</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">is_remote</span><span class="p">():</span>
</span><span id="L-2902"><a href="#L-2902"><span class="linenos">2902</span></a>                    <span class="n">keyfile_name</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="L-2903"><a href="#L-2903"><span class="linenos">2903</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="L-2904"><a href="#L-2904"><span class="linenos">2904</span></a>                <span class="c1"># this doesn&#39;t look like a valid URI, continue as just data</span>
</span><span id="L-2905"><a href="#L-2905"><span class="linenos">2905</span></a>                <span class="k">pass</span>
</span><span id="L-2906"><a href="#L-2906"><span class="linenos">2906</span></a>            <span class="k">if</span> <span class="n">keyfile_name</span><span class="p">:</span>
</span><span id="L-2907"><a href="#L-2907"><span class="linenos">2907</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-2908"><a href="#L-2908"><span class="linenos">2908</span></a>                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">keyfile_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">keyfile</span><span class="p">:</span>
</span><span id="L-2909"><a href="#L-2909"><span class="linenos">2909</span></a>                        <span class="k">return</span> <span class="n">keyfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-2910"><a href="#L-2910"><span class="linenos">2910</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">issue</span><span class="p">:</span>
</span><span id="L-2911"><a href="#L-2911"><span class="linenos">2911</span></a>                    <span class="k">raise</span> <span class="n">KiwiFileAccessError</span><span class="p">(</span>
</span><span id="L-2912"><a href="#L-2912"><span class="linenos">2912</span></a>                        <span class="sa">f</span><span class="s1">&#39;Failed to read from </span><span class="si">{</span><span class="n">keyfile_name</span><span class="si">!r}</span><span class="s1">: </span><span class="si">{</span><span class="n">issue</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-2913"><a href="#L-2913"><span class="linenos">2913</span></a>                    <span class="p">)</span>
</span><span id="L-2914"><a href="#L-2914"><span class="linenos">2914</span></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="L-2915"><a href="#L-2915"><span class="linenos">2915</span></a>
</span><span id="L-2916"><a href="#L-2916"><span class="linenos">2916</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_luks_format_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-2917"><a href="#L-2917"><span class="linenos">2917</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2918"><a href="#L-2918"><span class="linenos">2918</span></a><span class="sd">        Return list of luks format options</span>
</span><span id="L-2919"><a href="#L-2919"><span class="linenos">2919</span></a>
</span><span id="L-2920"><a href="#L-2920"><span class="linenos">2920</span></a><span class="sd">        :return: list of options</span>
</span><span id="L-2921"><a href="#L-2921"><span class="linenos">2921</span></a>
</span><span id="L-2922"><a href="#L-2922"><span class="linenos">2922</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2923"><a href="#L-2923"><span class="linenos">2923</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2924"><a href="#L-2924"><span class="linenos">2924</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2925"><a href="#L-2925"><span class="linenos">2925</span></a>        <span class="n">luksversion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks_version</span><span class="p">()</span>
</span><span id="L-2926"><a href="#L-2926"><span class="linenos">2926</span></a>        <span class="n">luksformat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luksformat</span><span class="p">()</span>
</span><span id="L-2927"><a href="#L-2927"><span class="linenos">2927</span></a>        <span class="n">luks_pbkdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks_pbkdf</span><span class="p">()</span>
</span><span id="L-2928"><a href="#L-2928"><span class="linenos">2928</span></a>        <span class="k">if</span> <span class="n">luksversion</span><span class="p">:</span>
</span><span id="L-2929"><a href="#L-2929"><span class="linenos">2929</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--type&#39;</span><span class="p">)</span>
</span><span id="L-2930"><a href="#L-2930"><span class="linenos">2930</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">luksversion</span><span class="p">)</span>
</span><span id="L-2931"><a href="#L-2931"><span class="linenos">2931</span></a>        <span class="k">if</span> <span class="n">luksformat</span><span class="p">:</span>
</span><span id="L-2932"><a href="#L-2932"><span class="linenos">2932</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">luksformat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_option</span><span class="p">():</span>
</span><span id="L-2933"><a href="#L-2933"><span class="linenos">2933</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-2934"><a href="#L-2934"><span class="linenos">2934</span></a>                <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">():</span>
</span><span id="L-2935"><a href="#L-2935"><span class="linenos">2935</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
</span><span id="L-2936"><a href="#L-2936"><span class="linenos">2936</span></a>        <span class="k">if</span> <span class="n">luks_pbkdf</span><span class="p">:</span>
</span><span id="L-2937"><a href="#L-2937"><span class="linenos">2937</span></a>            <span class="c1"># Allow to override the pbkdf algorithm that cryptsetup</span>
</span><span id="L-2938"><a href="#L-2938"><span class="linenos">2938</span></a>            <span class="c1"># uses by default. Cryptsetup may use argon2i by default,</span>
</span><span id="L-2939"><a href="#L-2939"><span class="linenos">2939</span></a>            <span class="c1"># which is not supported by all bootloaders.</span>
</span><span id="L-2940"><a href="#L-2940"><span class="linenos">2940</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--pbkdf&#39;</span><span class="p">)</span>
</span><span id="L-2941"><a href="#L-2941"><span class="linenos">2941</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">luks_pbkdf</span><span class="p">)</span>
</span><span id="L-2942"><a href="#L-2942"><span class="linenos">2942</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-2943"><a href="#L-2943"><span class="linenos">2943</span></a>
</span><span id="L-2944"><a href="#L-2944"><span class="linenos">2944</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_derived_from_image_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Uri</span><span class="p">]:</span>
</span><span id="L-2945"><a href="#L-2945"><span class="linenos">2945</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2946"><a href="#L-2946"><span class="linenos">2946</span></a><span class="sd">        Uri object(s) of derived image if configured</span>
</span><span id="L-2947"><a href="#L-2947"><span class="linenos">2947</span></a>
</span><span id="L-2948"><a href="#L-2948"><span class="linenos">2948</span></a><span class="sd">        Specific image types can be based on one ore more derived</span>
</span><span id="L-2949"><a href="#L-2949"><span class="linenos">2949</span></a><span class="sd">        images. This method returns the location of this image(s)</span>
</span><span id="L-2950"><a href="#L-2950"><span class="linenos">2950</span></a><span class="sd">        when configured in the XML description</span>
</span><span id="L-2951"><a href="#L-2951"><span class="linenos">2951</span></a>
</span><span id="L-2952"><a href="#L-2952"><span class="linenos">2952</span></a><span class="sd">        :return: List of Uri instances</span>
</span><span id="L-2953"><a href="#L-2953"><span class="linenos">2953</span></a>
</span><span id="L-2954"><a href="#L-2954"><span class="linenos">2954</span></a><span class="sd">        :rtype: list</span>
</span><span id="L-2955"><a href="#L-2955"><span class="linenos">2955</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2956"><a href="#L-2956"><span class="linenos">2956</span></a>        <span class="n">image_uris</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2957"><a href="#L-2957"><span class="linenos">2957</span></a>        <span class="n">derived_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_derived_from</span><span class="p">()</span>
</span><span id="L-2958"><a href="#L-2958"><span class="linenos">2958</span></a>        <span class="k">if</span> <span class="n">derived_images</span><span class="p">:</span>
</span><span id="L-2959"><a href="#L-2959"><span class="linenos">2959</span></a>            <span class="k">for</span> <span class="n">derived_image</span> <span class="ow">in</span> <span class="n">derived_images</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="L-2960"><a href="#L-2960"><span class="linenos">2960</span></a>                <span class="n">image_uris</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-2961"><a href="#L-2961"><span class="linenos">2961</span></a>                    <span class="n">Uri</span><span class="p">(</span><span class="n">derived_image</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span>
</span><span id="L-2962"><a href="#L-2962"><span class="linenos">2962</span></a>                <span class="p">)</span>
</span><span id="L-2963"><a href="#L-2963"><span class="linenos">2963</span></a>        <span class="k">return</span> <span class="n">image_uris</span>
</span><span id="L-2964"><a href="#L-2964"><span class="linenos">2964</span></a>
</span><span id="L-2965"><a href="#L-2965"><span class="linenos">2965</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_derived_from_image_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2966"><a href="#L-2966"><span class="linenos">2966</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2967"><a href="#L-2967"><span class="linenos">2967</span></a><span class="sd">        Set derived_from attribute to a new value</span>
</span><span id="L-2968"><a href="#L-2968"><span class="linenos">2968</span></a>
</span><span id="L-2969"><a href="#L-2969"><span class="linenos">2969</span></a><span class="sd">        In order to set a new value the derived_from attribute</span>
</span><span id="L-2970"><a href="#L-2970"><span class="linenos">2970</span></a><span class="sd">        must be already present in the image configuration</span>
</span><span id="L-2971"><a href="#L-2971"><span class="linenos">2971</span></a>
</span><span id="L-2972"><a href="#L-2972"><span class="linenos">2972</span></a><span class="sd">        :param str uri: URI</span>
</span><span id="L-2973"><a href="#L-2973"><span class="linenos">2973</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2974"><a href="#L-2974"><span class="linenos">2974</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_derived_from</span><span class="p">():</span>
</span><span id="L-2975"><a href="#L-2975"><span class="linenos">2975</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_derived_from</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
</span><span id="L-2976"><a href="#L-2976"><span class="linenos">2976</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2977"><a href="#L-2977"><span class="linenos">2977</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="L-2978"><a href="#L-2978"><span class="linenos">2978</span></a><span class="s1">                No derived_from attribute configured in image &lt;type&gt;</span>
</span><span id="L-2979"><a href="#L-2979"><span class="linenos">2979</span></a>
</span><span id="L-2980"><a href="#L-2980"><span class="linenos">2980</span></a><span class="s1">                In order to set the uri </span><span class="si">{0}</span><span class="s1"> as base container reference</span>
</span><span id="L-2981"><a href="#L-2981"><span class="linenos">2981</span></a><span class="s1">                an initial derived_from attribute must be set in the</span>
</span><span id="L-2982"><a href="#L-2982"><span class="linenos">2982</span></a><span class="s1">                type section</span>
</span><span id="L-2983"><a href="#L-2983"><span class="linenos">2983</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="L-2984"><a href="#L-2984"><span class="linenos">2984</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</span><span id="L-2985"><a href="#L-2985"><span class="linenos">2985</span></a>
</span><span id="L-2986"><a href="#L-2986"><span class="linenos">2986</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_root_partition_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2987"><a href="#L-2987"><span class="linenos">2987</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2988"><a href="#L-2988"><span class="linenos">2988</span></a><span class="sd">        Store PARTUUID provided in uuid as state information</span>
</span><span id="L-2989"><a href="#L-2989"><span class="linenos">2989</span></a>
</span><span id="L-2990"><a href="#L-2990"><span class="linenos">2990</span></a><span class="sd">        :param str uuid: PARTUUID</span>
</span><span id="L-2991"><a href="#L-2991"><span class="linenos">2991</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2992"><a href="#L-2992"><span class="linenos">2992</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span> <span class="o">=</span> <span class="n">uuid</span>
</span><span id="L-2993"><a href="#L-2993"><span class="linenos">2993</span></a>
</span><span id="L-2994"><a href="#L-2994"><span class="linenos">2994</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_partition_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-2995"><a href="#L-2995"><span class="linenos">2995</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2996"><a href="#L-2996"><span class="linenos">2996</span></a><span class="sd">        Return preserved PARTUUID</span>
</span><span id="L-2997"><a href="#L-2997"><span class="linenos">2997</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2998"><a href="#L-2998"><span class="linenos">2998</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span>
</span><span id="L-2999"><a href="#L-2999"><span class="linenos">2999</span></a>
</span><span id="L-3000"><a href="#L-3000"><span class="linenos">3000</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_root_filesystem_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3001"><a href="#L-3001"><span class="linenos">3001</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3002"><a href="#L-3002"><span class="linenos">3002</span></a><span class="sd">        Store UUID provided in uuid as state information</span>
</span><span id="L-3003"><a href="#L-3003"><span class="linenos">3003</span></a>
</span><span id="L-3004"><a href="#L-3004"><span class="linenos">3004</span></a><span class="sd">        :param str uuid: UUID</span>
</span><span id="L-3005"><a href="#L-3005"><span class="linenos">3005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3006"><a href="#L-3006"><span class="linenos">3006</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span> <span class="o">=</span> <span class="n">uuid</span>
</span><span id="L-3007"><a href="#L-3007"><span class="linenos">3007</span></a>
</span><span id="L-3008"><a href="#L-3008"><span class="linenos">3008</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_filesystem_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-3009"><a href="#L-3009"><span class="linenos">3009</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3010"><a href="#L-3010"><span class="linenos">3010</span></a><span class="sd">        Return preserved UUID</span>
</span><span id="L-3011"><a href="#L-3011"><span class="linenos">3011</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3012"><a href="#L-3012"><span class="linenos">3012</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span>
</span><span id="L-3013"><a href="#L-3013"><span class="linenos">3013</span></a>
</span><span id="L-3014"><a href="#L-3014"><span class="linenos">3014</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-3015"><a href="#L-3015"><span class="linenos">3015</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="L-3016"><a href="#L-3016"><span class="linenos">3016</span></a>        <span class="n">packages_sections_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">]]</span>
</span><span id="L-3017"><a href="#L-3017"><span class="linenos">3017</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="L-3018"><a href="#L-3018"><span class="linenos">3018</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3019"><a href="#L-3019"><span class="linenos">3019</span></a><span class="sd">        Dict of archive names and target dirs for packages section(s), if any</span>
</span><span id="L-3020"><a href="#L-3020"><span class="linenos">3020</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="L-3021"><a href="#L-3021"><span class="linenos">3021</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-3022"><a href="#L-3022"><span class="linenos">3022</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3023"><a href="#L-3023"><span class="linenos">3023</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3024"><a href="#L-3024"><span class="linenos">3024</span></a>        <span class="k">if</span> <span class="n">packages_sections_names</span><span class="p">:</span>
</span><span id="L-3025"><a href="#L-3025"><span class="linenos">3025</span></a>            <span class="k">for</span> <span class="n">package_section_name</span> <span class="ow">in</span> <span class="n">packages_sections_names</span><span class="p">:</span>
</span><span id="L-3026"><a href="#L-3026"><span class="linenos">3026</span></a>                <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">package_section_name</span><span class="o">.</span><span class="n">get_archive</span><span class="p">():</span>
</span><span id="L-3027"><a href="#L-3027"><span class="linenos">3027</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="n">archive</span><span class="o">.</span><span class="n">get_target_dir</span><span class="p">()</span>
</span><span id="L-3028"><a href="#L-3028"><span class="linenos">3028</span></a>
</span><span id="L-3029"><a href="#L-3029"><span class="linenos">3029</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-3030"><a href="#L-3030"><span class="linenos">3030</span></a>
</span><span id="L-3031"><a href="#L-3031"><span class="linenos">3031</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_archives_target_dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="L-3032"><a href="#L-3032"><span class="linenos">3032</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3033"><a href="#L-3033"><span class="linenos">3033</span></a><span class="sd">        Dict of archive names and target dirs from the type=&quot;bootstrap&quot;</span>
</span><span id="L-3034"><a href="#L-3034"><span class="linenos">3034</span></a><span class="sd">        packages section(s)</span>
</span><span id="L-3035"><a href="#L-3035"><span class="linenos">3035</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="L-3036"><a href="#L-3036"><span class="linenos">3036</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-3037"><a href="#L-3037"><span class="linenos">3037</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3038"><a href="#L-3038"><span class="linenos">3038</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="L-3039"><a href="#L-3039"><span class="linenos">3039</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">])</span>
</span><span id="L-3040"><a href="#L-3040"><span class="linenos">3040</span></a>        <span class="p">)</span>
</span><span id="L-3041"><a href="#L-3041"><span class="linenos">3041</span></a>
</span><span id="L-3042"><a href="#L-3042"><span class="linenos">3042</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_archives_target_dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="L-3043"><a href="#L-3043"><span class="linenos">3043</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3044"><a href="#L-3044"><span class="linenos">3044</span></a><span class="sd">        Dict of archive names and its target dir from the packages sections matching</span>
</span><span id="L-3045"><a href="#L-3045"><span class="linenos">3045</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="L-3046"><a href="#L-3046"><span class="linenos">3046</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="L-3047"><a href="#L-3047"><span class="linenos">3047</span></a><span class="sd">        :rtype: dict</span>
</span><span id="L-3048"><a href="#L-3048"><span class="linenos">3048</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3049"><a href="#L-3049"><span class="linenos">3049</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="L-3050"><a href="#L-3050"><span class="linenos">3050</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()])</span>
</span><span id="L-3051"><a href="#L-3051"><span class="linenos">3051</span></a>        <span class="p">)</span>
</span><span id="L-3052"><a href="#L-3052"><span class="linenos">3052</span></a>
</span><span id="L-3053"><a href="#L-3053"><span class="linenos">3053</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_used_profiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profiles</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3054"><a href="#L-3054"><span class="linenos">3054</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3055"><a href="#L-3055"><span class="linenos">3055</span></a><span class="sd">        return list of profiles to use. The method looks up the</span>
</span><span id="L-3056"><a href="#L-3056"><span class="linenos">3056</span></a><span class="sd">        profiles section in the XML description and searches for</span>
</span><span id="L-3057"><a href="#L-3057"><span class="linenos">3057</span></a><span class="sd">        profiles matching the architecture. If no arch specifier</span>
</span><span id="L-3058"><a href="#L-3058"><span class="linenos">3058</span></a><span class="sd">        is set the profile is considered to be valid for any arch</span>
</span><span id="L-3059"><a href="#L-3059"><span class="linenos">3059</span></a>
</span><span id="L-3060"><a href="#L-3060"><span class="linenos">3060</span></a><span class="sd">        If the profiles argument is not set only profiles</span>
</span><span id="L-3061"><a href="#L-3061"><span class="linenos">3061</span></a><span class="sd">        marked with the attribute import=true will be selected.</span>
</span><span id="L-3062"><a href="#L-3062"><span class="linenos">3062</span></a><span class="sd">        Profiles specified in the argument will take the highest</span>
</span><span id="L-3063"><a href="#L-3063"><span class="linenos">3063</span></a><span class="sd">        priority and causes to skip the lookup of import profiles</span>
</span><span id="L-3064"><a href="#L-3064"><span class="linenos">3064</span></a><span class="sd">        in the XML description</span>
</span><span id="L-3065"><a href="#L-3065"><span class="linenos">3065</span></a>
</span><span id="L-3066"><a href="#L-3066"><span class="linenos">3066</span></a><span class="sd">        :param list profiles: selected profile names</span>
</span><span id="L-3067"><a href="#L-3067"><span class="linenos">3067</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3068"><a href="#L-3068"><span class="linenos">3068</span></a>        <span class="n">available_profiles</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="L-3069"><a href="#L-3069"><span class="linenos">3069</span></a>        <span class="n">import_profiles</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3070"><a href="#L-3070"><span class="linenos">3070</span></a>        <span class="k">for</span> <span class="n">profiles_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_profiles</span><span class="p">():</span>
</span><span id="L-3071"><a href="#L-3071"><span class="linenos">3071</span></a>            <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">profiles_section</span><span class="o">.</span><span class="n">get_profile</span><span class="p">():</span>
</span><span id="L-3072"><a href="#L-3072"><span class="linenos">3072</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile_matches_host_architecture</span><span class="p">(</span><span class="n">profile</span><span class="p">):</span>
</span><span id="L-3073"><a href="#L-3073"><span class="linenos">3073</span></a>                    <span class="n">name</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-3074"><a href="#L-3074"><span class="linenos">3074</span></a>                    <span class="n">available_profiles</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">profile</span>
</span><span id="L-3075"><a href="#L-3075"><span class="linenos">3075</span></a>                    <span class="k">if</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_import</span><span class="p">():</span>
</span><span id="L-3076"><a href="#L-3076"><span class="linenos">3076</span></a>                        <span class="n">import_profiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-3077"><a href="#L-3077"><span class="linenos">3077</span></a>
</span><span id="L-3078"><a href="#L-3078"><span class="linenos">3078</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">profiles</span><span class="p">:</span>
</span><span id="L-3079"><a href="#L-3079"><span class="linenos">3079</span></a>            <span class="k">return</span> <span class="n">import_profiles</span>
</span><span id="L-3080"><a href="#L-3080"><span class="linenos">3080</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3081"><a href="#L-3081"><span class="linenos">3081</span></a>            <span class="n">resolved_profiles</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3082"><a href="#L-3082"><span class="linenos">3082</span></a>            <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">profiles</span><span class="p">:</span>
</span><span id="L-3083"><a href="#L-3083"><span class="linenos">3083</span></a>                <span class="n">resolved_profiles</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_profile_dependencies</span><span class="p">(</span>
</span><span id="L-3084"><a href="#L-3084"><span class="linenos">3084</span></a>                    <span class="n">profile</span><span class="p">,</span> <span class="n">available_profiles</span><span class="p">,</span> <span class="n">resolved_profiles</span>
</span><span id="L-3085"><a href="#L-3085"><span class="linenos">3085</span></a>                <span class="p">)</span>
</span><span id="L-3086"><a href="#L-3086"><span class="linenos">3086</span></a>            <span class="k">return</span> <span class="n">resolved_profiles</span>
</span><span id="L-3087"><a href="#L-3087"><span class="linenos">3087</span></a>
</span><span id="L-3088"><a href="#L-3088"><span class="linenos">3088</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_section_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
</span><span id="L-3089"><a href="#L-3089"><span class="linenos">3089</span></a>        <span class="n">architectures</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_arch</span><span class="p">()</span>
</span><span id="L-3090"><a href="#L-3090"><span class="linenos">3090</span></a>        <span class="k">if</span> <span class="n">architectures</span><span class="p">:</span>
</span><span id="L-3091"><a href="#L-3091"><span class="linenos">3091</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="L-3092"><a href="#L-3092"><span class="linenos">3092</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-3093"><a href="#L-3093"><span class="linenos">3093</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-3094"><a href="#L-3094"><span class="linenos">3094</span></a>
</span><span id="L-3095"><a href="#L-3095"><span class="linenos">3095</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_base_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3096"><a href="#L-3096"><span class="linenos">3096</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3097"><a href="#L-3097"><span class="linenos">3097</span></a>        <span class="n">container_base</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3098"><a href="#L-3098"><span class="linenos">3098</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3099"><a href="#L-3099"><span class="linenos">3099</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-3100"><a href="#L-3100"><span class="linenos">3100</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_tag</span><span class="p">()</span>
</span><span id="L-3101"><a href="#L-3101"><span class="linenos">3101</span></a>            <span class="n">maintainer</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_maintainer</span><span class="p">()</span>
</span><span id="L-3102"><a href="#L-3102"><span class="linenos">3102</span></a>            <span class="n">user</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">()</span>
</span><span id="L-3103"><a href="#L-3103"><span class="linenos">3103</span></a>            <span class="n">workingdir</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_workingdir</span><span class="p">()</span>
</span><span id="L-3104"><a href="#L-3104"><span class="linenos">3104</span></a>            <span class="n">additional_names</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_additionalnames</span><span class="p">()</span>
</span><span id="L-3105"><a href="#L-3105"><span class="linenos">3105</span></a>            <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="L-3106"><a href="#L-3106"><span class="linenos">3106</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;container_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-3107"><a href="#L-3107"><span class="linenos">3107</span></a>
</span><span id="L-3108"><a href="#L-3108"><span class="linenos">3108</span></a>            <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
</span><span id="L-3109"><a href="#L-3109"><span class="linenos">3109</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;container_tag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag</span>
</span><span id="L-3110"><a href="#L-3110"><span class="linenos">3110</span></a>
</span><span id="L-3111"><a href="#L-3111"><span class="linenos">3111</span></a>            <span class="k">if</span> <span class="n">additional_names</span><span class="p">:</span>
</span><span id="L-3112"><a href="#L-3112"><span class="linenos">3112</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;additional_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">additional_names</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="L-3113"><a href="#L-3113"><span class="linenos">3113</span></a>
</span><span id="L-3114"><a href="#L-3114"><span class="linenos">3114</span></a>            <span class="k">if</span> <span class="n">maintainer</span><span class="p">:</span>
</span><span id="L-3115"><a href="#L-3115"><span class="linenos">3115</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;maintainer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maintainer</span>
</span><span id="L-3116"><a href="#L-3116"><span class="linenos">3116</span></a>
</span><span id="L-3117"><a href="#L-3117"><span class="linenos">3117</span></a>            <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
</span><span id="L-3118"><a href="#L-3118"><span class="linenos">3118</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
</span><span id="L-3119"><a href="#L-3119"><span class="linenos">3119</span></a>
</span><span id="L-3120"><a href="#L-3120"><span class="linenos">3120</span></a>            <span class="k">if</span> <span class="n">workingdir</span><span class="p">:</span>
</span><span id="L-3121"><a href="#L-3121"><span class="linenos">3121</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;workingdir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">workingdir</span>
</span><span id="L-3122"><a href="#L-3122"><span class="linenos">3122</span></a>
</span><span id="L-3123"><a href="#L-3123"><span class="linenos">3123</span></a>        <span class="k">return</span> <span class="n">container_base</span>
</span><span id="L-3124"><a href="#L-3124"><span class="linenos">3124</span></a>
</span><span id="L-3125"><a href="#L-3125"><span class="linenos">3125</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3126"><a href="#L-3126"><span class="linenos">3126</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3127"><a href="#L-3127"><span class="linenos">3127</span></a>        <span class="n">container_entry</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3128"><a href="#L-3128"><span class="linenos">3128</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3129"><a href="#L-3129"><span class="linenos">3129</span></a>            <span class="n">entrypoint</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_entrypoint</span><span class="p">()</span>
</span><span id="L-3130"><a href="#L-3130"><span class="linenos">3130</span></a>            <span class="k">if</span> <span class="n">entrypoint</span> <span class="ow">and</span> <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">():</span>
</span><span id="L-3131"><a href="#L-3131"><span class="linenos">3131</span></a>                <span class="n">container_entry</span><span class="p">[</span><span class="s1">&#39;entry_command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-3132"><a href="#L-3132"><span class="linenos">3132</span></a>                    <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">()</span>
</span><span id="L-3133"><a href="#L-3133"><span class="linenos">3133</span></a>                <span class="p">]</span>
</span><span id="L-3134"><a href="#L-3134"><span class="linenos">3134</span></a>                <span class="n">argument_list</span> <span class="o">=</span> <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_argument</span><span class="p">()</span>
</span><span id="L-3135"><a href="#L-3135"><span class="linenos">3135</span></a>                <span class="k">if</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="L-3136"><a href="#L-3136"><span class="linenos">3136</span></a>                    <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="L-3137"><a href="#L-3137"><span class="linenos">3137</span></a>                        <span class="n">container_entry</span><span class="p">[</span><span class="s1">&#39;entry_command&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-3138"><a href="#L-3138"><span class="linenos">3138</span></a>                            <span class="n">argument</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-3139"><a href="#L-3139"><span class="linenos">3139</span></a>                        <span class="p">)</span>
</span><span id="L-3140"><a href="#L-3140"><span class="linenos">3140</span></a>            <span class="k">elif</span> <span class="n">entrypoint</span> <span class="ow">and</span> <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_clear</span><span class="p">():</span>
</span><span id="L-3141"><a href="#L-3141"><span class="linenos">3141</span></a>                <span class="n">container_entry</span><span class="p">[</span><span class="s1">&#39;entry_command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3142"><a href="#L-3142"><span class="linenos">3142</span></a>        <span class="k">return</span> <span class="n">container_entry</span>
</span><span id="L-3143"><a href="#L-3143"><span class="linenos">3143</span></a>
</span><span id="L-3144"><a href="#L-3144"><span class="linenos">3144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_subcommand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3145"><a href="#L-3145"><span class="linenos">3145</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3146"><a href="#L-3146"><span class="linenos">3146</span></a>        <span class="n">container_subcommand</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3147"><a href="#L-3147"><span class="linenos">3147</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3148"><a href="#L-3148"><span class="linenos">3148</span></a>            <span class="n">subcommand</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_subcommand</span><span class="p">()</span>
</span><span id="L-3149"><a href="#L-3149"><span class="linenos">3149</span></a>            <span class="k">if</span> <span class="n">subcommand</span> <span class="ow">and</span> <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">():</span>
</span><span id="L-3150"><a href="#L-3150"><span class="linenos">3150</span></a>                <span class="n">container_subcommand</span><span class="p">[</span><span class="s1">&#39;entry_subcommand&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-3151"><a href="#L-3151"><span class="linenos">3151</span></a>                    <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">()</span>
</span><span id="L-3152"><a href="#L-3152"><span class="linenos">3152</span></a>                <span class="p">]</span>
</span><span id="L-3153"><a href="#L-3153"><span class="linenos">3153</span></a>                <span class="n">argument_list</span> <span class="o">=</span> <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_argument</span><span class="p">()</span>
</span><span id="L-3154"><a href="#L-3154"><span class="linenos">3154</span></a>                <span class="k">if</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="L-3155"><a href="#L-3155"><span class="linenos">3155</span></a>                    <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="L-3156"><a href="#L-3156"><span class="linenos">3156</span></a>                        <span class="n">container_subcommand</span><span class="p">[</span><span class="s1">&#39;entry_subcommand&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-3157"><a href="#L-3157"><span class="linenos">3157</span></a>                            <span class="n">argument</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="L-3158"><a href="#L-3158"><span class="linenos">3158</span></a>                        <span class="p">)</span>
</span><span id="L-3159"><a href="#L-3159"><span class="linenos">3159</span></a>            <span class="k">elif</span> <span class="n">subcommand</span> <span class="ow">and</span> <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_clear</span><span class="p">():</span>
</span><span id="L-3160"><a href="#L-3160"><span class="linenos">3160</span></a>                <span class="n">container_subcommand</span><span class="p">[</span><span class="s1">&#39;entry_subcommand&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3161"><a href="#L-3161"><span class="linenos">3161</span></a>        <span class="k">return</span> <span class="n">container_subcommand</span>
</span><span id="L-3162"><a href="#L-3162"><span class="linenos">3162</span></a>
</span><span id="L-3163"><a href="#L-3163"><span class="linenos">3163</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_expose_ports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3164"><a href="#L-3164"><span class="linenos">3164</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3165"><a href="#L-3165"><span class="linenos">3165</span></a>        <span class="n">container_expose</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3166"><a href="#L-3166"><span class="linenos">3166</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3167"><a href="#L-3167"><span class="linenos">3167</span></a>            <span class="n">expose</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_expose</span><span class="p">()</span>
</span><span id="L-3168"><a href="#L-3168"><span class="linenos">3168</span></a>            <span class="k">if</span> <span class="n">expose</span> <span class="ow">and</span> <span class="n">expose</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_port</span><span class="p">():</span>
</span><span id="L-3169"><a href="#L-3169"><span class="linenos">3169</span></a>                <span class="n">container_expose</span><span class="p">[</span><span class="s1">&#39;expose_ports&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3170"><a href="#L-3170"><span class="linenos">3170</span></a>                <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">expose</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_port</span><span class="p">():</span>
</span><span id="L-3171"><a href="#L-3171"><span class="linenos">3171</span></a>                    <span class="n">container_expose</span><span class="p">[</span><span class="s1">&#39;expose_ports&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-3172"><a href="#L-3172"><span class="linenos">3172</span></a>                        <span class="nb">format</span><span class="p">(</span><span class="n">port</span><span class="o">.</span><span class="n">get_number</span><span class="p">())</span>
</span><span id="L-3173"><a href="#L-3173"><span class="linenos">3173</span></a>                    <span class="p">)</span>
</span><span id="L-3174"><a href="#L-3174"><span class="linenos">3174</span></a>        <span class="k">return</span> <span class="n">container_expose</span>
</span><span id="L-3175"><a href="#L-3175"><span class="linenos">3175</span></a>
</span><span id="L-3176"><a href="#L-3176"><span class="linenos">3176</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3177"><a href="#L-3177"><span class="linenos">3177</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3178"><a href="#L-3178"><span class="linenos">3178</span></a>        <span class="n">container_volumes</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3179"><a href="#L-3179"><span class="linenos">3179</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3180"><a href="#L-3180"><span class="linenos">3180</span></a>            <span class="n">volumes</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_volumes</span><span class="p">()</span>
</span><span id="L-3181"><a href="#L-3181"><span class="linenos">3181</span></a>            <span class="k">if</span> <span class="n">volumes</span> <span class="ow">and</span> <span class="n">volumes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_volume</span><span class="p">():</span>
</span><span id="L-3182"><a href="#L-3182"><span class="linenos">3182</span></a>                <span class="n">container_volumes</span><span class="p">[</span><span class="s1">&#39;volumes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3183"><a href="#L-3183"><span class="linenos">3183</span></a>                <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">volumes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_volume</span><span class="p">():</span>
</span><span id="L-3184"><a href="#L-3184"><span class="linenos">3184</span></a>                    <span class="n">container_volumes</span><span class="p">[</span><span class="s1">&#39;volumes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">volume</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="L-3185"><a href="#L-3185"><span class="linenos">3185</span></a>        <span class="k">return</span> <span class="n">container_volumes</span>
</span><span id="L-3186"><a href="#L-3186"><span class="linenos">3186</span></a>
</span><span id="L-3187"><a href="#L-3187"><span class="linenos">3187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_stopsignal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-3188"><a href="#L-3188"><span class="linenos">3188</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3189"><a href="#L-3189"><span class="linenos">3189</span></a>        <span class="n">container_stopsignal</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3190"><a href="#L-3190"><span class="linenos">3190</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3191"><a href="#L-3191"><span class="linenos">3191</span></a>            <span class="n">stopsignal_section</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_stopsignal</span><span class="p">()</span>
</span><span id="L-3192"><a href="#L-3192"><span class="linenos">3192</span></a>            <span class="k">if</span> <span class="n">stopsignal_section</span><span class="p">:</span>
</span><span id="L-3193"><a href="#L-3193"><span class="linenos">3193</span></a>                <span class="n">container_stopsignal</span><span class="p">[</span><span class="s1">&#39;stopsignal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stopsignal_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3194"><a href="#L-3194"><span class="linenos">3194</span></a>        <span class="k">return</span> <span class="n">container_stopsignal</span>
</span><span id="L-3195"><a href="#L-3195"><span class="linenos">3195</span></a>
</span><span id="L-3196"><a href="#L-3196"><span class="linenos">3196</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_environment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3197"><a href="#L-3197"><span class="linenos">3197</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3198"><a href="#L-3198"><span class="linenos">3198</span></a>        <span class="n">container_env</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3199"><a href="#L-3199"><span class="linenos">3199</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3200"><a href="#L-3200"><span class="linenos">3200</span></a>            <span class="n">environment</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_environment</span><span class="p">()</span>
</span><span id="L-3201"><a href="#L-3201"><span class="linenos">3201</span></a>            <span class="k">if</span> <span class="n">environment</span> <span class="ow">and</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="L-3202"><a href="#L-3202"><span class="linenos">3202</span></a>                <span class="n">container_env</span><span class="p">[</span><span class="s1">&#39;environment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3203"><a href="#L-3203"><span class="linenos">3203</span></a>                <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="L-3204"><a href="#L-3204"><span class="linenos">3204</span></a>                    <span class="n">container_env</span><span class="p">[</span><span class="s1">&#39;environment&#39;</span><span class="p">][</span><span class="n">env</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> \
</span><span id="L-3205"><a href="#L-3205"><span class="linenos">3205</span></a>                        <span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
</span><span id="L-3206"><a href="#L-3206"><span class="linenos">3206</span></a>        <span class="k">return</span> <span class="n">container_env</span>
</span><span id="L-3207"><a href="#L-3207"><span class="linenos">3207</span></a>
</span><span id="L-3208"><a href="#L-3208"><span class="linenos">3208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3209"><a href="#L-3209"><span class="linenos">3209</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3210"><a href="#L-3210"><span class="linenos">3210</span></a>        <span class="n">container_labels</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3211"><a href="#L-3211"><span class="linenos">3211</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3212"><a href="#L-3212"><span class="linenos">3212</span></a>            <span class="n">labels</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()</span>
</span><span id="L-3213"><a href="#L-3213"><span class="linenos">3213</span></a>            <span class="k">if</span> <span class="n">labels</span> <span class="ow">and</span> <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
</span><span id="L-3214"><a href="#L-3214"><span class="linenos">3214</span></a>                <span class="n">container_labels</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3215"><a href="#L-3215"><span class="linenos">3215</span></a>                <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
</span><span id="L-3216"><a href="#L-3216"><span class="linenos">3216</span></a>                    <span class="n">container_labels</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">][</span><span class="n">label</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> \
</span><span id="L-3217"><a href="#L-3217"><span class="linenos">3217</span></a>                        <span class="n">label</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
</span><span id="L-3218"><a href="#L-3218"><span class="linenos">3218</span></a>        <span class="k">return</span> <span class="n">container_labels</span>
</span><span id="L-3219"><a href="#L-3219"><span class="linenos">3219</span></a>
</span><span id="L-3220"><a href="#L-3220"><span class="linenos">3220</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-3221"><a href="#L-3221"><span class="linenos">3221</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="L-3222"><a href="#L-3222"><span class="linenos">3222</span></a>        <span class="n">container_history</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3223"><a href="#L-3223"><span class="linenos">3223</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="L-3224"><a href="#L-3224"><span class="linenos">3224</span></a>            <span class="n">history</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_history</span><span class="p">()</span>
</span><span id="L-3225"><a href="#L-3225"><span class="linenos">3225</span></a>            <span class="k">if</span> <span class="n">history</span><span class="p">:</span>
</span><span id="L-3226"><a href="#L-3226"><span class="linenos">3226</span></a>                <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3227"><a href="#L-3227"><span class="linenos">3227</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_created_by</span><span class="p">():</span>
</span><span id="L-3228"><a href="#L-3228"><span class="linenos">3228</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;created_by&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-3229"><a href="#L-3229"><span class="linenos">3229</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_created_by</span><span class="p">()</span>
</span><span id="L-3230"><a href="#L-3230"><span class="linenos">3230</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_author</span><span class="p">():</span>
</span><span id="L-3231"><a href="#L-3231"><span class="linenos">3231</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;author&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-3232"><a href="#L-3232"><span class="linenos">3232</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_author</span><span class="p">()</span>
</span><span id="L-3233"><a href="#L-3233"><span class="linenos">3233</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_launcher</span><span class="p">():</span>
</span><span id="L-3234"><a href="#L-3234"><span class="linenos">3234</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;launcher&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-3235"><a href="#L-3235"><span class="linenos">3235</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_launcher</span><span class="p">()</span>
</span><span id="L-3236"><a href="#L-3236"><span class="linenos">3236</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_application_id</span><span class="p">():</span>
</span><span id="L-3237"><a href="#L-3237"><span class="linenos">3237</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;application_id&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-3238"><a href="#L-3238"><span class="linenos">3238</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_application_id</span><span class="p">()</span>
</span><span id="L-3239"><a href="#L-3239"><span class="linenos">3239</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_package_version</span><span class="p">():</span>
</span><span id="L-3240"><a href="#L-3240"><span class="linenos">3240</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;package_version&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-3241"><a href="#L-3241"><span class="linenos">3241</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_package_version</span><span class="p">()</span>
</span><span id="L-3242"><a href="#L-3242"><span class="linenos">3242</span></a>                <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-3243"><a href="#L-3243"><span class="linenos">3243</span></a>                    <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_valueOf_</span><span class="p">()</span>
</span><span id="L-3244"><a href="#L-3244"><span class="linenos">3244</span></a>        <span class="k">return</span> <span class="n">container_history</span>
</span><span id="L-3245"><a href="#L-3245"><span class="linenos">3245</span></a>
</span><span id="L-3246"><a href="#L-3246"><span class="linenos">3246</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_solve_profile_dependencies</span><span class="p">(</span>
</span><span id="L-3247"><a href="#L-3247"><span class="linenos">3247</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">available_profiles</span><span class="p">,</span> <span class="n">current_profiles</span>
</span><span id="L-3248"><a href="#L-3248"><span class="linenos">3248</span></a>    <span class="p">):</span>
</span><span id="L-3249"><a href="#L-3249"><span class="linenos">3249</span></a>        <span class="k">if</span> <span class="n">profile</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">available_profiles</span><span class="p">:</span>
</span><span id="L-3250"><a href="#L-3250"><span class="linenos">3250</span></a>            <span class="k">raise</span> <span class="n">KiwiProfileNotFound</span><span class="p">(</span>
</span><span id="L-3251"><a href="#L-3251"><span class="linenos">3251</span></a>                <span class="s1">&#39;profile </span><span class="si">{0}</span><span class="s1"> not found for host arch </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3252"><a href="#L-3252"><span class="linenos">3252</span></a>                    <span class="n">profile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span>
</span><span id="L-3253"><a href="#L-3253"><span class="linenos">3253</span></a>                <span class="p">)</span>
</span><span id="L-3254"><a href="#L-3254"><span class="linenos">3254</span></a>            <span class="p">)</span>
</span><span id="L-3255"><a href="#L-3255"><span class="linenos">3255</span></a>        <span class="n">profiles_to_add</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3256"><a href="#L-3256"><span class="linenos">3256</span></a>        <span class="k">if</span> <span class="n">profile</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_profiles</span><span class="p">:</span>
</span><span id="L-3257"><a href="#L-3257"><span class="linenos">3257</span></a>            <span class="n">profiles_to_add</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
</span><span id="L-3258"><a href="#L-3258"><span class="linenos">3258</span></a>            <span class="k">for</span> <span class="n">required</span> <span class="ow">in</span> <span class="n">available_profiles</span><span class="p">[</span><span class="n">profile</span><span class="p">]</span><span class="o">.</span><span class="n">get_requires</span><span class="p">():</span>
</span><span id="L-3259"><a href="#L-3259"><span class="linenos">3259</span></a>                <span class="k">if</span> <span class="n">required</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_profiles</span><span class="p">:</span>
</span><span id="L-3260"><a href="#L-3260"><span class="linenos">3260</span></a>                    <span class="n">profiles_to_add</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_profile_dependencies</span><span class="p">(</span>
</span><span id="L-3261"><a href="#L-3261"><span class="linenos">3261</span></a>                        <span class="n">required</span><span class="o">.</span><span class="n">get_profile</span><span class="p">(),</span> <span class="n">available_profiles</span><span class="p">,</span>
</span><span id="L-3262"><a href="#L-3262"><span class="linenos">3262</span></a>                        <span class="n">current_profiles</span> <span class="o">+</span> <span class="n">profiles_to_add</span>
</span><span id="L-3263"><a href="#L-3263"><span class="linenos">3263</span></a>                    <span class="p">)</span>
</span><span id="L-3264"><a href="#L-3264"><span class="linenos">3264</span></a>        <span class="k">return</span> <span class="n">profiles_to_add</span>
</span><span id="L-3265"><a href="#L-3265"><span class="linenos">3265</span></a>
</span><span id="L-3266"><a href="#L-3266"><span class="linenos">3266</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_type_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3267"><a href="#L-3267"><span class="linenos">3267</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3268"><a href="#L-3268"><span class="linenos">3268</span></a><span class="sd">        find type section matching build type and profiles or default</span>
</span><span id="L-3269"><a href="#L-3269"><span class="linenos">3269</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3270"><a href="#L-3270"><span class="linenos">3270</span></a>        <span class="c1"># lookup all preferences sections for selected profiles</span>
</span><span id="L-3271"><a href="#L-3271"><span class="linenos">3271</span></a>        <span class="n">image_type_sections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3272"><a href="#L-3272"><span class="linenos">3272</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="L-3273"><a href="#L-3273"><span class="linenos">3273</span></a>            <span class="n">image_type_sections</span> <span class="o">+=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span>
</span><span id="L-3274"><a href="#L-3274"><span class="linenos">3274</span></a>
</span><span id="L-3275"><a href="#L-3275"><span class="linenos">3275</span></a>        <span class="c1"># lookup if build type matches provided type</span>
</span><span id="L-3276"><a href="#L-3276"><span class="linenos">3276</span></a>        <span class="k">if</span> <span class="n">build_type</span><span class="p">:</span>
</span><span id="L-3277"><a href="#L-3277"><span class="linenos">3277</span></a>            <span class="k">for</span> <span class="n">image_type</span> <span class="ow">in</span> <span class="n">image_type_sections</span><span class="p">:</span>
</span><span id="L-3278"><a href="#L-3278"><span class="linenos">3278</span></a>                <span class="k">if</span> <span class="n">build_type</span> <span class="o">==</span> <span class="n">image_type</span><span class="o">.</span><span class="n">get_image</span><span class="p">():</span>
</span><span id="L-3279"><a href="#L-3279"><span class="linenos">3279</span></a>                    <span class="k">return</span> <span class="n">image_type</span>
</span><span id="L-3280"><a href="#L-3280"><span class="linenos">3280</span></a>            <span class="k">raise</span> <span class="n">KiwiTypeNotFound</span><span class="p">(</span>
</span><span id="L-3281"><a href="#L-3281"><span class="linenos">3281</span></a>                <span class="s1">&#39;Build type </span><span class="si">{0!r}</span><span class="s1"> not found for applied profiles: </span><span class="si">{1!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3282"><a href="#L-3282"><span class="linenos">3282</span></a>                    <span class="n">build_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span>
</span><span id="L-3283"><a href="#L-3283"><span class="linenos">3283</span></a>                <span class="p">)</span>
</span><span id="L-3284"><a href="#L-3284"><span class="linenos">3284</span></a>            <span class="p">)</span>
</span><span id="L-3285"><a href="#L-3285"><span class="linenos">3285</span></a>
</span><span id="L-3286"><a href="#L-3286"><span class="linenos">3286</span></a>        <span class="c1"># lookup if build type matches primary type</span>
</span><span id="L-3287"><a href="#L-3287"><span class="linenos">3287</span></a>        <span class="k">for</span> <span class="n">image_type</span> <span class="ow">in</span> <span class="n">image_type_sections</span><span class="p">:</span>
</span><span id="L-3288"><a href="#L-3288"><span class="linenos">3288</span></a>            <span class="k">if</span> <span class="n">image_type</span><span class="o">.</span><span class="n">get_primary</span><span class="p">():</span>
</span><span id="L-3289"><a href="#L-3289"><span class="linenos">3289</span></a>                <span class="k">return</span> <span class="n">image_type</span>
</span><span id="L-3290"><a href="#L-3290"><span class="linenos">3290</span></a>
</span><span id="L-3291"><a href="#L-3291"><span class="linenos">3291</span></a>        <span class="c1"># build type is first type section in XML sequence</span>
</span><span id="L-3292"><a href="#L-3292"><span class="linenos">3292</span></a>        <span class="k">if</span> <span class="n">image_type_sections</span><span class="p">:</span>
</span><span id="L-3293"><a href="#L-3293"><span class="linenos">3293</span></a>            <span class="k">return</span> <span class="n">image_type_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3294"><a href="#L-3294"><span class="linenos">3294</span></a>        <span class="k">raise</span> <span class="n">KiwiTypeNotFound</span><span class="p">(</span>
</span><span id="L-3295"><a href="#L-3295"><span class="linenos">3295</span></a>            <span class="s1">&#39;No build type defined with applied profiles: </span><span class="si">{0!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3296"><a href="#L-3296"><span class="linenos">3296</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span>
</span><span id="L-3297"><a href="#L-3297"><span class="linenos">3297</span></a>            <span class="p">)</span>
</span><span id="L-3298"><a href="#L-3298"><span class="linenos">3298</span></a>        <span class="p">)</span>
</span><span id="L-3299"><a href="#L-3299"><span class="linenos">3299</span></a>
</span><span id="L-3300"><a href="#L-3300"><span class="linenos">3300</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_abstract</span><span class="p">):</span>
</span><span id="L-3301"><a href="#L-3301"><span class="linenos">3301</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3302"><a href="#L-3302"><span class="linenos">3302</span></a><span class="sd">        return only those sections matching the instance stored</span>
</span><span id="L-3303"><a href="#L-3303"><span class="linenos">3303</span></a><span class="sd">        profile list from the given XML abstract. Sections without</span>
</span><span id="L-3304"><a href="#L-3304"><span class="linenos">3304</span></a><span class="sd">        a profile are wildcard sections and will be used in any</span>
</span><span id="L-3305"><a href="#L-3305"><span class="linenos">3305</span></a><span class="sd">        case</span>
</span><span id="L-3306"><a href="#L-3306"><span class="linenos">3306</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3307"><a href="#L-3307"><span class="linenos">3307</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3308"><a href="#L-3308"><span class="linenos">3308</span></a>        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">xml_abstract</span><span class="p">:</span>
</span><span id="L-3309"><a href="#L-3309"><span class="linenos">3309</span></a>            <span class="n">profiles</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_profiles</span><span class="p">()</span>
</span><span id="L-3310"><a href="#L-3310"><span class="linenos">3310</span></a>            <span class="k">if</span> <span class="n">profiles</span><span class="p">:</span>
</span><span id="L-3311"><a href="#L-3311"><span class="linenos">3311</span></a>                <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">profiles</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="L-3312"><a href="#L-3312"><span class="linenos">3312</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span> <span class="ow">and</span> <span class="n">profile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span><span class="p">:</span>
</span><span id="L-3313"><a href="#L-3313"><span class="linenos">3313</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span><span id="L-3314"><a href="#L-3314"><span class="linenos">3314</span></a>                        <span class="k">break</span>
</span><span id="L-3315"><a href="#L-3315"><span class="linenos">3315</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3316"><a href="#L-3316"><span class="linenos">3316</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span><span id="L-3317"><a href="#L-3317"><span class="linenos">3317</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-3318"><a href="#L-3318"><span class="linenos">3318</span></a>
</span><span id="L-3319"><a href="#L-3319"><span class="linenos">3319</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_to_volume_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-3320"><a href="#L-3320"><span class="linenos">3320</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-3321"><a href="#L-3321"><span class="linenos">3321</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^\/+&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-3322"><a href="#L-3322"><span class="linenos">3322</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
</span><span id="L-3323"><a href="#L-3323"><span class="linenos">3323</span></a>        <span class="k">return</span> <span class="n">name</span>
</span><span id="L-3324"><a href="#L-3324"><span class="linenos">3324</span></a>
</span><span id="L-3325"><a href="#L-3325"><span class="linenos">3325</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_to_mega_byte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="L-3326"><a href="#L-3326"><span class="linenos">3326</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)([MG]*)&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
</span><span id="L-3327"><a href="#L-3327"><span class="linenos">3327</span></a>        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
</span><span id="L-3328"><a href="#L-3328"><span class="linenos">3328</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3329"><a href="#L-3329"><span class="linenos">3329</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-3330"><a href="#L-3330"><span class="linenos">3330</span></a>            <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
</span><span id="L-3331"><a href="#L-3331"><span class="linenos">3331</span></a>                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1024</span>
</span><span id="L-3332"><a href="#L-3332"><span class="linenos">3332</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3333"><a href="#L-3333"><span class="linenos">3333</span></a>                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-3334"><a href="#L-3334"><span class="linenos">3334</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3335"><a href="#L-3335"><span class="linenos">3335</span></a>            <span class="k">return</span> <span class="n">size</span>
</span></pre></div>


            </section>
                <section id="log">
                    <div class="attr variable">
            <span class="name">log</span>        =
<span class="default_value">&lt;Logger kiwi (DEBUG)&gt;</span>

        
    </div>
    <a class="headerlink" href="#log"></a>
    
    

                </section>
                <section id="description_type">
                    <div class="attr class">
            
    <span class="def">class</span>
    <span class="name">description_type</span><wbr>(<span class="base">builtins.tuple</span>):

        
    </div>
    <a class="headerlink" href="#description_type"></a>
    
            <div class="docstring"><p>description_type(author, contact, specification)</p>
</div>


                            <div id="description_type.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">description_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">author</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">contact</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">specification</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#description_type.__init__"></a>
    
            <div class="docstring"><p>Create new instance of description_type(author, contact, specification)</p>
</div>


                            </div>
                            <div id="description_type.author" class="classattr">
                                <div class="attr variable">
            <span class="name">author</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#description_type.author"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="description_type.contact" class="classattr">
                                <div class="attr variable">
            <span class="name">contact</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#description_type.contact"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="description_type.specification" class="classattr">
                                <div class="attr variable">
            <span class="name">specification</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#description_type.specification"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                </section>
                <section id="package_type">
                    <div class="attr class">
            
    <span class="def">class</span>
    <span class="name">package_type</span><wbr>(<span class="base">builtins.tuple</span>):

        
    </div>
    <a class="headerlink" href="#package_type"></a>
    
            <div class="docstring"><p>package_type(packages_section, package_section)</p>
</div>


                            <div id="package_type.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">package_type</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">packages_section</span><span class="p">:</span> <span class="n">kiwi</span><span class="o">.</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span>,</span><span class="param">	<span class="n">package_section</span><span class="p">:</span> <span class="n">kiwi</span><span class="o">.</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#package_type.__init__"></a>
    
            <div class="docstring"><p>Create new instance of package_type(packages_section, package_section)</p>
</div>


                            </div>
                            <div id="package_type.packages_section" class="classattr">
                                <div class="attr variable">
            <span class="name">packages_section</span><span class="annotation">: kiwi.xml_parse.packages</span>

        
    </div>
    <a class="headerlink" href="#package_type.packages_section"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="package_type.package_section" class="classattr">
                                <div class="attr variable">
            <span class="name">package_section</span><span class="annotation">: kiwi.xml_parse.package</span>

        
    </div>
    <a class="headerlink" href="#package_type.package_section"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                </section>
                <section id="size_type">
                    <div class="attr class">
            
    <span class="def">class</span>
    <span class="name">size_type</span><wbr>(<span class="base">builtins.tuple</span>):

        
    </div>
    <a class="headerlink" href="#size_type"></a>
    
            <div class="docstring"><p>size_type(mbytes, additive)</p>
</div>


                            <div id="size_type.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">size_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">mbytes</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">additive</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#size_type.__init__"></a>
    
            <div class="docstring"><p>Create new instance of size_type(mbytes, additive)</p>
</div>


                            </div>
                            <div id="size_type.mbytes" class="classattr">
                                <div class="attr variable">
            <span class="name">mbytes</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#size_type.mbytes"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="size_type.additive" class="classattr">
                                <div class="attr variable">
            <span class="name">additive</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#size_type.additive"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                </section>
                <section id="volume_type">
                    <div class="attr class">
            
    <span class="def">class</span>
    <span class="name">volume_type</span><wbr>(<span class="base">builtins.tuple</span>):

        
    </div>
    <a class="headerlink" href="#volume_type"></a>
    
            <div class="docstring"><p>volume_type(name, parent, size, realpath, mountpoint, fullsize, label, attributes, is_root_volume)</p>
</div>


                            <div id="volume_type.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">volume_type</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">parent</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">size</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">realpath</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">mountpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">fullsize</span><span class="p">:</span> <span class="nb">bool</span>,</span><span class="param">	<span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">attributes</span><span class="p">:</span> <span class="nb">list</span>,</span><span class="param">	<span class="n">is_root_volume</span><span class="p">:</span> <span class="nb">bool</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#volume_type.__init__"></a>
    
            <div class="docstring"><p>Create new instance of volume_type(name, parent, size, realpath, mountpoint, fullsize, label, attributes, is_root_volume)</p>
</div>


                            </div>
                            <div id="volume_type.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#volume_type.name"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="volume_type.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#volume_type.parent"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="volume_type.size" class="classattr">
                                <div class="attr variable">
            <span class="name">size</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#volume_type.size"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                            <div id="volume_type.realpath" class="classattr">
                                <div class="attr variable">
            <span class="name">realpath</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#volume_type.realpath"></a>
    
            <div class="docstring"><p>Alias for field number 3</p>
</div>


                            </div>
                            <div id="volume_type.mountpoint" class="classattr">
                                <div class="attr variable">
            <span class="name">mountpoint</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#volume_type.mountpoint"></a>
    
            <div class="docstring"><p>Alias for field number 4</p>
</div>


                            </div>
                            <div id="volume_type.fullsize" class="classattr">
                                <div class="attr variable">
            <span class="name">fullsize</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#volume_type.fullsize"></a>
    
            <div class="docstring"><p>Alias for field number 5</p>
</div>


                            </div>
                            <div id="volume_type.label" class="classattr">
                                <div class="attr variable">
            <span class="name">label</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#volume_type.label"></a>
    
            <div class="docstring"><p>Alias for field number 6</p>
</div>


                            </div>
                            <div id="volume_type.attributes" class="classattr">
                                <div class="attr variable">
            <span class="name">attributes</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#volume_type.attributes"></a>
    
            <div class="docstring"><p>Alias for field number 7</p>
</div>


                            </div>
                            <div id="volume_type.is_root_volume" class="classattr">
                                <div class="attr variable">
            <span class="name">is_root_volume</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#volume_type.is_root_volume"></a>
    
            <div class="docstring"><p>Alias for field number 8</p>
</div>


                            </div>
                </section>
                <section id="DracutT">
                            <input id="DracutT-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DracutT</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="DracutT-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DracutT"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DracutT-84"><a href="#DracutT-84"><span class="linenos">84</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DracutT</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="DracutT-85"><a href="#DracutT-85"><span class="linenos">85</span></a>    <span class="n">uefi</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="DracutT-86"><a href="#DracutT-86"><span class="linenos">86</span></a>    <span class="n">modules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="DracutT-87"><a href="#DracutT-87"><span class="linenos">87</span></a>    <span class="n">drivers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>DracutT(uefi, modules, drivers)</p>
</div>


                            <div id="DracutT.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">DracutT</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">uefi</span><span class="p">:</span> <span class="nb">bool</span>, </span><span class="param"><span class="n">modules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="n">drivers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#DracutT.__init__"></a>
    
            <div class="docstring"><p>Create new instance of DracutT(uefi, modules, drivers)</p>
</div>


                            </div>
                            <div id="DracutT.uefi" class="classattr">
                                <div class="attr variable">
            <span class="name">uefi</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#DracutT.uefi"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="DracutT.modules" class="classattr">
                                <div class="attr variable">
            <span class="name">modules</span><span class="annotation">: List[str]</span>

        
    </div>
    <a class="headerlink" href="#DracutT.modules"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="DracutT.drivers" class="classattr">
                                <div class="attr variable">
            <span class="name">drivers</span><span class="annotation">: List[str]</span>

        
    </div>
    <a class="headerlink" href="#DracutT.drivers"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                </section>
                <section id="FileT">
                            <input id="FileT-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FileT</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="FileT-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileT"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileT-90"><a href="#FileT-90"><span class="linenos">90</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FileT</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="FileT-91"><a href="#FileT-91"><span class="linenos">91</span></a>    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="FileT-92"><a href="#FileT-92"><span class="linenos">92</span></a>    <span class="n">owner</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="FileT-93"><a href="#FileT-93"><span class="linenos">93</span></a>    <span class="n">permissions</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>FileT(target, owner, permissions)</p>
</div>


                            <div id="FileT.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">FileT</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">target</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">owner</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">permissions</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#FileT.__init__"></a>
    
            <div class="docstring"><p>Create new instance of FileT(target, owner, permissions)</p>
</div>


                            </div>
                            <div id="FileT.target" class="classattr">
                                <div class="attr variable">
            <span class="name">target</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FileT.target"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="FileT.owner" class="classattr">
                                <div class="attr variable">
            <span class="name">owner</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FileT.owner"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="FileT.permissions" class="classattr">
                                <div class="attr variable">
            <span class="name">permissions</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FileT.permissions"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                </section>
                <section id="ContainerT">
                            <input id="ContainerT-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ContainerT</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="ContainerT-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ContainerT"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ContainerT-96"><a href="#ContainerT-96"><span class="linenos"> 96</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ContainerT</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="ContainerT-97"><a href="#ContainerT-97"><span class="linenos"> 97</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ContainerT-98"><a href="#ContainerT-98"><span class="linenos"> 98</span></a>    <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ContainerT-99"><a href="#ContainerT-99"><span class="linenos"> 99</span></a>    <span class="n">container_file</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ContainerT-100"><a href="#ContainerT-100"><span class="linenos">100</span></a>    <span class="n">fetch_only</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="ContainerT-101"><a href="#ContainerT-101"><span class="linenos">101</span></a>    <span class="n">fetch_command</span><span class="p">:</span> <span class="n">Callable</span>
</span><span id="ContainerT-102"><a href="#ContainerT-102"><span class="linenos">102</span></a>    <span class="n">load_command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>ContainerT(name, backend, container_file, fetch_only, fetch_command, load_command)</p>
</div>


                            <div id="ContainerT.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">ContainerT</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">backend</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">container_file</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">fetch_only</span><span class="p">:</span> <span class="nb">bool</span>,</span><span class="param">	<span class="n">fetch_command</span><span class="p">:</span> <span class="n">Callable</span>,</span><span class="param">	<span class="n">load_command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#ContainerT.__init__"></a>
    
            <div class="docstring"><p>Create new instance of ContainerT(name, backend, container_file, fetch_only, fetch_command, load_command)</p>
</div>


                            </div>
                            <div id="ContainerT.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ContainerT.name"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="ContainerT.backend" class="classattr">
                                <div class="attr variable">
            <span class="name">backend</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ContainerT.backend"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="ContainerT.container_file" class="classattr">
                                <div class="attr variable">
            <span class="name">container_file</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ContainerT.container_file"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                            <div id="ContainerT.fetch_only" class="classattr">
                                <div class="attr variable">
            <span class="name">fetch_only</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#ContainerT.fetch_only"></a>
    
            <div class="docstring"><p>Alias for field number 3</p>
</div>


                            </div>
                            <div id="ContainerT.fetch_command" class="classattr">
                                <div class="attr variable">
            <span class="name">fetch_command</span><span class="annotation">: Callable</span>

        
    </div>
    <a class="headerlink" href="#ContainerT.fetch_command"></a>
    
            <div class="docstring"><p>Alias for field number 4</p>
</div>


                            </div>
                            <div id="ContainerT.load_command" class="classattr">
                                <div class="attr variable">
            <span class="name">load_command</span><span class="annotation">: List[str]</span>

        
    </div>
    <a class="headerlink" href="#ContainerT.load_command"></a>
    
            <div class="docstring"><p>Alias for field number 5</p>
</div>


                            </div>
                </section>
                <section id="XMLState">
                            <input id="XMLState-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">XMLState</span>:

                <label class="view-source-button" for="XMLState-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState-105"><a href="#XMLState-105"><span class="linenos"> 105</span></a><span class="k">class</span><span class="w"> </span><span class="nc">XMLState</span><span class="p">:</span>
</span><span id="XMLState-106"><a href="#XMLState-106"><span class="linenos"> 106</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-107"><a href="#XMLState-107"><span class="linenos"> 107</span></a><span class="sd">    **Implements methods to get stateful information from the XML data**</span>
</span><span id="XMLState-108"><a href="#XMLState-108"><span class="linenos"> 108</span></a>
</span><span id="XMLState-109"><a href="#XMLState-109"><span class="linenos"> 109</span></a><span class="sd">    :param object xml_data: parse result from XMLDescription.load()</span>
</span><span id="XMLState-110"><a href="#XMLState-110"><span class="linenos"> 110</span></a><span class="sd">    :param list profiles: list of used profiles</span>
</span><span id="XMLState-111"><a href="#XMLState-111"><span class="linenos"> 111</span></a><span class="sd">    :param object build_type: build &lt;type&gt; section reference</span>
</span><span id="XMLState-112"><a href="#XMLState-112"><span class="linenos"> 112</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="XMLState-113"><a href="#XMLState-113"><span class="linenos"> 113</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="XMLState-114"><a href="#XMLState-114"><span class="linenos"> 114</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">xml_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">profiles</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-115"><a href="#XMLState-115"><span class="linenos"> 115</span></a>        <span class="n">build_type</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-116"><a href="#XMLState-116"><span class="linenos"> 116</span></a>    <span class="p">):</span>
</span><span id="XMLState-117"><a href="#XMLState-117"><span class="linenos"> 117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-118"><a href="#XMLState-118"><span class="linenos"> 118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-119"><a href="#XMLState-119"><span class="linenos"> 119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">PLATFORM_MACHINE</span>
</span><span id="XMLState-120"><a href="#XMLState-120"><span class="linenos"> 120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span> <span class="o">=</span> <span class="n">xml_data</span>
</span><span id="XMLState-121"><a href="#XMLState-121"><span class="linenos"> 121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_used_profiles</span><span class="p">(</span><span class="n">profiles</span><span class="p">)</span>
</span><span id="XMLState-122"><a href="#XMLState-122"><span class="linenos"> 122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_type_section</span><span class="p">(</span>
</span><span id="XMLState-123"><a href="#XMLState-123"><span class="linenos"> 123</span></a>            <span class="n">build_type</span>
</span><span id="XMLState-124"><a href="#XMLState-124"><span class="linenos"> 124</span></a>        <span class="p">)</span>
</span><span id="XMLState-125"><a href="#XMLState-125"><span class="linenos"> 125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resolve_this_path</span><span class="p">()</span>
</span><span id="XMLState-126"><a href="#XMLState-126"><span class="linenos"> 126</span></a>
</span><span id="XMLState-127"><a href="#XMLState-127"><span class="linenos"> 127</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_preferences_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-128"><a href="#XMLState-128"><span class="linenos"> 128</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-129"><a href="#XMLState-129"><span class="linenos"> 129</span></a><span class="sd">        All preferences sections for the selected profiles that match the</span>
</span><span id="XMLState-130"><a href="#XMLState-130"><span class="linenos"> 130</span></a><span class="sd">        host architecture</span>
</span><span id="XMLState-131"><a href="#XMLState-131"><span class="linenos"> 131</span></a>
</span><span id="XMLState-132"><a href="#XMLState-132"><span class="linenos"> 132</span></a><span class="sd">        :return: list of &lt;preferences&gt; section reference(s)</span>
</span><span id="XMLState-133"><a href="#XMLState-133"><span class="linenos"> 133</span></a>
</span><span id="XMLState-134"><a href="#XMLState-134"><span class="linenos"> 134</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-135"><a href="#XMLState-135"><span class="linenos"> 135</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-136"><a href="#XMLState-136"><span class="linenos"> 136</span></a>        <span class="n">preferences_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-137"><a href="#XMLState-137"><span class="linenos"> 137</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_preferences</span><span class="p">()):</span>
</span><span id="XMLState-138"><a href="#XMLState-138"><span class="linenos"> 138</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences_matches_host_architecture</span><span class="p">(</span><span class="n">preferences</span><span class="p">):</span>
</span><span id="XMLState-139"><a href="#XMLState-139"><span class="linenos"> 139</span></a>                <span class="n">preferences_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">preferences</span><span class="p">)</span>
</span><span id="XMLState-140"><a href="#XMLState-140"><span class="linenos"> 140</span></a>        <span class="k">return</span> <span class="n">preferences_list</span>
</span><span id="XMLState-141"><a href="#XMLState-141"><span class="linenos"> 141</span></a>
</span><span id="XMLState-142"><a href="#XMLState-142"><span class="linenos"> 142</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_description_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">description_type</span><span class="p">:</span>
</span><span id="XMLState-143"><a href="#XMLState-143"><span class="linenos"> 143</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-144"><a href="#XMLState-144"><span class="linenos"> 144</span></a><span class="sd">        The description section</span>
</span><span id="XMLState-145"><a href="#XMLState-145"><span class="linenos"> 145</span></a>
</span><span id="XMLState-146"><a href="#XMLState-146"><span class="linenos"> 146</span></a><span class="sd">        :return:</span>
</span><span id="XMLState-147"><a href="#XMLState-147"><span class="linenos"> 147</span></a><span class="sd">            description_type tuple providing the elements</span>
</span><span id="XMLState-148"><a href="#XMLState-148"><span class="linenos"> 148</span></a><span class="sd">            author contact and specification</span>
</span><span id="XMLState-149"><a href="#XMLState-149"><span class="linenos"> 149</span></a>
</span><span id="XMLState-150"><a href="#XMLState-150"><span class="linenos"> 150</span></a><span class="sd">        :rtype: tuple</span>
</span><span id="XMLState-151"><a href="#XMLState-151"><span class="linenos"> 151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-152"><a href="#XMLState-152"><span class="linenos"> 152</span></a>        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_description</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-153"><a href="#XMLState-153"><span class="linenos"> 153</span></a>        <span class="k">return</span> <span class="n">description_type</span><span class="p">(</span>
</span><span id="XMLState-154"><a href="#XMLState-154"><span class="linenos"> 154</span></a>            <span class="n">author</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_author</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="XMLState-155"><a href="#XMLState-155"><span class="linenos"> 155</span></a>            <span class="n">contact</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_contact</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="XMLState-156"><a href="#XMLState-156"><span class="linenos"> 156</span></a>            <span class="n">specification</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_specification</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="XMLState-157"><a href="#XMLState-157"><span class="linenos"> 157</span></a>        <span class="p">)</span>
</span><span id="XMLState-158"><a href="#XMLState-158"><span class="linenos"> 158</span></a>
</span><span id="XMLState-159"><a href="#XMLState-159"><span class="linenos"> 159</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_users_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-160"><a href="#XMLState-160"><span class="linenos"> 160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-161"><a href="#XMLState-161"><span class="linenos"> 161</span></a><span class="sd">        All users sections for the selected profiles</span>
</span><span id="XMLState-162"><a href="#XMLState-162"><span class="linenos"> 162</span></a>
</span><span id="XMLState-163"><a href="#XMLState-163"><span class="linenos"> 163</span></a><span class="sd">        :return: list of &lt;users&gt; section reference(s)</span>
</span><span id="XMLState-164"><a href="#XMLState-164"><span class="linenos"> 164</span></a>
</span><span id="XMLState-165"><a href="#XMLState-165"><span class="linenos"> 165</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-166"><a href="#XMLState-166"><span class="linenos"> 166</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-167"><a href="#XMLState-167"><span class="linenos"> 167</span></a>        <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-168"><a href="#XMLState-168"><span class="linenos"> 168</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_users</span><span class="p">()):</span>
</span><span id="XMLState-169"><a href="#XMLState-169"><span class="linenos"> 169</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_matches_host_architecture</span><span class="p">(</span><span class="n">users_section</span><span class="p">):</span>
</span><span id="XMLState-170"><a href="#XMLState-170"><span class="linenos"> 170</span></a>                <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">users_section</span><span class="p">)</span>
</span><span id="XMLState-171"><a href="#XMLState-171"><span class="linenos"> 171</span></a>        <span class="k">return</span> <span class="n">users</span>
</span><span id="XMLState-172"><a href="#XMLState-172"><span class="linenos"> 172</span></a>
</span><span id="XMLState-173"><a href="#XMLState-173"><span class="linenos"> 173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bundle_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-174"><a href="#XMLState-174"><span class="linenos"> 174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-175"><a href="#XMLState-175"><span class="linenos"> 175</span></a><span class="sd">        Return bundle_format for build type</span>
</span><span id="XMLState-176"><a href="#XMLState-176"><span class="linenos"> 176</span></a>
</span><span id="XMLState-177"><a href="#XMLState-177"><span class="linenos"> 177</span></a><span class="sd">        The bundle_format string is validated against the available</span>
</span><span id="XMLState-178"><a href="#XMLState-178"><span class="linenos"> 178</span></a><span class="sd">        name tags from kiwi.system.result::result_name_tags.</span>
</span><span id="XMLState-179"><a href="#XMLState-179"><span class="linenos"> 179</span></a>
</span><span id="XMLState-180"><a href="#XMLState-180"><span class="linenos"> 180</span></a><span class="sd">        :return: bundle format string</span>
</span><span id="XMLState-181"><a href="#XMLState-181"><span class="linenos"> 181</span></a>
</span><span id="XMLState-182"><a href="#XMLState-182"><span class="linenos"> 182</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-183"><a href="#XMLState-183"><span class="linenos"> 183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-184"><a href="#XMLState-184"><span class="linenos"> 184</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_bundle_format</span><span class="p">()</span>
</span><span id="XMLState-185"><a href="#XMLState-185"><span class="linenos"> 185</span></a>
</span><span id="XMLState-186"><a href="#XMLState-186"><span class="linenos"> 186</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-187"><a href="#XMLState-187"><span class="linenos"> 187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-188"><a href="#XMLState-188"><span class="linenos"> 188</span></a><span class="sd">        Default build type name</span>
</span><span id="XMLState-189"><a href="#XMLState-189"><span class="linenos"> 189</span></a>
</span><span id="XMLState-190"><a href="#XMLState-190"><span class="linenos"> 190</span></a><span class="sd">        :return: Content of image attribute from build type</span>
</span><span id="XMLState-191"><a href="#XMLState-191"><span class="linenos"> 191</span></a>
</span><span id="XMLState-192"><a href="#XMLState-192"><span class="linenos"> 192</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-193"><a href="#XMLState-193"><span class="linenos"> 193</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-194"><a href="#XMLState-194"><span class="linenos"> 194</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_image</span><span class="p">()</span>
</span><span id="XMLState-195"><a href="#XMLState-195"><span class="linenos"> 195</span></a>
</span><span id="XMLState-196"><a href="#XMLState-196"><span class="linenos"> 196</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">btrfs_default_volume_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-197"><a href="#XMLState-197"><span class="linenos"> 197</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-198"><a href="#XMLState-198"><span class="linenos"> 198</span></a><span class="sd">        Check if setting a default volume for btrfs is requested</span>
</span><span id="XMLState-199"><a href="#XMLState-199"><span class="linenos"> 199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-200"><a href="#XMLState-200"><span class="linenos"> 200</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_btrfs_set_default_volume</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="XMLState-201"><a href="#XMLState-201"><span class="linenos"> 201</span></a>            <span class="c1"># Setting a default volume is explicitly switched off</span>
</span><span id="XMLState-202"><a href="#XMLState-202"><span class="linenos"> 202</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-203"><a href="#XMLState-203"><span class="linenos"> 203</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-204"><a href="#XMLState-204"><span class="linenos"> 204</span></a>            <span class="c1"># In any other case (True | None) a default volume</span>
</span><span id="XMLState-205"><a href="#XMLState-205"><span class="linenos"> 205</span></a>            <span class="c1"># is wanted and will be set</span>
</span><span id="XMLState-206"><a href="#XMLState-206"><span class="linenos"> 206</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState-207"><a href="#XMLState-207"><span class="linenos"> 207</span></a>
</span><span id="XMLState-208"><a href="#XMLState-208"><span class="linenos"> 208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-209"><a href="#XMLState-209"><span class="linenos"> 209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-210"><a href="#XMLState-210"><span class="linenos"> 210</span></a><span class="sd">        Image version from preferences section.</span>
</span><span id="XMLState-211"><a href="#XMLState-211"><span class="linenos"> 211</span></a>
</span><span id="XMLState-212"><a href="#XMLState-212"><span class="linenos"> 212</span></a><span class="sd">        Multiple occurences of version in preferences sections are not</span>
</span><span id="XMLState-213"><a href="#XMLState-213"><span class="linenos"> 213</span></a><span class="sd">        forbidden, however only the first version found defines the</span>
</span><span id="XMLState-214"><a href="#XMLState-214"><span class="linenos"> 214</span></a><span class="sd">        final image version</span>
</span><span id="XMLState-215"><a href="#XMLState-215"><span class="linenos"> 215</span></a>
</span><span id="XMLState-216"><a href="#XMLState-216"><span class="linenos"> 216</span></a><span class="sd">        :return: Content of &lt;version&gt; section</span>
</span><span id="XMLState-217"><a href="#XMLState-217"><span class="linenos"> 217</span></a>
</span><span id="XMLState-218"><a href="#XMLState-218"><span class="linenos"> 218</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-219"><a href="#XMLState-219"><span class="linenos"> 219</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-220"><a href="#XMLState-220"><span class="linenos"> 220</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-221"><a href="#XMLState-221"><span class="linenos"> 221</span></a>            <span class="n">version</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span>
</span><span id="XMLState-222"><a href="#XMLState-222"><span class="linenos"> 222</span></a>            <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
</span><span id="XMLState-223"><a href="#XMLState-223"><span class="linenos"> 223</span></a>                <span class="k">return</span> <span class="n">version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-224"><a href="#XMLState-224"><span class="linenos"> 224</span></a>        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-225"><a href="#XMLState-225"><span class="linenos"> 225</span></a>
</span><span id="XMLState-226"><a href="#XMLState-226"><span class="linenos"> 226</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_initrd_system</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-227"><a href="#XMLState-227"><span class="linenos"> 227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-228"><a href="#XMLState-228"><span class="linenos"> 228</span></a><span class="sd">        Name of initrd system to use</span>
</span><span id="XMLState-229"><a href="#XMLState-229"><span class="linenos"> 229</span></a>
</span><span id="XMLState-230"><a href="#XMLState-230"><span class="linenos"> 230</span></a><span class="sd">        Depending on the image type a specific initrd system is</span>
</span><span id="XMLState-231"><a href="#XMLState-231"><span class="linenos"> 231</span></a><span class="sd">        either pre selected or free of choice according to the</span>
</span><span id="XMLState-232"><a href="#XMLState-232"><span class="linenos"> 232</span></a><span class="sd">        XML type setup.</span>
</span><span id="XMLState-233"><a href="#XMLState-233"><span class="linenos"> 233</span></a>
</span><span id="XMLState-234"><a href="#XMLState-234"><span class="linenos"> 234</span></a><span class="sd">        :return: &#39;dracut&#39;, &#39;kiwi&#39; or &#39;none&#39;</span>
</span><span id="XMLState-235"><a href="#XMLState-235"><span class="linenos"> 235</span></a>
</span><span id="XMLState-236"><a href="#XMLState-236"><span class="linenos"> 236</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-237"><a href="#XMLState-237"><span class="linenos"> 237</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-238"><a href="#XMLState-238"><span class="linenos"> 238</span></a>        <span class="n">pre_selection_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="XMLState-239"><a href="#XMLState-239"><span class="linenos"> 239</span></a>            <span class="s1">&#39;vmx&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState-240"><a href="#XMLState-240"><span class="linenos"> 240</span></a>            <span class="s1">&#39;oem&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState-241"><a href="#XMLState-241"><span class="linenos"> 241</span></a>            <span class="s1">&#39;iso&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState-242"><a href="#XMLState-242"><span class="linenos"> 242</span></a>            <span class="s1">&#39;kis&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState-243"><a href="#XMLState-243"><span class="linenos"> 243</span></a>            <span class="s1">&#39;pxe&#39;</span><span class="p">:</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
</span><span id="XMLState-244"><a href="#XMLState-244"><span class="linenos"> 244</span></a>        <span class="p">}</span>
</span><span id="XMLState-245"><a href="#XMLState-245"><span class="linenos"> 245</span></a>        <span class="n">build_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()</span>
</span><span id="XMLState-246"><a href="#XMLState-246"><span class="linenos"> 246</span></a>        <span class="n">default_initrd_system</span> <span class="o">=</span> <span class="n">pre_selection_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">build_type</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;none&#39;</span>
</span><span id="XMLState-247"><a href="#XMLState-247"><span class="linenos"> 247</span></a>
</span><span id="XMLState-248"><a href="#XMLState-248"><span class="linenos"> 248</span></a>        <span class="k">if</span> <span class="n">build_type</span> <span class="o">==</span> <span class="s1">&#39;iso&#39;</span><span class="p">:</span>
</span><span id="XMLState-249"><a href="#XMLState-249"><span class="linenos"> 249</span></a>            <span class="c1"># iso type always use dracut as initrd system</span>
</span><span id="XMLState-250"><a href="#XMLState-250"><span class="linenos"> 250</span></a>            <span class="k">return</span> <span class="n">default_initrd_system</span>
</span><span id="XMLState-251"><a href="#XMLState-251"><span class="linenos"> 251</span></a>
</span><span id="XMLState-252"><a href="#XMLState-252"><span class="linenos"> 252</span></a>        <span class="c1"># Allow to choose for any other build type</span>
</span><span id="XMLState-253"><a href="#XMLState-253"><span class="linenos"> 253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_initrd_system</span><span class="p">()</span> <span class="ow">or</span> <span class="n">default_initrd_system</span>
</span><span id="XMLState-254"><a href="#XMLState-254"><span class="linenos"> 254</span></a>
</span><span id="XMLState-255"><a href="#XMLState-255"><span class="linenos"> 255</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_locale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="XMLState-256"><a href="#XMLState-256"><span class="linenos"> 256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-257"><a href="#XMLState-257"><span class="linenos"> 257</span></a><span class="sd">        Gets list of locale names if configured. Takes</span>
</span><span id="XMLState-258"><a href="#XMLState-258"><span class="linenos"> 258</span></a><span class="sd">        the first locale setup from the existing preferences</span>
</span><span id="XMLState-259"><a href="#XMLState-259"><span class="linenos"> 259</span></a><span class="sd">        sections into account.</span>
</span><span id="XMLState-260"><a href="#XMLState-260"><span class="linenos"> 260</span></a>
</span><span id="XMLState-261"><a href="#XMLState-261"><span class="linenos"> 261</span></a><span class="sd">        :return: List of names or None</span>
</span><span id="XMLState-262"><a href="#XMLState-262"><span class="linenos"> 262</span></a>
</span><span id="XMLState-263"><a href="#XMLState-263"><span class="linenos"> 263</span></a><span class="sd">        :rtype: list|None</span>
</span><span id="XMLState-264"><a href="#XMLState-264"><span class="linenos"> 264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-265"><a href="#XMLState-265"><span class="linenos"> 265</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-266"><a href="#XMLState-266"><span class="linenos"> 266</span></a>            <span class="n">locale_section</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_locale</span><span class="p">()</span>
</span><span id="XMLState-267"><a href="#XMLState-267"><span class="linenos"> 267</span></a>            <span class="k">if</span> <span class="n">locale_section</span><span class="p">:</span>
</span><span id="XMLState-268"><a href="#XMLState-268"><span class="linenos"> 268</span></a>                <span class="k">return</span> <span class="n">locale_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="XMLState-269"><a href="#XMLState-269"><span class="linenos"> 269</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-270"><a href="#XMLState-270"><span class="linenos"> 270</span></a>
</span><span id="XMLState-271"><a href="#XMLState-271"><span class="linenos"> 271</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_locale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="XMLState-272"><a href="#XMLState-272"><span class="linenos"> 272</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-273"><a href="#XMLState-273"><span class="linenos"> 273</span></a><span class="sd">        Gets list of locale names to filter out by rpm</span>
</span><span id="XMLState-274"><a href="#XMLState-274"><span class="linenos"> 274</span></a><span class="sd">        if rpm-locale-filtering is switched on the</span>
</span><span id="XMLState-275"><a href="#XMLState-275"><span class="linenos"> 275</span></a><span class="sd">        the list always contains: [POSIX, C, C.UTF-8]</span>
</span><span id="XMLState-276"><a href="#XMLState-276"><span class="linenos"> 276</span></a><span class="sd">        and is extended by the optionaly configured</span>
</span><span id="XMLState-277"><a href="#XMLState-277"><span class="linenos"> 277</span></a><span class="sd">        locale</span>
</span><span id="XMLState-278"><a href="#XMLState-278"><span class="linenos"> 278</span></a>
</span><span id="XMLState-279"><a href="#XMLState-279"><span class="linenos"> 279</span></a><span class="sd">        :return: List of names or None</span>
</span><span id="XMLState-280"><a href="#XMLState-280"><span class="linenos"> 280</span></a>
</span><span id="XMLState-281"><a href="#XMLState-281"><span class="linenos"> 281</span></a><span class="sd">        :rtype: list|None</span>
</span><span id="XMLState-282"><a href="#XMLState-282"><span class="linenos"> 282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-283"><a href="#XMLState-283"><span class="linenos"> 283</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rpm_locale_filtering</span><span class="p">():</span>
</span><span id="XMLState-284"><a href="#XMLState-284"><span class="linenos"> 284</span></a>            <span class="n">rpm_locale</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POSIX&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C.UTF-8&#39;</span><span class="p">]</span>
</span><span id="XMLState-285"><a href="#XMLState-285"><span class="linenos"> 285</span></a>            <span class="n">configured_locale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_locale</span><span class="p">()</span>
</span><span id="XMLState-286"><a href="#XMLState-286"><span class="linenos"> 286</span></a>            <span class="k">if</span> <span class="n">configured_locale</span><span class="p">:</span>
</span><span id="XMLState-287"><a href="#XMLState-287"><span class="linenos"> 287</span></a>                <span class="k">for</span> <span class="n">locale</span> <span class="ow">in</span> <span class="n">configured_locale</span><span class="p">:</span>
</span><span id="XMLState-288"><a href="#XMLState-288"><span class="linenos"> 288</span></a>                    <span class="n">rpm_locale</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
</span><span id="XMLState-289"><a href="#XMLState-289"><span class="linenos"> 289</span></a>            <span class="k">return</span> <span class="n">rpm_locale</span>
</span><span id="XMLState-290"><a href="#XMLState-290"><span class="linenos"> 290</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-291"><a href="#XMLState-291"><span class="linenos"> 291</span></a>
</span><span id="XMLState-292"><a href="#XMLState-292"><span class="linenos"> 292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_locale_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-293"><a href="#XMLState-293"><span class="linenos"> 293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-294"><a href="#XMLState-294"><span class="linenos"> 294</span></a><span class="sd">        Gets the rpm-locale-filtering configuration flag. Returns</span>
</span><span id="XMLState-295"><a href="#XMLState-295"><span class="linenos"> 295</span></a><span class="sd">        False if not present.</span>
</span><span id="XMLState-296"><a href="#XMLState-296"><span class="linenos"> 296</span></a>
</span><span id="XMLState-297"><a href="#XMLState-297"><span class="linenos"> 297</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-298"><a href="#XMLState-298"><span class="linenos"> 298</span></a>
</span><span id="XMLState-299"><a href="#XMLState-299"><span class="linenos"> 299</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-300"><a href="#XMLState-300"><span class="linenos"> 300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-301"><a href="#XMLState-301"><span class="linenos"> 301</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-302"><a href="#XMLState-302"><span class="linenos"> 302</span></a>            <span class="n">locale_filtering</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_locale_filtering</span><span class="p">()</span>
</span><span id="XMLState-303"><a href="#XMLState-303"><span class="linenos"> 303</span></a>            <span class="k">if</span> <span class="n">locale_filtering</span><span class="p">:</span>
</span><span id="XMLState-304"><a href="#XMLState-304"><span class="linenos"> 304</span></a>                <span class="k">return</span> <span class="n">locale_filtering</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-305"><a href="#XMLState-305"><span class="linenos"> 305</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-306"><a href="#XMLState-306"><span class="linenos"> 306</span></a>
</span><span id="XMLState-307"><a href="#XMLState-307"><span class="linenos"> 307</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_excludedocs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-308"><a href="#XMLState-308"><span class="linenos"> 308</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-309"><a href="#XMLState-309"><span class="linenos"> 309</span></a><span class="sd">        Gets the rpm-excludedocs configuration flag. Returns</span>
</span><span id="XMLState-310"><a href="#XMLState-310"><span class="linenos"> 310</span></a><span class="sd">        False if not present.</span>
</span><span id="XMLState-311"><a href="#XMLState-311"><span class="linenos"> 311</span></a>
</span><span id="XMLState-312"><a href="#XMLState-312"><span class="linenos"> 312</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-313"><a href="#XMLState-313"><span class="linenos"> 313</span></a>
</span><span id="XMLState-314"><a href="#XMLState-314"><span class="linenos"> 314</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-315"><a href="#XMLState-315"><span class="linenos"> 315</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-316"><a href="#XMLState-316"><span class="linenos"> 316</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-317"><a href="#XMLState-317"><span class="linenos"> 317</span></a>            <span class="n">exclude_docs</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_excludedocs</span><span class="p">()</span>
</span><span id="XMLState-318"><a href="#XMLState-318"><span class="linenos"> 318</span></a>            <span class="k">if</span> <span class="n">exclude_docs</span><span class="p">:</span>
</span><span id="XMLState-319"><a href="#XMLState-319"><span class="linenos"> 319</span></a>                <span class="k">return</span> <span class="n">exclude_docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-320"><a href="#XMLState-320"><span class="linenos"> 320</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-321"><a href="#XMLState-321"><span class="linenos"> 321</span></a>
</span><span id="XMLState-322"><a href="#XMLState-322"><span class="linenos"> 322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_check_signatures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-323"><a href="#XMLState-323"><span class="linenos"> 323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-324"><a href="#XMLState-324"><span class="linenos"> 324</span></a><span class="sd">        Gets the rpm-check-signatures configuration flag. Returns</span>
</span><span id="XMLState-325"><a href="#XMLState-325"><span class="linenos"> 325</span></a><span class="sd">        False if not present.</span>
</span><span id="XMLState-326"><a href="#XMLState-326"><span class="linenos"> 326</span></a>
</span><span id="XMLState-327"><a href="#XMLState-327"><span class="linenos"> 327</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-328"><a href="#XMLState-328"><span class="linenos"> 328</span></a>
</span><span id="XMLState-329"><a href="#XMLState-329"><span class="linenos"> 329</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-330"><a href="#XMLState-330"><span class="linenos"> 330</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-331"><a href="#XMLState-331"><span class="linenos"> 331</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-332"><a href="#XMLState-332"><span class="linenos"> 332</span></a>            <span class="n">check_signatures</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_check_signatures</span><span class="p">()</span>
</span><span id="XMLState-333"><a href="#XMLState-333"><span class="linenos"> 333</span></a>            <span class="k">if</span> <span class="n">check_signatures</span><span class="p">:</span>
</span><span id="XMLState-334"><a href="#XMLState-334"><span class="linenos"> 334</span></a>                <span class="k">return</span> <span class="n">check_signatures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-335"><a href="#XMLState-335"><span class="linenos"> 335</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-336"><a href="#XMLState-336"><span class="linenos"> 336</span></a>
</span><span id="XMLState-337"><a href="#XMLState-337"><span class="linenos"> 337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_package_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-338"><a href="#XMLState-338"><span class="linenos"> 338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-339"><a href="#XMLState-339"><span class="linenos"> 339</span></a><span class="sd">        Get configured package manager from selected preferences section</span>
</span><span id="XMLState-340"><a href="#XMLState-340"><span class="linenos"> 340</span></a>
</span><span id="XMLState-341"><a href="#XMLState-341"><span class="linenos"> 341</span></a><span class="sd">        :return: Content of the &lt;packagemanager&gt; section</span>
</span><span id="XMLState-342"><a href="#XMLState-342"><span class="linenos"> 342</span></a>
</span><span id="XMLState-343"><a href="#XMLState-343"><span class="linenos"> 343</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-344"><a href="#XMLState-344"><span class="linenos"> 344</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-345"><a href="#XMLState-345"><span class="linenos"> 345</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-346"><a href="#XMLState-346"><span class="linenos"> 346</span></a>            <span class="n">package_manager</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_packagemanager</span><span class="p">()</span>
</span><span id="XMLState-347"><a href="#XMLState-347"><span class="linenos"> 347</span></a>            <span class="k">if</span> <span class="n">package_manager</span><span class="p">:</span>
</span><span id="XMLState-348"><a href="#XMLState-348"><span class="linenos"> 348</span></a>                <span class="k">return</span> <span class="n">package_manager</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-349"><a href="#XMLState-349"><span class="linenos"> 349</span></a>        <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_package_manager</span><span class="p">()</span>
</span><span id="XMLState-350"><a href="#XMLState-350"><span class="linenos"> 350</span></a>
</span><span id="XMLState-351"><a href="#XMLState-351"><span class="linenos"> 351</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_release_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-352"><a href="#XMLState-352"><span class="linenos"> 352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-353"><a href="#XMLState-353"><span class="linenos"> 353</span></a><span class="sd">        Get configured release version from selected preferences section</span>
</span><span id="XMLState-354"><a href="#XMLState-354"><span class="linenos"> 354</span></a>
</span><span id="XMLState-355"><a href="#XMLState-355"><span class="linenos"> 355</span></a><span class="sd">        :return: Content of the &lt;release-version&gt; section or &#39;&#39;</span>
</span><span id="XMLState-356"><a href="#XMLState-356"><span class="linenos"> 356</span></a>
</span><span id="XMLState-357"><a href="#XMLState-357"><span class="linenos"> 357</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-358"><a href="#XMLState-358"><span class="linenos"> 358</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-359"><a href="#XMLState-359"><span class="linenos"> 359</span></a>        <span class="n">release_version</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-360"><a href="#XMLState-360"><span class="linenos"> 360</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-361"><a href="#XMLState-361"><span class="linenos"> 361</span></a>            <span class="n">release_version</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_release_version</span><span class="p">()</span>
</span><span id="XMLState-362"><a href="#XMLState-362"><span class="linenos"> 362</span></a>            <span class="k">if</span> <span class="n">release_version</span><span class="p">:</span>
</span><span id="XMLState-363"><a href="#XMLState-363"><span class="linenos"> 363</span></a>                <span class="n">release_version</span> <span class="o">=</span> <span class="n">release_version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-364"><a href="#XMLState-364"><span class="linenos"> 364</span></a>                <span class="k">break</span>
</span><span id="XMLState-365"><a href="#XMLState-365"><span class="linenos"> 365</span></a>        <span class="k">return</span> <span class="n">release_version</span>
</span><span id="XMLState-366"><a href="#XMLState-366"><span class="linenos"> 366</span></a>
</span><span id="XMLState-367"><a href="#XMLState-367"><span class="linenos"> 367</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_types</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-368"><a href="#XMLState-368"><span class="linenos"> 368</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-369"><a href="#XMLState-369"><span class="linenos"> 369</span></a><span class="sd">        List of packages sections matching given section type(s)</span>
</span><span id="XMLState-370"><a href="#XMLState-370"><span class="linenos"> 370</span></a>
</span><span id="XMLState-371"><a href="#XMLState-371"><span class="linenos"> 371</span></a><span class="sd">        :param list section_types: type name(s) from packages sections</span>
</span><span id="XMLState-372"><a href="#XMLState-372"><span class="linenos"> 372</span></a>
</span><span id="XMLState-373"><a href="#XMLState-373"><span class="linenos"> 373</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="XMLState-374"><a href="#XMLState-374"><span class="linenos"> 374</span></a>
</span><span id="XMLState-375"><a href="#XMLState-375"><span class="linenos"> 375</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-376"><a href="#XMLState-376"><span class="linenos"> 376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-377"><a href="#XMLState-377"><span class="linenos"> 377</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-378"><a href="#XMLState-378"><span class="linenos"> 378</span></a>        <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-379"><a href="#XMLState-379"><span class="linenos"> 379</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_packages</span><span class="p">()</span>
</span><span id="XMLState-380"><a href="#XMLState-380"><span class="linenos"> 380</span></a>        <span class="p">)</span>
</span><span id="XMLState-381"><a href="#XMLState-381"><span class="linenos"> 381</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState-382"><a href="#XMLState-382"><span class="linenos"> 382</span></a>            <span class="n">packages_type</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span>
</span><span id="XMLState-383"><a href="#XMLState-383"><span class="linenos"> 383</span></a>            <span class="k">if</span> <span class="n">packages_type</span> <span class="ow">in</span> <span class="n">section_types</span><span class="p">:</span>
</span><span id="XMLState-384"><a href="#XMLState-384"><span class="linenos"> 384</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">packages</span><span class="p">)</span>
</span><span id="XMLState-385"><a href="#XMLState-385"><span class="linenos"> 385</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-386"><a href="#XMLState-386"><span class="linenos"> 386</span></a>
</span><span id="XMLState-387"><a href="#XMLState-387"><span class="linenos"> 387</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volume_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volume</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-388"><a href="#XMLState-388"><span class="linenos"> 388</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-389"><a href="#XMLState-389"><span class="linenos"> 389</span></a><span class="sd">        Tests if the given volume section is applicable for the current host</span>
</span><span id="XMLState-390"><a href="#XMLState-390"><span class="linenos"> 390</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState-391"><a href="#XMLState-391"><span class="linenos"> 391</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState-392"><a href="#XMLState-392"><span class="linenos"> 392</span></a>
</span><span id="XMLState-393"><a href="#XMLState-393"><span class="linenos"> 393</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState-394"><a href="#XMLState-394"><span class="linenos"> 394</span></a>
</span><span id="XMLState-395"><a href="#XMLState-395"><span class="linenos"> 395</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-396"><a href="#XMLState-396"><span class="linenos"> 396</span></a>
</span><span id="XMLState-397"><a href="#XMLState-397"><span class="linenos"> 397</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-398"><a href="#XMLState-398"><span class="linenos"> 398</span></a>
</span><span id="XMLState-399"><a href="#XMLState-399"><span class="linenos"> 399</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-400"><a href="#XMLState-400"><span class="linenos"> 400</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-401"><a href="#XMLState-401"><span class="linenos"> 401</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">volume</span><span class="p">)</span>
</span><span id="XMLState-402"><a href="#XMLState-402"><span class="linenos"> 402</span></a>
</span><span id="XMLState-403"><a href="#XMLState-403"><span class="linenos"> 403</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">package_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-404"><a href="#XMLState-404"><span class="linenos"> 404</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-405"><a href="#XMLState-405"><span class="linenos"> 405</span></a><span class="sd">        Tests if the given package section is applicable for the current host</span>
</span><span id="XMLState-406"><a href="#XMLState-406"><span class="linenos"> 406</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState-407"><a href="#XMLState-407"><span class="linenos"> 407</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState-408"><a href="#XMLState-408"><span class="linenos"> 408</span></a>
</span><span id="XMLState-409"><a href="#XMLState-409"><span class="linenos"> 409</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState-410"><a href="#XMLState-410"><span class="linenos"> 410</span></a>
</span><span id="XMLState-411"><a href="#XMLState-411"><span class="linenos"> 411</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-412"><a href="#XMLState-412"><span class="linenos"> 412</span></a>
</span><span id="XMLState-413"><a href="#XMLState-413"><span class="linenos"> 413</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-414"><a href="#XMLState-414"><span class="linenos"> 414</span></a>
</span><span id="XMLState-415"><a href="#XMLState-415"><span class="linenos"> 415</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-416"><a href="#XMLState-416"><span class="linenos"> 416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-417"><a href="#XMLState-417"><span class="linenos"> 417</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
</span><span id="XMLState-418"><a href="#XMLState-418"><span class="linenos"> 418</span></a>
</span><span id="XMLState-419"><a href="#XMLState-419"><span class="linenos"> 419</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">users_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">users</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-420"><a href="#XMLState-420"><span class="linenos"> 420</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-421"><a href="#XMLState-421"><span class="linenos"> 421</span></a><span class="sd">        Tests if the given users section is applicable for the current host</span>
</span><span id="XMLState-422"><a href="#XMLState-422"><span class="linenos"> 422</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState-423"><a href="#XMLState-423"><span class="linenos"> 423</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState-424"><a href="#XMLState-424"><span class="linenos"> 424</span></a>
</span><span id="XMLState-425"><a href="#XMLState-425"><span class="linenos"> 425</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState-426"><a href="#XMLState-426"><span class="linenos"> 426</span></a>
</span><span id="XMLState-427"><a href="#XMLState-427"><span class="linenos"> 427</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-428"><a href="#XMLState-428"><span class="linenos"> 428</span></a>
</span><span id="XMLState-429"><a href="#XMLState-429"><span class="linenos"> 429</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-430"><a href="#XMLState-430"><span class="linenos"> 430</span></a>
</span><span id="XMLState-431"><a href="#XMLState-431"><span class="linenos"> 431</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-432"><a href="#XMLState-432"><span class="linenos"> 432</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-433"><a href="#XMLState-433"><span class="linenos"> 433</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</span><span id="XMLState-434"><a href="#XMLState-434"><span class="linenos"> 434</span></a>
</span><span id="XMLState-435"><a href="#XMLState-435"><span class="linenos"> 435</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collection_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-436"><a href="#XMLState-436"><span class="linenos"> 436</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-437"><a href="#XMLState-437"><span class="linenos"> 437</span></a><span class="sd">        Tests if the given namedcollection section is applicable for</span>
</span><span id="XMLState-438"><a href="#XMLState-438"><span class="linenos"> 438</span></a><span class="sd">        the current host architecture. If no architecture is specified</span>
</span><span id="XMLState-439"><a href="#XMLState-439"><span class="linenos"> 439</span></a><span class="sd">        within the section it is considered as a match returning True.</span>
</span><span id="XMLState-440"><a href="#XMLState-440"><span class="linenos"> 440</span></a>
</span><span id="XMLState-441"><a href="#XMLState-441"><span class="linenos"> 441</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState-442"><a href="#XMLState-442"><span class="linenos"> 442</span></a>
</span><span id="XMLState-443"><a href="#XMLState-443"><span class="linenos"> 443</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-444"><a href="#XMLState-444"><span class="linenos"> 444</span></a>
</span><span id="XMLState-445"><a href="#XMLState-445"><span class="linenos"> 445</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-446"><a href="#XMLState-446"><span class="linenos"> 446</span></a>
</span><span id="XMLState-447"><a href="#XMLState-447"><span class="linenos"> 447</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-448"><a href="#XMLState-448"><span class="linenos"> 448</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-449"><a href="#XMLState-449"><span class="linenos"> 449</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</span><span id="XMLState-450"><a href="#XMLState-450"><span class="linenos"> 450</span></a>
</span><span id="XMLState-451"><a href="#XMLState-451"><span class="linenos"> 451</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">profile_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-452"><a href="#XMLState-452"><span class="linenos"> 452</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-453"><a href="#XMLState-453"><span class="linenos"> 453</span></a><span class="sd">        Tests if the given profile section is applicable for the current host</span>
</span><span id="XMLState-454"><a href="#XMLState-454"><span class="linenos"> 454</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState-455"><a href="#XMLState-455"><span class="linenos"> 455</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState-456"><a href="#XMLState-456"><span class="linenos"> 456</span></a>
</span><span id="XMLState-457"><a href="#XMLState-457"><span class="linenos"> 457</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState-458"><a href="#XMLState-458"><span class="linenos"> 458</span></a>
</span><span id="XMLState-459"><a href="#XMLState-459"><span class="linenos"> 459</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-460"><a href="#XMLState-460"><span class="linenos"> 460</span></a>
</span><span id="XMLState-461"><a href="#XMLState-461"><span class="linenos"> 461</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-462"><a href="#XMLState-462"><span class="linenos"> 462</span></a>
</span><span id="XMLState-463"><a href="#XMLState-463"><span class="linenos"> 463</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-464"><a href="#XMLState-464"><span class="linenos"> 464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-465"><a href="#XMLState-465"><span class="linenos"> 465</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
</span><span id="XMLState-466"><a href="#XMLState-466"><span class="linenos"> 466</span></a>
</span><span id="XMLState-467"><a href="#XMLState-467"><span class="linenos"> 467</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">preferences_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preferences</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-468"><a href="#XMLState-468"><span class="linenos"> 468</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-469"><a href="#XMLState-469"><span class="linenos"> 469</span></a><span class="sd">        Tests if the given preferences section is applicable for the</span>
</span><span id="XMLState-470"><a href="#XMLState-470"><span class="linenos"> 470</span></a><span class="sd">        current host architecture. If no architecture is specified within</span>
</span><span id="XMLState-471"><a href="#XMLState-471"><span class="linenos"> 471</span></a><span class="sd">        the section it is considered as a match returning True.</span>
</span><span id="XMLState-472"><a href="#XMLState-472"><span class="linenos"> 472</span></a>
</span><span id="XMLState-473"><a href="#XMLState-473"><span class="linenos"> 473</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState-474"><a href="#XMLState-474"><span class="linenos"> 474</span></a>
</span><span id="XMLState-475"><a href="#XMLState-475"><span class="linenos"> 475</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-476"><a href="#XMLState-476"><span class="linenos"> 476</span></a>
</span><span id="XMLState-477"><a href="#XMLState-477"><span class="linenos"> 477</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-478"><a href="#XMLState-478"><span class="linenos"> 478</span></a>
</span><span id="XMLState-479"><a href="#XMLState-479"><span class="linenos"> 479</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-480"><a href="#XMLState-480"><span class="linenos"> 480</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-481"><a href="#XMLState-481"><span class="linenos"> 481</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">preferences</span><span class="p">)</span>
</span><span id="XMLState-482"><a href="#XMLState-482"><span class="linenos"> 482</span></a>
</span><span id="XMLState-483"><a href="#XMLState-483"><span class="linenos"> 483</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repository_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-484"><a href="#XMLState-484"><span class="linenos"> 484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-485"><a href="#XMLState-485"><span class="linenos"> 485</span></a><span class="sd">        Tests if the given repository section is applicable for the</span>
</span><span id="XMLState-486"><a href="#XMLState-486"><span class="linenos"> 486</span></a><span class="sd">        current host architecture. If no architecture is specified within</span>
</span><span id="XMLState-487"><a href="#XMLState-487"><span class="linenos"> 487</span></a><span class="sd">        the section it is considered as a match returning True.</span>
</span><span id="XMLState-488"><a href="#XMLState-488"><span class="linenos"> 488</span></a>
</span><span id="XMLState-489"><a href="#XMLState-489"><span class="linenos"> 489</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState-490"><a href="#XMLState-490"><span class="linenos"> 490</span></a>
</span><span id="XMLState-491"><a href="#XMLState-491"><span class="linenos"> 491</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-492"><a href="#XMLState-492"><span class="linenos"> 492</span></a>
</span><span id="XMLState-493"><a href="#XMLState-493"><span class="linenos"> 493</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-494"><a href="#XMLState-494"><span class="linenos"> 494</span></a>
</span><span id="XMLState-495"><a href="#XMLState-495"><span class="linenos"> 495</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-496"><a href="#XMLState-496"><span class="linenos"> 496</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-497"><a href="#XMLState-497"><span class="linenos"> 497</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</span><span id="XMLState-498"><a href="#XMLState-498"><span class="linenos"> 498</span></a>
</span><span id="XMLState-499"><a href="#XMLState-499"><span class="linenos"> 499</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">containers_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">containers</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-500"><a href="#XMLState-500"><span class="linenos"> 500</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-501"><a href="#XMLState-501"><span class="linenos"> 501</span></a><span class="sd">        Tests if the given containers section is applicable for the</span>
</span><span id="XMLState-502"><a href="#XMLState-502"><span class="linenos"> 502</span></a><span class="sd">        current host architecture. If no arch attribute is provided in</span>
</span><span id="XMLState-503"><a href="#XMLState-503"><span class="linenos"> 503</span></a><span class="sd">        the section it is considered as a match and returns: True.</span>
</span><span id="XMLState-504"><a href="#XMLState-504"><span class="linenos"> 504</span></a>
</span><span id="XMLState-505"><a href="#XMLState-505"><span class="linenos"> 505</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-506"><a href="#XMLState-506"><span class="linenos"> 506</span></a>
</span><span id="XMLState-507"><a href="#XMLState-507"><span class="linenos"> 507</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-508"><a href="#XMLState-508"><span class="linenos"> 508</span></a>
</span><span id="XMLState-509"><a href="#XMLState-509"><span class="linenos"> 509</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-510"><a href="#XMLState-510"><span class="linenos"> 510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-511"><a href="#XMLState-511"><span class="linenos"> 511</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
</span><span id="XMLState-512"><a href="#XMLState-512"><span class="linenos"> 512</span></a>
</span><span id="XMLState-513"><a href="#XMLState-513"><span class="linenos"> 513</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">container_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-514"><a href="#XMLState-514"><span class="linenos"> 514</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-515"><a href="#XMLState-515"><span class="linenos"> 515</span></a><span class="sd">        Tests if the given container section is applicable for the</span>
</span><span id="XMLState-516"><a href="#XMLState-516"><span class="linenos"> 516</span></a><span class="sd">        current host architecture. If no arch attribute is provided in</span>
</span><span id="XMLState-517"><a href="#XMLState-517"><span class="linenos"> 517</span></a><span class="sd">        the section it is considered as a match and returns: True.</span>
</span><span id="XMLState-518"><a href="#XMLState-518"><span class="linenos"> 518</span></a>
</span><span id="XMLState-519"><a href="#XMLState-519"><span class="linenos"> 519</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState-520"><a href="#XMLState-520"><span class="linenos"> 520</span></a>
</span><span id="XMLState-521"><a href="#XMLState-521"><span class="linenos"> 521</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-522"><a href="#XMLState-522"><span class="linenos"> 522</span></a>
</span><span id="XMLState-523"><a href="#XMLState-523"><span class="linenos"> 523</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-524"><a href="#XMLState-524"><span class="linenos"> 524</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-525"><a href="#XMLState-525"><span class="linenos"> 525</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
</span><span id="XMLState-526"><a href="#XMLState-526"><span class="linenos"> 526</span></a>
</span><span id="XMLState-527"><a href="#XMLState-527"><span class="linenos"> 527</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState-528"><a href="#XMLState-528"><span class="linenos"> 528</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">packages_sections</span><span class="p">:</span> <span class="n">List</span>
</span><span id="XMLState-529"><a href="#XMLState-529"><span class="linenos"> 529</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">package_type</span><span class="p">]:</span>
</span><span id="XMLState-530"><a href="#XMLState-530"><span class="linenos"> 530</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-531"><a href="#XMLState-531"><span class="linenos"> 531</span></a><span class="sd">        List of package sections from the given packages sections.</span>
</span><span id="XMLState-532"><a href="#XMLState-532"><span class="linenos"> 532</span></a><span class="sd">        Each list element contains a tuple with the &lt;package&gt; section</span>
</span><span id="XMLState-533"><a href="#XMLState-533"><span class="linenos"> 533</span></a><span class="sd">        reference and the &lt;packages&gt; section this package belongs to</span>
</span><span id="XMLState-534"><a href="#XMLState-534"><span class="linenos"> 534</span></a>
</span><span id="XMLState-535"><a href="#XMLState-535"><span class="linenos"> 535</span></a><span class="sd">        If a package entry specfies an architecture, it is only taken if</span>
</span><span id="XMLState-536"><a href="#XMLState-536"><span class="linenos"> 536</span></a><span class="sd">        the host architecture matches the configured architecture</span>
</span><span id="XMLState-537"><a href="#XMLState-537"><span class="linenos"> 537</span></a>
</span><span id="XMLState-538"><a href="#XMLState-538"><span class="linenos"> 538</span></a><span class="sd">        :param list packages_sections: &lt;packages&gt;</span>
</span><span id="XMLState-539"><a href="#XMLState-539"><span class="linenos"> 539</span></a>
</span><span id="XMLState-540"><a href="#XMLState-540"><span class="linenos"> 540</span></a><span class="sd">        :return:</span>
</span><span id="XMLState-541"><a href="#XMLState-541"><span class="linenos"> 541</span></a><span class="sd">            Contains list of package_type tuples</span>
</span><span id="XMLState-542"><a href="#XMLState-542"><span class="linenos"> 542</span></a>
</span><span id="XMLState-543"><a href="#XMLState-543"><span class="linenos"> 543</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState-544"><a href="#XMLState-544"><span class="linenos"> 544</span></a>
</span><span id="XMLState-545"><a href="#XMLState-545"><span class="linenos"> 545</span></a><span class="sd">                [package_type(packages_section=object, package_section=object)]</span>
</span><span id="XMLState-546"><a href="#XMLState-546"><span class="linenos"> 546</span></a>
</span><span id="XMLState-547"><a href="#XMLState-547"><span class="linenos"> 547</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-548"><a href="#XMLState-548"><span class="linenos"> 548</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-549"><a href="#XMLState-549"><span class="linenos"> 549</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-550"><a href="#XMLState-550"><span class="linenos"> 550</span></a>        <span class="k">if</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState-551"><a href="#XMLState-551"><span class="linenos"> 551</span></a>            <span class="k">for</span> <span class="n">packages_section</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState-552"><a href="#XMLState-552"><span class="linenos"> 552</span></a>                <span class="n">package_list</span> <span class="o">=</span> <span class="n">packages_section</span><span class="o">.</span><span class="n">get_package</span><span class="p">()</span>
</span><span id="XMLState-553"><a href="#XMLState-553"><span class="linenos"> 553</span></a>                <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-554"><a href="#XMLState-554"><span class="linenos"> 554</span></a>                    <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-555"><a href="#XMLState-555"><span class="linenos"> 555</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
</span><span id="XMLState-556"><a href="#XMLState-556"><span class="linenos"> 556</span></a>                            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-557"><a href="#XMLState-557"><span class="linenos"> 557</span></a>                                <span class="n">package_type</span><span class="p">(</span>
</span><span id="XMLState-558"><a href="#XMLState-558"><span class="linenos"> 558</span></a>                                    <span class="n">packages_section</span><span class="o">=</span><span class="n">packages_section</span><span class="p">,</span>
</span><span id="XMLState-559"><a href="#XMLState-559"><span class="linenos"> 559</span></a>                                    <span class="n">package_section</span><span class="o">=</span><span class="n">package</span>
</span><span id="XMLState-560"><a href="#XMLState-560"><span class="linenos"> 560</span></a>                                <span class="p">)</span>
</span><span id="XMLState-561"><a href="#XMLState-561"><span class="linenos"> 561</span></a>                            <span class="p">)</span>
</span><span id="XMLState-562"><a href="#XMLState-562"><span class="linenos"> 562</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-563"><a href="#XMLState-563"><span class="linenos"> 563</span></a>
</span><span id="XMLState-564"><a href="#XMLState-564"><span class="linenos"> 564</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_to_become_deleted_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-565"><a href="#XMLState-565"><span class="linenos"> 565</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-566"><a href="#XMLState-566"><span class="linenos"> 566</span></a><span class="sd">        List of package names from the type=&quot;delete&quot; or type=&quot;uninstall&quot;</span>
</span><span id="XMLState-567"><a href="#XMLState-567"><span class="linenos"> 567</span></a><span class="sd">        packages section(s)</span>
</span><span id="XMLState-568"><a href="#XMLState-568"><span class="linenos"> 568</span></a>
</span><span id="XMLState-569"><a href="#XMLState-569"><span class="linenos"> 569</span></a><span class="sd">        :param bool force: return &quot;delete&quot; type if True, &quot;uninstall&quot; type</span>
</span><span id="XMLState-570"><a href="#XMLState-570"><span class="linenos"> 570</span></a><span class="sd">            otherwise</span>
</span><span id="XMLState-571"><a href="#XMLState-571"><span class="linenos"> 571</span></a>
</span><span id="XMLState-572"><a href="#XMLState-572"><span class="linenos"> 572</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState-573"><a href="#XMLState-573"><span class="linenos"> 573</span></a>
</span><span id="XMLState-574"><a href="#XMLState-574"><span class="linenos"> 574</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-575"><a href="#XMLState-575"><span class="linenos"> 575</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-576"><a href="#XMLState-576"><span class="linenos"> 576</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-577"><a href="#XMLState-577"><span class="linenos"> 577</span></a>        <span class="n">to_become_deleted_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-578"><a href="#XMLState-578"><span class="linenos"> 578</span></a>            <span class="p">[</span><span class="s1">&#39;delete&#39;</span> <span class="k">if</span> <span class="n">force</span> <span class="k">else</span> <span class="s1">&#39;uninstall&#39;</span><span class="p">]</span>
</span><span id="XMLState-579"><a href="#XMLState-579"><span class="linenos"> 579</span></a>        <span class="p">)</span>
</span><span id="XMLState-580"><a href="#XMLState-580"><span class="linenos"> 580</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState-581"><a href="#XMLState-581"><span class="linenos"> 581</span></a>            <span class="n">to_become_deleted_packages_sections</span>
</span><span id="XMLState-582"><a href="#XMLState-582"><span class="linenos"> 582</span></a>        <span class="p">)</span>
</span><span id="XMLState-583"><a href="#XMLState-583"><span class="linenos"> 583</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-584"><a href="#XMLState-584"><span class="linenos"> 584</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-585"><a href="#XMLState-585"><span class="linenos"> 585</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-586"><a href="#XMLState-586"><span class="linenos"> 586</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="XMLState-587"><a href="#XMLState-587"><span class="linenos"> 587</span></a>
</span><span id="XMLState-588"><a href="#XMLState-588"><span class="linenos"> 588</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-589"><a href="#XMLState-589"><span class="linenos"> 589</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-590"><a href="#XMLState-590"><span class="linenos"> 590</span></a><span class="sd">        List of packages sections matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState-591"><a href="#XMLState-591"><span class="linenos"> 591</span></a>
</span><span id="XMLState-592"><a href="#XMLState-592"><span class="linenos"> 592</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="XMLState-593"><a href="#XMLState-593"><span class="linenos"> 593</span></a>
</span><span id="XMLState-594"><a href="#XMLState-594"><span class="linenos"> 594</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-595"><a href="#XMLState-595"><span class="linenos"> 595</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-596"><a href="#XMLState-596"><span class="linenos"> 596</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">])</span>
</span><span id="XMLState-597"><a href="#XMLState-597"><span class="linenos"> 597</span></a>
</span><span id="XMLState-598"><a href="#XMLState-598"><span class="linenos"> 598</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-599"><a href="#XMLState-599"><span class="linenos"> 599</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-600"><a href="#XMLState-600"><span class="linenos"> 600</span></a><span class="sd">        List of packages sections matching type=&quot;image&quot;</span>
</span><span id="XMLState-601"><a href="#XMLState-601"><span class="linenos"> 601</span></a>
</span><span id="XMLState-602"><a href="#XMLState-602"><span class="linenos"> 602</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="XMLState-603"><a href="#XMLState-603"><span class="linenos"> 603</span></a>
</span><span id="XMLState-604"><a href="#XMLState-604"><span class="linenos"> 604</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-605"><a href="#XMLState-605"><span class="linenos"> 605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-606"><a href="#XMLState-606"><span class="linenos"> 606</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;image&#39;</span><span class="p">])</span>
</span><span id="XMLState-607"><a href="#XMLState-607"><span class="linenos"> 607</span></a>
</span><span id="XMLState-608"><a href="#XMLState-608"><span class="linenos"> 608</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plus_packages</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-609"><a href="#XMLState-609"><span class="linenos"> 609</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-610"><a href="#XMLState-610"><span class="linenos"> 610</span></a><span class="sd">        List of package names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="XMLState-611"><a href="#XMLState-611"><span class="linenos"> 611</span></a>
</span><span id="XMLState-612"><a href="#XMLState-612"><span class="linenos"> 612</span></a><span class="sd">        The list gets the selected package manager appended</span>
</span><span id="XMLState-613"><a href="#XMLState-613"><span class="linenos"> 613</span></a><span class="sd">        if there is a request to install packages inside of</span>
</span><span id="XMLState-614"><a href="#XMLState-614"><span class="linenos"> 614</span></a><span class="sd">        the image via a chroot operation</span>
</span><span id="XMLState-615"><a href="#XMLState-615"><span class="linenos"> 615</span></a>
</span><span id="XMLState-616"><a href="#XMLState-616"><span class="linenos"> 616</span></a><span class="sd">        :param list plus_packages: list of additional packages</span>
</span><span id="XMLState-617"><a href="#XMLState-617"><span class="linenos"> 617</span></a>
</span><span id="XMLState-618"><a href="#XMLState-618"><span class="linenos"> 618</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState-619"><a href="#XMLState-619"><span class="linenos"> 619</span></a>
</span><span id="XMLState-620"><a href="#XMLState-620"><span class="linenos"> 620</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-621"><a href="#XMLState-621"><span class="linenos"> 621</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-622"><a href="#XMLState-622"><span class="linenos"> 622</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-623"><a href="#XMLState-623"><span class="linenos"> 623</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState-624"><a href="#XMLState-624"><span class="linenos"> 624</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState-625"><a href="#XMLState-625"><span class="linenos"> 625</span></a>            <span class="n">bootstrap_packages_sections</span>
</span><span id="XMLState-626"><a href="#XMLState-626"><span class="linenos"> 626</span></a>        <span class="p">)</span>
</span><span id="XMLState-627"><a href="#XMLState-627"><span class="linenos"> 627</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-628"><a href="#XMLState-628"><span class="linenos"> 628</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-629"><a href="#XMLState-629"><span class="linenos"> 629</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState-630"><a href="#XMLState-630"><span class="linenos"> 630</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_system_packages</span><span class="p">():</span>
</span><span id="XMLState-631"><a href="#XMLState-631"><span class="linenos"> 631</span></a>                <span class="n">package_manager_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_manager</span><span class="p">()</span>
</span><span id="XMLState-632"><a href="#XMLState-632"><span class="linenos"> 632</span></a>                <span class="k">if</span> <span class="n">package_manager_name</span> <span class="o">==</span> <span class="s1">&#39;dnf4&#39;</span><span class="p">:</span>
</span><span id="XMLState-633"><a href="#XMLState-633"><span class="linenos"> 633</span></a>                    <span class="c1"># The package name for dnf4 is just dnf. Thus</span>
</span><span id="XMLState-634"><a href="#XMLState-634"><span class="linenos"> 634</span></a>                    <span class="c1"># the name must be adapted in this case</span>
</span><span id="XMLState-635"><a href="#XMLState-635"><span class="linenos"> 635</span></a>                    <span class="n">package_manager_name</span> <span class="o">=</span> <span class="s1">&#39;dnf&#39;</span>
</span><span id="XMLState-636"><a href="#XMLState-636"><span class="linenos"> 636</span></a>                <span class="k">elif</span> <span class="n">package_manager_name</span> <span class="o">==</span> <span class="s1">&#39;apk&#39;</span><span class="p">:</span>
</span><span id="XMLState-637"><a href="#XMLState-637"><span class="linenos"> 637</span></a>                    <span class="n">package_manager_name</span> <span class="o">=</span> <span class="s1">&#39;apk-tools&#39;</span>
</span><span id="XMLState-638"><a href="#XMLState-638"><span class="linenos"> 638</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package_manager_name</span><span class="p">)</span>
</span><span id="XMLState-639"><a href="#XMLState-639"><span class="linenos"> 639</span></a>        <span class="k">if</span> <span class="n">plus_packages</span><span class="p">:</span>
</span><span id="XMLState-640"><a href="#XMLState-640"><span class="linenos"> 640</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">plus_packages</span>
</span><span id="XMLState-641"><a href="#XMLState-641"><span class="linenos"> 641</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="XMLState-642"><a href="#XMLState-642"><span class="linenos"> 642</span></a>
</span><span id="XMLState-643"><a href="#XMLState-643"><span class="linenos"> 643</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-644"><a href="#XMLState-644"><span class="linenos"> 644</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-645"><a href="#XMLState-645"><span class="linenos"> 645</span></a><span class="sd">        List of package names from the packages sections matching</span>
</span><span id="XMLState-646"><a href="#XMLState-646"><span class="linenos"> 646</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState-647"><a href="#XMLState-647"><span class="linenos"> 647</span></a>
</span><span id="XMLState-648"><a href="#XMLState-648"><span class="linenos"> 648</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState-649"><a href="#XMLState-649"><span class="linenos"> 649</span></a>
</span><span id="XMLState-650"><a href="#XMLState-650"><span class="linenos"> 650</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-651"><a href="#XMLState-651"><span class="linenos"> 651</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-652"><a href="#XMLState-652"><span class="linenos"> 652</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-653"><a href="#XMLState-653"><span class="linenos"> 653</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-654"><a href="#XMLState-654"><span class="linenos"> 654</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-655"><a href="#XMLState-655"><span class="linenos"> 655</span></a>        <span class="p">)</span>
</span><span id="XMLState-656"><a href="#XMLState-656"><span class="linenos"> 656</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState-657"><a href="#XMLState-657"><span class="linenos"> 657</span></a>            <span class="n">image_packages_sections</span>
</span><span id="XMLState-658"><a href="#XMLState-658"><span class="linenos"> 658</span></a>        <span class="p">)</span>
</span><span id="XMLState-659"><a href="#XMLState-659"><span class="linenos"> 659</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-660"><a href="#XMLState-660"><span class="linenos"> 660</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-661"><a href="#XMLState-661"><span class="linenos"> 661</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState-662"><a href="#XMLState-662"><span class="linenos"> 662</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="XMLState-663"><a href="#XMLState-663"><span class="linenos"> 663</span></a>
</span><span id="XMLState-664"><a href="#XMLState-664"><span class="linenos"> 664</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FileT</span><span class="p">]:</span>
</span><span id="XMLState-665"><a href="#XMLState-665"><span class="linenos"> 665</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-666"><a href="#XMLState-666"><span class="linenos"> 666</span></a><span class="sd">        List of file names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="XMLState-667"><a href="#XMLState-667"><span class="linenos"> 667</span></a>
</span><span id="XMLState-668"><a href="#XMLState-668"><span class="linenos"> 668</span></a><span class="sd">        :return: file names</span>
</span><span id="XMLState-669"><a href="#XMLState-669"><span class="linenos"> 669</span></a>
</span><span id="XMLState-670"><a href="#XMLState-670"><span class="linenos"> 670</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-671"><a href="#XMLState-671"><span class="linenos"> 671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-672"><a href="#XMLState-672"><span class="linenos"> 672</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-673"><a href="#XMLState-673"><span class="linenos"> 673</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState-674"><a href="#XMLState-674"><span class="linenos"> 674</span></a>        <span class="k">if</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-675"><a href="#XMLState-675"><span class="linenos"> 675</span></a>            <span class="k">for</span> <span class="n">bootstrap_packages_section</span> <span class="ow">in</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-676"><a href="#XMLState-676"><span class="linenos"> 676</span></a>                <span class="n">file_list</span> <span class="o">=</span> <span class="n">bootstrap_packages_section</span><span class="o">.</span><span class="n">get_file</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="XMLState-677"><a href="#XMLState-677"><span class="linenos"> 677</span></a>                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
</span><span id="XMLState-678"><a href="#XMLState-678"><span class="linenos"> 678</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> <span class="n">FileT</span><span class="p">(</span>
</span><span id="XMLState-679"><a href="#XMLState-679"><span class="linenos"> 679</span></a>                        <span class="n">target</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_target</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-680"><a href="#XMLState-680"><span class="linenos"> 680</span></a>                        <span class="n">owner</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_owner</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-681"><a href="#XMLState-681"><span class="linenos"> 681</span></a>                        <span class="n">permissions</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_permissions</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-682"><a href="#XMLState-682"><span class="linenos"> 682</span></a>                    <span class="p">)</span>
</span><span id="XMLState-683"><a href="#XMLState-683"><span class="linenos"> 683</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-684"><a href="#XMLState-684"><span class="linenos"> 684</span></a>
</span><span id="XMLState-685"><a href="#XMLState-685"><span class="linenos"> 685</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FileT</span><span class="p">]:</span>
</span><span id="XMLState-686"><a href="#XMLState-686"><span class="linenos"> 686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-687"><a href="#XMLState-687"><span class="linenos"> 687</span></a><span class="sd">        List of file names from the packages sections matching</span>
</span><span id="XMLState-688"><a href="#XMLState-688"><span class="linenos"> 688</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState-689"><a href="#XMLState-689"><span class="linenos"> 689</span></a>
</span><span id="XMLState-690"><a href="#XMLState-690"><span class="linenos"> 690</span></a><span class="sd">        :return: file names</span>
</span><span id="XMLState-691"><a href="#XMLState-691"><span class="linenos"> 691</span></a>
</span><span id="XMLState-692"><a href="#XMLState-692"><span class="linenos"> 692</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-693"><a href="#XMLState-693"><span class="linenos"> 693</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-694"><a href="#XMLState-694"><span class="linenos"> 694</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-695"><a href="#XMLState-695"><span class="linenos"> 695</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-696"><a href="#XMLState-696"><span class="linenos"> 696</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-697"><a href="#XMLState-697"><span class="linenos"> 697</span></a>        <span class="p">)</span>
</span><span id="XMLState-698"><a href="#XMLState-698"><span class="linenos"> 698</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-699"><a href="#XMLState-699"><span class="linenos"> 699</span></a>            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="XMLState-700"><a href="#XMLState-700"><span class="linenos"> 700</span></a>                <span class="n">result</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> <span class="n">FileT</span><span class="p">(</span>
</span><span id="XMLState-701"><a href="#XMLState-701"><span class="linenos"> 701</span></a>                    <span class="n">target</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_target</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-702"><a href="#XMLState-702"><span class="linenos"> 702</span></a>                    <span class="n">owner</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_owner</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-703"><a href="#XMLState-703"><span class="linenos"> 703</span></a>                    <span class="n">permissions</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_permissions</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-704"><a href="#XMLState-704"><span class="linenos"> 704</span></a>                <span class="p">)</span>
</span><span id="XMLState-705"><a href="#XMLState-705"><span class="linenos"> 705</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-706"><a href="#XMLState-706"><span class="linenos"> 706</span></a>
</span><span id="XMLState-707"><a href="#XMLState-707"><span class="linenos"> 707</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-708"><a href="#XMLState-708"><span class="linenos"> 708</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-709"><a href="#XMLState-709"><span class="linenos"> 709</span></a><span class="sd">        List of archive names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="XMLState-710"><a href="#XMLState-710"><span class="linenos"> 710</span></a>
</span><span id="XMLState-711"><a href="#XMLState-711"><span class="linenos"> 711</span></a><span class="sd">        :return: archive names</span>
</span><span id="XMLState-712"><a href="#XMLState-712"><span class="linenos"> 712</span></a>
</span><span id="XMLState-713"><a href="#XMLState-713"><span class="linenos"> 713</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-714"><a href="#XMLState-714"><span class="linenos"> 714</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-715"><a href="#XMLState-715"><span class="linenos"> 715</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-716"><a href="#XMLState-716"><span class="linenos"> 716</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState-717"><a href="#XMLState-717"><span class="linenos"> 717</span></a>        <span class="k">if</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-718"><a href="#XMLState-718"><span class="linenos"> 718</span></a>            <span class="k">for</span> <span class="n">bootstrap_packages_section</span> <span class="ow">in</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-719"><a href="#XMLState-719"><span class="linenos"> 719</span></a>                <span class="n">archive_list</span> <span class="o">=</span> <span class="n">bootstrap_packages_section</span><span class="o">.</span><span class="n">get_archive</span><span class="p">()</span>
</span><span id="XMLState-720"><a href="#XMLState-720"><span class="linenos"> 720</span></a>                <span class="k">if</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState-721"><a href="#XMLState-721"><span class="linenos"> 721</span></a>                    <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState-722"><a href="#XMLState-722"><span class="linenos"> 722</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState-723"><a href="#XMLState-723"><span class="linenos"> 723</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="XMLState-724"><a href="#XMLState-724"><span class="linenos"> 724</span></a>
</span><span id="XMLState-725"><a href="#XMLState-725"><span class="linenos"> 725</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-726"><a href="#XMLState-726"><span class="linenos"> 726</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-727"><a href="#XMLState-727"><span class="linenos"> 727</span></a><span class="sd">        List of archive names from the packages sections matching</span>
</span><span id="XMLState-728"><a href="#XMLState-728"><span class="linenos"> 728</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState-729"><a href="#XMLState-729"><span class="linenos"> 729</span></a>
</span><span id="XMLState-730"><a href="#XMLState-730"><span class="linenos"> 730</span></a><span class="sd">        :return: archive names</span>
</span><span id="XMLState-731"><a href="#XMLState-731"><span class="linenos"> 731</span></a>
</span><span id="XMLState-732"><a href="#XMLState-732"><span class="linenos"> 732</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-733"><a href="#XMLState-733"><span class="linenos"> 733</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-734"><a href="#XMLState-734"><span class="linenos"> 734</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-735"><a href="#XMLState-735"><span class="linenos"> 735</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-736"><a href="#XMLState-736"><span class="linenos"> 736</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-737"><a href="#XMLState-737"><span class="linenos"> 737</span></a>        <span class="p">)</span>
</span><span id="XMLState-738"><a href="#XMLState-738"><span class="linenos"> 738</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-739"><a href="#XMLState-739"><span class="linenos"> 739</span></a>            <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_archive</span><span class="p">():</span>
</span><span id="XMLState-740"><a href="#XMLState-740"><span class="linenos"> 740</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState-741"><a href="#XMLState-741"><span class="linenos"> 741</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="XMLState-742"><a href="#XMLState-742"><span class="linenos"> 742</span></a>
</span><span id="XMLState-743"><a href="#XMLState-743"><span class="linenos"> 743</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-744"><a href="#XMLState-744"><span class="linenos"> 744</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-745"><a href="#XMLState-745"><span class="linenos"> 745</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="XMLState-746"><a href="#XMLState-746"><span class="linenos"> 746</span></a><span class="sd">        section_type and type=build_type</span>
</span><span id="XMLState-747"><a href="#XMLState-747"><span class="linenos"> 747</span></a>
</span><span id="XMLState-748"><a href="#XMLState-748"><span class="linenos"> 748</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState-749"><a href="#XMLState-749"><span class="linenos"> 749</span></a>
</span><span id="XMLState-750"><a href="#XMLState-750"><span class="linenos"> 750</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-751"><a href="#XMLState-751"><span class="linenos"> 751</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-752"><a href="#XMLState-752"><span class="linenos"> 752</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-753"><a href="#XMLState-753"><span class="linenos"> 753</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-754"><a href="#XMLState-754"><span class="linenos"> 754</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-755"><a href="#XMLState-755"><span class="linenos"> 755</span></a>        <span class="p">)</span>
</span><span id="XMLState-756"><a href="#XMLState-756"><span class="linenos"> 756</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-757"><a href="#XMLState-757"><span class="linenos"> 757</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_ignore</span><span class="p">():</span>
</span><span id="XMLState-758"><a href="#XMLState-758"><span class="linenos"> 758</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
</span><span id="XMLState-759"><a href="#XMLState-759"><span class="linenos"> 759</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState-760"><a href="#XMLState-760"><span class="linenos"> 760</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="XMLState-761"><a href="#XMLState-761"><span class="linenos"> 761</span></a>
</span><span id="XMLState-762"><a href="#XMLState-762"><span class="linenos"> 762</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_files_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-763"><a href="#XMLState-763"><span class="linenos"> 763</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-764"><a href="#XMLState-764"><span class="linenos"> 764</span></a><span class="sd">        List of ignore package names from the type=&quot;systemfiles&quot;</span>
</span><span id="XMLState-765"><a href="#XMLState-765"><span class="linenos"> 765</span></a><span class="sd">        packages section(s)</span>
</span><span id="XMLState-766"><a href="#XMLState-766"><span class="linenos"> 766</span></a>
</span><span id="XMLState-767"><a href="#XMLState-767"><span class="linenos"> 767</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState-768"><a href="#XMLState-768"><span class="linenos"> 768</span></a>
</span><span id="XMLState-769"><a href="#XMLState-769"><span class="linenos"> 769</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-770"><a href="#XMLState-770"><span class="linenos"> 770</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-771"><a href="#XMLState-771"><span class="linenos"> 771</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;systemfiles&#39;</span><span class="p">)</span>
</span><span id="XMLState-772"><a href="#XMLState-772"><span class="linenos"> 772</span></a>
</span><span id="XMLState-773"><a href="#XMLState-773"><span class="linenos"> 773</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-774"><a href="#XMLState-774"><span class="linenos"> 774</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-775"><a href="#XMLState-775"><span class="linenos"> 775</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="XMLState-776"><a href="#XMLState-776"><span class="linenos"> 776</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState-777"><a href="#XMLState-777"><span class="linenos"> 777</span></a>
</span><span id="XMLState-778"><a href="#XMLState-778"><span class="linenos"> 778</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState-779"><a href="#XMLState-779"><span class="linenos"> 779</span></a>
</span><span id="XMLState-780"><a href="#XMLState-780"><span class="linenos"> 780</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-781"><a href="#XMLState-781"><span class="linenos"> 781</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-782"><a href="#XMLState-782"><span class="linenos"> 782</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="XMLState-783"><a href="#XMLState-783"><span class="linenos"> 783</span></a>
</span><span id="XMLState-784"><a href="#XMLState-784"><span class="linenos"> 784</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-785"><a href="#XMLState-785"><span class="linenos"> 785</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-786"><a href="#XMLState-786"><span class="linenos"> 786</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="XMLState-787"><a href="#XMLState-787"><span class="linenos"> 787</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState-788"><a href="#XMLState-788"><span class="linenos"> 788</span></a>
</span><span id="XMLState-789"><a href="#XMLState-789"><span class="linenos"> 789</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState-790"><a href="#XMLState-790"><span class="linenos"> 790</span></a>
</span><span id="XMLState-791"><a href="#XMLState-791"><span class="linenos"> 791</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-792"><a href="#XMLState-792"><span class="linenos"> 792</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-793"><a href="#XMLState-793"><span class="linenos"> 793</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="XMLState-794"><a href="#XMLState-794"><span class="linenos"> 794</span></a>
</span><span id="XMLState-795"><a href="#XMLState-795"><span class="linenos"> 795</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_package_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-796"><a href="#XMLState-796"><span class="linenos"> 796</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-797"><a href="#XMLState-797"><span class="linenos"> 797</span></a><span class="sd">        bootstrap_package name from type=&quot;bootstrap&quot; packages section</span>
</span><span id="XMLState-798"><a href="#XMLState-798"><span class="linenos"> 798</span></a>
</span><span id="XMLState-799"><a href="#XMLState-799"><span class="linenos"> 799</span></a><span class="sd">        :return: bootstrap_package name</span>
</span><span id="XMLState-800"><a href="#XMLState-800"><span class="linenos"> 800</span></a>
</span><span id="XMLState-801"><a href="#XMLState-801"><span class="linenos"> 801</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-802"><a href="#XMLState-802"><span class="linenos"> 802</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-803"><a href="#XMLState-803"><span class="linenos"> 803</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-804"><a href="#XMLState-804"><span class="linenos"> 804</span></a>            <span class="p">[</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-805"><a href="#XMLState-805"><span class="linenos"> 805</span></a>        <span class="p">)</span>
</span><span id="XMLState-806"><a href="#XMLState-806"><span class="linenos"> 806</span></a>        <span class="n">bootstrap_package</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-807"><a href="#XMLState-807"><span class="linenos"> 807</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-808"><a href="#XMLState-808"><span class="linenos"> 808</span></a>            <span class="n">bootstrap_package</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_bootstrap_package</span><span class="p">()</span>
</span><span id="XMLState-809"><a href="#XMLState-809"><span class="linenos"> 809</span></a>            <span class="k">if</span> <span class="n">bootstrap_package</span><span class="p">:</span>
</span><span id="XMLState-810"><a href="#XMLState-810"><span class="linenos"> 810</span></a>                <span class="k">break</span>
</span><span id="XMLState-811"><a href="#XMLState-811"><span class="linenos"> 811</span></a>        <span class="k">return</span> <span class="n">bootstrap_package</span>
</span><span id="XMLState-812"><a href="#XMLState-812"><span class="linenos"> 812</span></a>
</span><span id="XMLState-813"><a href="#XMLState-813"><span class="linenos"> 813</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-814"><a href="#XMLState-814"><span class="linenos"> 814</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-815"><a href="#XMLState-815"><span class="linenos"> 815</span></a><span class="sd">        Collection type from packages sections matching given section</span>
</span><span id="XMLState-816"><a href="#XMLState-816"><span class="linenos"> 816</span></a><span class="sd">        type.</span>
</span><span id="XMLState-817"><a href="#XMLState-817"><span class="linenos"> 817</span></a>
</span><span id="XMLState-818"><a href="#XMLState-818"><span class="linenos"> 818</span></a><span class="sd">        If no collection type is specified the default collection</span>
</span><span id="XMLState-819"><a href="#XMLState-819"><span class="linenos"> 819</span></a><span class="sd">        type is set to: onlyRequired</span>
</span><span id="XMLState-820"><a href="#XMLState-820"><span class="linenos"> 820</span></a>
</span><span id="XMLState-821"><a href="#XMLState-821"><span class="linenos"> 821</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="XMLState-822"><a href="#XMLState-822"><span class="linenos"> 822</span></a>
</span><span id="XMLState-823"><a href="#XMLState-823"><span class="linenos"> 823</span></a><span class="sd">        :return: collection type name</span>
</span><span id="XMLState-824"><a href="#XMLState-824"><span class="linenos"> 824</span></a>
</span><span id="XMLState-825"><a href="#XMLState-825"><span class="linenos"> 825</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-826"><a href="#XMLState-826"><span class="linenos"> 826</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-827"><a href="#XMLState-827"><span class="linenos"> 827</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-828"><a href="#XMLState-828"><span class="linenos"> 828</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-829"><a href="#XMLState-829"><span class="linenos"> 829</span></a>        <span class="p">)</span>
</span><span id="XMLState-830"><a href="#XMLState-830"><span class="linenos"> 830</span></a>        <span class="n">collection_type</span> <span class="o">=</span> <span class="s1">&#39;onlyRequired&#39;</span>
</span><span id="XMLState-831"><a href="#XMLState-831"><span class="linenos"> 831</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-832"><a href="#XMLState-832"><span class="linenos"> 832</span></a>            <span class="n">packages_collection_type</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_patternType</span><span class="p">()</span>
</span><span id="XMLState-833"><a href="#XMLState-833"><span class="linenos"> 833</span></a>            <span class="k">if</span> <span class="n">packages_collection_type</span><span class="p">:</span>
</span><span id="XMLState-834"><a href="#XMLState-834"><span class="linenos"> 834</span></a>                <span class="n">collection_type</span> <span class="o">=</span> <span class="n">packages_collection_type</span>
</span><span id="XMLState-835"><a href="#XMLState-835"><span class="linenos"> 835</span></a>                <span class="k">break</span>
</span><span id="XMLState-836"><a href="#XMLState-836"><span class="linenos"> 836</span></a>        <span class="k">return</span> <span class="n">collection_type</span>
</span><span id="XMLState-837"><a href="#XMLState-837"><span class="linenos"> 837</span></a>
</span><span id="XMLState-838"><a href="#XMLState-838"><span class="linenos"> 838</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-839"><a href="#XMLState-839"><span class="linenos"> 839</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-840"><a href="#XMLState-840"><span class="linenos"> 840</span></a><span class="sd">        Collection type for packages sections matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState-841"><a href="#XMLState-841"><span class="linenos"> 841</span></a>
</span><span id="XMLState-842"><a href="#XMLState-842"><span class="linenos"> 842</span></a><span class="sd">        :return: collection type name</span>
</span><span id="XMLState-843"><a href="#XMLState-843"><span class="linenos"> 843</span></a>
</span><span id="XMLState-844"><a href="#XMLState-844"><span class="linenos"> 844</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-845"><a href="#XMLState-845"><span class="linenos"> 845</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-846"><a href="#XMLState-846"><span class="linenos"> 846</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="XMLState-847"><a href="#XMLState-847"><span class="linenos"> 847</span></a>
</span><span id="XMLState-848"><a href="#XMLState-848"><span class="linenos"> 848</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-849"><a href="#XMLState-849"><span class="linenos"> 849</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-850"><a href="#XMLState-850"><span class="linenos"> 850</span></a><span class="sd">        Collection type for packages sections matching type=&quot;image&quot;</span>
</span><span id="XMLState-851"><a href="#XMLState-851"><span class="linenos"> 851</span></a>
</span><span id="XMLState-852"><a href="#XMLState-852"><span class="linenos"> 852</span></a><span class="sd">        :return: collection type name</span>
</span><span id="XMLState-853"><a href="#XMLState-853"><span class="linenos"> 853</span></a>
</span><span id="XMLState-854"><a href="#XMLState-854"><span class="linenos"> 854</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-855"><a href="#XMLState-855"><span class="linenos"> 855</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-856"><a href="#XMLState-856"><span class="linenos"> 856</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="XMLState-857"><a href="#XMLState-857"><span class="linenos"> 857</span></a>
</span><span id="XMLState-858"><a href="#XMLState-858"><span class="linenos"> 858</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collection_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
</span><span id="XMLState-859"><a href="#XMLState-859"><span class="linenos"> 859</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-860"><a href="#XMLState-860"><span class="linenos"> 860</span></a><span class="sd">        Dict of collection modules to enable and/or disable</span>
</span><span id="XMLState-861"><a href="#XMLState-861"><span class="linenos"> 861</span></a>
</span><span id="XMLState-862"><a href="#XMLState-862"><span class="linenos"> 862</span></a><span class="sd">        :return:</span>
</span><span id="XMLState-863"><a href="#XMLState-863"><span class="linenos"> 863</span></a><span class="sd">            Dict of the form:</span>
</span><span id="XMLState-864"><a href="#XMLState-864"><span class="linenos"> 864</span></a>
</span><span id="XMLState-865"><a href="#XMLState-865"><span class="linenos"> 865</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState-866"><a href="#XMLState-866"><span class="linenos"> 866</span></a>
</span><span id="XMLState-867"><a href="#XMLState-867"><span class="linenos"> 867</span></a><span class="sd">                {</span>
</span><span id="XMLState-868"><a href="#XMLState-868"><span class="linenos"> 868</span></a><span class="sd">                    &#39;enable&#39;: [</span>
</span><span id="XMLState-869"><a href="#XMLState-869"><span class="linenos"> 869</span></a><span class="sd">                        &quot;module:stream&quot;, &quot;module&quot;</span>
</span><span id="XMLState-870"><a href="#XMLState-870"><span class="linenos"> 870</span></a><span class="sd">                    ],</span>
</span><span id="XMLState-871"><a href="#XMLState-871"><span class="linenos"> 871</span></a><span class="sd">                    &#39;disable&#39;: [</span>
</span><span id="XMLState-872"><a href="#XMLState-872"><span class="linenos"> 872</span></a><span class="sd">                        &quot;module&quot;</span>
</span><span id="XMLState-873"><a href="#XMLState-873"><span class="linenos"> 873</span></a><span class="sd">                    ]</span>
</span><span id="XMLState-874"><a href="#XMLState-874"><span class="linenos"> 874</span></a><span class="sd">                }</span>
</span><span id="XMLState-875"><a href="#XMLState-875"><span class="linenos"> 875</span></a>
</span><span id="XMLState-876"><a href="#XMLState-876"><span class="linenos"> 876</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-877"><a href="#XMLState-877"><span class="linenos"> 877</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-878"><a href="#XMLState-878"><span class="linenos"> 878</span></a>        <span class="n">modules</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="XMLState-879"><a href="#XMLState-879"><span class="linenos"> 879</span></a>            <span class="s1">&#39;disable&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="XMLState-880"><a href="#XMLState-880"><span class="linenos"> 880</span></a>            <span class="s1">&#39;enable&#39;</span><span class="p">:</span> <span class="p">[]</span>
</span><span id="XMLState-881"><a href="#XMLState-881"><span class="linenos"> 881</span></a>        <span class="p">}</span>
</span><span id="XMLState-882"><a href="#XMLState-882"><span class="linenos"> 882</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">():</span>
</span><span id="XMLState-883"><a href="#XMLState-883"><span class="linenos"> 883</span></a>            <span class="k">for</span> <span class="n">collection_module</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_collectionModule</span><span class="p">():</span>
</span><span id="XMLState-884"><a href="#XMLState-884"><span class="linenos"> 884</span></a>                <span class="n">module_name</span> <span class="o">=</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-885"><a href="#XMLState-885"><span class="linenos"> 885</span></a>                <span class="k">if</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_enable</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="XMLState-886"><a href="#XMLState-886"><span class="linenos"> 886</span></a>                    <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;disable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
</span><span id="XMLState-887"><a href="#XMLState-887"><span class="linenos"> 887</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-888"><a href="#XMLState-888"><span class="linenos"> 888</span></a>                    <span class="n">stream</span> <span class="o">=</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_stream</span><span class="p">()</span>
</span><span id="XMLState-889"><a href="#XMLState-889"><span class="linenos"> 889</span></a>                    <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="XMLState-890"><a href="#XMLState-890"><span class="linenos"> 890</span></a>                        <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">stream</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="XMLState-891"><a href="#XMLState-891"><span class="linenos"> 891</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-892"><a href="#XMLState-892"><span class="linenos"> 892</span></a>                        <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
</span><span id="XMLState-893"><a href="#XMLState-893"><span class="linenos"> 893</span></a>        <span class="k">return</span> <span class="n">modules</span>
</span><span id="XMLState-894"><a href="#XMLState-894"><span class="linenos"> 894</span></a>
</span><span id="XMLState-895"><a href="#XMLState-895"><span class="linenos"> 895</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-896"><a href="#XMLState-896"><span class="linenos"> 896</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-897"><a href="#XMLState-897"><span class="linenos"> 897</span></a><span class="sd">        List of collection names from the packages sections matching</span>
</span><span id="XMLState-898"><a href="#XMLState-898"><span class="linenos"> 898</span></a><span class="sd">        type=section_type and type=build_type</span>
</span><span id="XMLState-899"><a href="#XMLState-899"><span class="linenos"> 899</span></a>
</span><span id="XMLState-900"><a href="#XMLState-900"><span class="linenos"> 900</span></a><span class="sd">        :return: collection names</span>
</span><span id="XMLState-901"><a href="#XMLState-901"><span class="linenos"> 901</span></a>
</span><span id="XMLState-902"><a href="#XMLState-902"><span class="linenos"> 902</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-903"><a href="#XMLState-903"><span class="linenos"> 903</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-904"><a href="#XMLState-904"><span class="linenos"> 904</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-905"><a href="#XMLState-905"><span class="linenos"> 905</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-906"><a href="#XMLState-906"><span class="linenos"> 906</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-907"><a href="#XMLState-907"><span class="linenos"> 907</span></a>        <span class="p">)</span>
</span><span id="XMLState-908"><a href="#XMLState-908"><span class="linenos"> 908</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-909"><a href="#XMLState-909"><span class="linenos"> 909</span></a>            <span class="k">for</span> <span class="n">collection</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_namedCollection</span><span class="p">():</span>
</span><span id="XMLState-910"><a href="#XMLState-910"><span class="linenos"> 910</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_matches_host_architecture</span><span class="p">(</span><span class="n">collection</span><span class="p">):</span>
</span><span id="XMLState-911"><a href="#XMLState-911"><span class="linenos"> 911</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-912"><a href="#XMLState-912"><span class="linenos"> 912</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span><span id="XMLState-913"><a href="#XMLState-913"><span class="linenos"> 913</span></a>
</span><span id="XMLState-914"><a href="#XMLState-914"><span class="linenos"> 914</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-915"><a href="#XMLState-915"><span class="linenos"> 915</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-916"><a href="#XMLState-916"><span class="linenos"> 916</span></a><span class="sd">        List of collection names from the packages sections</span>
</span><span id="XMLState-917"><a href="#XMLState-917"><span class="linenos"> 917</span></a><span class="sd">        matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState-918"><a href="#XMLState-918"><span class="linenos"> 918</span></a>
</span><span id="XMLState-919"><a href="#XMLState-919"><span class="linenos"> 919</span></a><span class="sd">        :return: collection names</span>
</span><span id="XMLState-920"><a href="#XMLState-920"><span class="linenos"> 920</span></a>
</span><span id="XMLState-921"><a href="#XMLState-921"><span class="linenos"> 921</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-922"><a href="#XMLState-922"><span class="linenos"> 922</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-923"><a href="#XMLState-923"><span class="linenos"> 923</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collections</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="XMLState-924"><a href="#XMLState-924"><span class="linenos"> 924</span></a>
</span><span id="XMLState-925"><a href="#XMLState-925"><span class="linenos"> 925</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-926"><a href="#XMLState-926"><span class="linenos"> 926</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-927"><a href="#XMLState-927"><span class="linenos"> 927</span></a><span class="sd">        List of collection names from the packages sections</span>
</span><span id="XMLState-928"><a href="#XMLState-928"><span class="linenos"> 928</span></a><span class="sd">        matching type=&quot;image&quot;</span>
</span><span id="XMLState-929"><a href="#XMLState-929"><span class="linenos"> 929</span></a>
</span><span id="XMLState-930"><a href="#XMLState-930"><span class="linenos"> 930</span></a><span class="sd">        :return: collection names</span>
</span><span id="XMLState-931"><a href="#XMLState-931"><span class="linenos"> 931</span></a>
</span><span id="XMLState-932"><a href="#XMLState-932"><span class="linenos"> 932</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-933"><a href="#XMLState-933"><span class="linenos"> 933</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-934"><a href="#XMLState-934"><span class="linenos"> 934</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collections</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="XMLState-935"><a href="#XMLState-935"><span class="linenos"> 935</span></a>
</span><span id="XMLState-936"><a href="#XMLState-936"><span class="linenos"> 936</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_products</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-937"><a href="#XMLState-937"><span class="linenos"> 937</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-938"><a href="#XMLState-938"><span class="linenos"> 938</span></a><span class="sd">        List of product names from the packages sections matching</span>
</span><span id="XMLState-939"><a href="#XMLState-939"><span class="linenos"> 939</span></a><span class="sd">        type=section_type and type=build_type</span>
</span><span id="XMLState-940"><a href="#XMLState-940"><span class="linenos"> 940</span></a>
</span><span id="XMLState-941"><a href="#XMLState-941"><span class="linenos"> 941</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="XMLState-942"><a href="#XMLState-942"><span class="linenos"> 942</span></a>
</span><span id="XMLState-943"><a href="#XMLState-943"><span class="linenos"> 943</span></a><span class="sd">        :return: product names</span>
</span><span id="XMLState-944"><a href="#XMLState-944"><span class="linenos"> 944</span></a>
</span><span id="XMLState-945"><a href="#XMLState-945"><span class="linenos"> 945</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-946"><a href="#XMLState-946"><span class="linenos"> 946</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-947"><a href="#XMLState-947"><span class="linenos"> 947</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-948"><a href="#XMLState-948"><span class="linenos"> 948</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-949"><a href="#XMLState-949"><span class="linenos"> 949</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-950"><a href="#XMLState-950"><span class="linenos"> 950</span></a>        <span class="p">)</span>
</span><span id="XMLState-951"><a href="#XMLState-951"><span class="linenos"> 951</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-952"><a href="#XMLState-952"><span class="linenos"> 952</span></a>            <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_product</span><span class="p">():</span>
</span><span id="XMLState-953"><a href="#XMLState-953"><span class="linenos"> 953</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-954"><a href="#XMLState-954"><span class="linenos"> 954</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span><span id="XMLState-955"><a href="#XMLState-955"><span class="linenos"> 955</span></a>
</span><span id="XMLState-956"><a href="#XMLState-956"><span class="linenos"> 956</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-957"><a href="#XMLState-957"><span class="linenos"> 957</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-958"><a href="#XMLState-958"><span class="linenos"> 958</span></a><span class="sd">        List of product names from the packages sections</span>
</span><span id="XMLState-959"><a href="#XMLState-959"><span class="linenos"> 959</span></a><span class="sd">        matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState-960"><a href="#XMLState-960"><span class="linenos"> 960</span></a>
</span><span id="XMLState-961"><a href="#XMLState-961"><span class="linenos"> 961</span></a><span class="sd">        :return: product names</span>
</span><span id="XMLState-962"><a href="#XMLState-962"><span class="linenos"> 962</span></a>
</span><span id="XMLState-963"><a href="#XMLState-963"><span class="linenos"> 963</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-964"><a href="#XMLState-964"><span class="linenos"> 964</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-965"><a href="#XMLState-965"><span class="linenos"> 965</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span><span id="XMLState-966"><a href="#XMLState-966"><span class="linenos"> 966</span></a>
</span><span id="XMLState-967"><a href="#XMLState-967"><span class="linenos"> 967</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-968"><a href="#XMLState-968"><span class="linenos"> 968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-969"><a href="#XMLState-969"><span class="linenos"> 969</span></a><span class="sd">        List of product names from the packages sections</span>
</span><span id="XMLState-970"><a href="#XMLState-970"><span class="linenos"> 970</span></a><span class="sd">        matching type=&quot;image&quot;</span>
</span><span id="XMLState-971"><a href="#XMLState-971"><span class="linenos"> 971</span></a>
</span><span id="XMLState-972"><a href="#XMLState-972"><span class="linenos"> 972</span></a><span class="sd">        :return: product names</span>
</span><span id="XMLState-973"><a href="#XMLState-973"><span class="linenos"> 973</span></a>
</span><span id="XMLState-974"><a href="#XMLState-974"><span class="linenos"> 974</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-975"><a href="#XMLState-975"><span class="linenos"> 975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-976"><a href="#XMLState-976"><span class="linenos"> 976</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span><span id="XMLState-977"><a href="#XMLState-977"><span class="linenos"> 977</span></a>
</span><span id="XMLState-978"><a href="#XMLState-978"><span class="linenos"> 978</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_xen_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-979"><a href="#XMLState-979"><span class="linenos"> 979</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-980"><a href="#XMLState-980"><span class="linenos"> 980</span></a><span class="sd">        Check if build type domain setup specifies a Xen Server (dom0)</span>
</span><span id="XMLState-981"><a href="#XMLState-981"><span class="linenos"> 981</span></a>
</span><span id="XMLState-982"><a href="#XMLState-982"><span class="linenos"> 982</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-983"><a href="#XMLState-983"><span class="linenos"> 983</span></a>
</span><span id="XMLState-984"><a href="#XMLState-984"><span class="linenos"> 984</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-985"><a href="#XMLState-985"><span class="linenos"> 985</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-986"><a href="#XMLState-986"><span class="linenos"> 986</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_xen_server</span><span class="p">()</span>
</span><span id="XMLState-987"><a href="#XMLState-987"><span class="linenos"> 987</span></a>
</span><span id="XMLState-988"><a href="#XMLState-988"><span class="linenos"> 988</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_xen_guest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-989"><a href="#XMLState-989"><span class="linenos"> 989</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-990"><a href="#XMLState-990"><span class="linenos"> 990</span></a><span class="sd">        Check if build type setup specifies a Xen Guest (domX)</span>
</span><span id="XMLState-991"><a href="#XMLState-991"><span class="linenos"> 991</span></a><span class="sd">        The check is based on the architecture, the firmware and</span>
</span><span id="XMLState-992"><a href="#XMLState-992"><span class="linenos"> 992</span></a><span class="sd">        xen_loader configuration values:</span>
</span><span id="XMLState-993"><a href="#XMLState-993"><span class="linenos"> 993</span></a>
</span><span id="XMLState-994"><a href="#XMLState-994"><span class="linenos"> 994</span></a><span class="sd">        * We only support Xen setup on the x86_64 architecture</span>
</span><span id="XMLState-995"><a href="#XMLState-995"><span class="linenos"> 995</span></a>
</span><span id="XMLState-996"><a href="#XMLState-996"><span class="linenos"> 996</span></a><span class="sd">        * Firmware pointing to ec2 means the image is targeted to run</span>
</span><span id="XMLState-997"><a href="#XMLState-997"><span class="linenos"> 997</span></a><span class="sd">          in Amazon EC2 which is a Xen guest</span>
</span><span id="XMLState-998"><a href="#XMLState-998"><span class="linenos"> 998</span></a>
</span><span id="XMLState-999"><a href="#XMLState-999"><span class="linenos"> 999</span></a><span class="sd">        * Machine setup with a xen_loader attribute also indicates a</span>
</span><span id="XMLState-1000"><a href="#XMLState-1000"><span class="linenos">1000</span></a><span class="sd">          Xen guest target</span>
</span><span id="XMLState-1001"><a href="#XMLState-1001"><span class="linenos">1001</span></a>
</span><span id="XMLState-1002"><a href="#XMLState-1002"><span class="linenos">1002</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-1003"><a href="#XMLState-1003"><span class="linenos">1003</span></a>
</span><span id="XMLState-1004"><a href="#XMLState-1004"><span class="linenos">1004</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-1005"><a href="#XMLState-1005"><span class="linenos">1005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1006"><a href="#XMLState-1006"><span class="linenos">1006</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="o">!=</span> <span class="s1">&#39;x86_64&#39;</span><span class="p">:</span>
</span><span id="XMLState-1007"><a href="#XMLState-1007"><span class="linenos">1007</span></a>            <span class="c1"># We only support Xen stuff on x86_64</span>
</span><span id="XMLState-1008"><a href="#XMLState-1008"><span class="linenos">1008</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-1009"><a href="#XMLState-1009"><span class="linenos">1009</span></a>        <span class="n">firmware</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_firmware</span><span class="p">()</span>
</span><span id="XMLState-1010"><a href="#XMLState-1010"><span class="linenos">1010</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState-1011"><a href="#XMLState-1011"><span class="linenos">1011</span></a>        <span class="k">if</span> <span class="n">firmware</span> <span class="ow">and</span> <span class="n">firmware</span> <span class="ow">in</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_ec2_capable_firmware_names</span><span class="p">():</span>
</span><span id="XMLState-1012"><a href="#XMLState-1012"><span class="linenos">1012</span></a>            <span class="c1"># the image is targeted to run in Amazon EC2 which is a Xen system</span>
</span><span id="XMLState-1013"><a href="#XMLState-1013"><span class="linenos">1013</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState-1014"><a href="#XMLState-1014"><span class="linenos">1014</span></a>        <span class="k">elif</span> <span class="n">machine_section</span> <span class="ow">and</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_xen_loader</span><span class="p">():</span>
</span><span id="XMLState-1015"><a href="#XMLState-1015"><span class="linenos">1015</span></a>            <span class="c1"># the image provides a machine section with a guest loader setup</span>
</span><span id="XMLState-1016"><a href="#XMLState-1016"><span class="linenos">1016</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState-1017"><a href="#XMLState-1017"><span class="linenos">1017</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-1018"><a href="#XMLState-1018"><span class="linenos">1018</span></a>
</span><span id="XMLState-1019"><a href="#XMLState-1019"><span class="linenos">1019</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_partitions_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1020"><a href="#XMLState-1020"><span class="linenos">1020</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1021"><a href="#XMLState-1021"><span class="linenos">1021</span></a><span class="sd">        First partitions section from the build type section</span>
</span><span id="XMLState-1022"><a href="#XMLState-1022"><span class="linenos">1022</span></a>
</span><span id="XMLState-1023"><a href="#XMLState-1023"><span class="linenos">1023</span></a><span class="sd">        :return: &lt;partitions&gt; section reference</span>
</span><span id="XMLState-1024"><a href="#XMLState-1024"><span class="linenos">1024</span></a>
</span><span id="XMLState-1025"><a href="#XMLState-1025"><span class="linenos">1025</span></a><span class="sd">        :rtype: xml_parse::partitions</span>
</span><span id="XMLState-1026"><a href="#XMLState-1026"><span class="linenos">1026</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1027"><a href="#XMLState-1027"><span class="linenos">1027</span></a>        <span class="n">partitions_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_partitions</span><span class="p">()</span>
</span><span id="XMLState-1028"><a href="#XMLState-1028"><span class="linenos">1028</span></a>        <span class="k">if</span> <span class="n">partitions_sections</span><span class="p">:</span>
</span><span id="XMLState-1029"><a href="#XMLState-1029"><span class="linenos">1029</span></a>            <span class="k">return</span> <span class="n">partitions_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1030"><a href="#XMLState-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1031"><a href="#XMLState-1031"><span class="linenos">1031</span></a>
</span><span id="XMLState-1032"><a href="#XMLState-1032"><span class="linenos">1032</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_system_disk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1033"><a href="#XMLState-1033"><span class="linenos">1033</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1034"><a href="#XMLState-1034"><span class="linenos">1034</span></a><span class="sd">        First system disk section from the build type section</span>
</span><span id="XMLState-1035"><a href="#XMLState-1035"><span class="linenos">1035</span></a>
</span><span id="XMLState-1036"><a href="#XMLState-1036"><span class="linenos">1036</span></a><span class="sd">        :return: &lt;systemdisk&gt; section reference</span>
</span><span id="XMLState-1037"><a href="#XMLState-1037"><span class="linenos">1037</span></a>
</span><span id="XMLState-1038"><a href="#XMLState-1038"><span class="linenos">1038</span></a><span class="sd">        :rtype: xml_parse::systemdisk</span>
</span><span id="XMLState-1039"><a href="#XMLState-1039"><span class="linenos">1039</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1040"><a href="#XMLState-1040"><span class="linenos">1040</span></a>        <span class="n">systemdisk_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_systemdisk</span><span class="p">()</span>
</span><span id="XMLState-1041"><a href="#XMLState-1041"><span class="linenos">1041</span></a>        <span class="k">if</span> <span class="n">systemdisk_sections</span><span class="p">:</span>
</span><span id="XMLState-1042"><a href="#XMLState-1042"><span class="linenos">1042</span></a>            <span class="k">return</span> <span class="n">systemdisk_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1043"><a href="#XMLState-1043"><span class="linenos">1043</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1044"><a href="#XMLState-1044"><span class="linenos">1044</span></a>
</span><span id="XMLState-1045"><a href="#XMLState-1045"><span class="linenos">1045</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_machine_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1046"><a href="#XMLState-1046"><span class="linenos">1046</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1047"><a href="#XMLState-1047"><span class="linenos">1047</span></a><span class="sd">        First machine section from the build type section</span>
</span><span id="XMLState-1048"><a href="#XMLState-1048"><span class="linenos">1048</span></a>
</span><span id="XMLState-1049"><a href="#XMLState-1049"><span class="linenos">1049</span></a><span class="sd">        :return: &lt;machine&gt; section reference</span>
</span><span id="XMLState-1050"><a href="#XMLState-1050"><span class="linenos">1050</span></a>
</span><span id="XMLState-1051"><a href="#XMLState-1051"><span class="linenos">1051</span></a><span class="sd">        :rtype: xml_parse::machine</span>
</span><span id="XMLState-1052"><a href="#XMLState-1052"><span class="linenos">1052</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1053"><a href="#XMLState-1053"><span class="linenos">1053</span></a>        <span class="n">machine_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_machine</span><span class="p">()</span>
</span><span id="XMLState-1054"><a href="#XMLState-1054"><span class="linenos">1054</span></a>        <span class="k">if</span> <span class="n">machine_sections</span><span class="p">:</span>
</span><span id="XMLState-1055"><a href="#XMLState-1055"><span class="linenos">1055</span></a>            <span class="k">return</span> <span class="n">machine_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1056"><a href="#XMLState-1056"><span class="linenos">1056</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1057"><a href="#XMLState-1057"><span class="linenos">1057</span></a>
</span><span id="XMLState-1058"><a href="#XMLState-1058"><span class="linenos">1058</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vagrant_config_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1059"><a href="#XMLState-1059"><span class="linenos">1059</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1060"><a href="#XMLState-1060"><span class="linenos">1060</span></a><span class="sd">        First vagrantconfig section from the build type section</span>
</span><span id="XMLState-1061"><a href="#XMLState-1061"><span class="linenos">1061</span></a>
</span><span id="XMLState-1062"><a href="#XMLState-1062"><span class="linenos">1062</span></a><span class="sd">        :return: &lt;vagrantconfig&gt; section reference</span>
</span><span id="XMLState-1063"><a href="#XMLState-1063"><span class="linenos">1063</span></a>
</span><span id="XMLState-1064"><a href="#XMLState-1064"><span class="linenos">1064</span></a><span class="sd">        :rtype: xml_parse::vagrantconfig</span>
</span><span id="XMLState-1065"><a href="#XMLState-1065"><span class="linenos">1065</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1066"><a href="#XMLState-1066"><span class="linenos">1066</span></a>        <span class="n">vagrant_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_vagrantconfig</span><span class="p">()</span>
</span><span id="XMLState-1067"><a href="#XMLState-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="n">vagrant_config_sections</span><span class="p">:</span>
</span><span id="XMLState-1068"><a href="#XMLState-1068"><span class="linenos">1068</span></a>            <span class="k">return</span> <span class="n">vagrant_config_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1069"><a href="#XMLState-1069"><span class="linenos">1069</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1070"><a href="#XMLState-1070"><span class="linenos">1070</span></a>
</span><span id="XMLState-1071"><a href="#XMLState-1071"><span class="linenos">1071</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_vagrant_config_virtualbox_guest_additions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-1072"><a href="#XMLState-1072"><span class="linenos">1072</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1073"><a href="#XMLState-1073"><span class="linenos">1073</span></a><span class="sd">        Attribute virtualbox_guest_additions_present from the first</span>
</span><span id="XMLState-1074"><a href="#XMLState-1074"><span class="linenos">1074</span></a><span class="sd">        vagrantconfig section.</span>
</span><span id="XMLState-1075"><a href="#XMLState-1075"><span class="linenos">1075</span></a>
</span><span id="XMLState-1076"><a href="#XMLState-1076"><span class="linenos">1076</span></a><span class="sd">        :return: True|False</span>
</span><span id="XMLState-1077"><a href="#XMLState-1077"><span class="linenos">1077</span></a>
</span><span id="XMLState-1078"><a href="#XMLState-1078"><span class="linenos">1078</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-1079"><a href="#XMLState-1079"><span class="linenos">1079</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1080"><a href="#XMLState-1080"><span class="linenos">1080</span></a>        <span class="n">vagrant_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_vagrant_config_section</span><span class="p">()</span>
</span><span id="XMLState-1081"><a href="#XMLState-1081"><span class="linenos">1081</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">vagrant_config_sections</span><span class="o">.</span><span class="n">virtualbox_guest_additions_present</span><span class="p">:</span>
</span><span id="XMLState-1082"><a href="#XMLState-1082"><span class="linenos">1082</span></a>            <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_vagrant_config_virtualbox_guest_additions</span><span class="p">()</span>
</span><span id="XMLState-1083"><a href="#XMLState-1083"><span class="linenos">1083</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1084"><a href="#XMLState-1084"><span class="linenos">1084</span></a>            <span class="k">return</span> <span class="n">vagrant_config_sections</span><span class="o">.</span><span class="n">virtualbox_guest_additions_present</span>
</span><span id="XMLState-1085"><a href="#XMLState-1085"><span class="linenos">1085</span></a>
</span><span id="XMLState-1086"><a href="#XMLState-1086"><span class="linenos">1086</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmdisk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1087"><a href="#XMLState-1087"><span class="linenos">1087</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1088"><a href="#XMLState-1088"><span class="linenos">1088</span></a><span class="sd">        First vmdisk section from the first machine section in the</span>
</span><span id="XMLState-1089"><a href="#XMLState-1089"><span class="linenos">1089</span></a><span class="sd">        build type section</span>
</span><span id="XMLState-1090"><a href="#XMLState-1090"><span class="linenos">1090</span></a>
</span><span id="XMLState-1091"><a href="#XMLState-1091"><span class="linenos">1091</span></a><span class="sd">        :return: &lt;vmdisk&gt; section reference</span>
</span><span id="XMLState-1092"><a href="#XMLState-1092"><span class="linenos">1092</span></a>
</span><span id="XMLState-1093"><a href="#XMLState-1093"><span class="linenos">1093</span></a><span class="sd">        :rtype: xml_parse::vmdisk</span>
</span><span id="XMLState-1094"><a href="#XMLState-1094"><span class="linenos">1094</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1095"><a href="#XMLState-1095"><span class="linenos">1095</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState-1096"><a href="#XMLState-1096"><span class="linenos">1096</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState-1097"><a href="#XMLState-1097"><span class="linenos">1097</span></a>            <span class="n">vmdisk_sections</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmdisk</span><span class="p">()</span>
</span><span id="XMLState-1098"><a href="#XMLState-1098"><span class="linenos">1098</span></a>            <span class="k">if</span> <span class="n">vmdisk_sections</span><span class="p">:</span>
</span><span id="XMLState-1099"><a href="#XMLState-1099"><span class="linenos">1099</span></a>                <span class="k">return</span> <span class="n">vmdisk_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1100"><a href="#XMLState-1100"><span class="linenos">1100</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1101"><a href="#XMLState-1101"><span class="linenos">1101</span></a>
</span><span id="XMLState-1102"><a href="#XMLState-1102"><span class="linenos">1102</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmnic_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-1103"><a href="#XMLState-1103"><span class="linenos">1103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1104"><a href="#XMLState-1104"><span class="linenos">1104</span></a><span class="sd">        vmnic section(s) from the first machine section in the</span>
</span><span id="XMLState-1105"><a href="#XMLState-1105"><span class="linenos">1105</span></a><span class="sd">        build type section</span>
</span><span id="XMLState-1106"><a href="#XMLState-1106"><span class="linenos">1106</span></a>
</span><span id="XMLState-1107"><a href="#XMLState-1107"><span class="linenos">1107</span></a><span class="sd">        :return: list of &lt;vmnic&gt; section reference(s)</span>
</span><span id="XMLState-1108"><a href="#XMLState-1108"><span class="linenos">1108</span></a>
</span><span id="XMLState-1109"><a href="#XMLState-1109"><span class="linenos">1109</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1110"><a href="#XMLState-1110"><span class="linenos">1110</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1111"><a href="#XMLState-1111"><span class="linenos">1111</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState-1112"><a href="#XMLState-1112"><span class="linenos">1112</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState-1113"><a href="#XMLState-1113"><span class="linenos">1113</span></a>            <span class="k">return</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmnic</span><span class="p">()</span>
</span><span id="XMLState-1114"><a href="#XMLState-1114"><span class="linenos">1114</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1115"><a href="#XMLState-1115"><span class="linenos">1115</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="XMLState-1116"><a href="#XMLState-1116"><span class="linenos">1116</span></a>
</span><span id="XMLState-1117"><a href="#XMLState-1117"><span class="linenos">1117</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmdvd_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1118"><a href="#XMLState-1118"><span class="linenos">1118</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1119"><a href="#XMLState-1119"><span class="linenos">1119</span></a><span class="sd">        First vmdvd section from the first machine section in the</span>
</span><span id="XMLState-1120"><a href="#XMLState-1120"><span class="linenos">1120</span></a><span class="sd">        build type section</span>
</span><span id="XMLState-1121"><a href="#XMLState-1121"><span class="linenos">1121</span></a>
</span><span id="XMLState-1122"><a href="#XMLState-1122"><span class="linenos">1122</span></a><span class="sd">        :return: &lt;vmdvd&gt; section reference</span>
</span><span id="XMLState-1123"><a href="#XMLState-1123"><span class="linenos">1123</span></a>
</span><span id="XMLState-1124"><a href="#XMLState-1124"><span class="linenos">1124</span></a><span class="sd">        :rtype: xml_parse::vmdvd</span>
</span><span id="XMLState-1125"><a href="#XMLState-1125"><span class="linenos">1125</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1126"><a href="#XMLState-1126"><span class="linenos">1126</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState-1127"><a href="#XMLState-1127"><span class="linenos">1127</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState-1128"><a href="#XMLState-1128"><span class="linenos">1128</span></a>            <span class="n">vmdvd_sections</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmdvd</span><span class="p">()</span>
</span><span id="XMLState-1129"><a href="#XMLState-1129"><span class="linenos">1129</span></a>            <span class="k">if</span> <span class="n">vmdvd_sections</span><span class="p">:</span>
</span><span id="XMLState-1130"><a href="#XMLState-1130"><span class="linenos">1130</span></a>                <span class="k">return</span> <span class="n">vmdvd_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1131"><a href="#XMLState-1131"><span class="linenos">1131</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1132"><a href="#XMLState-1132"><span class="linenos">1132</span></a>
</span><span id="XMLState-1133"><a href="#XMLState-1133"><span class="linenos">1133</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmconfig_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-1134"><a href="#XMLState-1134"><span class="linenos">1134</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1135"><a href="#XMLState-1135"><span class="linenos">1135</span></a><span class="sd">        List of vmconfig-entry section values from the first</span>
</span><span id="XMLState-1136"><a href="#XMLState-1136"><span class="linenos">1136</span></a><span class="sd">        machine section in the build type section</span>
</span><span id="XMLState-1137"><a href="#XMLState-1137"><span class="linenos">1137</span></a>
</span><span id="XMLState-1138"><a href="#XMLState-1138"><span class="linenos">1138</span></a><span class="sd">        :return: &lt;vmconfig_entry&gt; section reference(s)</span>
</span><span id="XMLState-1139"><a href="#XMLState-1139"><span class="linenos">1139</span></a>
</span><span id="XMLState-1140"><a href="#XMLState-1140"><span class="linenos">1140</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1141"><a href="#XMLState-1141"><span class="linenos">1141</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1142"><a href="#XMLState-1142"><span class="linenos">1142</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState-1143"><a href="#XMLState-1143"><span class="linenos">1143</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState-1144"><a href="#XMLState-1144"><span class="linenos">1144</span></a>            <span class="n">vmconfig_entries</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmconfig_entry</span><span class="p">()</span>
</span><span id="XMLState-1145"><a href="#XMLState-1145"><span class="linenos">1145</span></a>            <span class="k">if</span> <span class="n">vmconfig_entries</span><span class="p">:</span>
</span><span id="XMLState-1146"><a href="#XMLState-1146"><span class="linenos">1146</span></a>                <span class="k">return</span> <span class="n">vmconfig_entries</span>
</span><span id="XMLState-1147"><a href="#XMLState-1147"><span class="linenos">1147</span></a>
</span><span id="XMLState-1148"><a href="#XMLState-1148"><span class="linenos">1148</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="XMLState-1149"><a href="#XMLState-1149"><span class="linenos">1149</span></a>
</span><span id="XMLState-1150"><a href="#XMLState-1150"><span class="linenos">1150</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1151"><a href="#XMLState-1151"><span class="linenos">1151</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1152"><a href="#XMLState-1152"><span class="linenos">1152</span></a><span class="sd">        First bootloader section from the build type section</span>
</span><span id="XMLState-1153"><a href="#XMLState-1153"><span class="linenos">1153</span></a>
</span><span id="XMLState-1154"><a href="#XMLState-1154"><span class="linenos">1154</span></a><span class="sd">        :return: &lt;bootloader&gt; section reference</span>
</span><span id="XMLState-1155"><a href="#XMLState-1155"><span class="linenos">1155</span></a>
</span><span id="XMLState-1156"><a href="#XMLState-1156"><span class="linenos">1156</span></a><span class="sd">        :rtype: xml_parse::bootloader</span>
</span><span id="XMLState-1157"><a href="#XMLState-1157"><span class="linenos">1157</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1158"><a href="#XMLState-1158"><span class="linenos">1158</span></a>        <span class="n">bootloader_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_bootloader</span><span class="p">()</span>
</span><span id="XMLState-1159"><a href="#XMLState-1159"><span class="linenos">1159</span></a>        <span class="k">if</span> <span class="n">bootloader_sections</span><span class="p">:</span>
</span><span id="XMLState-1160"><a href="#XMLState-1160"><span class="linenos">1160</span></a>            <span class="k">return</span> <span class="n">bootloader_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1161"><a href="#XMLState-1161"><span class="linenos">1161</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1162"><a href="#XMLState-1162"><span class="linenos">1162</span></a>
</span><span id="XMLState-1163"><a href="#XMLState-1163"><span class="linenos">1163</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-1164"><a href="#XMLState-1164"><span class="linenos">1164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1165"><a href="#XMLState-1165"><span class="linenos">1165</span></a><span class="sd">        Return bootloader name for selected build type</span>
</span><span id="XMLState-1166"><a href="#XMLState-1166"><span class="linenos">1166</span></a>
</span><span id="XMLState-1167"><a href="#XMLState-1167"><span class="linenos">1167</span></a><span class="sd">        :return: bootloader name</span>
</span><span id="XMLState-1168"><a href="#XMLState-1168"><span class="linenos">1168</span></a>
</span><span id="XMLState-1169"><a href="#XMLState-1169"><span class="linenos">1169</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-1170"><a href="#XMLState-1170"><span class="linenos">1170</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1171"><a href="#XMLState-1171"><span class="linenos">1171</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1172"><a href="#XMLState-1172"><span class="linenos">1172</span></a>        <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">if</span> <span class="n">bootloader</span> <span class="k">else</span> \
</span><span id="XMLState-1173"><a href="#XMLState-1173"><span class="linenos">1173</span></a>            <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_bootloader</span><span class="p">()</span>
</span><span id="XMLState-1174"><a href="#XMLState-1174"><span class="linenos">1174</span></a>
</span><span id="XMLState-1175"><a href="#XMLState-1175"><span class="linenos">1175</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_bls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-1176"><a href="#XMLState-1176"><span class="linenos">1176</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1177"><a href="#XMLState-1177"><span class="linenos">1177</span></a><span class="sd">        Return bootloader bls setting for selected build type</span>
</span><span id="XMLState-1178"><a href="#XMLState-1178"><span class="linenos">1178</span></a>
</span><span id="XMLState-1179"><a href="#XMLState-1179"><span class="linenos">1179</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState-1180"><a href="#XMLState-1180"><span class="linenos">1180</span></a>
</span><span id="XMLState-1181"><a href="#XMLState-1181"><span class="linenos">1181</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-1182"><a href="#XMLState-1182"><span class="linenos">1182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1183"><a href="#XMLState-1183"><span class="linenos">1183</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1184"><a href="#XMLState-1184"><span class="linenos">1184</span></a>        <span class="k">if</span> <span class="n">bootloader</span> <span class="ow">and</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_bls</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-1185"><a href="#XMLState-1185"><span class="linenos">1185</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_bls</span><span class="p">()</span>
</span><span id="XMLState-1186"><a href="#XMLState-1186"><span class="linenos">1186</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState-1187"><a href="#XMLState-1187"><span class="linenos">1187</span></a>
</span><span id="XMLState-1188"><a href="#XMLState-1188"><span class="linenos">1188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_console</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1189"><a href="#XMLState-1189"><span class="linenos">1189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1190"><a href="#XMLState-1190"><span class="linenos">1190</span></a><span class="sd">        Return bootloader console setting for selected build type</span>
</span><span id="XMLState-1191"><a href="#XMLState-1191"><span class="linenos">1191</span></a>
</span><span id="XMLState-1192"><a href="#XMLState-1192"><span class="linenos">1192</span></a><span class="sd">        :return:</span>
</span><span id="XMLState-1193"><a href="#XMLState-1193"><span class="linenos">1193</span></a><span class="sd">            list of console settings for output (first element)</span>
</span><span id="XMLState-1194"><a href="#XMLState-1194"><span class="linenos">1194</span></a><span class="sd">            and input (second element)</span>
</span><span id="XMLState-1195"><a href="#XMLState-1195"><span class="linenos">1195</span></a>
</span><span id="XMLState-1196"><a href="#XMLState-1196"><span class="linenos">1196</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1197"><a href="#XMLState-1197"><span class="linenos">1197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1198"><a href="#XMLState-1198"><span class="linenos">1198</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
</span><span id="XMLState-1199"><a href="#XMLState-1199"><span class="linenos">1199</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1200"><a href="#XMLState-1200"><span class="linenos">1200</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState-1201"><a href="#XMLState-1201"><span class="linenos">1201</span></a>            <span class="n">console_out</span> <span class="o">=</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_output_console</span><span class="p">()</span>
</span><span id="XMLState-1202"><a href="#XMLState-1202"><span class="linenos">1202</span></a>            <span class="n">console_in</span> <span class="o">=</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_input_console</span><span class="p">()</span>
</span><span id="XMLState-1203"><a href="#XMLState-1203"><span class="linenos">1203</span></a>            <span class="n">console_in</span> <span class="o">=</span> <span class="n">console_in</span> <span class="k">if</span> <span class="n">console_in</span> <span class="k">else</span> <span class="n">console_out</span>
</span><span id="XMLState-1204"><a href="#XMLState-1204"><span class="linenos">1204</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState-1205"><a href="#XMLState-1205"><span class="linenos">1205</span></a>                <span class="n">console_out</span> <span class="k">if</span> <span class="n">console_out</span> <span class="ow">and</span> <span class="n">console_out</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-1206"><a href="#XMLState-1206"><span class="linenos">1206</span></a>                <span class="n">console_in</span> <span class="k">if</span> <span class="n">console_in</span> <span class="ow">and</span> <span class="n">console_in</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-1207"><a href="#XMLState-1207"><span class="linenos">1207</span></a>            <span class="p">]</span>
</span><span id="XMLState-1208"><a href="#XMLState-1208"><span class="linenos">1208</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-1209"><a href="#XMLState-1209"><span class="linenos">1209</span></a>
</span><span id="XMLState-1210"><a href="#XMLState-1210"><span class="linenos">1210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_serial_line_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1211"><a href="#XMLState-1211"><span class="linenos">1211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1212"><a href="#XMLState-1212"><span class="linenos">1212</span></a><span class="sd">        Return bootloader serial line setup parameters for the</span>
</span><span id="XMLState-1213"><a href="#XMLState-1213"><span class="linenos">1213</span></a><span class="sd">        selected build type</span>
</span><span id="XMLState-1214"><a href="#XMLState-1214"><span class="linenos">1214</span></a>
</span><span id="XMLState-1215"><a href="#XMLState-1215"><span class="linenos">1215</span></a><span class="sd">        :return: serial line setup</span>
</span><span id="XMLState-1216"><a href="#XMLState-1216"><span class="linenos">1216</span></a>
</span><span id="XMLState-1217"><a href="#XMLState-1217"><span class="linenos">1217</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-1218"><a href="#XMLState-1218"><span class="linenos">1218</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1219"><a href="#XMLState-1219"><span class="linenos">1219</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1220"><a href="#XMLState-1220"><span class="linenos">1220</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState-1221"><a href="#XMLState-1221"><span class="linenos">1221</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_serial_line</span><span class="p">()</span>
</span><span id="XMLState-1222"><a href="#XMLState-1222"><span class="linenos">1222</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1223"><a href="#XMLState-1223"><span class="linenos">1223</span></a>
</span><span id="XMLState-1224"><a href="#XMLState-1224"><span class="linenos">1224</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1225"><a href="#XMLState-1225"><span class="linenos">1225</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1226"><a href="#XMLState-1226"><span class="linenos">1226</span></a><span class="sd">        Return bootloader timeout setting for selected build type</span>
</span><span id="XMLState-1227"><a href="#XMLState-1227"><span class="linenos">1227</span></a>
</span><span id="XMLState-1228"><a href="#XMLState-1228"><span class="linenos">1228</span></a><span class="sd">        :return: timeout string</span>
</span><span id="XMLState-1229"><a href="#XMLState-1229"><span class="linenos">1229</span></a>
</span><span id="XMLState-1230"><a href="#XMLState-1230"><span class="linenos">1230</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-1231"><a href="#XMLState-1231"><span class="linenos">1231</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1232"><a href="#XMLState-1232"><span class="linenos">1232</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1233"><a href="#XMLState-1233"><span class="linenos">1233</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState-1234"><a href="#XMLState-1234"><span class="linenos">1234</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_timeout</span><span class="p">()</span>
</span><span id="XMLState-1235"><a href="#XMLState-1235"><span class="linenos">1235</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1236"><a href="#XMLState-1236"><span class="linenos">1236</span></a>
</span><span id="XMLState-1237"><a href="#XMLState-1237"><span class="linenos">1237</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_timeout_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1238"><a href="#XMLState-1238"><span class="linenos">1238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1239"><a href="#XMLState-1239"><span class="linenos">1239</span></a><span class="sd">        Return bootloader timeout style setting for selected build type</span>
</span><span id="XMLState-1240"><a href="#XMLState-1240"><span class="linenos">1240</span></a>
</span><span id="XMLState-1241"><a href="#XMLState-1241"><span class="linenos">1241</span></a><span class="sd">        :return: timeout_style string</span>
</span><span id="XMLState-1242"><a href="#XMLState-1242"><span class="linenos">1242</span></a>
</span><span id="XMLState-1243"><a href="#XMLState-1243"><span class="linenos">1243</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-1244"><a href="#XMLState-1244"><span class="linenos">1244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1245"><a href="#XMLState-1245"><span class="linenos">1245</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1246"><a href="#XMLState-1246"><span class="linenos">1246</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState-1247"><a href="#XMLState-1247"><span class="linenos">1247</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_timeout_style</span><span class="p">()</span>
</span><span id="XMLState-1248"><a href="#XMLState-1248"><span class="linenos">1248</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1249"><a href="#XMLState-1249"><span class="linenos">1249</span></a>
</span><span id="XMLState-1250"><a href="#XMLState-1250"><span class="linenos">1250</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_targettype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1251"><a href="#XMLState-1251"><span class="linenos">1251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1252"><a href="#XMLState-1252"><span class="linenos">1252</span></a><span class="sd">        Return bootloader target type setting. Only relevant for</span>
</span><span id="XMLState-1253"><a href="#XMLState-1253"><span class="linenos">1253</span></a><span class="sd">        the zipl bootloader because zipl is installed differently</span>
</span><span id="XMLState-1254"><a href="#XMLState-1254"><span class="linenos">1254</span></a><span class="sd">        depending on the storage target it runs later</span>
</span><span id="XMLState-1255"><a href="#XMLState-1255"><span class="linenos">1255</span></a>
</span><span id="XMLState-1256"><a href="#XMLState-1256"><span class="linenos">1256</span></a><span class="sd">        :return: target type string</span>
</span><span id="XMLState-1257"><a href="#XMLState-1257"><span class="linenos">1257</span></a>
</span><span id="XMLState-1258"><a href="#XMLState-1258"><span class="linenos">1258</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-1259"><a href="#XMLState-1259"><span class="linenos">1259</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1260"><a href="#XMLState-1260"><span class="linenos">1260</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1261"><a href="#XMLState-1261"><span class="linenos">1261</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState-1262"><a href="#XMLState-1262"><span class="linenos">1262</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_targettype</span><span class="p">()</span>
</span><span id="XMLState-1263"><a href="#XMLState-1263"><span class="linenos">1263</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1264"><a href="#XMLState-1264"><span class="linenos">1264</span></a>
</span><span id="XMLState-1265"><a href="#XMLState-1265"><span class="linenos">1265</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_settings_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1266"><a href="#XMLState-1266"><span class="linenos">1266</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1267"><a href="#XMLState-1267"><span class="linenos">1267</span></a><span class="sd">        First bootloadersettings section from the build</span>
</span><span id="XMLState-1268"><a href="#XMLState-1268"><span class="linenos">1268</span></a><span class="sd">        type bootloader section</span>
</span><span id="XMLState-1269"><a href="#XMLState-1269"><span class="linenos">1269</span></a>
</span><span id="XMLState-1270"><a href="#XMLState-1270"><span class="linenos">1270</span></a><span class="sd">        :return: &lt;bootloadersettings&gt; section reference</span>
</span><span id="XMLState-1271"><a href="#XMLState-1271"><span class="linenos">1271</span></a>
</span><span id="XMLState-1272"><a href="#XMLState-1272"><span class="linenos">1272</span></a><span class="sd">        :rtype: xml_parse::bootloadersettings</span>
</span><span id="XMLState-1273"><a href="#XMLState-1273"><span class="linenos">1273</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1274"><a href="#XMLState-1274"><span class="linenos">1274</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1275"><a href="#XMLState-1275"><span class="linenos">1275</span></a>        <span class="n">bootloader_settings_section</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-1276"><a href="#XMLState-1276"><span class="linenos">1276</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span> <span class="ow">and</span> <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_bootloadersettings</span><span class="p">():</span>
</span><span id="XMLState-1277"><a href="#XMLState-1277"><span class="linenos">1277</span></a>            <span class="n">bootloader_settings_section</span> <span class="o">=</span> \
</span><span id="XMLState-1278"><a href="#XMLState-1278"><span class="linenos">1278</span></a>                <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_bootloadersettings</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1279"><a href="#XMLState-1279"><span class="linenos">1279</span></a>        <span class="k">return</span> <span class="n">bootloader_settings_section</span>
</span><span id="XMLState-1280"><a href="#XMLState-1280"><span class="linenos">1280</span></a>
</span><span id="XMLState-1281"><a href="#XMLState-1281"><span class="linenos">1281</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_securelinux_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
</span><span id="XMLState-1282"><a href="#XMLState-1282"><span class="linenos">1282</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1283"><a href="#XMLState-1283"><span class="linenos">1283</span></a><span class="sd">        First securelinux section from the build</span>
</span><span id="XMLState-1284"><a href="#XMLState-1284"><span class="linenos">1284</span></a><span class="sd">        type bootloader section</span>
</span><span id="XMLState-1285"><a href="#XMLState-1285"><span class="linenos">1285</span></a>
</span><span id="XMLState-1286"><a href="#XMLState-1286"><span class="linenos">1286</span></a><span class="sd">        :return: &lt;securelinux&gt; section reference</span>
</span><span id="XMLState-1287"><a href="#XMLState-1287"><span class="linenos">1287</span></a>
</span><span id="XMLState-1288"><a href="#XMLState-1288"><span class="linenos">1288</span></a><span class="sd">        :rtype: xml_parse::securelinux</span>
</span><span id="XMLState-1289"><a href="#XMLState-1289"><span class="linenos">1289</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1290"><a href="#XMLState-1290"><span class="linenos">1290</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1291"><a href="#XMLState-1291"><span class="linenos">1291</span></a>        <span class="n">bootloader_securelinux_section</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1292"><a href="#XMLState-1292"><span class="linenos">1292</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span> <span class="ow">and</span> <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_securelinux</span><span class="p">():</span>
</span><span id="XMLState-1293"><a href="#XMLState-1293"><span class="linenos">1293</span></a>            <span class="n">bootloader_securelinux_section</span> <span class="o">=</span> \
</span><span id="XMLState-1294"><a href="#XMLState-1294"><span class="linenos">1294</span></a>                <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_securelinux</span><span class="p">()</span>
</span><span id="XMLState-1295"><a href="#XMLState-1295"><span class="linenos">1295</span></a>        <span class="k">return</span> <span class="n">bootloader_securelinux_section</span>
</span><span id="XMLState-1296"><a href="#XMLState-1296"><span class="linenos">1296</span></a>
</span><span id="XMLState-1297"><a href="#XMLState-1297"><span class="linenos">1297</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_environment_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1298"><a href="#XMLState-1298"><span class="linenos">1298</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1299"><a href="#XMLState-1299"><span class="linenos">1299</span></a><span class="sd">        List of bootloader variables from the build</span>
</span><span id="XMLState-1300"><a href="#XMLState-1300"><span class="linenos">1300</span></a><span class="sd">        type &gt; bootloader &gt; bootloadersettings section</span>
</span><span id="XMLState-1301"><a href="#XMLState-1301"><span class="linenos">1301</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1302"><a href="#XMLState-1302"><span class="linenos">1302</span></a>        <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1303"><a href="#XMLState-1303"><span class="linenos">1303</span></a>        <span class="n">bootloader_settings_section</span> <span class="o">=</span> \
</span><span id="XMLState-1304"><a href="#XMLState-1304"><span class="linenos">1304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_settings_section</span><span class="p">()</span>
</span><span id="XMLState-1305"><a href="#XMLState-1305"><span class="linenos">1305</span></a>        <span class="k">if</span> <span class="n">bootloader_settings_section</span><span class="p">:</span>
</span><span id="XMLState-1306"><a href="#XMLState-1306"><span class="linenos">1306</span></a>            <span class="n">environment</span> <span class="o">=</span> <span class="n">bootloader_settings_section</span><span class="o">.</span><span class="n">get_environment</span><span class="p">()</span>
</span><span id="XMLState-1307"><a href="#XMLState-1307"><span class="linenos">1307</span></a>            <span class="k">if</span> <span class="n">environment</span> <span class="ow">and</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="XMLState-1308"><a href="#XMLState-1308"><span class="linenos">1308</span></a>                <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="XMLState-1309"><a href="#XMLState-1309"><span class="linenos">1309</span></a>                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-1310"><a href="#XMLState-1310"><span class="linenos">1310</span></a>                        <span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1311"><a href="#XMLState-1311"><span class="linenos">1311</span></a>                            <span class="n">env</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
</span><span id="XMLState-1312"><a href="#XMLState-1312"><span class="linenos">1312</span></a>                            <span class="sa">f</span><span class="s1">&#39;=</span><span class="si">{</span><span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-1313"><a href="#XMLState-1313"><span class="linenos">1313</span></a>                        <span class="p">)</span>
</span><span id="XMLState-1314"><a href="#XMLState-1314"><span class="linenos">1314</span></a>                    <span class="p">)</span>
</span><span id="XMLState-1315"><a href="#XMLState-1315"><span class="linenos">1315</span></a>        <span class="k">return</span> <span class="n">variable_list</span>
</span><span id="XMLState-1316"><a href="#XMLState-1316"><span class="linenos">1316</span></a>
</span><span id="XMLState-1317"><a href="#XMLState-1317"><span class="linenos">1317</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1318"><a href="#XMLState-1318"><span class="linenos">1318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1319"><a href="#XMLState-1319"><span class="linenos">1319</span></a><span class="sd">        List of custom options used in the process to</span>
</span><span id="XMLState-1320"><a href="#XMLState-1320"><span class="linenos">1320</span></a><span class="sd">        run bootloader setup workloads</span>
</span><span id="XMLState-1321"><a href="#XMLState-1321"><span class="linenos">1321</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1322"><a href="#XMLState-1322"><span class="linenos">1322</span></a>        <span class="n">result</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1323"><a href="#XMLState-1323"><span class="linenos">1323</span></a>        <span class="n">bootloader_settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_settings_section</span><span class="p">()</span>
</span><span id="XMLState-1324"><a href="#XMLState-1324"><span class="linenos">1324</span></a>        <span class="k">if</span> <span class="n">bootloader_settings</span><span class="p">:</span>
</span><span id="XMLState-1325"><a href="#XMLState-1325"><span class="linenos">1325</span></a>            <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1326"><a href="#XMLState-1326"><span class="linenos">1326</span></a>            <span class="k">if</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;shim&#39;</span><span class="p">:</span>
</span><span id="XMLState-1327"><a href="#XMLState-1327"><span class="linenos">1327</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_shimoption</span><span class="p">()</span>
</span><span id="XMLState-1328"><a href="#XMLState-1328"><span class="linenos">1328</span></a>            <span class="k">elif</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;install&#39;</span><span class="p">:</span>
</span><span id="XMLState-1329"><a href="#XMLState-1329"><span class="linenos">1329</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_installoption</span><span class="p">()</span>
</span><span id="XMLState-1330"><a href="#XMLState-1330"><span class="linenos">1330</span></a>            <span class="k">elif</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;config&#39;</span><span class="p">:</span>
</span><span id="XMLState-1331"><a href="#XMLState-1331"><span class="linenos">1331</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_configoption</span><span class="p">()</span>
</span><span id="XMLState-1332"><a href="#XMLState-1332"><span class="linenos">1332</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
</span><span id="XMLState-1333"><a href="#XMLState-1333"><span class="linenos">1333</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-1334"><a href="#XMLState-1334"><span class="linenos">1334</span></a>                <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">():</span>
</span><span id="XMLState-1335"><a href="#XMLState-1335"><span class="linenos">1335</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
</span><span id="XMLState-1336"><a href="#XMLState-1336"><span class="linenos">1336</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-1337"><a href="#XMLState-1337"><span class="linenos">1337</span></a>
</span><span id="XMLState-1338"><a href="#XMLState-1338"><span class="linenos">1338</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_shim_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1339"><a href="#XMLState-1339"><span class="linenos">1339</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1340"><a href="#XMLState-1340"><span class="linenos">1340</span></a><span class="sd">        List of custom options used in the process to setup secure boot</span>
</span><span id="XMLState-1341"><a href="#XMLState-1341"><span class="linenos">1341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1342"><a href="#XMLState-1342"><span class="linenos">1342</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;shim&#39;</span><span class="p">)</span>
</span><span id="XMLState-1343"><a href="#XMLState-1343"><span class="linenos">1343</span></a>
</span><span id="XMLState-1344"><a href="#XMLState-1344"><span class="linenos">1344</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_install_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1345"><a href="#XMLState-1345"><span class="linenos">1345</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1346"><a href="#XMLState-1346"><span class="linenos">1346</span></a><span class="sd">        List of custom options used in the bootloader installation</span>
</span><span id="XMLState-1347"><a href="#XMLState-1347"><span class="linenos">1347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1348"><a href="#XMLState-1348"><span class="linenos">1348</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;install&#39;</span><span class="p">)</span>
</span><span id="XMLState-1349"><a href="#XMLState-1349"><span class="linenos">1349</span></a>
</span><span id="XMLState-1350"><a href="#XMLState-1350"><span class="linenos">1350</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_config_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1351"><a href="#XMLState-1351"><span class="linenos">1351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1352"><a href="#XMLState-1352"><span class="linenos">1352</span></a><span class="sd">        List of custom options used in the bootloader configuration</span>
</span><span id="XMLState-1353"><a href="#XMLState-1353"><span class="linenos">1353</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1354"><a href="#XMLState-1354"><span class="linenos">1354</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
</span><span id="XMLState-1355"><a href="#XMLState-1355"><span class="linenos">1355</span></a>
</span><span id="XMLState-1356"><a href="#XMLState-1356"><span class="linenos">1356</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_use_disk_password</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-1357"><a href="#XMLState-1357"><span class="linenos">1357</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1358"><a href="#XMLState-1358"><span class="linenos">1358</span></a><span class="sd">        Indicate whether the bootloader configuration should use the</span>
</span><span id="XMLState-1359"><a href="#XMLState-1359"><span class="linenos">1359</span></a><span class="sd">        password protecting the encrypted root volume.</span>
</span><span id="XMLState-1360"><a href="#XMLState-1360"><span class="linenos">1360</span></a>
</span><span id="XMLState-1361"><a href="#XMLState-1361"><span class="linenos">1361</span></a><span class="sd">        :return: True|False</span>
</span><span id="XMLState-1362"><a href="#XMLState-1362"><span class="linenos">1362</span></a>
</span><span id="XMLState-1363"><a href="#XMLState-1363"><span class="linenos">1363</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-1364"><a href="#XMLState-1364"><span class="linenos">1364</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1365"><a href="#XMLState-1365"><span class="linenos">1365</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-1366"><a href="#XMLState-1366"><span class="linenos">1366</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState-1367"><a href="#XMLState-1367"><span class="linenos">1367</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_use_disk_password</span><span class="p">()</span>
</span><span id="XMLState-1368"><a href="#XMLState-1368"><span class="linenos">1368</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-1369"><a href="#XMLState-1369"><span class="linenos">1369</span></a>
</span><span id="XMLState-1370"><a href="#XMLState-1370"><span class="linenos">1370</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_oemconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1371"><a href="#XMLState-1371"><span class="linenos">1371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1372"><a href="#XMLState-1372"><span class="linenos">1372</span></a><span class="sd">        First oemconfig section from the build type section</span>
</span><span id="XMLState-1373"><a href="#XMLState-1373"><span class="linenos">1373</span></a>
</span><span id="XMLState-1374"><a href="#XMLState-1374"><span class="linenos">1374</span></a><span class="sd">        :return: &lt;oemconfig&gt; section reference</span>
</span><span id="XMLState-1375"><a href="#XMLState-1375"><span class="linenos">1375</span></a>
</span><span id="XMLState-1376"><a href="#XMLState-1376"><span class="linenos">1376</span></a><span class="sd">        :rtype: xml_parse::oemconfig</span>
</span><span id="XMLState-1377"><a href="#XMLState-1377"><span class="linenos">1377</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1378"><a href="#XMLState-1378"><span class="linenos">1378</span></a>        <span class="n">oemconfig_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_oemconfig</span><span class="p">()</span>
</span><span id="XMLState-1379"><a href="#XMLState-1379"><span class="linenos">1379</span></a>        <span class="k">if</span> <span class="n">oemconfig_sections</span><span class="p">:</span>
</span><span id="XMLState-1380"><a href="#XMLState-1380"><span class="linenos">1380</span></a>            <span class="k">return</span> <span class="n">oemconfig_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1381"><a href="#XMLState-1381"><span class="linenos">1381</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1382"><a href="#XMLState-1382"><span class="linenos">1382</span></a>
</span><span id="XMLState-1383"><a href="#XMLState-1383"><span class="linenos">1383</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-1384"><a href="#XMLState-1384"><span class="linenos">1384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1385"><a href="#XMLState-1385"><span class="linenos">1385</span></a><span class="sd">        State value to activate/deactivate disk resize. Returns a</span>
</span><span id="XMLState-1386"><a href="#XMLState-1386"><span class="linenos">1386</span></a><span class="sd">        boolean value if specified or True to set resize on by default</span>
</span><span id="XMLState-1387"><a href="#XMLState-1387"><span class="linenos">1387</span></a>
</span><span id="XMLState-1388"><a href="#XMLState-1388"><span class="linenos">1388</span></a><span class="sd">        :return: Content of &lt;oem-resize&gt; section value</span>
</span><span id="XMLState-1389"><a href="#XMLState-1389"><span class="linenos">1389</span></a>
</span><span id="XMLState-1390"><a href="#XMLState-1390"><span class="linenos">1390</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-1391"><a href="#XMLState-1391"><span class="linenos">1391</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1392"><a href="#XMLState-1392"><span class="linenos">1392</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState-1393"><a href="#XMLState-1393"><span class="linenos">1393</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_resize</span><span class="p">():</span>
</span><span id="XMLState-1394"><a href="#XMLState-1394"><span class="linenos">1394</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_resize</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1395"><a href="#XMLState-1395"><span class="linenos">1395</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1396"><a href="#XMLState-1396"><span class="linenos">1396</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState-1397"><a href="#XMLState-1397"><span class="linenos">1397</span></a>
</span><span id="XMLState-1398"><a href="#XMLState-1398"><span class="linenos">1398</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_systemsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="XMLState-1399"><a href="#XMLState-1399"><span class="linenos">1399</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1400"><a href="#XMLState-1400"><span class="linenos">1400</span></a><span class="sd">        State value to retrieve root partition size</span>
</span><span id="XMLState-1401"><a href="#XMLState-1401"><span class="linenos">1401</span></a>
</span><span id="XMLState-1402"><a href="#XMLState-1402"><span class="linenos">1402</span></a><span class="sd">        :return: Content of &lt;oem-systemsize&gt; section value</span>
</span><span id="XMLState-1403"><a href="#XMLState-1403"><span class="linenos">1403</span></a>
</span><span id="XMLState-1404"><a href="#XMLState-1404"><span class="linenos">1404</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState-1405"><a href="#XMLState-1405"><span class="linenos">1405</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1406"><a href="#XMLState-1406"><span class="linenos">1406</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState-1407"><a href="#XMLState-1407"><span class="linenos">1407</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_systemsize</span><span class="p">():</span>
</span><span id="XMLState-1408"><a href="#XMLState-1408"><span class="linenos">1408</span></a>            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_systemsize</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="XMLState-1409"><a href="#XMLState-1409"><span class="linenos">1409</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1410"><a href="#XMLState-1410"><span class="linenos">1410</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="XMLState-1411"><a href="#XMLState-1411"><span class="linenos">1411</span></a>
</span><span id="XMLState-1412"><a href="#XMLState-1412"><span class="linenos">1412</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_multipath_scan</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState-1413"><a href="#XMLState-1413"><span class="linenos">1413</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1414"><a href="#XMLState-1414"><span class="linenos">1414</span></a><span class="sd">        State value to activate multipath maps. Returns a boolean</span>
</span><span id="XMLState-1415"><a href="#XMLState-1415"><span class="linenos">1415</span></a><span class="sd">        value if specified or False</span>
</span><span id="XMLState-1416"><a href="#XMLState-1416"><span class="linenos">1416</span></a>
</span><span id="XMLState-1417"><a href="#XMLState-1417"><span class="linenos">1417</span></a><span class="sd">        :return: Content of &lt;oem-multipath-scan&gt; section value</span>
</span><span id="XMLState-1418"><a href="#XMLState-1418"><span class="linenos">1418</span></a>
</span><span id="XMLState-1419"><a href="#XMLState-1419"><span class="linenos">1419</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState-1420"><a href="#XMLState-1420"><span class="linenos">1420</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1421"><a href="#XMLState-1421"><span class="linenos">1421</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState-1422"><a href="#XMLState-1422"><span class="linenos">1422</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_multipath_scan</span><span class="p">():</span>
</span><span id="XMLState-1423"><a href="#XMLState-1423"><span class="linenos">1423</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_multipath_scan</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1424"><a href="#XMLState-1424"><span class="linenos">1424</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-1425"><a href="#XMLState-1425"><span class="linenos">1425</span></a>
</span><span id="XMLState-1426"><a href="#XMLState-1426"><span class="linenos">1426</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_swap_mbytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="XMLState-1427"><a href="#XMLState-1427"><span class="linenos">1427</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1428"><a href="#XMLState-1428"><span class="linenos">1428</span></a><span class="sd">        Return swapsize in MB if requested or None</span>
</span><span id="XMLState-1429"><a href="#XMLState-1429"><span class="linenos">1429</span></a>
</span><span id="XMLState-1430"><a href="#XMLState-1430"><span class="linenos">1430</span></a><span class="sd">        Operates on the value of oem-swap and if set to true</span>
</span><span id="XMLState-1431"><a href="#XMLState-1431"><span class="linenos">1431</span></a><span class="sd">        returns the given size or the default value.</span>
</span><span id="XMLState-1432"><a href="#XMLState-1432"><span class="linenos">1432</span></a>
</span><span id="XMLState-1433"><a href="#XMLState-1433"><span class="linenos">1433</span></a><span class="sd">        :return: Content of &lt;oem-swapsize&gt; section value or default</span>
</span><span id="XMLState-1434"><a href="#XMLState-1434"><span class="linenos">1434</span></a>
</span><span id="XMLState-1435"><a href="#XMLState-1435"><span class="linenos">1435</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState-1436"><a href="#XMLState-1436"><span class="linenos">1436</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1437"><a href="#XMLState-1437"><span class="linenos">1437</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState-1438"><a href="#XMLState-1438"><span class="linenos">1438</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swap</span><span class="p">():</span>
</span><span id="XMLState-1439"><a href="#XMLState-1439"><span class="linenos">1439</span></a>            <span class="n">swap_requested</span> <span class="o">=</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swap</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1440"><a href="#XMLState-1440"><span class="linenos">1440</span></a>            <span class="k">if</span> <span class="n">swap_requested</span><span class="p">:</span>
</span><span id="XMLState-1441"><a href="#XMLState-1441"><span class="linenos">1441</span></a>                <span class="n">swapsize</span> <span class="o">=</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapsize</span><span class="p">()</span>
</span><span id="XMLState-1442"><a href="#XMLState-1442"><span class="linenos">1442</span></a>                <span class="k">if</span> <span class="n">swapsize</span><span class="p">:</span>
</span><span id="XMLState-1443"><a href="#XMLState-1443"><span class="linenos">1443</span></a>                    <span class="k">return</span> <span class="n">swapsize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1444"><a href="#XMLState-1444"><span class="linenos">1444</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1445"><a href="#XMLState-1445"><span class="linenos">1445</span></a>                    <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_swapsize_mbytes</span><span class="p">()</span>
</span><span id="XMLState-1446"><a href="#XMLState-1446"><span class="linenos">1446</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1447"><a href="#XMLState-1447"><span class="linenos">1447</span></a>
</span><span id="XMLState-1448"><a href="#XMLState-1448"><span class="linenos">1448</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_swap_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-1449"><a href="#XMLState-1449"><span class="linenos">1449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1450"><a href="#XMLState-1450"><span class="linenos">1450</span></a><span class="sd">        Return the swap space name</span>
</span><span id="XMLState-1451"><a href="#XMLState-1451"><span class="linenos">1451</span></a>
</span><span id="XMLState-1452"><a href="#XMLState-1452"><span class="linenos">1452</span></a><span class="sd">        Operates on the value of oem-swapname and if set</span>
</span><span id="XMLState-1453"><a href="#XMLState-1453"><span class="linenos">1453</span></a><span class="sd">        returns the configured name or the default name: LVSwap</span>
</span><span id="XMLState-1454"><a href="#XMLState-1454"><span class="linenos">1454</span></a>
</span><span id="XMLState-1455"><a href="#XMLState-1455"><span class="linenos">1455</span></a><span class="sd">        The name of the swap space is used only if the</span>
</span><span id="XMLState-1456"><a href="#XMLState-1456"><span class="linenos">1456</span></a><span class="sd">        image is configured to use the LVM volume manager.</span>
</span><span id="XMLState-1457"><a href="#XMLState-1457"><span class="linenos">1457</span></a><span class="sd">        In this case swap is a volume and the volume takes</span>
</span><span id="XMLState-1458"><a href="#XMLState-1458"><span class="linenos">1458</span></a><span class="sd">        a name. In any other case the given name will have</span>
</span><span id="XMLState-1459"><a href="#XMLState-1459"><span class="linenos">1459</span></a><span class="sd">        no effect.</span>
</span><span id="XMLState-1460"><a href="#XMLState-1460"><span class="linenos">1460</span></a>
</span><span id="XMLState-1461"><a href="#XMLState-1461"><span class="linenos">1461</span></a><span class="sd">        :return: Content of &lt;oem-swapname&gt; section value or default</span>
</span><span id="XMLState-1462"><a href="#XMLState-1462"><span class="linenos">1462</span></a>
</span><span id="XMLState-1463"><a href="#XMLState-1463"><span class="linenos">1463</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-1464"><a href="#XMLState-1464"><span class="linenos">1464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1465"><a href="#XMLState-1465"><span class="linenos">1465</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState-1466"><a href="#XMLState-1466"><span class="linenos">1466</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapname</span><span class="p">():</span>
</span><span id="XMLState-1467"><a href="#XMLState-1467"><span class="linenos">1467</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapname</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1468"><a href="#XMLState-1468"><span class="linenos">1468</span></a>        <span class="k">return</span> <span class="s1">&#39;LVSwap&#39;</span>
</span><span id="XMLState-1469"><a href="#XMLState-1469"><span class="linenos">1469</span></a>
</span><span id="XMLState-1470"><a href="#XMLState-1470"><span class="linenos">1470</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_containerconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState-1471"><a href="#XMLState-1471"><span class="linenos">1471</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1472"><a href="#XMLState-1472"><span class="linenos">1472</span></a><span class="sd">        First containerconfig section from the build type section</span>
</span><span id="XMLState-1473"><a href="#XMLState-1473"><span class="linenos">1473</span></a>
</span><span id="XMLState-1474"><a href="#XMLState-1474"><span class="linenos">1474</span></a><span class="sd">        :return: &lt;containerconfig&gt; section reference</span>
</span><span id="XMLState-1475"><a href="#XMLState-1475"><span class="linenos">1475</span></a>
</span><span id="XMLState-1476"><a href="#XMLState-1476"><span class="linenos">1476</span></a><span class="sd">        :rtype: xml_parse::containerconfig</span>
</span><span id="XMLState-1477"><a href="#XMLState-1477"><span class="linenos">1477</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1478"><a href="#XMLState-1478"><span class="linenos">1478</span></a>        <span class="n">container_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_containerconfig</span><span class="p">()</span>
</span><span id="XMLState-1479"><a href="#XMLState-1479"><span class="linenos">1479</span></a>        <span class="k">if</span> <span class="n">container_config_sections</span><span class="p">:</span>
</span><span id="XMLState-1480"><a href="#XMLState-1480"><span class="linenos">1480</span></a>            <span class="k">return</span> <span class="n">container_config_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-1481"><a href="#XMLState-1481"><span class="linenos">1481</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1482"><a href="#XMLState-1482"><span class="linenos">1482</span></a>
</span><span id="XMLState-1483"><a href="#XMLState-1483"><span class="linenos">1483</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_dracut_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DracutT</span><span class="p">:</span>
</span><span id="XMLState-1484"><a href="#XMLState-1484"><span class="linenos">1484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1485"><a href="#XMLState-1485"><span class="linenos">1485</span></a><span class="sd">        Get dracut initrd config for the specified action</span>
</span><span id="XMLState-1486"><a href="#XMLState-1486"><span class="linenos">1486</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1487"><a href="#XMLState-1487"><span class="linenos">1487</span></a>        <span class="n">uefi</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-1488"><a href="#XMLState-1488"><span class="linenos">1488</span></a>        <span class="n">modules</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1489"><a href="#XMLState-1489"><span class="linenos">1489</span></a>        <span class="n">drivers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1490"><a href="#XMLState-1490"><span class="linenos">1490</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="XMLState-1491"><a href="#XMLState-1491"><span class="linenos">1491</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="XMLState-1492"><a href="#XMLState-1492"><span class="linenos">1492</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="XMLState-1493"><a href="#XMLState-1493"><span class="linenos">1493</span></a>                <span class="k">for</span> <span class="n">dracut</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="XMLState-1494"><a href="#XMLState-1494"><span class="linenos">1494</span></a>                    <span class="n">uefi</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_uefi</span><span class="p">())</span>
</span><span id="XMLState-1495"><a href="#XMLState-1495"><span class="linenos">1495</span></a>                    <span class="k">if</span> <span class="n">dracut</span><span class="o">.</span><span class="n">get_module</span><span class="p">():</span>
</span><span id="XMLState-1496"><a href="#XMLState-1496"><span class="linenos">1496</span></a>                        <span class="n">modules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_module</span><span class="p">())</span>
</span><span id="XMLState-1497"><a href="#XMLState-1497"><span class="linenos">1497</span></a>                    <span class="k">if</span> <span class="n">dracut</span><span class="o">.</span><span class="n">get_driver</span><span class="p">():</span>
</span><span id="XMLState-1498"><a href="#XMLState-1498"><span class="linenos">1498</span></a>                        <span class="n">drivers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_driver</span><span class="p">())</span>
</span><span id="XMLState-1499"><a href="#XMLState-1499"><span class="linenos">1499</span></a>        <span class="k">return</span> <span class="n">DracutT</span><span class="p">(</span>
</span><span id="XMLState-1500"><a href="#XMLState-1500"><span class="linenos">1500</span></a>            <span class="n">uefi</span><span class="o">=</span><span class="n">uefi</span><span class="p">,</span> <span class="n">modules</span><span class="o">=</span><span class="n">modules</span><span class="p">,</span> <span class="n">drivers</span><span class="o">=</span><span class="n">drivers</span>
</span><span id="XMLState-1501"><a href="#XMLState-1501"><span class="linenos">1501</span></a>        <span class="p">)</span>
</span><span id="XMLState-1502"><a href="#XMLState-1502"><span class="linenos">1502</span></a>
</span><span id="XMLState-1503"><a href="#XMLState-1503"><span class="linenos">1503</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_installmedia_initrd_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1504"><a href="#XMLState-1504"><span class="linenos">1504</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1505"><a href="#XMLState-1505"><span class="linenos">1505</span></a><span class="sd">        Gets the list of modules to append in installation initrds</span>
</span><span id="XMLState-1506"><a href="#XMLState-1506"><span class="linenos">1506</span></a>
</span><span id="XMLState-1507"><a href="#XMLState-1507"><span class="linenos">1507</span></a><span class="sd">        :return: a list of dracut module names</span>
</span><span id="XMLState-1508"><a href="#XMLState-1508"><span class="linenos">1508</span></a>
</span><span id="XMLState-1509"><a href="#XMLState-1509"><span class="linenos">1509</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1510"><a href="#XMLState-1510"><span class="linenos">1510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1511"><a href="#XMLState-1511"><span class="linenos">1511</span></a>        <span class="n">modules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1512"><a href="#XMLState-1512"><span class="linenos">1512</span></a>        <span class="n">installmedia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_installmedia</span><span class="p">()</span>
</span><span id="XMLState-1513"><a href="#XMLState-1513"><span class="linenos">1513</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">installmedia</span><span class="p">:</span>
</span><span id="XMLState-1514"><a href="#XMLState-1514"><span class="linenos">1514</span></a>            <span class="k">return</span> <span class="n">modules</span>
</span><span id="XMLState-1515"><a href="#XMLState-1515"><span class="linenos">1515</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="n">installmedia</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="XMLState-1516"><a href="#XMLState-1516"><span class="linenos">1516</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="XMLState-1517"><a href="#XMLState-1517"><span class="linenos">1517</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="XMLState-1518"><a href="#XMLState-1518"><span class="linenos">1518</span></a>                <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="XMLState-1519"><a href="#XMLState-1519"><span class="linenos">1519</span></a>                    <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="n">get_module</span><span class="p">():</span>
</span><span id="XMLState-1520"><a href="#XMLState-1520"><span class="linenos">1520</span></a>                        <span class="n">modules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">get_module</span><span class="p">())</span>
</span><span id="XMLState-1521"><a href="#XMLState-1521"><span class="linenos">1521</span></a>        <span class="k">return</span> <span class="n">modules</span>
</span><span id="XMLState-1522"><a href="#XMLState-1522"><span class="linenos">1522</span></a>
</span><span id="XMLState-1523"><a href="#XMLState-1523"><span class="linenos">1523</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_installmedia_initrd_drivers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1524"><a href="#XMLState-1524"><span class="linenos">1524</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1525"><a href="#XMLState-1525"><span class="linenos">1525</span></a><span class="sd">        Gets the list of drivers to append in installation initrds</span>
</span><span id="XMLState-1526"><a href="#XMLState-1526"><span class="linenos">1526</span></a>
</span><span id="XMLState-1527"><a href="#XMLState-1527"><span class="linenos">1527</span></a><span class="sd">        :return: a list of dracut driver names</span>
</span><span id="XMLState-1528"><a href="#XMLState-1528"><span class="linenos">1528</span></a>
</span><span id="XMLState-1529"><a href="#XMLState-1529"><span class="linenos">1529</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1530"><a href="#XMLState-1530"><span class="linenos">1530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1531"><a href="#XMLState-1531"><span class="linenos">1531</span></a>        <span class="n">drivers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1532"><a href="#XMLState-1532"><span class="linenos">1532</span></a>        <span class="n">installmedia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_installmedia</span><span class="p">()</span>
</span><span id="XMLState-1533"><a href="#XMLState-1533"><span class="linenos">1533</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">installmedia</span><span class="p">:</span>
</span><span id="XMLState-1534"><a href="#XMLState-1534"><span class="linenos">1534</span></a>            <span class="k">return</span> <span class="n">drivers</span>
</span><span id="XMLState-1535"><a href="#XMLState-1535"><span class="linenos">1535</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="n">installmedia</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="XMLState-1536"><a href="#XMLState-1536"><span class="linenos">1536</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="XMLState-1537"><a href="#XMLState-1537"><span class="linenos">1537</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="XMLState-1538"><a href="#XMLState-1538"><span class="linenos">1538</span></a>                <span class="k">for</span> <span class="n">driver</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="XMLState-1539"><a href="#XMLState-1539"><span class="linenos">1539</span></a>                    <span class="k">if</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_driver</span><span class="p">():</span>
</span><span id="XMLState-1540"><a href="#XMLState-1540"><span class="linenos">1540</span></a>                        <span class="n">drivers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">get_driver</span><span class="p">())</span>
</span><span id="XMLState-1541"><a href="#XMLState-1541"><span class="linenos">1541</span></a>        <span class="k">return</span> <span class="n">drivers</span>
</span><span id="XMLState-1542"><a href="#XMLState-1542"><span class="linenos">1542</span></a>
</span><span id="XMLState-1543"><a href="#XMLState-1543"><span class="linenos">1543</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_size</span><span class="p">(</span>
</span><span id="XMLState-1544"><a href="#XMLState-1544"><span class="linenos">1544</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">include_unpartitioned</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-1545"><a href="#XMLState-1545"><span class="linenos">1545</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">size_type</span><span class="p">]:</span>
</span><span id="XMLState-1546"><a href="#XMLState-1546"><span class="linenos">1546</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1547"><a href="#XMLState-1547"><span class="linenos">1547</span></a><span class="sd">        Size information from the build type section.</span>
</span><span id="XMLState-1548"><a href="#XMLState-1548"><span class="linenos">1548</span></a><span class="sd">        If no unit is set the value is treated as mbytes</span>
</span><span id="XMLState-1549"><a href="#XMLState-1549"><span class="linenos">1549</span></a>
</span><span id="XMLState-1550"><a href="#XMLState-1550"><span class="linenos">1550</span></a><span class="sd">        :param bool include_unpartitioned: sets if the unpartitioned area</span>
</span><span id="XMLState-1551"><a href="#XMLState-1551"><span class="linenos">1551</span></a><span class="sd">            should be included in the computed size or not</span>
</span><span id="XMLState-1552"><a href="#XMLState-1552"><span class="linenos">1552</span></a>
</span><span id="XMLState-1553"><a href="#XMLState-1553"><span class="linenos">1553</span></a><span class="sd">        :return: mbytes</span>
</span><span id="XMLState-1554"><a href="#XMLState-1554"><span class="linenos">1554</span></a>
</span><span id="XMLState-1555"><a href="#XMLState-1555"><span class="linenos">1555</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState-1556"><a href="#XMLState-1556"><span class="linenos">1556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1557"><a href="#XMLState-1557"><span class="linenos">1557</span></a>        <span class="n">size_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="XMLState-1558"><a href="#XMLState-1558"><span class="linenos">1558</span></a>        <span class="k">if</span> <span class="n">size_section</span><span class="p">:</span>
</span><span id="XMLState-1559"><a href="#XMLState-1559"><span class="linenos">1559</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unit</span><span class="p">()</span>
</span><span id="XMLState-1560"><a href="#XMLState-1560"><span class="linenos">1560</span></a>            <span class="n">additive</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_additive</span><span class="p">()</span>
</span><span id="XMLState-1561"><a href="#XMLState-1561"><span class="linenos">1561</span></a>            <span class="n">unpartitioned</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unpartitioned</span><span class="p">()</span>
</span><span id="XMLState-1562"><a href="#XMLState-1562"><span class="linenos">1562</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_valueOf_</span><span class="p">())</span>
</span><span id="XMLState-1563"><a href="#XMLState-1563"><span class="linenos">1563</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">include_unpartitioned</span> <span class="ow">and</span> <span class="n">unpartitioned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-1564"><a href="#XMLState-1564"><span class="linenos">1564</span></a>                <span class="n">value</span> <span class="o">-=</span> <span class="n">unpartitioned</span>
</span><span id="XMLState-1565"><a href="#XMLState-1565"><span class="linenos">1565</span></a>            <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
</span><span id="XMLState-1566"><a href="#XMLState-1566"><span class="linenos">1566</span></a>                <span class="n">value</span> <span class="o">*=</span> <span class="mi">1024</span>
</span><span id="XMLState-1567"><a href="#XMLState-1567"><span class="linenos">1567</span></a>            <span class="k">return</span> <span class="n">size_type</span><span class="p">(</span>
</span><span id="XMLState-1568"><a href="#XMLState-1568"><span class="linenos">1568</span></a>                <span class="n">mbytes</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">additive</span><span class="o">=</span><span class="n">additive</span>
</span><span id="XMLState-1569"><a href="#XMLState-1569"><span class="linenos">1569</span></a>            <span class="p">)</span>
</span><span id="XMLState-1570"><a href="#XMLState-1570"><span class="linenos">1570</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1571"><a href="#XMLState-1571"><span class="linenos">1571</span></a>
</span><span id="XMLState-1572"><a href="#XMLState-1572"><span class="linenos">1572</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_unpartitioned_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="XMLState-1573"><a href="#XMLState-1573"><span class="linenos">1573</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1574"><a href="#XMLState-1574"><span class="linenos">1574</span></a><span class="sd">        Size of the unpartitioned area for image in megabytes</span>
</span><span id="XMLState-1575"><a href="#XMLState-1575"><span class="linenos">1575</span></a>
</span><span id="XMLState-1576"><a href="#XMLState-1576"><span class="linenos">1576</span></a><span class="sd">        :return: mbytes</span>
</span><span id="XMLState-1577"><a href="#XMLState-1577"><span class="linenos">1577</span></a>
</span><span id="XMLState-1578"><a href="#XMLState-1578"><span class="linenos">1578</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState-1579"><a href="#XMLState-1579"><span class="linenos">1579</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1580"><a href="#XMLState-1580"><span class="linenos">1580</span></a>        <span class="n">size_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="XMLState-1581"><a href="#XMLState-1581"><span class="linenos">1581</span></a>        <span class="k">if</span> <span class="n">size_section</span><span class="p">:</span>
</span><span id="XMLState-1582"><a href="#XMLState-1582"><span class="linenos">1582</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unit</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;M&#39;</span>
</span><span id="XMLState-1583"><a href="#XMLState-1583"><span class="linenos">1583</span></a>            <span class="n">unpartitioned</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unpartitioned</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span>
</span><span id="XMLState-1584"><a href="#XMLState-1584"><span class="linenos">1584</span></a>            <span class="k">return</span> <span class="n">StringToSize</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unpartitioned</span><span class="p">,</span> <span class="n">unit</span><span class="p">))</span>
</span><span id="XMLState-1585"><a href="#XMLState-1585"><span class="linenos">1585</span></a>        <span class="k">return</span> <span class="mi">0</span>
</span><span id="XMLState-1586"><a href="#XMLState-1586"><span class="linenos">1586</span></a>
</span><span id="XMLState-1587"><a href="#XMLState-1587"><span class="linenos">1587</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_disk_start_sector</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="XMLState-1588"><a href="#XMLState-1588"><span class="linenos">1588</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1589"><a href="#XMLState-1589"><span class="linenos">1589</span></a><span class="sd">        First disk sector number to be used by the first disk partition.</span>
</span><span id="XMLState-1590"><a href="#XMLState-1590"><span class="linenos">1590</span></a>
</span><span id="XMLState-1591"><a href="#XMLState-1591"><span class="linenos">1591</span></a><span class="sd">        :return: number</span>
</span><span id="XMLState-1592"><a href="#XMLState-1592"><span class="linenos">1592</span></a>
</span><span id="XMLState-1593"><a href="#XMLState-1593"><span class="linenos">1593</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState-1594"><a href="#XMLState-1594"><span class="linenos">1594</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1595"><a href="#XMLState-1595"><span class="linenos">1595</span></a>        <span class="n">disk_start_sector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_disk_start_sector</span><span class="p">()</span>
</span><span id="XMLState-1596"><a href="#XMLState-1596"><span class="linenos">1596</span></a>        <span class="k">if</span> <span class="n">disk_start_sector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-1597"><a href="#XMLState-1597"><span class="linenos">1597</span></a>            <span class="n">disk_start_sector</span> <span class="o">=</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_disk_start_sector</span><span class="p">()</span>
</span><span id="XMLState-1598"><a href="#XMLState-1598"><span class="linenos">1598</span></a>        <span class="k">return</span> <span class="n">disk_start_sector</span>
</span><span id="XMLState-1599"><a href="#XMLState-1599"><span class="linenos">1599</span></a>
</span><span id="XMLState-1600"><a href="#XMLState-1600"><span class="linenos">1600</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_spare_part_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="XMLState-1601"><a href="#XMLState-1601"><span class="linenos">1601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1602"><a href="#XMLState-1602"><span class="linenos">1602</span></a><span class="sd">        Size information for the spare_part size from the build</span>
</span><span id="XMLState-1603"><a href="#XMLState-1603"><span class="linenos">1603</span></a><span class="sd">        type. If no unit is set the value is treated as mbytes</span>
</span><span id="XMLState-1604"><a href="#XMLState-1604"><span class="linenos">1604</span></a>
</span><span id="XMLState-1605"><a href="#XMLState-1605"><span class="linenos">1605</span></a><span class="sd">        :return: mbytes</span>
</span><span id="XMLState-1606"><a href="#XMLState-1606"><span class="linenos">1606</span></a>
</span><span id="XMLState-1607"><a href="#XMLState-1607"><span class="linenos">1607</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState-1608"><a href="#XMLState-1608"><span class="linenos">1608</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1609"><a href="#XMLState-1609"><span class="linenos">1609</span></a>        <span class="n">spare_part_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_spare_part</span><span class="p">()</span>
</span><span id="XMLState-1610"><a href="#XMLState-1610"><span class="linenos">1610</span></a>        <span class="k">if</span> <span class="n">spare_part_size</span><span class="p">:</span>
</span><span id="XMLState-1611"><a href="#XMLState-1611"><span class="linenos">1611</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">spare_part_size</span><span class="p">)</span>
</span><span id="XMLState-1612"><a href="#XMLState-1612"><span class="linenos">1612</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1613"><a href="#XMLState-1613"><span class="linenos">1613</span></a>
</span><span id="XMLState-1614"><a href="#XMLState-1614"><span class="linenos">1614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_spare_part_fs_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="XMLState-1615"><a href="#XMLState-1615"><span class="linenos">1615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1616"><a href="#XMLState-1616"><span class="linenos">1616</span></a><span class="sd">        Build type specific list of filesystem attributes applied to</span>
</span><span id="XMLState-1617"><a href="#XMLState-1617"><span class="linenos">1617</span></a><span class="sd">        the spare partition.</span>
</span><span id="XMLState-1618"><a href="#XMLState-1618"><span class="linenos">1618</span></a>
</span><span id="XMLState-1619"><a href="#XMLState-1619"><span class="linenos">1619</span></a><span class="sd">        :return: list of strings or empty list</span>
</span><span id="XMLState-1620"><a href="#XMLState-1620"><span class="linenos">1620</span></a>
</span><span id="XMLState-1621"><a href="#XMLState-1621"><span class="linenos">1621</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1622"><a href="#XMLState-1622"><span class="linenos">1622</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1623"><a href="#XMLState-1623"><span class="linenos">1623</span></a>        <span class="n">spare_part_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_spare_part_fs_attributes</span><span class="p">()</span>
</span><span id="XMLState-1624"><a href="#XMLState-1624"><span class="linenos">1624</span></a>        <span class="k">if</span> <span class="n">spare_part_attributes</span><span class="p">:</span>
</span><span id="XMLState-1625"><a href="#XMLState-1625"><span class="linenos">1625</span></a>            <span class="k">return</span> <span class="n">spare_part_attributes</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="XMLState-1626"><a href="#XMLState-1626"><span class="linenos">1626</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="XMLState-1627"><a href="#XMLState-1627"><span class="linenos">1627</span></a>
</span><span id="XMLState-1628"><a href="#XMLState-1628"><span class="linenos">1628</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_format_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState-1629"><a href="#XMLState-1629"><span class="linenos">1629</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1630"><a href="#XMLState-1630"><span class="linenos">1630</span></a><span class="sd">        Disk format options returned as a dictionary</span>
</span><span id="XMLState-1631"><a href="#XMLState-1631"><span class="linenos">1631</span></a>
</span><span id="XMLState-1632"><a href="#XMLState-1632"><span class="linenos">1632</span></a><span class="sd">        :return: format options</span>
</span><span id="XMLState-1633"><a href="#XMLState-1633"><span class="linenos">1633</span></a>
</span><span id="XMLState-1634"><a href="#XMLState-1634"><span class="linenos">1634</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-1635"><a href="#XMLState-1635"><span class="linenos">1635</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1636"><a href="#XMLState-1636"><span class="linenos">1636</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-1637"><a href="#XMLState-1637"><span class="linenos">1637</span></a>        <span class="n">format_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_formatoptions</span><span class="p">()</span>
</span><span id="XMLState-1638"><a href="#XMLState-1638"><span class="linenos">1638</span></a>        <span class="k">if</span> <span class="n">format_options</span><span class="p">:</span>
</span><span id="XMLState-1639"><a href="#XMLState-1639"><span class="linenos">1639</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">format_options</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="XMLState-1640"><a href="#XMLState-1640"><span class="linenos">1640</span></a>                <span class="n">key_value_list</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
</span><span id="XMLState-1641"><a href="#XMLState-1641"><span class="linenos">1641</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_value_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="XMLState-1642"><a href="#XMLState-1642"><span class="linenos">1642</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">key_value_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">key_value_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="XMLState-1643"><a href="#XMLState-1643"><span class="linenos">1643</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1644"><a href="#XMLState-1644"><span class="linenos">1644</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">key_value_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-1645"><a href="#XMLState-1645"><span class="linenos">1645</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-1646"><a href="#XMLState-1646"><span class="linenos">1646</span></a>
</span><span id="XMLState-1647"><a href="#XMLState-1647"><span class="linenos">1647</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volume_group_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-1648"><a href="#XMLState-1648"><span class="linenos">1648</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1649"><a href="#XMLState-1649"><span class="linenos">1649</span></a><span class="sd">        Volume group name from selected &lt;systemdisk&gt; section</span>
</span><span id="XMLState-1650"><a href="#XMLState-1650"><span class="linenos">1650</span></a>
</span><span id="XMLState-1651"><a href="#XMLState-1651"><span class="linenos">1651</span></a><span class="sd">        :return: volume group name</span>
</span><span id="XMLState-1652"><a href="#XMLState-1652"><span class="linenos">1652</span></a>
</span><span id="XMLState-1653"><a href="#XMLState-1653"><span class="linenos">1653</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-1654"><a href="#XMLState-1654"><span class="linenos">1654</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1655"><a href="#XMLState-1655"><span class="linenos">1655</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState-1656"><a href="#XMLState-1656"><span class="linenos">1656</span></a>        <span class="n">volume_group_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-1657"><a href="#XMLState-1657"><span class="linenos">1657</span></a>        <span class="k">if</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="XMLState-1658"><a href="#XMLState-1658"><span class="linenos">1658</span></a>            <span class="n">volume_group_name</span> <span class="o">=</span> <span class="n">systemdisk_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-1659"><a href="#XMLState-1659"><span class="linenos">1659</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">volume_group_name</span><span class="p">:</span>
</span><span id="XMLState-1660"><a href="#XMLState-1660"><span class="linenos">1660</span></a>            <span class="n">volume_group_name</span> <span class="o">=</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_volume_group_name</span><span class="p">()</span>
</span><span id="XMLState-1661"><a href="#XMLState-1661"><span class="linenos">1661</span></a>        <span class="k">return</span> <span class="n">volume_group_name</span>
</span><span id="XMLState-1662"><a href="#XMLState-1662"><span class="linenos">1662</span></a>
</span><span id="XMLState-1663"><a href="#XMLState-1663"><span class="linenos">1663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-1664"><a href="#XMLState-1664"><span class="linenos">1664</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1665"><a href="#XMLState-1665"><span class="linenos">1665</span></a><span class="sd">        List of configured users.</span>
</span><span id="XMLState-1666"><a href="#XMLState-1666"><span class="linenos">1666</span></a>
</span><span id="XMLState-1667"><a href="#XMLState-1667"><span class="linenos">1667</span></a><span class="sd">        Each entry in the list is a single xml_parse::user instance.</span>
</span><span id="XMLState-1668"><a href="#XMLState-1668"><span class="linenos">1668</span></a>
</span><span id="XMLState-1669"><a href="#XMLState-1669"><span class="linenos">1669</span></a><span class="sd">        :return: list of &lt;user&gt; section reference(s)</span>
</span><span id="XMLState-1670"><a href="#XMLState-1670"><span class="linenos">1670</span></a>
</span><span id="XMLState-1671"><a href="#XMLState-1671"><span class="linenos">1671</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1672"><a href="#XMLState-1672"><span class="linenos">1672</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1673"><a href="#XMLState-1673"><span class="linenos">1673</span></a>        <span class="n">users_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1674"><a href="#XMLState-1674"><span class="linenos">1674</span></a>        <span class="n">users_names_added</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1675"><a href="#XMLState-1675"><span class="linenos">1675</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users_sections</span><span class="p">():</span>
</span><span id="XMLState-1676"><a href="#XMLState-1676"><span class="linenos">1676</span></a>            <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">():</span>
</span><span id="XMLState-1677"><a href="#XMLState-1677"><span class="linenos">1677</span></a>                <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">users_names_added</span><span class="p">:</span>
</span><span id="XMLState-1678"><a href="#XMLState-1678"><span class="linenos">1678</span></a>                    <span class="n">users_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="XMLState-1679"><a href="#XMLState-1679"><span class="linenos">1679</span></a>                    <span class="n">users_names_added</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-1680"><a href="#XMLState-1680"><span class="linenos">1680</span></a>
</span><span id="XMLState-1681"><a href="#XMLState-1681"><span class="linenos">1681</span></a>        <span class="k">return</span> <span class="n">users_list</span>
</span><span id="XMLState-1682"><a href="#XMLState-1682"><span class="linenos">1682</span></a>
</span><span id="XMLState-1683"><a href="#XMLState-1683"><span class="linenos">1683</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-1684"><a href="#XMLState-1684"><span class="linenos">1684</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1685"><a href="#XMLState-1685"><span class="linenos">1685</span></a><span class="sd">        List of group names matching specified user</span>
</span><span id="XMLState-1686"><a href="#XMLState-1686"><span class="linenos">1686</span></a>
</span><span id="XMLState-1687"><a href="#XMLState-1687"><span class="linenos">1687</span></a><span class="sd">        Each entry in the list is the name of a group and optionally its</span>
</span><span id="XMLState-1688"><a href="#XMLState-1688"><span class="linenos">1688</span></a><span class="sd">        group ID separated by a colon, that the specified user belongs to.</span>
</span><span id="XMLState-1689"><a href="#XMLState-1689"><span class="linenos">1689</span></a><span class="sd">        The first item in the list is the login or primary group. The</span>
</span><span id="XMLState-1690"><a href="#XMLState-1690"><span class="linenos">1690</span></a><span class="sd">        list will be empty if no groups are specified in the</span>
</span><span id="XMLState-1691"><a href="#XMLState-1691"><span class="linenos">1691</span></a><span class="sd">        description file.</span>
</span><span id="XMLState-1692"><a href="#XMLState-1692"><span class="linenos">1692</span></a>
</span><span id="XMLState-1693"><a href="#XMLState-1693"><span class="linenos">1693</span></a><span class="sd">        :return: groups data for the given user</span>
</span><span id="XMLState-1694"><a href="#XMLState-1694"><span class="linenos">1694</span></a>
</span><span id="XMLState-1695"><a href="#XMLState-1695"><span class="linenos">1695</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-1696"><a href="#XMLState-1696"><span class="linenos">1696</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1697"><a href="#XMLState-1697"><span class="linenos">1697</span></a>        <span class="n">groups_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1698"><a href="#XMLState-1698"><span class="linenos">1698</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users_sections</span><span class="p">():</span>
</span><span id="XMLState-1699"><a href="#XMLState-1699"><span class="linenos">1699</span></a>            <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">():</span>
</span><span id="XMLState-1700"><a href="#XMLState-1700"><span class="linenos">1700</span></a>                <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="n">user_name</span><span class="p">:</span>
</span><span id="XMLState-1701"><a href="#XMLState-1701"><span class="linenos">1701</span></a>                    <span class="n">user_groups</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span>
</span><span id="XMLState-1702"><a href="#XMLState-1702"><span class="linenos">1702</span></a>                    <span class="k">if</span> <span class="n">user_groups</span><span class="p">:</span>
</span><span id="XMLState-1703"><a href="#XMLState-1703"><span class="linenos">1703</span></a>                        <span class="n">groups_list</span> <span class="o">+=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="XMLState-1704"><a href="#XMLState-1704"><span class="linenos">1704</span></a>
</span><span id="XMLState-1705"><a href="#XMLState-1705"><span class="linenos">1705</span></a>        <span class="c1"># order of list items matter, thus we don&#39;t use set() here</span>
</span><span id="XMLState-1706"><a href="#XMLState-1706"><span class="linenos">1706</span></a>        <span class="c1"># better faster, nicer solutions welcome :)</span>
</span><span id="XMLState-1707"><a href="#XMLState-1707"><span class="linenos">1707</span></a>        <span class="n">result_group_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1708"><a href="#XMLState-1708"><span class="linenos">1708</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">groups_list</span><span class="p">:</span>
</span><span id="XMLState-1709"><a href="#XMLState-1709"><span class="linenos">1709</span></a>            <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result_group_list</span><span class="p">:</span>
</span><span id="XMLState-1710"><a href="#XMLState-1710"><span class="linenos">1710</span></a>                <span class="n">result_group_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="XMLState-1711"><a href="#XMLState-1711"><span class="linenos">1711</span></a>
</span><span id="XMLState-1712"><a href="#XMLState-1712"><span class="linenos">1712</span></a>        <span class="k">return</span> <span class="n">result_group_list</span>
</span><span id="XMLState-1713"><a href="#XMLState-1713"><span class="linenos">1713</span></a>
</span><span id="XMLState-1714"><a href="#XMLState-1714"><span class="linenos">1714</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_container_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState-1715"><a href="#XMLState-1715"><span class="linenos">1715</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1716"><a href="#XMLState-1716"><span class="linenos">1716</span></a><span class="sd">        Dictionary of containerconfig information</span>
</span><span id="XMLState-1717"><a href="#XMLState-1717"><span class="linenos">1717</span></a>
</span><span id="XMLState-1718"><a href="#XMLState-1718"><span class="linenos">1718</span></a><span class="sd">        Takes attributes and subsection data from the selected</span>
</span><span id="XMLState-1719"><a href="#XMLState-1719"><span class="linenos">1719</span></a><span class="sd">        &lt;containerconfig&gt; section and stores it in a dictionary</span>
</span><span id="XMLState-1720"><a href="#XMLState-1720"><span class="linenos">1720</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1721"><a href="#XMLState-1721"><span class="linenos">1721</span></a>        <span class="n">container_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_base_data</span><span class="p">()</span>
</span><span id="XMLState-1722"><a href="#XMLState-1722"><span class="linenos">1722</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1723"><a href="#XMLState-1723"><span class="linenos">1723</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_entrypoint</span><span class="p">()</span>
</span><span id="XMLState-1724"><a href="#XMLState-1724"><span class="linenos">1724</span></a>        <span class="p">)</span>
</span><span id="XMLState-1725"><a href="#XMLState-1725"><span class="linenos">1725</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1726"><a href="#XMLState-1726"><span class="linenos">1726</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_subcommand</span><span class="p">()</span>
</span><span id="XMLState-1727"><a href="#XMLState-1727"><span class="linenos">1727</span></a>        <span class="p">)</span>
</span><span id="XMLState-1728"><a href="#XMLState-1728"><span class="linenos">1728</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1729"><a href="#XMLState-1729"><span class="linenos">1729</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_expose_ports</span><span class="p">()</span>
</span><span id="XMLState-1730"><a href="#XMLState-1730"><span class="linenos">1730</span></a>        <span class="p">)</span>
</span><span id="XMLState-1731"><a href="#XMLState-1731"><span class="linenos">1731</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1732"><a href="#XMLState-1732"><span class="linenos">1732</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_volumes</span><span class="p">()</span>
</span><span id="XMLState-1733"><a href="#XMLState-1733"><span class="linenos">1733</span></a>        <span class="p">)</span>
</span><span id="XMLState-1734"><a href="#XMLState-1734"><span class="linenos">1734</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1735"><a href="#XMLState-1735"><span class="linenos">1735</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_stopsignal</span><span class="p">()</span>
</span><span id="XMLState-1736"><a href="#XMLState-1736"><span class="linenos">1736</span></a>        <span class="p">)</span>
</span><span id="XMLState-1737"><a href="#XMLState-1737"><span class="linenos">1737</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1738"><a href="#XMLState-1738"><span class="linenos">1738</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_environment</span><span class="p">()</span>
</span><span id="XMLState-1739"><a href="#XMLState-1739"><span class="linenos">1739</span></a>        <span class="p">)</span>
</span><span id="XMLState-1740"><a href="#XMLState-1740"><span class="linenos">1740</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1741"><a href="#XMLState-1741"><span class="linenos">1741</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_labels</span><span class="p">()</span>
</span><span id="XMLState-1742"><a href="#XMLState-1742"><span class="linenos">1742</span></a>        <span class="p">)</span>
</span><span id="XMLState-1743"><a href="#XMLState-1743"><span class="linenos">1743</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState-1744"><a href="#XMLState-1744"><span class="linenos">1744</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_history</span><span class="p">()</span>
</span><span id="XMLState-1745"><a href="#XMLState-1745"><span class="linenos">1745</span></a>        <span class="p">)</span>
</span><span id="XMLState-1746"><a href="#XMLState-1746"><span class="linenos">1746</span></a>
</span><span id="XMLState-1747"><a href="#XMLState-1747"><span class="linenos">1747</span></a>        <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_description_section</span><span class="p">()</span>
</span><span id="XMLState-1748"><a href="#XMLState-1748"><span class="linenos">1748</span></a>        <span class="n">author_contact</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> &lt;</span><span class="si">{1}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">desc</span><span class="o">.</span><span class="n">author</span><span class="p">,</span> <span class="n">desc</span><span class="o">.</span><span class="n">contact</span><span class="p">)</span>
</span><span id="XMLState-1749"><a href="#XMLState-1749"><span class="linenos">1749</span></a>        <span class="k">if</span> <span class="s1">&#39;history&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">:</span>
</span><span id="XMLState-1750"><a href="#XMLState-1750"><span class="linenos">1750</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-1751"><a href="#XMLState-1751"><span class="linenos">1751</span></a>        <span class="k">if</span> <span class="s1">&#39;author&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]:</span>
</span><span id="XMLState-1752"><a href="#XMLState-1752"><span class="linenos">1752</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">author_contact</span>
</span><span id="XMLState-1753"><a href="#XMLState-1753"><span class="linenos">1753</span></a>        <span class="k">if</span> <span class="s1">&#39;maintainer&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">:</span>
</span><span id="XMLState-1754"><a href="#XMLState-1754"><span class="linenos">1754</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;maintainer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">author_contact</span>
</span><span id="XMLState-1755"><a href="#XMLState-1755"><span class="linenos">1755</span></a>
</span><span id="XMLState-1756"><a href="#XMLState-1756"><span class="linenos">1756</span></a>        <span class="k">return</span> <span class="n">container_config</span>
</span><span id="XMLState-1757"><a href="#XMLState-1757"><span class="linenos">1757</span></a>
</span><span id="XMLState-1758"><a href="#XMLState-1758"><span class="linenos">1758</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_container_config_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-1759"><a href="#XMLState-1759"><span class="linenos">1759</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1760"><a href="#XMLState-1760"><span class="linenos">1760</span></a><span class="sd">        Set new tag name in containerconfig section</span>
</span><span id="XMLState-1761"><a href="#XMLState-1761"><span class="linenos">1761</span></a>
</span><span id="XMLState-1762"><a href="#XMLState-1762"><span class="linenos">1762</span></a><span class="sd">        In order to set a new tag value an existing containerconfig and</span>
</span><span id="XMLState-1763"><a href="#XMLState-1763"><span class="linenos">1763</span></a><span class="sd">        tag setup is required</span>
</span><span id="XMLState-1764"><a href="#XMLState-1764"><span class="linenos">1764</span></a>
</span><span id="XMLState-1765"><a href="#XMLState-1765"><span class="linenos">1765</span></a><span class="sd">        :param str tag: tag name</span>
</span><span id="XMLState-1766"><a href="#XMLState-1766"><span class="linenos">1766</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1767"><a href="#XMLState-1767"><span class="linenos">1767</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-1768"><a href="#XMLState-1768"><span class="linenos">1768</span></a>        <span class="k">if</span> <span class="n">container_config_section</span> <span class="ow">and</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_tag</span><span class="p">():</span>
</span><span id="XMLState-1769"><a href="#XMLState-1769"><span class="linenos">1769</span></a>            <span class="n">container_config_section</span><span class="o">.</span><span class="n">set_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span id="XMLState-1770"><a href="#XMLState-1770"><span class="linenos">1770</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1771"><a href="#XMLState-1771"><span class="linenos">1771</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="XMLState-1772"><a href="#XMLState-1772"><span class="linenos">1772</span></a><span class="s1">                No &lt;containerconfig&gt; section and/or tag attribute configured</span>
</span><span id="XMLState-1773"><a href="#XMLState-1773"><span class="linenos">1773</span></a>
</span><span id="XMLState-1774"><a href="#XMLState-1774"><span class="linenos">1774</span></a><span class="s1">                In order to set the tag </span><span class="si">{0}</span><span class="s1"> as new container tag,</span>
</span><span id="XMLState-1775"><a href="#XMLState-1775"><span class="linenos">1775</span></a><span class="s1">                an initial containerconfig section including a tag</span>
</span><span id="XMLState-1776"><a href="#XMLState-1776"><span class="linenos">1776</span></a><span class="s1">                setup is required</span>
</span><span id="XMLState-1777"><a href="#XMLState-1777"><span class="linenos">1777</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState-1778"><a href="#XMLState-1778"><span class="linenos">1778</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
</span><span id="XMLState-1779"><a href="#XMLState-1779"><span class="linenos">1779</span></a>
</span><span id="XMLState-1780"><a href="#XMLState-1780"><span class="linenos">1780</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_container_config_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-1781"><a href="#XMLState-1781"><span class="linenos">1781</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1782"><a href="#XMLState-1782"><span class="linenos">1782</span></a><span class="sd">        Adds a new label in the containerconfig section, if a label with the</span>
</span><span id="XMLState-1783"><a href="#XMLState-1783"><span class="linenos">1783</span></a><span class="sd">        same name is already defined in containerconfig it gets overwritten by</span>
</span><span id="XMLState-1784"><a href="#XMLState-1784"><span class="linenos">1784</span></a><span class="sd">        this method.</span>
</span><span id="XMLState-1785"><a href="#XMLState-1785"><span class="linenos">1785</span></a>
</span><span id="XMLState-1786"><a href="#XMLState-1786"><span class="linenos">1786</span></a><span class="sd">        :param str label_name: the string representing the label name</span>
</span><span id="XMLState-1787"><a href="#XMLState-1787"><span class="linenos">1787</span></a><span class="sd">        :param str value: the value of the label</span>
</span><span id="XMLState-1788"><a href="#XMLState-1788"><span class="linenos">1788</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1789"><a href="#XMLState-1789"><span class="linenos">1789</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;docker&#39;</span><span class="p">,</span> <span class="s1">&#39;oci&#39;</span><span class="p">]:</span>
</span><span id="XMLState-1790"><a href="#XMLState-1790"><span class="linenos">1790</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="XMLState-1791"><a href="#XMLState-1791"><span class="linenos">1791</span></a><span class="s1">                Labels can only be configured for container image types</span>
</span><span id="XMLState-1792"><a href="#XMLState-1792"><span class="linenos">1792</span></a><span class="s1">                docker and oci.</span>
</span><span id="XMLState-1793"><a href="#XMLState-1793"><span class="linenos">1793</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState-1794"><a href="#XMLState-1794"><span class="linenos">1794</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="XMLState-1795"><a href="#XMLState-1795"><span class="linenos">1795</span></a>            <span class="k">return</span>
</span><span id="XMLState-1796"><a href="#XMLState-1796"><span class="linenos">1796</span></a>
</span><span id="XMLState-1797"><a href="#XMLState-1797"><span class="linenos">1797</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-1798"><a href="#XMLState-1798"><span class="linenos">1798</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-1799"><a href="#XMLState-1799"><span class="linenos">1799</span></a>            <span class="n">container_config_section</span> <span class="o">=</span> <span class="n">xml_parse</span><span class="o">.</span><span class="n">containerconfig</span><span class="p">(</span>
</span><span id="XMLState-1800"><a href="#XMLState-1800"><span class="linenos">1800</span></a>                <span class="n">name</span><span class="o">=</span><span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_container_name</span><span class="p">(),</span>
</span><span id="XMLState-1801"><a href="#XMLState-1801"><span class="linenos">1801</span></a>                <span class="n">tag</span><span class="o">=</span><span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_container_tag</span><span class="p">()</span>
</span><span id="XMLState-1802"><a href="#XMLState-1802"><span class="linenos">1802</span></a>            <span class="p">)</span>
</span><span id="XMLState-1803"><a href="#XMLState-1803"><span class="linenos">1803</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_containerconfig</span><span class="p">([</span><span class="n">container_config_section</span><span class="p">])</span>
</span><span id="XMLState-1804"><a href="#XMLState-1804"><span class="linenos">1804</span></a>
</span><span id="XMLState-1805"><a href="#XMLState-1805"><span class="linenos">1805</span></a>        <span class="n">labels</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()</span>
</span><span id="XMLState-1806"><a href="#XMLState-1806"><span class="linenos">1806</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">labels</span><span class="p">:</span>
</span><span id="XMLState-1807"><a href="#XMLState-1807"><span class="linenos">1807</span></a>            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">labels</span><span class="p">()]</span>
</span><span id="XMLState-1808"><a href="#XMLState-1808"><span class="linenos">1808</span></a>
</span><span id="XMLState-1809"><a href="#XMLState-1809"><span class="linenos">1809</span></a>        <span class="n">label_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1810"><a href="#XMLState-1810"><span class="linenos">1810</span></a>        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
</span><span id="XMLState-1811"><a href="#XMLState-1811"><span class="linenos">1811</span></a>            <span class="n">label_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-1812"><a href="#XMLState-1812"><span class="linenos">1812</span></a>
</span><span id="XMLState-1813"><a href="#XMLState-1813"><span class="linenos">1813</span></a>        <span class="k">if</span> <span class="n">label_name</span> <span class="ow">in</span> <span class="n">label_names</span><span class="p">:</span>
</span><span id="XMLState-1814"><a href="#XMLState-1814"><span class="linenos">1814</span></a>            <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace_label_at</span><span class="p">(</span>
</span><span id="XMLState-1815"><a href="#XMLState-1815"><span class="linenos">1815</span></a>                <span class="n">label_names</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">label_name</span><span class="p">),</span>
</span><span id="XMLState-1816"><a href="#XMLState-1816"><span class="linenos">1816</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="XMLState-1817"><a href="#XMLState-1817"><span class="linenos">1817</span></a>            <span class="p">)</span>
</span><span id="XMLState-1818"><a href="#XMLState-1818"><span class="linenos">1818</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1819"><a href="#XMLState-1819"><span class="linenos">1819</span></a>            <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_label</span><span class="p">(</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span><span id="XMLState-1820"><a href="#XMLState-1820"><span class="linenos">1820</span></a>
</span><span id="XMLState-1821"><a href="#XMLState-1821"><span class="linenos">1821</span></a>        <span class="n">container_config_section</span><span class="o">.</span><span class="n">set_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
</span><span id="XMLState-1822"><a href="#XMLState-1822"><span class="linenos">1822</span></a>
</span><span id="XMLState-1823"><a href="#XMLState-1823"><span class="linenos">1823</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ptable_entry_type</span><span class="p">]:</span>
</span><span id="XMLState-1824"><a href="#XMLState-1824"><span class="linenos">1824</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1825"><a href="#XMLState-1825"><span class="linenos">1825</span></a><span class="sd">        Dictionary of configured partitions.</span>
</span><span id="XMLState-1826"><a href="#XMLState-1826"><span class="linenos">1826</span></a>
</span><span id="XMLState-1827"><a href="#XMLState-1827"><span class="linenos">1827</span></a><span class="sd">        Each entry in the dict references a ptable_entry_type</span>
</span><span id="XMLState-1828"><a href="#XMLState-1828"><span class="linenos">1828</span></a><span class="sd">        Each key in the dict references the name of the</span>
</span><span id="XMLState-1829"><a href="#XMLState-1829"><span class="linenos">1829</span></a><span class="sd">        partition entry as handled by KIWI</span>
</span><span id="XMLState-1830"><a href="#XMLState-1830"><span class="linenos">1830</span></a>
</span><span id="XMLState-1831"><a href="#XMLState-1831"><span class="linenos">1831</span></a><span class="sd">        :return:</span>
</span><span id="XMLState-1832"><a href="#XMLState-1832"><span class="linenos">1832</span></a><span class="sd">            Contains dict of ptable_entry_type tuples</span>
</span><span id="XMLState-1833"><a href="#XMLState-1833"><span class="linenos">1833</span></a>
</span><span id="XMLState-1834"><a href="#XMLState-1834"><span class="linenos">1834</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState-1835"><a href="#XMLState-1835"><span class="linenos">1835</span></a>
</span><span id="XMLState-1836"><a href="#XMLState-1836"><span class="linenos">1836</span></a><span class="sd">                {</span>
</span><span id="XMLState-1837"><a href="#XMLState-1837"><span class="linenos">1837</span></a><span class="sd">                    &#39;NAME&#39;: ptable_entry_type(</span>
</span><span id="XMLState-1838"><a href="#XMLState-1838"><span class="linenos">1838</span></a><span class="sd">                        mbsize=int,</span>
</span><span id="XMLState-1839"><a href="#XMLState-1839"><span class="linenos">1839</span></a><span class="sd">                        clone=int,</span>
</span><span id="XMLState-1840"><a href="#XMLState-1840"><span class="linenos">1840</span></a><span class="sd">                        partition_name=str,</span>
</span><span id="XMLState-1841"><a href="#XMLState-1841"><span class="linenos">1841</span></a><span class="sd">                        partition_type=str,</span>
</span><span id="XMLState-1842"><a href="#XMLState-1842"><span class="linenos">1842</span></a><span class="sd">                        partition_id=Optional[int],</span>
</span><span id="XMLState-1843"><a href="#XMLState-1843"><span class="linenos">1843</span></a><span class="sd">                        mountpoint=str,</span>
</span><span id="XMLState-1844"><a href="#XMLState-1844"><span class="linenos">1844</span></a><span class="sd">                        filesystem=str,</span>
</span><span id="XMLState-1845"><a href="#XMLState-1845"><span class="linenos">1845</span></a><span class="sd">                        label=str</span>
</span><span id="XMLState-1846"><a href="#XMLState-1846"><span class="linenos">1846</span></a><span class="sd">                    )</span>
</span><span id="XMLState-1847"><a href="#XMLState-1847"><span class="linenos">1847</span></a><span class="sd">                }</span>
</span><span id="XMLState-1848"><a href="#XMLState-1848"><span class="linenos">1848</span></a>
</span><span id="XMLState-1849"><a href="#XMLState-1849"><span class="linenos">1849</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-1850"><a href="#XMLState-1850"><span class="linenos">1850</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-1851"><a href="#XMLState-1851"><span class="linenos">1851</span></a>        <span class="n">partitions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ptable_entry_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-1852"><a href="#XMLState-1852"><span class="linenos">1852</span></a>        <span class="n">partitions_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_partitions_section</span><span class="p">()</span>
</span><span id="XMLState-1853"><a href="#XMLState-1853"><span class="linenos">1853</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">partitions_section</span><span class="p">:</span>
</span><span id="XMLState-1854"><a href="#XMLState-1854"><span class="linenos">1854</span></a>            <span class="k">return</span> <span class="n">partitions</span>
</span><span id="XMLState-1855"><a href="#XMLState-1855"><span class="linenos">1855</span></a>        <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitions_section</span><span class="o">.</span><span class="n">get_partition</span><span class="p">():</span>
</span><span id="XMLState-1856"><a href="#XMLState-1856"><span class="linenos">1856</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-1857"><a href="#XMLState-1857"><span class="linenos">1857</span></a>            <span class="n">partition_name</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_partition_name</span><span class="p">()</span> <span class="ow">or</span> <span class="sa">f</span><span class="s1">&#39;p.lx</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="XMLState-1858"><a href="#XMLState-1858"><span class="linenos">1858</span></a>            <span class="n">partitions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptable_entry_type</span><span class="p">(</span>
</span><span id="XMLState-1859"><a href="#XMLState-1859"><span class="linenos">1859</span></a>                <span class="n">mbsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">partition</span><span class="o">.</span><span class="n">get_size</span><span class="p">()),</span>
</span><span id="XMLState-1860"><a href="#XMLState-1860"><span class="linenos">1860</span></a>                <span class="n">clone</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">partition</span><span class="o">.</span><span class="n">get_clone</span><span class="p">())</span> <span class="k">if</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_clone</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="XMLState-1861"><a href="#XMLState-1861"><span class="linenos">1861</span></a>                <span class="n">partition_name</span><span class="o">=</span><span class="n">partition_name</span><span class="p">,</span>
</span><span id="XMLState-1862"><a href="#XMLState-1862"><span class="linenos">1862</span></a>                <span class="n">partition_type</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_partition_type</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;t.linux&#39;</span><span class="p">,</span>
</span><span id="XMLState-1863"><a href="#XMLState-1863"><span class="linenos">1863</span></a>                <span class="n">partition_id</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_part_id</span><span class="p">(),</span>
</span><span id="XMLState-1864"><a href="#XMLState-1864"><span class="linenos">1864</span></a>                <span class="n">mountpoint</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_mountpoint</span><span class="p">(),</span>
</span><span id="XMLState-1865"><a href="#XMLState-1865"><span class="linenos">1865</span></a>                <span class="n">filesystem</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">(),</span>
</span><span id="XMLState-1866"><a href="#XMLState-1866"><span class="linenos">1866</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-1867"><a href="#XMLState-1867"><span class="linenos">1867</span></a>            <span class="p">)</span>
</span><span id="XMLState-1868"><a href="#XMLState-1868"><span class="linenos">1868</span></a>        <span class="k">return</span> <span class="n">partitions</span>
</span><span id="XMLState-1869"><a href="#XMLState-1869"><span class="linenos">1869</span></a>
</span><span id="XMLState-1870"><a href="#XMLState-1870"><span class="linenos">1870</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_host_key_certificates</span><span class="p">(</span>
</span><span id="XMLState-1871"><a href="#XMLState-1871"><span class="linenos">1871</span></a>        <span class="bp">self</span>
</span><span id="XMLState-1872"><a href="#XMLState-1872"><span class="linenos">1872</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]],</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]:</span>
</span><span id="XMLState-1873"><a href="#XMLState-1873"><span class="linenos">1873</span></a>        <span class="n">cc_result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1874"><a href="#XMLState-1874"><span class="linenos">1874</span></a>        <span class="n">cc_certificates</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-1875"><a href="#XMLState-1875"><span class="linenos">1875</span></a>        <span class="n">securelinux_list</span> <span class="o">=</span> \
</span><span id="XMLState-1876"><a href="#XMLState-1876"><span class="linenos">1876</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_securelinux_section</span><span class="p">()</span>
</span><span id="XMLState-1877"><a href="#XMLState-1877"><span class="linenos">1877</span></a>        <span class="k">for</span> <span class="n">securelinux</span> <span class="ow">in</span> <span class="n">securelinux_list</span><span class="p">:</span>
</span><span id="XMLState-1878"><a href="#XMLState-1878"><span class="linenos">1878</span></a>            <span class="n">cc_certificates</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="XMLState-1879"><a href="#XMLState-1879"><span class="linenos">1879</span></a>                <span class="s1">&#39;hkd_cert&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="XMLState-1880"><a href="#XMLState-1880"><span class="linenos">1880</span></a>                <span class="s1">&#39;hkd_revocation_list&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="XMLState-1881"><a href="#XMLState-1881"><span class="linenos">1881</span></a>                <span class="s1">&#39;hkd_ca_cert&#39;</span><span class="p">:</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_ca_cert</span><span class="p">(),</span>
</span><span id="XMLState-1882"><a href="#XMLState-1882"><span class="linenos">1882</span></a>                <span class="s1">&#39;hkd_sign_cert&#39;</span><span class="p">:</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_sign_cert</span><span class="p">()</span>
</span><span id="XMLState-1883"><a href="#XMLState-1883"><span class="linenos">1883</span></a>            <span class="p">}</span>
</span><span id="XMLState-1884"><a href="#XMLState-1884"><span class="linenos">1884</span></a>            <span class="k">for</span> <span class="n">hkd_cert</span> <span class="ow">in</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_cert</span><span class="p">():</span>
</span><span id="XMLState-1885"><a href="#XMLState-1885"><span class="linenos">1885</span></a>                <span class="n">cc_certificates</span><span class="p">[</span><span class="s1">&#39;hkd_cert&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hkd_cert</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-1886"><a href="#XMLState-1886"><span class="linenos">1886</span></a>            <span class="k">for</span> <span class="n">hkd_revocation_list</span> <span class="ow">in</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_revocation_list</span><span class="p">():</span>
</span><span id="XMLState-1887"><a href="#XMLState-1887"><span class="linenos">1887</span></a>                <span class="n">cc_certificates</span><span class="p">[</span><span class="s1">&#39;hkd_revocation_list&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-1888"><a href="#XMLState-1888"><span class="linenos">1888</span></a>                    <span class="n">hkd_revocation_list</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-1889"><a href="#XMLState-1889"><span class="linenos">1889</span></a>                <span class="p">)</span>
</span><span id="XMLState-1890"><a href="#XMLState-1890"><span class="linenos">1890</span></a>            <span class="n">cc_result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cc_certificates</span><span class="p">)</span>
</span><span id="XMLState-1891"><a href="#XMLState-1891"><span class="linenos">1891</span></a>        <span class="k">return</span> <span class="n">cc_result</span>
</span><span id="XMLState-1892"><a href="#XMLState-1892"><span class="linenos">1892</span></a>
</span><span id="XMLState-1893"><a href="#XMLState-1893"><span class="linenos">1893</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_containers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ContainerT</span><span class="p">]:</span>
</span><span id="XMLState-1894"><a href="#XMLState-1894"><span class="linenos">1894</span></a>        <span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1895"><a href="#XMLState-1895"><span class="linenos">1895</span></a>
</span><span id="XMLState-1896"><a href="#XMLState-1896"><span class="linenos">1896</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="XMLState-1897"><a href="#XMLState-1897"><span class="linenos">1897</span></a>            <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState-1898"><a href="#XMLState-1898"><span class="linenos">1898</span></a>            <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-1899"><a href="#XMLState-1899"><span class="linenos">1899</span></a>            <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-1900"><a href="#XMLState-1900"><span class="linenos">1900</span></a>            <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-1901"><a href="#XMLState-1901"><span class="linenos">1901</span></a>        <span class="p">):</span>
</span><span id="XMLState-1902"><a href="#XMLState-1902"><span class="linenos">1902</span></a>            <span class="k">pass</span>  <span class="c1"># pragma: nocover</span>
</span><span id="XMLState-1903"><a href="#XMLState-1903"><span class="linenos">1903</span></a>        <span class="k">for</span> <span class="n">containers_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_containers_sections</span><span class="p">():</span>
</span><span id="XMLState-1904"><a href="#XMLState-1904"><span class="linenos">1904</span></a>            <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">containers_section</span><span class="o">.</span><span class="n">get_container</span><span class="p">():</span>
</span><span id="XMLState-1905"><a href="#XMLState-1905"><span class="linenos">1905</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container_matches_host_architecture</span><span class="p">(</span><span class="n">container</span><span class="p">):</span>
</span><span id="XMLState-1906"><a href="#XMLState-1906"><span class="linenos">1906</span></a>                    <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="XMLState-1907"><a href="#XMLState-1907"><span class="linenos">1907</span></a>                    <span class="n">load_command</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-1908"><a href="#XMLState-1908"><span class="linenos">1908</span></a>                    <span class="n">container_tag</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_tag</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;latest&#39;</span>
</span><span id="XMLState-1909"><a href="#XMLState-1909"><span class="linenos">1909</span></a>                    <span class="n">container_path</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-1910"><a href="#XMLState-1910"><span class="linenos">1910</span></a>                    <span class="n">container_endpoint</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span>
</span><span id="XMLState-1911"><a href="#XMLState-1911"><span class="linenos">1911</span></a>                        <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">/</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1912"><a href="#XMLState-1912"><span class="linenos">1912</span></a>                            <span class="n">containers_section</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="n">container_path</span><span class="p">,</span>
</span><span id="XMLState-1913"><a href="#XMLState-1913"><span class="linenos">1913</span></a>                            <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">container_tag</span>
</span><span id="XMLState-1914"><a href="#XMLState-1914"><span class="linenos">1914</span></a>                        <span class="p">)</span>
</span><span id="XMLState-1915"><a href="#XMLState-1915"><span class="linenos">1915</span></a>                    <span class="p">)</span>
</span><span id="XMLState-1916"><a href="#XMLState-1916"><span class="linenos">1916</span></a>                    <span class="n">container_file_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">_</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1917"><a href="#XMLState-1917"><span class="linenos">1917</span></a>                        <span class="n">defaults</span><span class="o">.</span><span class="n">LOCAL_CONTAINERS</span><span class="p">,</span> <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">container_tag</span>
</span><span id="XMLState-1918"><a href="#XMLState-1918"><span class="linenos">1918</span></a>                    <span class="p">)</span>
</span><span id="XMLState-1919"><a href="#XMLState-1919"><span class="linenos">1919</span></a>                    <span class="n">container_backend</span> <span class="o">=</span> <span class="n">containers_section</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-1920"><a href="#XMLState-1920"><span class="linenos">1920</span></a>                    <span class="k">if</span> <span class="n">container_backend</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;podman&#39;</span><span class="p">,</span> <span class="s1">&#39;docker&#39;</span><span class="p">,</span> <span class="s1">&#39;container-snap&#39;</span><span class="p">]:</span>
</span><span id="XMLState-1921"><a href="#XMLState-1921"><span class="linenos">1921</span></a>                        <span class="k">if</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">is_buildservice_worker</span><span class="p">():</span>
</span><span id="XMLState-1922"><a href="#XMLState-1922"><span class="linenos">1922</span></a>                            <span class="n">container_uri</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span>
</span><span id="XMLState-1923"><a href="#XMLState-1923"><span class="linenos">1923</span></a>                                <span class="s1">&#39;obsrepositories:/</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1924"><a href="#XMLState-1924"><span class="linenos">1924</span></a>                                    <span class="n">container_endpoint</span>
</span><span id="XMLState-1925"><a href="#XMLState-1925"><span class="linenos">1925</span></a>                                <span class="p">),</span> <span class="s1">&#39;container&#39;</span>
</span><span id="XMLState-1926"><a href="#XMLState-1926"><span class="linenos">1926</span></a>                            <span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="XMLState-1927"><a href="#XMLState-1927"><span class="linenos">1927</span></a>
</span><span id="XMLState-1928"><a href="#XMLState-1928"><span class="linenos">1928</span></a>                            <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="XMLState-1929"><a href="#XMLState-1929"><span class="linenos">1929</span></a>                                <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState-1930"><a href="#XMLState-1930"><span class="linenos">1930</span></a>                                <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_uri</span><span class="p">,</span>
</span><span id="XMLState-1931"><a href="#XMLState-1931"><span class="linenos">1931</span></a>                                <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState-1932"><a href="#XMLState-1932"><span class="linenos">1932</span></a>                                <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_endpoint</span>
</span><span id="XMLState-1933"><a href="#XMLState-1933"><span class="linenos">1933</span></a>                            <span class="p">):</span>
</span><span id="XMLState-1934"><a href="#XMLState-1934"><span class="linenos">1934</span></a>                                <span class="k">def</span><span class="w"> </span><span class="nf">perform</span><span class="p">():</span>
</span><span id="XMLState-1935"><a href="#XMLState-1935"><span class="linenos">1935</span></a>                                    <span class="n">Command</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="XMLState-1936"><a href="#XMLState-1936"><span class="linenos">1936</span></a>                                        <span class="p">[</span>
</span><span id="XMLState-1937"><a href="#XMLState-1937"><span class="linenos">1937</span></a>                                            <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.ociarchive&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1938"><a href="#XMLState-1938"><span class="linenos">1938</span></a>                                                <span class="n">container_uri</span>
</span><span id="XMLState-1939"><a href="#XMLState-1939"><span class="linenos">1939</span></a>                                            <span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span>
</span><span id="XMLState-1940"><a href="#XMLState-1940"><span class="linenos">1940</span></a>                                                <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1941"><a href="#XMLState-1941"><span class="linenos">1941</span></a>                                                    <span class="n">root_dir</span><span class="p">,</span>
</span><span id="XMLState-1942"><a href="#XMLState-1942"><span class="linenos">1942</span></a>                                                    <span class="n">container_file_name</span>
</span><span id="XMLState-1943"><a href="#XMLState-1943"><span class="linenos">1943</span></a>                                                <span class="p">)</span>
</span><span id="XMLState-1944"><a href="#XMLState-1944"><span class="linenos">1944</span></a>                                            <span class="p">)</span>
</span><span id="XMLState-1945"><a href="#XMLState-1945"><span class="linenos">1945</span></a>                                        <span class="p">]</span>
</span><span id="XMLState-1946"><a href="#XMLState-1946"><span class="linenos">1946</span></a>                                    <span class="p">)</span>
</span><span id="XMLState-1947"><a href="#XMLState-1947"><span class="linenos">1947</span></a>                                <span class="n">perform</span><span class="p">()</span>
</span><span id="XMLState-1948"><a href="#XMLState-1948"><span class="linenos">1948</span></a>                            <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="XMLState-1949"><a href="#XMLState-1949"><span class="linenos">1949</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-1950"><a href="#XMLState-1950"><span class="linenos">1950</span></a>
</span><span id="XMLState-1951"><a href="#XMLState-1951"><span class="linenos">1951</span></a>                            <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="XMLState-1952"><a href="#XMLState-1952"><span class="linenos">1952</span></a>                                <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState-1953"><a href="#XMLState-1953"><span class="linenos">1953</span></a>                                <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-1954"><a href="#XMLState-1954"><span class="linenos">1954</span></a>                                <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState-1955"><a href="#XMLState-1955"><span class="linenos">1955</span></a>                                <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_endpoint</span>
</span><span id="XMLState-1956"><a href="#XMLState-1956"><span class="linenos">1956</span></a>                            <span class="p">):</span>
</span><span id="XMLState-1957"><a href="#XMLState-1957"><span class="linenos">1957</span></a>                                <span class="k">def</span><span class="w"> </span><span class="nf">perform</span><span class="p">():</span>
</span><span id="XMLState-1958"><a href="#XMLState-1958"><span class="linenos">1958</span></a>                                    <span class="n">Command</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="XMLState-1959"><a href="#XMLState-1959"><span class="linenos">1959</span></a>                                        <span class="p">[</span>
</span><span id="XMLState-1960"><a href="#XMLState-1960"><span class="linenos">1960</span></a>                                            <span class="s1">&#39;chroot&#39;</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">,</span>
</span><span id="XMLState-1961"><a href="#XMLState-1961"><span class="linenos">1961</span></a>                                            <span class="s1">&#39;/usr/bin/skopeo&#39;</span><span class="p">,</span> <span class="s1">&#39;copy&#39;</span><span class="p">,</span>
</span><span id="XMLState-1962"><a href="#XMLState-1962"><span class="linenos">1962</span></a>                                            <span class="s1">&#39;docker://</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1963"><a href="#XMLState-1963"><span class="linenos">1963</span></a>                                                <span class="n">container_endpoint</span>
</span><span id="XMLState-1964"><a href="#XMLState-1964"><span class="linenos">1964</span></a>                                            <span class="p">),</span>
</span><span id="XMLState-1965"><a href="#XMLState-1965"><span class="linenos">1965</span></a>                                            <span class="s1">&#39;oci-archive:</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-1966"><a href="#XMLState-1966"><span class="linenos">1966</span></a>                                                <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState-1967"><a href="#XMLState-1967"><span class="linenos">1967</span></a>                                                <span class="n">container_endpoint</span>
</span><span id="XMLState-1968"><a href="#XMLState-1968"><span class="linenos">1968</span></a>                                            <span class="p">)</span>
</span><span id="XMLState-1969"><a href="#XMLState-1969"><span class="linenos">1969</span></a>                                        <span class="p">]</span>
</span><span id="XMLState-1970"><a href="#XMLState-1970"><span class="linenos">1970</span></a>                                    <span class="p">)</span>
</span><span id="XMLState-1971"><a href="#XMLState-1971"><span class="linenos">1971</span></a>                                <span class="n">perform</span><span class="p">()</span>
</span><span id="XMLState-1972"><a href="#XMLState-1972"><span class="linenos">1972</span></a>                            <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="XMLState-1973"><a href="#XMLState-1973"><span class="linenos">1973</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">container</span><span class="o">.</span><span class="n">get_fetch_only</span><span class="p">():</span>
</span><span id="XMLState-1974"><a href="#XMLState-1974"><span class="linenos">1974</span></a>                            <span class="n">load_command</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState-1975"><a href="#XMLState-1975"><span class="linenos">1975</span></a>                                <span class="sa">f</span><span class="s1">&#39;/usr/bin/</span><span class="si">{</span><span class="n">container_backend</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="XMLState-1976"><a href="#XMLState-1976"><span class="linenos">1976</span></a>                                <span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="n">container_file_name</span>
</span><span id="XMLState-1977"><a href="#XMLState-1977"><span class="linenos">1977</span></a>                            <span class="p">]</span>
</span><span id="XMLState-1978"><a href="#XMLState-1978"><span class="linenos">1978</span></a>                    <span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-1979"><a href="#XMLState-1979"><span class="linenos">1979</span></a>                        <span class="n">ContainerT</span><span class="p">(</span>
</span><span id="XMLState-1980"><a href="#XMLState-1980"><span class="linenos">1980</span></a>                            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">container_tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="XMLState-1981"><a href="#XMLState-1981"><span class="linenos">1981</span></a>                            <span class="n">backend</span><span class="o">=</span><span class="n">container_backend</span><span class="p">,</span>
</span><span id="XMLState-1982"><a href="#XMLState-1982"><span class="linenos">1982</span></a>                            <span class="n">container_file</span><span class="o">=</span><span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState-1983"><a href="#XMLState-1983"><span class="linenos">1983</span></a>                            <span class="n">fetch_only</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">get_fetch_only</span><span class="p">()),</span>
</span><span id="XMLState-1984"><a href="#XMLState-1984"><span class="linenos">1984</span></a>                            <span class="n">fetch_command</span><span class="o">=</span><span class="n">fetch_command</span><span class="p">,</span>
</span><span id="XMLState-1985"><a href="#XMLState-1985"><span class="linenos">1985</span></a>                            <span class="n">load_command</span><span class="o">=</span><span class="n">load_command</span>
</span><span id="XMLState-1986"><a href="#XMLState-1986"><span class="linenos">1986</span></a>                        <span class="p">)</span>
</span><span id="XMLState-1987"><a href="#XMLState-1987"><span class="linenos">1987</span></a>                    <span class="p">)</span>
</span><span id="XMLState-1988"><a href="#XMLState-1988"><span class="linenos">1988</span></a>        <span class="k">return</span> <span class="n">containers</span>
</span><span id="XMLState-1989"><a href="#XMLState-1989"><span class="linenos">1989</span></a>
</span><span id="XMLState-1990"><a href="#XMLState-1990"><span class="linenos">1990</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">volume_type</span><span class="p">]:</span>
</span><span id="XMLState-1991"><a href="#XMLState-1991"><span class="linenos">1991</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-1992"><a href="#XMLState-1992"><span class="linenos">1992</span></a><span class="sd">        List of configured systemdisk volumes.</span>
</span><span id="XMLState-1993"><a href="#XMLState-1993"><span class="linenos">1993</span></a>
</span><span id="XMLState-1994"><a href="#XMLState-1994"><span class="linenos">1994</span></a><span class="sd">        Each entry in the list is a tuple with the following information</span>
</span><span id="XMLState-1995"><a href="#XMLState-1995"><span class="linenos">1995</span></a>
</span><span id="XMLState-1996"><a href="#XMLState-1996"><span class="linenos">1996</span></a><span class="sd">        * name: name of the volume</span>
</span><span id="XMLState-1997"><a href="#XMLState-1997"><span class="linenos">1997</span></a><span class="sd">        * size: size of the volume</span>
</span><span id="XMLState-1998"><a href="#XMLState-1998"><span class="linenos">1998</span></a><span class="sd">        * realpath: system path to lookup volume data. If no mountpoint</span>
</span><span id="XMLState-1999"><a href="#XMLState-1999"><span class="linenos">1999</span></a><span class="sd">          is set the volume name is used as data path.</span>
</span><span id="XMLState-2000"><a href="#XMLState-2000"><span class="linenos">2000</span></a><span class="sd">        * mountpoint: volume mount point and volume data path</span>
</span><span id="XMLState-2001"><a href="#XMLState-2001"><span class="linenos">2001</span></a><span class="sd">        * fullsize: takes all space True|False</span>
</span><span id="XMLState-2002"><a href="#XMLState-2002"><span class="linenos">2002</span></a><span class="sd">        * attributes: list of volume attributes handled via chattr</span>
</span><span id="XMLState-2003"><a href="#XMLState-2003"><span class="linenos">2003</span></a>
</span><span id="XMLState-2004"><a href="#XMLState-2004"><span class="linenos">2004</span></a><span class="sd">        :return:</span>
</span><span id="XMLState-2005"><a href="#XMLState-2005"><span class="linenos">2005</span></a><span class="sd">            Contains list of volume_type tuples</span>
</span><span id="XMLState-2006"><a href="#XMLState-2006"><span class="linenos">2006</span></a>
</span><span id="XMLState-2007"><a href="#XMLState-2007"><span class="linenos">2007</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState-2008"><a href="#XMLState-2008"><span class="linenos">2008</span></a>
</span><span id="XMLState-2009"><a href="#XMLState-2009"><span class="linenos">2009</span></a><span class="sd">                [</span>
</span><span id="XMLState-2010"><a href="#XMLState-2010"><span class="linenos">2010</span></a><span class="sd">                    volume_type(</span>
</span><span id="XMLState-2011"><a href="#XMLState-2011"><span class="linenos">2011</span></a><span class="sd">                        name=volume_name,</span>
</span><span id="XMLState-2012"><a href="#XMLState-2012"><span class="linenos">2012</span></a><span class="sd">                        parent=volume_parent,</span>
</span><span id="XMLState-2013"><a href="#XMLState-2013"><span class="linenos">2013</span></a><span class="sd">                        size=volume_size,</span>
</span><span id="XMLState-2014"><a href="#XMLState-2014"><span class="linenos">2014</span></a><span class="sd">                        realpath=path,</span>
</span><span id="XMLState-2015"><a href="#XMLState-2015"><span class="linenos">2015</span></a><span class="sd">                        mountpoint=path,</span>
</span><span id="XMLState-2016"><a href="#XMLState-2016"><span class="linenos">2016</span></a><span class="sd">                        fullsize=True,</span>
</span><span id="XMLState-2017"><a href="#XMLState-2017"><span class="linenos">2017</span></a><span class="sd">                        label=volume_label,</span>
</span><span id="XMLState-2018"><a href="#XMLState-2018"><span class="linenos">2018</span></a><span class="sd">                        attributes=[&#39;no-copy-on-write&#39;],</span>
</span><span id="XMLState-2019"><a href="#XMLState-2019"><span class="linenos">2019</span></a><span class="sd">                        is_root_volume=True|False</span>
</span><span id="XMLState-2020"><a href="#XMLState-2020"><span class="linenos">2020</span></a><span class="sd">                    )</span>
</span><span id="XMLState-2021"><a href="#XMLState-2021"><span class="linenos">2021</span></a><span class="sd">                ]</span>
</span><span id="XMLState-2022"><a href="#XMLState-2022"><span class="linenos">2022</span></a>
</span><span id="XMLState-2023"><a href="#XMLState-2023"><span class="linenos">2023</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2024"><a href="#XMLState-2024"><span class="linenos">2024</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2025"><a href="#XMLState-2025"><span class="linenos">2025</span></a>        <span class="n">volume_type_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">volume_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2026"><a href="#XMLState-2026"><span class="linenos">2026</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState-2027"><a href="#XMLState-2027"><span class="linenos">2027</span></a>        <span class="n">selected_filesystem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">()</span>
</span><span id="XMLState-2028"><a href="#XMLState-2028"><span class="linenos">2028</span></a>        <span class="n">swap_mbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oemconfig_swap_mbytes</span><span class="p">()</span>
</span><span id="XMLState-2029"><a href="#XMLState-2029"><span class="linenos">2029</span></a>        <span class="n">swap_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oemconfig_swap_name</span><span class="p">()</span>
</span><span id="XMLState-2030"><a href="#XMLState-2030"><span class="linenos">2030</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="XMLState-2031"><a href="#XMLState-2031"><span class="linenos">2031</span></a>            <span class="k">return</span> <span class="n">volume_type_list</span>
</span><span id="XMLState-2032"><a href="#XMLState-2032"><span class="linenos">2032</span></a>        <span class="n">volumes</span> <span class="o">=</span> <span class="n">systemdisk_section</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>
</span><span id="XMLState-2033"><a href="#XMLState-2033"><span class="linenos">2033</span></a>        <span class="n">have_root_volume_setup</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-2034"><a href="#XMLState-2034"><span class="linenos">2034</span></a>        <span class="n">have_full_size_volume</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-2035"><a href="#XMLState-2035"><span class="linenos">2035</span></a>        <span class="k">if</span> <span class="n">volumes</span><span class="p">:</span>
</span><span id="XMLState-2036"><a href="#XMLState-2036"><span class="linenos">2036</span></a>            <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">volumes</span><span class="p">:</span>
</span><span id="XMLState-2037"><a href="#XMLState-2037"><span class="linenos">2037</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_matches_host_architecture</span><span class="p">(</span><span class="n">volume</span><span class="p">):</span>
</span><span id="XMLState-2038"><a href="#XMLState-2038"><span class="linenos">2038</span></a>                    <span class="k">continue</span>
</span><span id="XMLState-2039"><a href="#XMLState-2039"><span class="linenos">2039</span></a>                <span class="c1"># volume setup for a full qualified volume with name and</span>
</span><span id="XMLState-2040"><a href="#XMLState-2040"><span class="linenos">2040</span></a>                <span class="c1"># mountpoint information. See below for exceptions</span>
</span><span id="XMLState-2041"><a href="#XMLState-2041"><span class="linenos">2041</span></a>                <span class="n">name</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-2042"><a href="#XMLState-2042"><span class="linenos">2042</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-2043"><a href="#XMLState-2043"><span class="linenos">2043</span></a>                <span class="n">mountpoint</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_mountpoint</span><span class="p">()</span>
</span><span id="XMLState-2044"><a href="#XMLState-2044"><span class="linenos">2044</span></a>                <span class="n">realpath</span> <span class="o">=</span> <span class="n">mountpoint</span>
</span><span id="XMLState-2045"><a href="#XMLState-2045"><span class="linenos">2045</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="XMLState-2046"><a href="#XMLState-2046"><span class="linenos">2046</span></a>                <span class="n">freespace</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_freespace</span><span class="p">()</span>
</span><span id="XMLState-2047"><a href="#XMLState-2047"><span class="linenos">2047</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-2048"><a href="#XMLState-2048"><span class="linenos">2048</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="XMLState-2049"><a href="#XMLState-2049"><span class="linenos">2049</span></a>                <span class="n">attributes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2050"><a href="#XMLState-2050"><span class="linenos">2050</span></a>                <span class="n">is_root_volume</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-2051"><a href="#XMLState-2051"><span class="linenos">2051</span></a>
</span><span id="XMLState-2052"><a href="#XMLState-2052"><span class="linenos">2052</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_quota</span><span class="p">():</span>
</span><span id="XMLState-2053"><a href="#XMLState-2053"><span class="linenos">2053</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;quota=</span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get_quota</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="XMLState-2054"><a href="#XMLState-2054"><span class="linenos">2054</span></a>
</span><span id="XMLState-2055"><a href="#XMLState-2055"><span class="linenos">2055</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_copy_on_write</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="XMLState-2056"><a href="#XMLState-2056"><span class="linenos">2056</span></a>                    <span class="c1"># by default copy-on-write is switched on for any</span>
</span><span id="XMLState-2057"><a href="#XMLState-2057"><span class="linenos">2057</span></a>                    <span class="c1"># filesystem. Thus only if no copy on write is requested</span>
</span><span id="XMLState-2058"><a href="#XMLState-2058"><span class="linenos">2058</span></a>                    <span class="c1"># the attribute is handled</span>
</span><span id="XMLState-2059"><a href="#XMLState-2059"><span class="linenos">2059</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;no-copy-on-write&#39;</span><span class="p">)</span>
</span><span id="XMLState-2060"><a href="#XMLState-2060"><span class="linenos">2060</span></a>
</span><span id="XMLState-2061"><a href="#XMLState-2061"><span class="linenos">2061</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_filesystem_check</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="XMLState-2062"><a href="#XMLState-2062"><span class="linenos">2062</span></a>                    <span class="c1"># by default filesystem check is switched off for any</span>
</span><span id="XMLState-2063"><a href="#XMLState-2063"><span class="linenos">2063</span></a>                    <span class="c1"># filesystem except the rootfs. Thus only if filesystem</span>
</span><span id="XMLState-2064"><a href="#XMLState-2064"><span class="linenos">2064</span></a>                    <span class="c1"># check is requested the attribute is handled</span>
</span><span id="XMLState-2065"><a href="#XMLState-2065"><span class="linenos">2065</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;enable-for-filesystem-check&#39;</span><span class="p">)</span>
</span><span id="XMLState-2066"><a href="#XMLState-2066"><span class="linenos">2066</span></a>
</span><span id="XMLState-2067"><a href="#XMLState-2067"><span class="linenos">2067</span></a>                <span class="k">if</span> <span class="s1">&#39;@root&#39;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
</span><span id="XMLState-2068"><a href="#XMLState-2068"><span class="linenos">2068</span></a>                    <span class="c1"># setup root volume, it takes an optional volume</span>
</span><span id="XMLState-2069"><a href="#XMLState-2069"><span class="linenos">2069</span></a>                    <span class="c1"># name if specified as @root=name and has no specific</span>
</span><span id="XMLState-2070"><a href="#XMLState-2070"><span class="linenos">2070</span></a>                    <span class="c1"># mountpoint. The default name is set to</span>
</span><span id="XMLState-2071"><a href="#XMLState-2071"><span class="linenos">2071</span></a>                    <span class="c1"># defaults.ROOT_VOLUME_NAME if no other root volume</span>
</span><span id="XMLState-2072"><a href="#XMLState-2072"><span class="linenos">2072</span></a>                    <span class="c1"># name is provided</span>
</span><span id="XMLState-2073"><a href="#XMLState-2073"><span class="linenos">2073</span></a>                    <span class="n">mountpoint</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2074"><a href="#XMLState-2074"><span class="linenos">2074</span></a>                    <span class="n">realpath</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>
</span><span id="XMLState-2075"><a href="#XMLState-2075"><span class="linenos">2075</span></a>                    <span class="n">is_root_volume</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState-2076"><a href="#XMLState-2076"><span class="linenos">2076</span></a>                    <span class="n">root_volume_expression</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="XMLState-2077"><a href="#XMLState-2077"><span class="linenos">2077</span></a>                        <span class="sa">r</span><span class="s1">&#39;@root=(.+)&#39;</span><span class="p">,</span> <span class="n">name</span>
</span><span id="XMLState-2078"><a href="#XMLState-2078"><span class="linenos">2078</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2079"><a href="#XMLState-2079"><span class="linenos">2079</span></a>                    <span class="k">if</span> <span class="n">root_volume_expression</span><span class="p">:</span>
</span><span id="XMLState-2080"><a href="#XMLState-2080"><span class="linenos">2080</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="n">root_volume_expression</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="XMLState-2081"><a href="#XMLState-2081"><span class="linenos">2081</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-2082"><a href="#XMLState-2082"><span class="linenos">2082</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">ROOT_VOLUME_NAME</span>
</span><span id="XMLState-2083"><a href="#XMLState-2083"><span class="linenos">2083</span></a>                    <span class="n">have_root_volume_setup</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState-2084"><a href="#XMLState-2084"><span class="linenos">2084</span></a>                <span class="k">elif</span> <span class="ow">not</span> <span class="n">mountpoint</span><span class="p">:</span>
</span><span id="XMLState-2085"><a href="#XMLState-2085"><span class="linenos">2085</span></a>                    <span class="c1"># setup volume without mountpoint. In this case the name</span>
</span><span id="XMLState-2086"><a href="#XMLState-2086"><span class="linenos">2086</span></a>                    <span class="c1"># attribute is used as mountpoint path and a name for the</span>
</span><span id="XMLState-2087"><a href="#XMLState-2087"><span class="linenos">2087</span></a>                    <span class="c1"># volume is created from that path information</span>
</span><span id="XMLState-2088"><a href="#XMLState-2088"><span class="linenos">2088</span></a>                    <span class="n">mountpoint</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="XMLState-2089"><a href="#XMLState-2089"><span class="linenos">2089</span></a>                    <span class="n">realpath</span> <span class="o">=</span> <span class="n">mountpoint</span>
</span><span id="XMLState-2090"><a href="#XMLState-2090"><span class="linenos">2090</span></a>                    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_volume_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="XMLState-2091"><a href="#XMLState-2091"><span class="linenos">2091</span></a>
</span><span id="XMLState-2092"><a href="#XMLState-2092"><span class="linenos">2092</span></a>                <span class="k">if</span> <span class="n">size</span><span class="p">:</span>
</span><span id="XMLState-2093"><a href="#XMLState-2093"><span class="linenos">2093</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;size:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState-2094"><a href="#XMLState-2094"><span class="linenos">2094</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="XMLState-2095"><a href="#XMLState-2095"><span class="linenos">2095</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2096"><a href="#XMLState-2096"><span class="linenos">2096</span></a>                <span class="k">elif</span> <span class="n">freespace</span><span class="p">:</span>
</span><span id="XMLState-2097"><a href="#XMLState-2097"><span class="linenos">2097</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState-2098"><a href="#XMLState-2098"><span class="linenos">2098</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">freespace</span><span class="p">)</span>
</span><span id="XMLState-2099"><a href="#XMLState-2099"><span class="linenos">2099</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2100"><a href="#XMLState-2100"><span class="linenos">2100</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-2101"><a href="#XMLState-2101"><span class="linenos">2101</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState-2102"><a href="#XMLState-2102"><span class="linenos">2102</span></a>                        <span class="n">Defaults</span><span class="o">.</span><span class="n">get_min_volume_mbytes</span><span class="p">(</span><span class="n">selected_filesystem</span><span class="p">)</span>
</span><span id="XMLState-2103"><a href="#XMLState-2103"><span class="linenos">2103</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2104"><a href="#XMLState-2104"><span class="linenos">2104</span></a>
</span><span id="XMLState-2105"><a href="#XMLState-2105"><span class="linenos">2105</span></a>                <span class="k">if</span> <span class="s1">&#39;:all&#39;</span> <span class="ow">in</span> <span class="n">size</span><span class="p">:</span>
</span><span id="XMLState-2106"><a href="#XMLState-2106"><span class="linenos">2106</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2107"><a href="#XMLState-2107"><span class="linenos">2107</span></a>                    <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState-2108"><a href="#XMLState-2108"><span class="linenos">2108</span></a>                    <span class="n">have_full_size_volume</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState-2109"><a href="#XMLState-2109"><span class="linenos">2109</span></a>
</span><span id="XMLState-2110"><a href="#XMLState-2110"><span class="linenos">2110</span></a>                <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-2111"><a href="#XMLState-2111"><span class="linenos">2111</span></a>                    <span class="n">volume_type</span><span class="p">(</span>
</span><span id="XMLState-2112"><a href="#XMLState-2112"><span class="linenos">2112</span></a>                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="XMLState-2113"><a href="#XMLState-2113"><span class="linenos">2113</span></a>                        <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
</span><span id="XMLState-2114"><a href="#XMLState-2114"><span class="linenos">2114</span></a>                        <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="XMLState-2115"><a href="#XMLState-2115"><span class="linenos">2115</span></a>                        <span class="n">fullsize</span><span class="o">=</span><span class="n">fullsize</span><span class="p">,</span>
</span><span id="XMLState-2116"><a href="#XMLState-2116"><span class="linenos">2116</span></a>                        <span class="n">mountpoint</span><span class="o">=</span><span class="n">mountpoint</span><span class="p">,</span>
</span><span id="XMLState-2117"><a href="#XMLState-2117"><span class="linenos">2117</span></a>                        <span class="n">realpath</span><span class="o">=</span><span class="n">realpath</span><span class="p">,</span>
</span><span id="XMLState-2118"><a href="#XMLState-2118"><span class="linenos">2118</span></a>                        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
</span><span id="XMLState-2119"><a href="#XMLState-2119"><span class="linenos">2119</span></a>                        <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
</span><span id="XMLState-2120"><a href="#XMLState-2120"><span class="linenos">2120</span></a>                        <span class="n">is_root_volume</span><span class="o">=</span><span class="n">is_root_volume</span>
</span><span id="XMLState-2121"><a href="#XMLState-2121"><span class="linenos">2121</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2122"><a href="#XMLState-2122"><span class="linenos">2122</span></a>                <span class="p">)</span>
</span><span id="XMLState-2123"><a href="#XMLState-2123"><span class="linenos">2123</span></a>
</span><span id="XMLState-2124"><a href="#XMLState-2124"><span class="linenos">2124</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">have_root_volume_setup</span><span class="p">:</span>
</span><span id="XMLState-2125"><a href="#XMLState-2125"><span class="linenos">2125</span></a>            <span class="c1"># There must always be a root volume setup. It will be the</span>
</span><span id="XMLState-2126"><a href="#XMLState-2126"><span class="linenos">2126</span></a>            <span class="c1"># full size volume if no other volume has this setup</span>
</span><span id="XMLState-2127"><a href="#XMLState-2127"><span class="linenos">2127</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_management</span><span class="p">()</span>
</span><span id="XMLState-2128"><a href="#XMLState-2128"><span class="linenos">2128</span></a>            <span class="n">root_volume_name</span> <span class="o">=</span> \
</span><span id="XMLState-2129"><a href="#XMLState-2129"><span class="linenos">2129</span></a>                <span class="n">defaults</span><span class="o">.</span><span class="n">ROOT_VOLUME_NAME</span> <span class="k">if</span> <span class="n">volume_management</span> <span class="o">==</span> <span class="s1">&#39;lvm&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-2130"><a href="#XMLState-2130"><span class="linenos">2130</span></a>            <span class="k">if</span> <span class="n">have_full_size_volume</span><span class="p">:</span>
</span><span id="XMLState-2131"><a href="#XMLState-2131"><span class="linenos">2131</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState-2132"><a href="#XMLState-2132"><span class="linenos">2132</span></a>                    <span class="n">Defaults</span><span class="o">.</span><span class="n">get_min_volume_mbytes</span><span class="p">(</span><span class="n">selected_filesystem</span><span class="p">)</span>
</span><span id="XMLState-2133"><a href="#XMLState-2133"><span class="linenos">2133</span></a>                <span class="p">)</span>
</span><span id="XMLState-2134"><a href="#XMLState-2134"><span class="linenos">2134</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-2135"><a href="#XMLState-2135"><span class="linenos">2135</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-2136"><a href="#XMLState-2136"><span class="linenos">2136</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2137"><a href="#XMLState-2137"><span class="linenos">2137</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState-2138"><a href="#XMLState-2138"><span class="linenos">2138</span></a>            <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-2139"><a href="#XMLState-2139"><span class="linenos">2139</span></a>                <span class="n">volume_type</span><span class="p">(</span>
</span><span id="XMLState-2140"><a href="#XMLState-2140"><span class="linenos">2140</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">root_volume_name</span><span class="p">,</span>
</span><span id="XMLState-2141"><a href="#XMLState-2141"><span class="linenos">2141</span></a>                    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-2142"><a href="#XMLState-2142"><span class="linenos">2142</span></a>                    <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="XMLState-2143"><a href="#XMLState-2143"><span class="linenos">2143</span></a>                    <span class="n">fullsize</span><span class="o">=</span><span class="n">fullsize</span><span class="p">,</span>
</span><span id="XMLState-2144"><a href="#XMLState-2144"><span class="linenos">2144</span></a>                    <span class="n">mountpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2145"><a href="#XMLState-2145"><span class="linenos">2145</span></a>                    <span class="n">realpath</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span><span id="XMLState-2146"><a href="#XMLState-2146"><span class="linenos">2146</span></a>                    <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2147"><a href="#XMLState-2147"><span class="linenos">2147</span></a>                    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
</span><span id="XMLState-2148"><a href="#XMLState-2148"><span class="linenos">2148</span></a>                    <span class="n">is_root_volume</span><span class="o">=</span><span class="kc">True</span>
</span><span id="XMLState-2149"><a href="#XMLState-2149"><span class="linenos">2149</span></a>                <span class="p">)</span>
</span><span id="XMLState-2150"><a href="#XMLState-2150"><span class="linenos">2150</span></a>            <span class="p">)</span>
</span><span id="XMLState-2151"><a href="#XMLState-2151"><span class="linenos">2151</span></a>
</span><span id="XMLState-2152"><a href="#XMLState-2152"><span class="linenos">2152</span></a>        <span class="k">if</span> <span class="n">swap_mbytes</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_management</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;lvm&#39;</span><span class="p">:</span>
</span><span id="XMLState-2153"><a href="#XMLState-2153"><span class="linenos">2153</span></a>            <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-2154"><a href="#XMLState-2154"><span class="linenos">2154</span></a>                <span class="n">volume_type</span><span class="p">(</span>
</span><span id="XMLState-2155"><a href="#XMLState-2155"><span class="linenos">2155</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">swap_name</span><span class="p">,</span>
</span><span id="XMLState-2156"><a href="#XMLState-2156"><span class="linenos">2156</span></a>                    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState-2157"><a href="#XMLState-2157"><span class="linenos">2157</span></a>                    <span class="n">size</span><span class="o">=</span><span class="s1">&#39;size:</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">swap_mbytes</span><span class="p">),</span>
</span><span id="XMLState-2158"><a href="#XMLState-2158"><span class="linenos">2158</span></a>                    <span class="n">fullsize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="XMLState-2159"><a href="#XMLState-2159"><span class="linenos">2159</span></a>                    <span class="n">mountpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2160"><a href="#XMLState-2160"><span class="linenos">2160</span></a>                    <span class="n">realpath</span><span class="o">=</span><span class="s1">&#39;swap&#39;</span><span class="p">,</span>
</span><span id="XMLState-2161"><a href="#XMLState-2161"><span class="linenos">2161</span></a>                    <span class="n">label</span><span class="o">=</span><span class="s1">&#39;SWAP&#39;</span><span class="p">,</span>
</span><span id="XMLState-2162"><a href="#XMLState-2162"><span class="linenos">2162</span></a>                    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
</span><span id="XMLState-2163"><a href="#XMLState-2163"><span class="linenos">2163</span></a>                    <span class="n">is_root_volume</span><span class="o">=</span><span class="kc">False</span>
</span><span id="XMLState-2164"><a href="#XMLState-2164"><span class="linenos">2164</span></a>                <span class="p">)</span>
</span><span id="XMLState-2165"><a href="#XMLState-2165"><span class="linenos">2165</span></a>            <span class="p">)</span>
</span><span id="XMLState-2166"><a href="#XMLState-2166"><span class="linenos">2166</span></a>
</span><span id="XMLState-2167"><a href="#XMLState-2167"><span class="linenos">2167</span></a>        <span class="k">return</span> <span class="n">volume_type_list</span>
</span><span id="XMLState-2168"><a href="#XMLState-2168"><span class="linenos">2168</span></a>
</span><span id="XMLState-2169"><a href="#XMLState-2169"><span class="linenos">2169</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volume_management</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-2170"><a href="#XMLState-2170"><span class="linenos">2170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2171"><a href="#XMLState-2171"><span class="linenos">2171</span></a><span class="sd">        Provides information which volume management system is used</span>
</span><span id="XMLState-2172"><a href="#XMLState-2172"><span class="linenos">2172</span></a>
</span><span id="XMLState-2173"><a href="#XMLState-2173"><span class="linenos">2173</span></a><span class="sd">        :return: name of volume manager</span>
</span><span id="XMLState-2174"><a href="#XMLState-2174"><span class="linenos">2174</span></a>
</span><span id="XMLState-2175"><a href="#XMLState-2175"><span class="linenos">2175</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-2176"><a href="#XMLState-2176"><span class="linenos">2176</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2177"><a href="#XMLState-2177"><span class="linenos">2177</span></a>        <span class="n">volume_filesystems</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;btrfs&#39;</span><span class="p">]</span>
</span><span id="XMLState-2178"><a href="#XMLState-2178"><span class="linenos">2178</span></a>        <span class="n">selected_filesystem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">()</span>
</span><span id="XMLState-2179"><a href="#XMLState-2179"><span class="linenos">2179</span></a>        <span class="n">selected_system_disk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState-2180"><a href="#XMLState-2180"><span class="linenos">2180</span></a>        <span class="n">volume_management</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2181"><a href="#XMLState-2181"><span class="linenos">2181</span></a>        <span class="k">if</span> <span class="n">selected_system_disk</span> <span class="ow">and</span> <span class="n">selected_system_disk</span><span class="o">.</span><span class="n">get_preferlvm</span><span class="p">():</span>
</span><span id="XMLState-2182"><a href="#XMLState-2182"><span class="linenos">2182</span></a>            <span class="c1"># LVM volume management is preferred, use it</span>
</span><span id="XMLState-2183"><a href="#XMLState-2183"><span class="linenos">2183</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="s1">&#39;lvm&#39;</span>
</span><span id="XMLState-2184"><a href="#XMLState-2184"><span class="linenos">2184</span></a>        <span class="k">elif</span> <span class="n">selected_filesystem</span> <span class="ow">in</span> <span class="n">volume_filesystems</span> <span class="ow">and</span> <span class="n">selected_system_disk</span><span class="p">:</span>
</span><span id="XMLState-2185"><a href="#XMLState-2185"><span class="linenos">2185</span></a>            <span class="c1"># specified filesystem has its own volume management system</span>
</span><span id="XMLState-2186"><a href="#XMLState-2186"><span class="linenos">2186</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="n">selected_filesystem</span>
</span><span id="XMLState-2187"><a href="#XMLState-2187"><span class="linenos">2187</span></a>        <span class="k">elif</span> <span class="n">selected_system_disk</span><span class="p">:</span>
</span><span id="XMLState-2188"><a href="#XMLState-2188"><span class="linenos">2188</span></a>            <span class="c1"># systemdisk section is specified with non volume capable</span>
</span><span id="XMLState-2189"><a href="#XMLState-2189"><span class="linenos">2189</span></a>            <span class="c1"># filesystem and no volume management preference. So let&#39;s</span>
</span><span id="XMLState-2190"><a href="#XMLState-2190"><span class="linenos">2190</span></a>            <span class="c1"># use LVM by default</span>
</span><span id="XMLState-2191"><a href="#XMLState-2191"><span class="linenos">2191</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="s1">&#39;lvm&#39;</span>
</span><span id="XMLState-2192"><a href="#XMLState-2192"><span class="linenos">2192</span></a>        <span class="k">return</span> <span class="n">volume_management</span>
</span><span id="XMLState-2193"><a href="#XMLState-2193"><span class="linenos">2193</span></a>
</span><span id="XMLState-2194"><a href="#XMLState-2194"><span class="linenos">2194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_drivers_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2195"><a href="#XMLState-2195"><span class="linenos">2195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2196"><a href="#XMLState-2196"><span class="linenos">2196</span></a><span class="sd">        List of driver names from all drivers sections matching</span>
</span><span id="XMLState-2197"><a href="#XMLState-2197"><span class="linenos">2197</span></a><span class="sd">        configured profiles</span>
</span><span id="XMLState-2198"><a href="#XMLState-2198"><span class="linenos">2198</span></a>
</span><span id="XMLState-2199"><a href="#XMLState-2199"><span class="linenos">2199</span></a><span class="sd">        :return: driver names</span>
</span><span id="XMLState-2200"><a href="#XMLState-2200"><span class="linenos">2200</span></a>
</span><span id="XMLState-2201"><a href="#XMLState-2201"><span class="linenos">2201</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2202"><a href="#XMLState-2202"><span class="linenos">2202</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2203"><a href="#XMLState-2203"><span class="linenos">2203</span></a>        <span class="n">drivers_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2204"><a href="#XMLState-2204"><span class="linenos">2204</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_drivers</span><span class="p">()</span>
</span><span id="XMLState-2205"><a href="#XMLState-2205"><span class="linenos">2205</span></a>        <span class="p">)</span>
</span><span id="XMLState-2206"><a href="#XMLState-2206"><span class="linenos">2206</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2207"><a href="#XMLState-2207"><span class="linenos">2207</span></a>        <span class="k">if</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState-2208"><a href="#XMLState-2208"><span class="linenos">2208</span></a>            <span class="k">for</span> <span class="n">driver</span> <span class="ow">in</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState-2209"><a href="#XMLState-2209"><span class="linenos">2209</span></a>                <span class="k">for</span> <span class="n">file_section</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="XMLState-2210"><a href="#XMLState-2210"><span class="linenos">2210</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-2211"><a href="#XMLState-2211"><span class="linenos">2211</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-2212"><a href="#XMLState-2212"><span class="linenos">2212</span></a>
</span><span id="XMLState-2213"><a href="#XMLState-2213"><span class="linenos">2213</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2214"><a href="#XMLState-2214"><span class="linenos">2214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2215"><a href="#XMLState-2215"><span class="linenos">2215</span></a><span class="sd">        List of strip names matching the given section type</span>
</span><span id="XMLState-2216"><a href="#XMLState-2216"><span class="linenos">2216</span></a><span class="sd">        and profiles</span>
</span><span id="XMLState-2217"><a href="#XMLState-2217"><span class="linenos">2217</span></a>
</span><span id="XMLState-2218"><a href="#XMLState-2218"><span class="linenos">2218</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="XMLState-2219"><a href="#XMLState-2219"><span class="linenos">2219</span></a>
</span><span id="XMLState-2220"><a href="#XMLState-2220"><span class="linenos">2220</span></a><span class="sd">        :return: strip names</span>
</span><span id="XMLState-2221"><a href="#XMLState-2221"><span class="linenos">2221</span></a>
</span><span id="XMLState-2222"><a href="#XMLState-2222"><span class="linenos">2222</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2223"><a href="#XMLState-2223"><span class="linenos">2223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2224"><a href="#XMLState-2224"><span class="linenos">2224</span></a>        <span class="n">strip_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2225"><a href="#XMLState-2225"><span class="linenos">2225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_strip</span><span class="p">()</span>
</span><span id="XMLState-2226"><a href="#XMLState-2226"><span class="linenos">2226</span></a>        <span class="p">)</span>
</span><span id="XMLState-2227"><a href="#XMLState-2227"><span class="linenos">2227</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2228"><a href="#XMLState-2228"><span class="linenos">2228</span></a>        <span class="k">if</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState-2229"><a href="#XMLState-2229"><span class="linenos">2229</span></a>            <span class="k">for</span> <span class="n">strip</span> <span class="ow">in</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState-2230"><a href="#XMLState-2230"><span class="linenos">2230</span></a>                <span class="k">if</span> <span class="n">strip</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span> <span class="o">==</span> <span class="n">section_type</span><span class="p">:</span>
</span><span id="XMLState-2231"><a href="#XMLState-2231"><span class="linenos">2231</span></a>                    <span class="k">for</span> <span class="n">file_section</span> <span class="ow">in</span> <span class="n">strip</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="XMLState-2232"><a href="#XMLState-2232"><span class="linenos">2232</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-2233"><a href="#XMLState-2233"><span class="linenos">2233</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-2234"><a href="#XMLState-2234"><span class="linenos">2234</span></a>
</span><span id="XMLState-2235"><a href="#XMLState-2235"><span class="linenos">2235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_files_to_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2236"><a href="#XMLState-2236"><span class="linenos">2236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2237"><a href="#XMLState-2237"><span class="linenos">2237</span></a><span class="sd">        Items to delete from strip section</span>
</span><span id="XMLState-2238"><a href="#XMLState-2238"><span class="linenos">2238</span></a>
</span><span id="XMLState-2239"><a href="#XMLState-2239"><span class="linenos">2239</span></a><span class="sd">        :return: item names</span>
</span><span id="XMLState-2240"><a href="#XMLState-2240"><span class="linenos">2240</span></a>
</span><span id="XMLState-2241"><a href="#XMLState-2241"><span class="linenos">2241</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2242"><a href="#XMLState-2242"><span class="linenos">2242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2243"><a href="#XMLState-2243"><span class="linenos">2243</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</span><span id="XMLState-2244"><a href="#XMLState-2244"><span class="linenos">2244</span></a>
</span><span id="XMLState-2245"><a href="#XMLState-2245"><span class="linenos">2245</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_tools_to_keep</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2246"><a href="#XMLState-2246"><span class="linenos">2246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2247"><a href="#XMLState-2247"><span class="linenos">2247</span></a><span class="sd">        Tools to keep from strip section</span>
</span><span id="XMLState-2248"><a href="#XMLState-2248"><span class="linenos">2248</span></a>
</span><span id="XMLState-2249"><a href="#XMLState-2249"><span class="linenos">2249</span></a><span class="sd">        :return: tool names</span>
</span><span id="XMLState-2250"><a href="#XMLState-2250"><span class="linenos">2250</span></a>
</span><span id="XMLState-2251"><a href="#XMLState-2251"><span class="linenos">2251</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2252"><a href="#XMLState-2252"><span class="linenos">2252</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2253"><a href="#XMLState-2253"><span class="linenos">2253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;tools&#39;</span><span class="p">)</span>
</span><span id="XMLState-2254"><a href="#XMLState-2254"><span class="linenos">2254</span></a>
</span><span id="XMLState-2255"><a href="#XMLState-2255"><span class="linenos">2255</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_libraries_to_keep</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2256"><a href="#XMLState-2256"><span class="linenos">2256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2257"><a href="#XMLState-2257"><span class="linenos">2257</span></a><span class="sd">        Libraries to keep from strip section</span>
</span><span id="XMLState-2258"><a href="#XMLState-2258"><span class="linenos">2258</span></a>
</span><span id="XMLState-2259"><a href="#XMLState-2259"><span class="linenos">2259</span></a><span class="sd">        :return: librarie names</span>
</span><span id="XMLState-2260"><a href="#XMLState-2260"><span class="linenos">2260</span></a>
</span><span id="XMLState-2261"><a href="#XMLState-2261"><span class="linenos">2261</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2262"><a href="#XMLState-2262"><span class="linenos">2262</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2263"><a href="#XMLState-2263"><span class="linenos">2263</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;libs&#39;</span><span class="p">)</span>
</span><span id="XMLState-2264"><a href="#XMLState-2264"><span class="linenos">2264</span></a>
</span><span id="XMLState-2265"><a href="#XMLState-2265"><span class="linenos">2265</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_include_section_reference_file_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-2266"><a href="#XMLState-2266"><span class="linenos">2266</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2267"><a href="#XMLState-2267"><span class="linenos">2267</span></a><span class="sd">        List of all &lt;include&gt; section file name references</span>
</span><span id="XMLState-2268"><a href="#XMLState-2268"><span class="linenos">2268</span></a>
</span><span id="XMLState-2269"><a href="#XMLState-2269"><span class="linenos">2269</span></a><span class="sd">        :return: List[str]</span>
</span><span id="XMLState-2270"><a href="#XMLState-2270"><span class="linenos">2270</span></a>
</span><span id="XMLState-2271"><a href="#XMLState-2271"><span class="linenos">2271</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2272"><a href="#XMLState-2272"><span class="linenos">2272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2273"><a href="#XMLState-2273"><span class="linenos">2273</span></a>        <span class="n">include_files</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2274"><a href="#XMLState-2274"><span class="linenos">2274</span></a>        <span class="k">for</span> <span class="n">include</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_include</span><span class="p">():</span>
</span><span id="XMLState-2275"><a href="#XMLState-2275"><span class="linenos">2275</span></a>            <span class="n">include_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">include</span><span class="o">.</span><span class="n">get_from</span><span class="p">())</span>
</span><span id="XMLState-2276"><a href="#XMLState-2276"><span class="linenos">2276</span></a>        <span class="k">return</span> <span class="n">include_files</span>
</span><span id="XMLState-2277"><a href="#XMLState-2277"><span class="linenos">2277</span></a>
</span><span id="XMLState-2278"><a href="#XMLState-2278"><span class="linenos">2278</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2279"><a href="#XMLState-2279"><span class="linenos">2279</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2280"><a href="#XMLState-2280"><span class="linenos">2280</span></a><span class="sd">        List of all repository sections for the selected profiles that</span>
</span><span id="XMLState-2281"><a href="#XMLState-2281"><span class="linenos">2281</span></a><span class="sd">        matches the host architecture</span>
</span><span id="XMLState-2282"><a href="#XMLState-2282"><span class="linenos">2282</span></a>
</span><span id="XMLState-2283"><a href="#XMLState-2283"><span class="linenos">2283</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="XMLState-2284"><a href="#XMLState-2284"><span class="linenos">2284</span></a>
</span><span id="XMLState-2285"><a href="#XMLState-2285"><span class="linenos">2285</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2286"><a href="#XMLState-2286"><span class="linenos">2286</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2287"><a href="#XMLState-2287"><span class="linenos">2287</span></a>        <span class="n">repository_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2288"><a href="#XMLState-2288"><span class="linenos">2288</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_repository</span><span class="p">()):</span>
</span><span id="XMLState-2289"><a href="#XMLState-2289"><span class="linenos">2289</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">repository_matches_host_architecture</span><span class="p">(</span><span class="n">repository</span><span class="p">):</span>
</span><span id="XMLState-2290"><a href="#XMLState-2290"><span class="linenos">2290</span></a>                <span class="n">repository_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</span><span id="XMLState-2291"><a href="#XMLState-2291"><span class="linenos">2291</span></a>        <span class="k">return</span> <span class="n">repository_list</span>
</span><span id="XMLState-2292"><a href="#XMLState-2292"><span class="linenos">2292</span></a>
</span><span id="XMLState-2293"><a href="#XMLState-2293"><span class="linenos">2293</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_containers_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2294"><a href="#XMLState-2294"><span class="linenos">2294</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2295"><a href="#XMLState-2295"><span class="linenos">2295</span></a><span class="sd">        List of all containers sections for the selected profiles that</span>
</span><span id="XMLState-2296"><a href="#XMLState-2296"><span class="linenos">2296</span></a><span class="sd">        matches the host architecture</span>
</span><span id="XMLState-2297"><a href="#XMLState-2297"><span class="linenos">2297</span></a>
</span><span id="XMLState-2298"><a href="#XMLState-2298"><span class="linenos">2298</span></a><span class="sd">        :return: &lt;containers&gt; section reference(s)</span>
</span><span id="XMLState-2299"><a href="#XMLState-2299"><span class="linenos">2299</span></a>
</span><span id="XMLState-2300"><a href="#XMLState-2300"><span class="linenos">2300</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2301"><a href="#XMLState-2301"><span class="linenos">2301</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2302"><a href="#XMLState-2302"><span class="linenos">2302</span></a>        <span class="n">containers_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2303"><a href="#XMLState-2303"><span class="linenos">2303</span></a>        <span class="k">for</span> <span class="n">containers</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_containers</span><span class="p">()):</span>
</span><span id="XMLState-2304"><a href="#XMLState-2304"><span class="linenos">2304</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">containers_matches_host_architecture</span><span class="p">(</span><span class="n">containers</span><span class="p">):</span>
</span><span id="XMLState-2305"><a href="#XMLState-2305"><span class="linenos">2305</span></a>                <span class="n">containers_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
</span><span id="XMLState-2306"><a href="#XMLState-2306"><span class="linenos">2306</span></a>        <span class="k">return</span> <span class="n">containers_list</span>
</span><span id="XMLState-2307"><a href="#XMLState-2307"><span class="linenos">2307</span></a>
</span><span id="XMLState-2308"><a href="#XMLState-2308"><span class="linenos">2308</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections_used_for_build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2309"><a href="#XMLState-2309"><span class="linenos">2309</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2310"><a href="#XMLState-2310"><span class="linenos">2310</span></a><span class="sd">        List of all repositorys sections used to build the image and</span>
</span><span id="XMLState-2311"><a href="#XMLState-2311"><span class="linenos">2311</span></a><span class="sd">        matching configured profiles.</span>
</span><span id="XMLState-2312"><a href="#XMLState-2312"><span class="linenos">2312</span></a>
</span><span id="XMLState-2313"><a href="#XMLState-2313"><span class="linenos">2313</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="XMLState-2314"><a href="#XMLState-2314"><span class="linenos">2314</span></a>
</span><span id="XMLState-2315"><a href="#XMLState-2315"><span class="linenos">2315</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2316"><a href="#XMLState-2316"><span class="linenos">2316</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2317"><a href="#XMLState-2317"><span class="linenos">2317</span></a>        <span class="n">repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState-2318"><a href="#XMLState-2318"><span class="linenos">2318</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="XMLState-2319"><a href="#XMLState-2319"><span class="linenos">2319</span></a>            <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repos</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageonly</span><span class="p">()</span>
</span><span id="XMLState-2320"><a href="#XMLState-2320"><span class="linenos">2320</span></a>        <span class="p">)</span>
</span><span id="XMLState-2321"><a href="#XMLState-2321"><span class="linenos">2321</span></a>
</span><span id="XMLState-2322"><a href="#XMLState-2322"><span class="linenos">2322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections_used_in_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2323"><a href="#XMLState-2323"><span class="linenos">2323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2324"><a href="#XMLState-2324"><span class="linenos">2324</span></a><span class="sd">        List of all repositorys sections to be configured in the resulting</span>
</span><span id="XMLState-2325"><a href="#XMLState-2325"><span class="linenos">2325</span></a><span class="sd">        image matching configured profiles.</span>
</span><span id="XMLState-2326"><a href="#XMLState-2326"><span class="linenos">2326</span></a>
</span><span id="XMLState-2327"><a href="#XMLState-2327"><span class="linenos">2327</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="XMLState-2328"><a href="#XMLState-2328"><span class="linenos">2328</span></a>
</span><span id="XMLState-2329"><a href="#XMLState-2329"><span class="linenos">2329</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2330"><a href="#XMLState-2330"><span class="linenos">2330</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2331"><a href="#XMLState-2331"><span class="linenos">2331</span></a>        <span class="n">repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState-2332"><a href="#XMLState-2332"><span class="linenos">2332</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="XMLState-2333"><a href="#XMLState-2333"><span class="linenos">2333</span></a>            <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repos</span>
</span><span id="XMLState-2334"><a href="#XMLState-2334"><span class="linenos">2334</span></a>            <span class="k">if</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageinclude</span><span class="p">()</span> <span class="ow">or</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageonly</span><span class="p">()</span>
</span><span id="XMLState-2335"><a href="#XMLState-2335"><span class="linenos">2335</span></a>        <span class="p">)</span>
</span><span id="XMLState-2336"><a href="#XMLState-2336"><span class="linenos">2336</span></a>
</span><span id="XMLState-2337"><a href="#XMLState-2337"><span class="linenos">2337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_repository_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2338"><a href="#XMLState-2338"><span class="linenos">2338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2339"><a href="#XMLState-2339"><span class="linenos">2339</span></a><span class="sd">        Delete all repository sections matching configured profiles</span>
</span><span id="XMLState-2340"><a href="#XMLState-2340"><span class="linenos">2340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2341"><a href="#XMLState-2341"><span class="linenos">2341</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">([])</span>
</span><span id="XMLState-2342"><a href="#XMLState-2342"><span class="linenos">2342</span></a>
</span><span id="XMLState-2343"><a href="#XMLState-2343"><span class="linenos">2343</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_repository_sections_used_for_build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2344"><a href="#XMLState-2344"><span class="linenos">2344</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2345"><a href="#XMLState-2345"><span class="linenos">2345</span></a><span class="sd">        Delete all repository sections used to build the image matching</span>
</span><span id="XMLState-2346"><a href="#XMLState-2346"><span class="linenos">2346</span></a><span class="sd">        configured profiles</span>
</span><span id="XMLState-2347"><a href="#XMLState-2347"><span class="linenos">2347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2348"><a href="#XMLState-2348"><span class="linenos">2348</span></a>        <span class="n">used_for_build</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections_used_for_build</span><span class="p">()</span>
</span><span id="XMLState-2349"><a href="#XMLState-2349"><span class="linenos">2349</span></a>        <span class="n">all_repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState-2350"><a href="#XMLState-2350"><span class="linenos">2350</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">(</span>
</span><span id="XMLState-2351"><a href="#XMLState-2351"><span class="linenos">2351</span></a>            <span class="p">[</span>
</span><span id="XMLState-2352"><a href="#XMLState-2352"><span class="linenos">2352</span></a>                <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">all_repos</span> <span class="k">if</span> <span class="n">repo</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_for_build</span>
</span><span id="XMLState-2353"><a href="#XMLState-2353"><span class="linenos">2353</span></a>            <span class="p">]</span>
</span><span id="XMLState-2354"><a href="#XMLState-2354"><span class="linenos">2354</span></a>        <span class="p">)</span>
</span><span id="XMLState-2355"><a href="#XMLState-2355"><span class="linenos">2355</span></a>
</span><span id="XMLState-2356"><a href="#XMLState-2356"><span class="linenos">2356</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repositories_signing_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-2357"><a href="#XMLState-2357"><span class="linenos">2357</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2358"><a href="#XMLState-2358"><span class="linenos">2358</span></a><span class="sd">        Get list of signing keys specified on the repositories</span>
</span><span id="XMLState-2359"><a href="#XMLState-2359"><span class="linenos">2359</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2360"><a href="#XMLState-2360"><span class="linenos">2360</span></a>        <span class="n">key_file_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2361"><a href="#XMLState-2361"><span class="linenos">2361</span></a>        <span class="n">release_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_release_version</span><span class="p">()</span>
</span><span id="XMLState-2362"><a href="#XMLState-2362"><span class="linenos">2362</span></a>        <span class="n">release_vars</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState-2363"><a href="#XMLState-2363"><span class="linenos">2363</span></a>            <span class="s1">&#39;$releasever&#39;</span><span class="p">,</span>
</span><span id="XMLState-2364"><a href="#XMLState-2364"><span class="linenos">2364</span></a>            <span class="s1">&#39;$</span><span class="si">{releasever}</span><span class="s1">&#39;</span>
</span><span id="XMLState-2365"><a href="#XMLState-2365"><span class="linenos">2365</span></a>        <span class="p">]</span>
</span><span id="XMLState-2366"><a href="#XMLState-2366"><span class="linenos">2366</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="XMLState-2367"><a href="#XMLState-2367"><span class="linenos">2367</span></a>            <span class="k">for</span> <span class="n">signing</span> <span class="ow">in</span> <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">get_signing</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="XMLState-2368"><a href="#XMLState-2368"><span class="linenos">2368</span></a>                <span class="n">normalized_key_url</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">signing</span><span class="o">.</span><span class="n">get_key</span><span class="p">())</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="XMLState-2369"><a href="#XMLState-2369"><span class="linenos">2369</span></a>                <span class="k">if</span> <span class="n">release_version</span><span class="p">:</span>
</span><span id="XMLState-2370"><a href="#XMLState-2370"><span class="linenos">2370</span></a>                    <span class="k">for</span> <span class="n">release_var</span> <span class="ow">in</span> <span class="n">release_vars</span><span class="p">:</span>
</span><span id="XMLState-2371"><a href="#XMLState-2371"><span class="linenos">2371</span></a>                        <span class="k">if</span> <span class="n">release_var</span> <span class="ow">in</span> <span class="n">normalized_key_url</span><span class="p">:</span>
</span><span id="XMLState-2372"><a href="#XMLState-2372"><span class="linenos">2372</span></a>                            <span class="n">normalized_key_url</span> <span class="o">=</span> <span class="n">normalized_key_url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="XMLState-2373"><a href="#XMLState-2373"><span class="linenos">2373</span></a>                                <span class="n">release_var</span><span class="p">,</span> <span class="n">release_version</span>
</span><span id="XMLState-2374"><a href="#XMLState-2374"><span class="linenos">2374</span></a>                            <span class="p">)</span>
</span><span id="XMLState-2375"><a href="#XMLState-2375"><span class="linenos">2375</span></a>                <span class="k">if</span> <span class="n">normalized_key_url</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">key_file_list</span><span class="p">:</span>
</span><span id="XMLState-2376"><a href="#XMLState-2376"><span class="linenos">2376</span></a>                    <span class="n">key_file_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normalized_key_url</span><span class="p">)</span>
</span><span id="XMLState-2377"><a href="#XMLState-2377"><span class="linenos">2377</span></a>        <span class="k">return</span> <span class="n">key_file_list</span>
</span><span id="XMLState-2378"><a href="#XMLState-2378"><span class="linenos">2378</span></a>
</span><span id="XMLState-2379"><a href="#XMLState-2379"><span class="linenos">2379</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_repository</span><span class="p">(</span>
</span><span id="XMLState-2380"><a href="#XMLState-2380"><span class="linenos">2380</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState-2381"><a href="#XMLState-2381"><span class="linenos">2381</span></a>        <span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="XMLState-2382"><a href="#XMLState-2382"><span class="linenos">2382</span></a>        <span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2383"><a href="#XMLState-2383"><span class="linenos">2383</span></a>        <span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2384"><a href="#XMLState-2384"><span class="linenos">2384</span></a>        <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2385"><a href="#XMLState-2385"><span class="linenos">2385</span></a>        <span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2386"><a href="#XMLState-2386"><span class="linenos">2386</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2387"><a href="#XMLState-2387"><span class="linenos">2387</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2388"><a href="#XMLState-2388"><span class="linenos">2388</span></a><span class="sd">        Overwrite repository data of the first repository</span>
</span><span id="XMLState-2389"><a href="#XMLState-2389"><span class="linenos">2389</span></a>
</span><span id="XMLState-2390"><a href="#XMLState-2390"><span class="linenos">2390</span></a><span class="sd">        :param str repo_source: repository URI</span>
</span><span id="XMLState-2391"><a href="#XMLState-2391"><span class="linenos">2391</span></a><span class="sd">        :param str repo_type: type name defined by schema</span>
</span><span id="XMLState-2392"><a href="#XMLState-2392"><span class="linenos">2392</span></a><span class="sd">        :param str repo_alias: alias name</span>
</span><span id="XMLState-2393"><a href="#XMLState-2393"><span class="linenos">2393</span></a><span class="sd">        :param str repo_prio: priority number, package manager specific</span>
</span><span id="XMLState-2394"><a href="#XMLState-2394"><span class="linenos">2394</span></a><span class="sd">        :param bool repo_imageinclude: setup repository inside of the image</span>
</span><span id="XMLState-2395"><a href="#XMLState-2395"><span class="linenos">2395</span></a><span class="sd">        :param bool repo_package_gpgcheck: enable/disable package gpg checks</span>
</span><span id="XMLState-2396"><a href="#XMLState-2396"><span class="linenos">2396</span></a><span class="sd">        :param list repo_signing_keys: list of signing key file names</span>
</span><span id="XMLState-2397"><a href="#XMLState-2397"><span class="linenos">2397</span></a><span class="sd">        :param str components: component names for debian repos</span>
</span><span id="XMLState-2398"><a href="#XMLState-2398"><span class="linenos">2398</span></a><span class="sd">        :param str distribution: base distribution name for debian repos</span>
</span><span id="XMLState-2399"><a href="#XMLState-2399"><span class="linenos">2399</span></a><span class="sd">        :param bool repo_gpgcheck: enable/disable repo gpg checks</span>
</span><span id="XMLState-2400"><a href="#XMLState-2400"><span class="linenos">2400</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2401"><a href="#XMLState-2401"><span class="linenos">2401</span></a>        <span class="n">repository_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState-2402"><a href="#XMLState-2402"><span class="linenos">2402</span></a>        <span class="k">if</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="XMLState-2403"><a href="#XMLState-2403"><span class="linenos">2403</span></a>            <span class="n">repository</span> <span class="o">=</span> <span class="n">repository_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-2404"><a href="#XMLState-2404"><span class="linenos">2404</span></a>            <span class="k">if</span> <span class="n">repo_alias</span><span class="p">:</span>
</span><span id="XMLState-2405"><a href="#XMLState-2405"><span class="linenos">2405</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_alias</span><span class="p">(</span><span class="n">repo_alias</span><span class="p">)</span>
</span><span id="XMLState-2406"><a href="#XMLState-2406"><span class="linenos">2406</span></a>            <span class="k">if</span> <span class="n">repo_type</span><span class="p">:</span>
</span><span id="XMLState-2407"><a href="#XMLState-2407"><span class="linenos">2407</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_type</span><span class="p">(</span><span class="n">repo_type</span><span class="p">)</span>
</span><span id="XMLState-2408"><a href="#XMLState-2408"><span class="linenos">2408</span></a>            <span class="k">if</span> <span class="n">repo_source</span><span class="p">:</span>
</span><span id="XMLState-2409"><a href="#XMLState-2409"><span class="linenos">2409</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span><span class="n">repo_source</span><span class="p">)</span>
</span><span id="XMLState-2410"><a href="#XMLState-2410"><span class="linenos">2410</span></a>            <span class="k">if</span> <span class="n">repo_prio</span><span class="p">:</span>
</span><span id="XMLState-2411"><a href="#XMLState-2411"><span class="linenos">2411</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_priority</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">repo_prio</span><span class="p">))</span>
</span><span id="XMLState-2412"><a href="#XMLState-2412"><span class="linenos">2412</span></a>            <span class="k">if</span> <span class="n">repo_imageinclude</span><span class="p">:</span>
</span><span id="XMLState-2413"><a href="#XMLState-2413"><span class="linenos">2413</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_imageinclude</span><span class="p">(</span><span class="n">repo_imageinclude</span><span class="p">)</span>
</span><span id="XMLState-2414"><a href="#XMLState-2414"><span class="linenos">2414</span></a>            <span class="k">if</span> <span class="n">repo_package_gpgcheck</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2415"><a href="#XMLState-2415"><span class="linenos">2415</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_package_gpgcheck</span><span class="p">(</span><span class="n">repo_package_gpgcheck</span><span class="p">)</span>
</span><span id="XMLState-2416"><a href="#XMLState-2416"><span class="linenos">2416</span></a>            <span class="k">if</span> <span class="n">repo_signing_keys</span><span class="p">:</span>
</span><span id="XMLState-2417"><a href="#XMLState-2417"><span class="linenos">2417</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">set_signing</span><span class="p">(</span>
</span><span id="XMLState-2418"><a href="#XMLState-2418"><span class="linenos">2418</span></a>                    <span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">signing</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">repo_signing_keys</span><span class="p">]</span>
</span><span id="XMLState-2419"><a href="#XMLState-2419"><span class="linenos">2419</span></a>                <span class="p">)</span>
</span><span id="XMLState-2420"><a href="#XMLState-2420"><span class="linenos">2420</span></a>            <span class="k">if</span> <span class="n">components</span><span class="p">:</span>
</span><span id="XMLState-2421"><a href="#XMLState-2421"><span class="linenos">2421</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_components</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
</span><span id="XMLState-2422"><a href="#XMLState-2422"><span class="linenos">2422</span></a>            <span class="k">if</span> <span class="n">distribution</span><span class="p">:</span>
</span><span id="XMLState-2423"><a href="#XMLState-2423"><span class="linenos">2423</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_distribution</span><span class="p">(</span><span class="n">distribution</span><span class="p">)</span>
</span><span id="XMLState-2424"><a href="#XMLState-2424"><span class="linenos">2424</span></a>            <span class="k">if</span> <span class="n">repo_gpgcheck</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2425"><a href="#XMLState-2425"><span class="linenos">2425</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_repository_gpgcheck</span><span class="p">(</span><span class="n">repo_gpgcheck</span><span class="p">)</span>
</span><span id="XMLState-2426"><a href="#XMLState-2426"><span class="linenos">2426</span></a>            <span class="k">if</span> <span class="n">repo_sourcetype</span><span class="p">:</span>
</span><span id="XMLState-2427"><a href="#XMLState-2427"><span class="linenos">2427</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_sourcetype</span><span class="p">(</span><span class="n">repo_sourcetype</span><span class="p">)</span>
</span><span id="XMLState-2428"><a href="#XMLState-2428"><span class="linenos">2428</span></a>
</span><span id="XMLState-2429"><a href="#XMLState-2429"><span class="linenos">2429</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_repository</span><span class="p">(</span>
</span><span id="XMLState-2430"><a href="#XMLState-2430"><span class="linenos">2430</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2431"><a href="#XMLState-2431"><span class="linenos">2431</span></a>        <span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="XMLState-2432"><a href="#XMLState-2432"><span class="linenos">2432</span></a>        <span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2433"><a href="#XMLState-2433"><span class="linenos">2433</span></a>        <span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2434"><a href="#XMLState-2434"><span class="linenos">2434</span></a>        <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState-2435"><a href="#XMLState-2435"><span class="linenos">2435</span></a>        <span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2436"><a href="#XMLState-2436"><span class="linenos">2436</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2437"><a href="#XMLState-2437"><span class="linenos">2437</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2438"><a href="#XMLState-2438"><span class="linenos">2438</span></a><span class="sd">        Add a new repository section at the end of the list</span>
</span><span id="XMLState-2439"><a href="#XMLState-2439"><span class="linenos">2439</span></a>
</span><span id="XMLState-2440"><a href="#XMLState-2440"><span class="linenos">2440</span></a><span class="sd">        :param str repo_source: repository URI</span>
</span><span id="XMLState-2441"><a href="#XMLState-2441"><span class="linenos">2441</span></a><span class="sd">        :param str repo_type: type name defined by schema</span>
</span><span id="XMLState-2442"><a href="#XMLState-2442"><span class="linenos">2442</span></a><span class="sd">        :param str repo_alias: alias name</span>
</span><span id="XMLState-2443"><a href="#XMLState-2443"><span class="linenos">2443</span></a><span class="sd">        :param str repo_prio: priority number, package manager specific</span>
</span><span id="XMLState-2444"><a href="#XMLState-2444"><span class="linenos">2444</span></a><span class="sd">        :param bool repo_imageinclude: setup repository inside of the image</span>
</span><span id="XMLState-2445"><a href="#XMLState-2445"><span class="linenos">2445</span></a><span class="sd">        :param bool repo_package_gpgcheck: enable/disable package gpg checks</span>
</span><span id="XMLState-2446"><a href="#XMLState-2446"><span class="linenos">2446</span></a><span class="sd">        :param list repo_signing_keys: list of signing key file names</span>
</span><span id="XMLState-2447"><a href="#XMLState-2447"><span class="linenos">2447</span></a><span class="sd">        :param str components: component names for debian repos</span>
</span><span id="XMLState-2448"><a href="#XMLState-2448"><span class="linenos">2448</span></a><span class="sd">        :param str distribution: base distribution name for debian repos</span>
</span><span id="XMLState-2449"><a href="#XMLState-2449"><span class="linenos">2449</span></a><span class="sd">        :param bool repo_gpgcheck: enable/disable repo gpg checks</span>
</span><span id="XMLState-2450"><a href="#XMLState-2450"><span class="linenos">2450</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2451"><a href="#XMLState-2451"><span class="linenos">2451</span></a>        <span class="n">priority_number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2452"><a href="#XMLState-2452"><span class="linenos">2452</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="XMLState-2453"><a href="#XMLState-2453"><span class="linenos">2453</span></a>            <span class="n">priority_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">repo_prio</span><span class="p">)</span>
</span><span id="XMLState-2454"><a href="#XMLState-2454"><span class="linenos">2454</span></a>        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="XMLState-2455"><a href="#XMLState-2455"><span class="linenos">2455</span></a>            <span class="k">pass</span>
</span><span id="XMLState-2456"><a href="#XMLState-2456"><span class="linenos">2456</span></a>
</span><span id="XMLState-2457"><a href="#XMLState-2457"><span class="linenos">2457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_repository</span><span class="p">(</span>
</span><span id="XMLState-2458"><a href="#XMLState-2458"><span class="linenos">2458</span></a>            <span class="n">xml_parse</span><span class="o">.</span><span class="n">repository</span><span class="p">(</span>
</span><span id="XMLState-2459"><a href="#XMLState-2459"><span class="linenos">2459</span></a>                <span class="n">type_</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
</span><span id="XMLState-2460"><a href="#XMLState-2460"><span class="linenos">2460</span></a>                <span class="n">alias</span><span class="o">=</span><span class="n">repo_alias</span><span class="p">,</span>
</span><span id="XMLState-2461"><a href="#XMLState-2461"><span class="linenos">2461</span></a>                <span class="n">priority</span><span class="o">=</span><span class="n">priority_number</span><span class="p">,</span>
</span><span id="XMLState-2462"><a href="#XMLState-2462"><span class="linenos">2462</span></a>                <span class="n">source</span><span class="o">=</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">source</span><span class="p">(</span>
</span><span id="XMLState-2463"><a href="#XMLState-2463"><span class="linenos">2463</span></a>                    <span class="n">path</span><span class="o">=</span><span class="n">repo_source</span><span class="p">,</span>
</span><span id="XMLState-2464"><a href="#XMLState-2464"><span class="linenos">2464</span></a>                    <span class="n">signing</span><span class="o">=</span><span class="p">[</span>
</span><span id="XMLState-2465"><a href="#XMLState-2465"><span class="linenos">2465</span></a>                        <span class="n">xml_parse</span><span class="o">.</span><span class="n">signing</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">repo_signing_keys</span>
</span><span id="XMLState-2466"><a href="#XMLState-2466"><span class="linenos">2466</span></a>                    <span class="p">]</span>
</span><span id="XMLState-2467"><a href="#XMLState-2467"><span class="linenos">2467</span></a>                <span class="p">),</span>
</span><span id="XMLState-2468"><a href="#XMLState-2468"><span class="linenos">2468</span></a>                <span class="n">imageinclude</span><span class="o">=</span><span class="n">repo_imageinclude</span><span class="p">,</span>
</span><span id="XMLState-2469"><a href="#XMLState-2469"><span class="linenos">2469</span></a>                <span class="n">package_gpgcheck</span><span class="o">=</span><span class="n">repo_package_gpgcheck</span><span class="p">,</span>
</span><span id="XMLState-2470"><a href="#XMLState-2470"><span class="linenos">2470</span></a>                <span class="n">repository_gpgcheck</span><span class="o">=</span><span class="n">repo_gpgcheck</span><span class="p">,</span>
</span><span id="XMLState-2471"><a href="#XMLState-2471"><span class="linenos">2471</span></a>                <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
</span><span id="XMLState-2472"><a href="#XMLState-2472"><span class="linenos">2472</span></a>                <span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span>
</span><span id="XMLState-2473"><a href="#XMLState-2473"><span class="linenos">2473</span></a>                <span class="n">sourcetype</span><span class="o">=</span><span class="n">repo_sourcetype</span>
</span><span id="XMLState-2474"><a href="#XMLState-2474"><span class="linenos">2474</span></a>            <span class="p">)</span>
</span><span id="XMLState-2475"><a href="#XMLState-2475"><span class="linenos">2475</span></a>        <span class="p">)</span>
</span><span id="XMLState-2476"><a href="#XMLState-2476"><span class="linenos">2476</span></a>
</span><span id="XMLState-2477"><a href="#XMLState-2477"><span class="linenos">2477</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cert_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_distribution</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2478"><a href="#XMLState-2478"><span class="linenos">2478</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2479"><a href="#XMLState-2479"><span class="linenos">2479</span></a><span class="sd">        Add &lt;certificate name=&quot;cert_file&quot;&gt; to main &lt;certificates&gt; section</span>
</span><span id="XMLState-2480"><a href="#XMLState-2480"><span class="linenos">2480</span></a><span class="sd">        The main section will be created if it does not exist. Also</span>
</span><span id="XMLState-2481"><a href="#XMLState-2481"><span class="linenos">2481</span></a><span class="sd">        setup the target_distribution in the resulting main section.</span>
</span><span id="XMLState-2482"><a href="#XMLState-2482"><span class="linenos">2482</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2483"><a href="#XMLState-2483"><span class="linenos">2483</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2484"><a href="#XMLState-2484"><span class="linenos">2484</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="XMLState-2485"><a href="#XMLState-2485"><span class="linenos">2485</span></a>        <span class="p">)</span>
</span><span id="XMLState-2486"><a href="#XMLState-2486"><span class="linenos">2486</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="XMLState-2487"><a href="#XMLState-2487"><span class="linenos">2487</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_certificates</span><span class="p">(</span>
</span><span id="XMLState-2488"><a href="#XMLState-2488"><span class="linenos">2488</span></a>                <span class="p">[</span>
</span><span id="XMLState-2489"><a href="#XMLState-2489"><span class="linenos">2489</span></a>                    <span class="n">xml_parse</span><span class="o">.</span><span class="n">certificates</span><span class="p">(</span>
</span><span id="XMLState-2490"><a href="#XMLState-2490"><span class="linenos">2490</span></a>                        <span class="n">target_distribution</span><span class="o">=</span><span class="n">target_distribution</span><span class="p">,</span>
</span><span id="XMLState-2491"><a href="#XMLState-2491"><span class="linenos">2491</span></a>                        <span class="n">certificate</span><span class="o">=</span><span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">certificate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">cert_file</span><span class="p">)]</span>
</span><span id="XMLState-2492"><a href="#XMLState-2492"><span class="linenos">2492</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2493"><a href="#XMLState-2493"><span class="linenos">2493</span></a>                <span class="p">]</span>
</span><span id="XMLState-2494"><a href="#XMLState-2494"><span class="linenos">2494</span></a>            <span class="p">)</span>
</span><span id="XMLState-2495"><a href="#XMLState-2495"><span class="linenos">2495</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-2496"><a href="#XMLState-2496"><span class="linenos">2496</span></a>            <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_target_distribution</span><span class="p">(</span>
</span><span id="XMLState-2497"><a href="#XMLState-2497"><span class="linenos">2497</span></a>                <span class="n">target_distribution</span>
</span><span id="XMLState-2498"><a href="#XMLState-2498"><span class="linenos">2498</span></a>            <span class="p">)</span>
</span><span id="XMLState-2499"><a href="#XMLState-2499"><span class="linenos">2499</span></a>            <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_certificate</span><span class="p">(</span>
</span><span id="XMLState-2500"><a href="#XMLState-2500"><span class="linenos">2500</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">certificate</span><span class="p">(</span>
</span><span id="XMLState-2501"><a href="#XMLState-2501"><span class="linenos">2501</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">cert_file</span>
</span><span id="XMLState-2502"><a href="#XMLState-2502"><span class="linenos">2502</span></a>                <span class="p">)</span>
</span><span id="XMLState-2503"><a href="#XMLState-2503"><span class="linenos">2503</span></a>            <span class="p">)</span>
</span><span id="XMLState-2504"><a href="#XMLState-2504"><span class="linenos">2504</span></a>
</span><span id="XMLState-2505"><a href="#XMLState-2505"><span class="linenos">2505</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_certificates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-2506"><a href="#XMLState-2506"><span class="linenos">2506</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2507"><a href="#XMLState-2507"><span class="linenos">2507</span></a><span class="sd">        Read list of certificates</span>
</span><span id="XMLState-2508"><a href="#XMLState-2508"><span class="linenos">2508</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2509"><a href="#XMLState-2509"><span class="linenos">2509</span></a>        <span class="n">cert_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2510"><a href="#XMLState-2510"><span class="linenos">2510</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2511"><a href="#XMLState-2511"><span class="linenos">2511</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="XMLState-2512"><a href="#XMLState-2512"><span class="linenos">2512</span></a>        <span class="p">)</span>
</span><span id="XMLState-2513"><a href="#XMLState-2513"><span class="linenos">2513</span></a>        <span class="k">if</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="XMLState-2514"><a href="#XMLState-2514"><span class="linenos">2514</span></a>            <span class="k">for</span> <span class="n">certificate</span> <span class="ow">in</span> <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_certificate</span><span class="p">():</span>
</span><span id="XMLState-2515"><a href="#XMLState-2515"><span class="linenos">2515</span></a>                <span class="n">cert_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">certificate</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-2516"><a href="#XMLState-2516"><span class="linenos">2516</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cert_list</span><span class="p">)))</span>
</span><span id="XMLState-2517"><a href="#XMLState-2517"><span class="linenos">2517</span></a>
</span><span id="XMLState-2518"><a href="#XMLState-2518"><span class="linenos">2518</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_certificates_target_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-2519"><a href="#XMLState-2519"><span class="linenos">2519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2520"><a href="#XMLState-2520"><span class="linenos">2520</span></a><span class="sd">        Read CA target distribution</span>
</span><span id="XMLState-2521"><a href="#XMLState-2521"><span class="linenos">2521</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2522"><a href="#XMLState-2522"><span class="linenos">2522</span></a>        <span class="n">target_distribution</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState-2523"><a href="#XMLState-2523"><span class="linenos">2523</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2524"><a href="#XMLState-2524"><span class="linenos">2524</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="XMLState-2525"><a href="#XMLState-2525"><span class="linenos">2525</span></a>        <span class="p">)</span>
</span><span id="XMLState-2526"><a href="#XMLState-2526"><span class="linenos">2526</span></a>        <span class="k">if</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="XMLState-2527"><a href="#XMLState-2527"><span class="linenos">2527</span></a>            <span class="n">target_distribution</span> <span class="o">=</span> \
</span><span id="XMLState-2528"><a href="#XMLState-2528"><span class="linenos">2528</span></a>                <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_target_distribution</span><span class="p">()</span>
</span><span id="XMLState-2529"><a href="#XMLState-2529"><span class="linenos">2529</span></a>        <span class="k">return</span> <span class="n">target_distribution</span>
</span><span id="XMLState-2530"><a href="#XMLState-2530"><span class="linenos">2530</span></a>
</span><span id="XMLState-2531"><a href="#XMLState-2531"><span class="linenos">2531</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_this_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2532"><a href="#XMLState-2532"><span class="linenos">2532</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2533"><a href="#XMLState-2533"><span class="linenos">2533</span></a><span class="sd">        Resolve any this:// repo source path into the path</span>
</span><span id="XMLState-2534"><a href="#XMLState-2534"><span class="linenos">2534</span></a><span class="sd">        representing the target inside of the image description</span>
</span><span id="XMLState-2535"><a href="#XMLState-2535"><span class="linenos">2535</span></a><span class="sd">        directory</span>
</span><span id="XMLState-2536"><a href="#XMLState-2536"><span class="linenos">2536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2537"><a href="#XMLState-2537"><span class="linenos">2537</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="XMLState-2538"><a href="#XMLState-2538"><span class="linenos">2538</span></a>            <span class="n">repo_source</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span>
</span><span id="XMLState-2539"><a href="#XMLState-2539"><span class="linenos">2539</span></a>            <span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_source</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
</span><span id="XMLState-2540"><a href="#XMLState-2540"><span class="linenos">2540</span></a>            <span class="k">if</span> <span class="n">repo_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;this://&#39;</span><span class="p">):</span>
</span><span id="XMLState-2541"><a href="#XMLState-2541"><span class="linenos">2541</span></a>                <span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;this://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState-2542"><a href="#XMLState-2542"><span class="linenos">2542</span></a>                <span class="n">repo_source</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span>
</span><span id="XMLState-2543"><a href="#XMLState-2543"><span class="linenos">2543</span></a>                    <span class="s1">&#39;dir://</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-2544"><a href="#XMLState-2544"><span class="linenos">2544</span></a>                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span>
</span><span id="XMLState-2545"><a href="#XMLState-2545"><span class="linenos">2545</span></a>                            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="XMLState-2546"><a href="#XMLState-2546"><span class="linenos">2546</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">description_dir</span><span class="p">,</span> <span class="n">repo_path</span>
</span><span id="XMLState-2547"><a href="#XMLState-2547"><span class="linenos">2547</span></a>                            <span class="p">)</span>
</span><span id="XMLState-2548"><a href="#XMLState-2548"><span class="linenos">2548</span></a>                        <span class="p">)</span>
</span><span id="XMLState-2549"><a href="#XMLState-2549"><span class="linenos">2549</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2550"><a href="#XMLState-2550"><span class="linenos">2550</span></a>                <span class="p">)</span>
</span><span id="XMLState-2551"><a href="#XMLState-2551"><span class="linenos">2551</span></a>
</span><span id="XMLState-2552"><a href="#XMLState-2552"><span class="linenos">2552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_displayname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2553"><a href="#XMLState-2553"><span class="linenos">2553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2554"><a href="#XMLState-2554"><span class="linenos">2554</span></a><span class="sd">        Copy image displayname from this xml state to the target xml state</span>
</span><span id="XMLState-2555"><a href="#XMLState-2555"><span class="linenos">2555</span></a>
</span><span id="XMLState-2556"><a href="#XMLState-2556"><span class="linenos">2556</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2557"><a href="#XMLState-2557"><span class="linenos">2557</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2558"><a href="#XMLState-2558"><span class="linenos">2558</span></a>        <span class="n">displayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_displayname</span><span class="p">()</span>
</span><span id="XMLState-2559"><a href="#XMLState-2559"><span class="linenos">2559</span></a>        <span class="k">if</span> <span class="n">displayname</span><span class="p">:</span>
</span><span id="XMLState-2560"><a href="#XMLState-2560"><span class="linenos">2560</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_displayname</span><span class="p">(</span><span class="n">displayname</span><span class="p">)</span>
</span><span id="XMLState-2561"><a href="#XMLState-2561"><span class="linenos">2561</span></a>
</span><span id="XMLState-2562"><a href="#XMLState-2562"><span class="linenos">2562</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2563"><a href="#XMLState-2563"><span class="linenos">2563</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2564"><a href="#XMLState-2564"><span class="linenos">2564</span></a><span class="sd">        Copy image name from this xml state to the target xml state</span>
</span><span id="XMLState-2565"><a href="#XMLState-2565"><span class="linenos">2565</span></a>
</span><span id="XMLState-2566"><a href="#XMLState-2566"><span class="linenos">2566</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2567"><a href="#XMLState-2567"><span class="linenos">2567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2568"><a href="#XMLState-2568"><span class="linenos">2568</span></a>        <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span>
</span><span id="XMLState-2569"><a href="#XMLState-2569"><span class="linenos">2569</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-2570"><a href="#XMLState-2570"><span class="linenos">2570</span></a>        <span class="p">)</span>
</span><span id="XMLState-2571"><a href="#XMLState-2571"><span class="linenos">2571</span></a>
</span><span id="XMLState-2572"><a href="#XMLState-2572"><span class="linenos">2572</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_drivers_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2573"><a href="#XMLState-2573"><span class="linenos">2573</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2574"><a href="#XMLState-2574"><span class="linenos">2574</span></a><span class="sd">        Copy drivers sections from this xml state to the target xml state</span>
</span><span id="XMLState-2575"><a href="#XMLState-2575"><span class="linenos">2575</span></a>
</span><span id="XMLState-2576"><a href="#XMLState-2576"><span class="linenos">2576</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2577"><a href="#XMLState-2577"><span class="linenos">2577</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2578"><a href="#XMLState-2578"><span class="linenos">2578</span></a>        <span class="n">drivers_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2579"><a href="#XMLState-2579"><span class="linenos">2579</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_drivers</span><span class="p">()</span>
</span><span id="XMLState-2580"><a href="#XMLState-2580"><span class="linenos">2580</span></a>        <span class="p">)</span>
</span><span id="XMLState-2581"><a href="#XMLState-2581"><span class="linenos">2581</span></a>        <span class="k">if</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState-2582"><a href="#XMLState-2582"><span class="linenos">2582</span></a>            <span class="k">for</span> <span class="n">drivers_section</span> <span class="ow">in</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState-2583"><a href="#XMLState-2583"><span class="linenos">2583</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_drivers</span><span class="p">(</span><span class="n">drivers_section</span><span class="p">)</span>
</span><span id="XMLState-2584"><a href="#XMLState-2584"><span class="linenos">2584</span></a>
</span><span id="XMLState-2585"><a href="#XMLState-2585"><span class="linenos">2585</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_systemdisk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2586"><a href="#XMLState-2586"><span class="linenos">2586</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2587"><a href="#XMLState-2587"><span class="linenos">2587</span></a><span class="sd">        Copy systemdisk sections from this xml state to the target xml state</span>
</span><span id="XMLState-2588"><a href="#XMLState-2588"><span class="linenos">2588</span></a>
</span><span id="XMLState-2589"><a href="#XMLState-2589"><span class="linenos">2589</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2590"><a href="#XMLState-2590"><span class="linenos">2590</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2591"><a href="#XMLState-2591"><span class="linenos">2591</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState-2592"><a href="#XMLState-2592"><span class="linenos">2592</span></a>        <span class="k">if</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="XMLState-2593"><a href="#XMLState-2593"><span class="linenos">2593</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_systemdisk</span><span class="p">(</span>
</span><span id="XMLState-2594"><a href="#XMLState-2594"><span class="linenos">2594</span></a>                <span class="p">[</span><span class="n">systemdisk_section</span><span class="p">]</span>
</span><span id="XMLState-2595"><a href="#XMLState-2595"><span class="linenos">2595</span></a>            <span class="p">)</span>
</span><span id="XMLState-2596"><a href="#XMLState-2596"><span class="linenos">2596</span></a>
</span><span id="XMLState-2597"><a href="#XMLState-2597"><span class="linenos">2597</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_strip_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2598"><a href="#XMLState-2598"><span class="linenos">2598</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2599"><a href="#XMLState-2599"><span class="linenos">2599</span></a><span class="sd">        Copy strip sections from this xml state to the target xml state</span>
</span><span id="XMLState-2600"><a href="#XMLState-2600"><span class="linenos">2600</span></a>
</span><span id="XMLState-2601"><a href="#XMLState-2601"><span class="linenos">2601</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2602"><a href="#XMLState-2602"><span class="linenos">2602</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2603"><a href="#XMLState-2603"><span class="linenos">2603</span></a>        <span class="n">strip_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2604"><a href="#XMLState-2604"><span class="linenos">2604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_strip</span><span class="p">()</span>
</span><span id="XMLState-2605"><a href="#XMLState-2605"><span class="linenos">2605</span></a>        <span class="p">)</span>
</span><span id="XMLState-2606"><a href="#XMLState-2606"><span class="linenos">2606</span></a>        <span class="k">if</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState-2607"><a href="#XMLState-2607"><span class="linenos">2607</span></a>            <span class="k">for</span> <span class="n">strip_section</span> <span class="ow">in</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState-2608"><a href="#XMLState-2608"><span class="linenos">2608</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_strip</span><span class="p">(</span><span class="n">strip_section</span><span class="p">)</span>
</span><span id="XMLState-2609"><a href="#XMLState-2609"><span class="linenos">2609</span></a>
</span><span id="XMLState-2610"><a href="#XMLState-2610"><span class="linenos">2610</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_machine_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2611"><a href="#XMLState-2611"><span class="linenos">2611</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2612"><a href="#XMLState-2612"><span class="linenos">2612</span></a><span class="sd">        Copy machine sections from this xml state to the target xml state</span>
</span><span id="XMLState-2613"><a href="#XMLState-2613"><span class="linenos">2613</span></a>
</span><span id="XMLState-2614"><a href="#XMLState-2614"><span class="linenos">2614</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2615"><a href="#XMLState-2615"><span class="linenos">2615</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2616"><a href="#XMLState-2616"><span class="linenos">2616</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState-2617"><a href="#XMLState-2617"><span class="linenos">2617</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState-2618"><a href="#XMLState-2618"><span class="linenos">2618</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_machine</span><span class="p">(</span>
</span><span id="XMLState-2619"><a href="#XMLState-2619"><span class="linenos">2619</span></a>                <span class="p">[</span><span class="n">machine_section</span><span class="p">]</span>
</span><span id="XMLState-2620"><a href="#XMLState-2620"><span class="linenos">2620</span></a>            <span class="p">)</span>
</span><span id="XMLState-2621"><a href="#XMLState-2621"><span class="linenos">2621</span></a>
</span><span id="XMLState-2622"><a href="#XMLState-2622"><span class="linenos">2622</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootloader_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2623"><a href="#XMLState-2623"><span class="linenos">2623</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2624"><a href="#XMLState-2624"><span class="linenos">2624</span></a><span class="sd">        Copy bootloader section from this xml state to the target xml state</span>
</span><span id="XMLState-2625"><a href="#XMLState-2625"><span class="linenos">2625</span></a>
</span><span id="XMLState-2626"><a href="#XMLState-2626"><span class="linenos">2626</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2627"><a href="#XMLState-2627"><span class="linenos">2627</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2628"><a href="#XMLState-2628"><span class="linenos">2628</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState-2629"><a href="#XMLState-2629"><span class="linenos">2629</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span><span class="p">:</span>
</span><span id="XMLState-2630"><a href="#XMLState-2630"><span class="linenos">2630</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_bootloader</span><span class="p">(</span>
</span><span id="XMLState-2631"><a href="#XMLState-2631"><span class="linenos">2631</span></a>                <span class="p">[</span><span class="n">bootloader_section</span><span class="p">]</span>
</span><span id="XMLState-2632"><a href="#XMLState-2632"><span class="linenos">2632</span></a>            <span class="p">)</span>
</span><span id="XMLState-2633"><a href="#XMLState-2633"><span class="linenos">2633</span></a>
</span><span id="XMLState-2634"><a href="#XMLState-2634"><span class="linenos">2634</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_oemconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2635"><a href="#XMLState-2635"><span class="linenos">2635</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2636"><a href="#XMLState-2636"><span class="linenos">2636</span></a><span class="sd">        Copy oemconfig sections from this xml state to the target xml state</span>
</span><span id="XMLState-2637"><a href="#XMLState-2637"><span class="linenos">2637</span></a>
</span><span id="XMLState-2638"><a href="#XMLState-2638"><span class="linenos">2638</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2639"><a href="#XMLState-2639"><span class="linenos">2639</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2640"><a href="#XMLState-2640"><span class="linenos">2640</span></a>        <span class="n">oemconfig_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState-2641"><a href="#XMLState-2641"><span class="linenos">2641</span></a>        <span class="k">if</span> <span class="n">oemconfig_section</span><span class="p">:</span>
</span><span id="XMLState-2642"><a href="#XMLState-2642"><span class="linenos">2642</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_oemconfig</span><span class="p">(</span>
</span><span id="XMLState-2643"><a href="#XMLState-2643"><span class="linenos">2643</span></a>                <span class="p">[</span><span class="n">oemconfig_section</span><span class="p">]</span>
</span><span id="XMLState-2644"><a href="#XMLState-2644"><span class="linenos">2644</span></a>            <span class="p">)</span>
</span><span id="XMLState-2645"><a href="#XMLState-2645"><span class="linenos">2645</span></a>
</span><span id="XMLState-2646"><a href="#XMLState-2646"><span class="linenos">2646</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_repository_sections</span><span class="p">(</span>
</span><span id="XMLState-2647"><a href="#XMLState-2647"><span class="linenos">2647</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">wipe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState-2648"><a href="#XMLState-2648"><span class="linenos">2648</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2649"><a href="#XMLState-2649"><span class="linenos">2649</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2650"><a href="#XMLState-2650"><span class="linenos">2650</span></a><span class="sd">        Copy repository sections from this xml state to the target xml state</span>
</span><span id="XMLState-2651"><a href="#XMLState-2651"><span class="linenos">2651</span></a>
</span><span id="XMLState-2652"><a href="#XMLState-2652"><span class="linenos">2652</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2653"><a href="#XMLState-2653"><span class="linenos">2653</span></a><span class="sd">        :param bool wipe: delete all repos in target prior to copy</span>
</span><span id="XMLState-2654"><a href="#XMLState-2654"><span class="linenos">2654</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2655"><a href="#XMLState-2655"><span class="linenos">2655</span></a>        <span class="n">repository_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState-2656"><a href="#XMLState-2656"><span class="linenos">2656</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_repository</span><span class="p">()</span>
</span><span id="XMLState-2657"><a href="#XMLState-2657"><span class="linenos">2657</span></a>        <span class="p">)</span>
</span><span id="XMLState-2658"><a href="#XMLState-2658"><span class="linenos">2658</span></a>        <span class="k">if</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="XMLState-2659"><a href="#XMLState-2659"><span class="linenos">2659</span></a>            <span class="k">if</span> <span class="n">wipe</span><span class="p">:</span>
</span><span id="XMLState-2660"><a href="#XMLState-2660"><span class="linenos">2660</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">([])</span>
</span><span id="XMLState-2661"><a href="#XMLState-2661"><span class="linenos">2661</span></a>            <span class="k">for</span> <span class="n">repository_section</span> <span class="ow">in</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="XMLState-2662"><a href="#XMLState-2662"><span class="linenos">2662</span></a>                <span class="n">repository_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">repository_section</span><span class="p">)</span>
</span><span id="XMLState-2663"><a href="#XMLState-2663"><span class="linenos">2663</span></a>                <span class="c1"># profiles are not copied because they might not exist</span>
</span><span id="XMLState-2664"><a href="#XMLState-2664"><span class="linenos">2664</span></a>                <span class="c1"># in the target description</span>
</span><span id="XMLState-2665"><a href="#XMLState-2665"><span class="linenos">2665</span></a>                <span class="n">repository_copy</span><span class="o">.</span><span class="n">set_profiles</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span><span id="XMLState-2666"><a href="#XMLState-2666"><span class="linenos">2666</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_repository</span><span class="p">(</span><span class="n">repository_copy</span><span class="p">)</span>
</span><span id="XMLState-2667"><a href="#XMLState-2667"><span class="linenos">2667</span></a>
</span><span id="XMLState-2668"><a href="#XMLState-2668"><span class="linenos">2668</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_preferences_subsections</span><span class="p">(</span>
</span><span id="XMLState-2669"><a href="#XMLState-2669"><span class="linenos">2669</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">section_names</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="XMLState-2670"><a href="#XMLState-2670"><span class="linenos">2670</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2671"><a href="#XMLState-2671"><span class="linenos">2671</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2672"><a href="#XMLState-2672"><span class="linenos">2672</span></a><span class="sd">        Copy subsections of the preferences sections, matching given</span>
</span><span id="XMLState-2673"><a href="#XMLState-2673"><span class="linenos">2673</span></a><span class="sd">        section names, from this xml state to the target xml state</span>
</span><span id="XMLState-2674"><a href="#XMLState-2674"><span class="linenos">2674</span></a>
</span><span id="XMLState-2675"><a href="#XMLState-2675"><span class="linenos">2675</span></a><span class="sd">        :param list section_names: preferences subsection names</span>
</span><span id="XMLState-2676"><a href="#XMLState-2676"><span class="linenos">2676</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2677"><a href="#XMLState-2677"><span class="linenos">2677</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2678"><a href="#XMLState-2678"><span class="linenos">2678</span></a>        <span class="n">target_preferences_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">()</span>
</span><span id="XMLState-2679"><a href="#XMLState-2679"><span class="linenos">2679</span></a>        <span class="k">if</span> <span class="n">target_preferences_sections</span><span class="p">:</span>
</span><span id="XMLState-2680"><a href="#XMLState-2680"><span class="linenos">2680</span></a>            <span class="n">target_preferences_section</span> <span class="o">=</span> <span class="n">target_preferences_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-2681"><a href="#XMLState-2681"><span class="linenos">2681</span></a>            <span class="k">for</span> <span class="n">preferences_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-2682"><a href="#XMLState-2682"><span class="linenos">2682</span></a>                <span class="k">for</span> <span class="n">section_name</span> <span class="ow">in</span> <span class="n">section_names</span><span class="p">:</span>
</span><span id="XMLState-2683"><a href="#XMLState-2683"><span class="linenos">2683</span></a>                    <span class="n">get_section_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState-2684"><a href="#XMLState-2684"><span class="linenos">2684</span></a>                        <span class="n">preferences_section</span><span class="p">,</span> <span class="s1">&#39;get_&#39;</span> <span class="o">+</span> <span class="n">section_name</span>
</span><span id="XMLState-2685"><a href="#XMLState-2685"><span class="linenos">2685</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2686"><a href="#XMLState-2686"><span class="linenos">2686</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">get_section_method</span><span class="p">()</span>
</span><span id="XMLState-2687"><a href="#XMLState-2687"><span class="linenos">2687</span></a>                    <span class="k">if</span> <span class="n">section</span><span class="p">:</span>
</span><span id="XMLState-2688"><a href="#XMLState-2688"><span class="linenos">2688</span></a>                        <span class="n">set_section_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState-2689"><a href="#XMLState-2689"><span class="linenos">2689</span></a>                            <span class="n">target_preferences_section</span><span class="p">,</span> <span class="s1">&#39;set_&#39;</span> <span class="o">+</span> <span class="n">section_name</span>
</span><span id="XMLState-2690"><a href="#XMLState-2690"><span class="linenos">2690</span></a>                        <span class="p">)</span>
</span><span id="XMLState-2691"><a href="#XMLState-2691"><span class="linenos">2691</span></a>                        <span class="n">set_section_method</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span><span id="XMLState-2692"><a href="#XMLState-2692"><span class="linenos">2692</span></a>
</span><span id="XMLState-2693"><a href="#XMLState-2693"><span class="linenos">2693</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_build_type_attributes</span><span class="p">(</span>
</span><span id="XMLState-2694"><a href="#XMLState-2694"><span class="linenos">2694</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">attribute_names</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="XMLState-2695"><a href="#XMLState-2695"><span class="linenos">2695</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2696"><a href="#XMLState-2696"><span class="linenos">2696</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2697"><a href="#XMLState-2697"><span class="linenos">2697</span></a><span class="sd">        Copy specified attributes from this build type section to the</span>
</span><span id="XMLState-2698"><a href="#XMLState-2698"><span class="linenos">2698</span></a><span class="sd">        target xml state build type section</span>
</span><span id="XMLState-2699"><a href="#XMLState-2699"><span class="linenos">2699</span></a>
</span><span id="XMLState-2700"><a href="#XMLState-2700"><span class="linenos">2700</span></a><span class="sd">        :param list attribute_names: type section attributes</span>
</span><span id="XMLState-2701"><a href="#XMLState-2701"><span class="linenos">2701</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2702"><a href="#XMLState-2702"><span class="linenos">2702</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2703"><a href="#XMLState-2703"><span class="linenos">2703</span></a>        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attribute_names</span><span class="p">:</span>
</span><span id="XMLState-2704"><a href="#XMLState-2704"><span class="linenos">2704</span></a>            <span class="n">get_type_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState-2705"><a href="#XMLState-2705"><span class="linenos">2705</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="p">,</span> <span class="s1">&#39;get_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
</span><span id="XMLState-2706"><a href="#XMLState-2706"><span class="linenos">2706</span></a>            <span class="p">)</span>
</span><span id="XMLState-2707"><a href="#XMLState-2707"><span class="linenos">2707</span></a>            <span class="n">attribute_value</span> <span class="o">=</span> <span class="n">get_type_method</span><span class="p">()</span>
</span><span id="XMLState-2708"><a href="#XMLState-2708"><span class="linenos">2708</span></a>            <span class="k">if</span> <span class="n">attribute_value</span><span class="p">:</span>
</span><span id="XMLState-2709"><a href="#XMLState-2709"><span class="linenos">2709</span></a>                <span class="n">set_type_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState-2710"><a href="#XMLState-2710"><span class="linenos">2710</span></a>                    <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="p">,</span> <span class="s1">&#39;set_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
</span><span id="XMLState-2711"><a href="#XMLState-2711"><span class="linenos">2711</span></a>                <span class="p">)</span>
</span><span id="XMLState-2712"><a href="#XMLState-2712"><span class="linenos">2712</span></a>                <span class="n">set_type_method</span><span class="p">(</span><span class="n">attribute_value</span><span class="p">)</span>
</span><span id="XMLState-2713"><a href="#XMLState-2713"><span class="linenos">2713</span></a>
</span><span id="XMLState-2714"><a href="#XMLState-2714"><span class="linenos">2714</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootincluded_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2715"><a href="#XMLState-2715"><span class="linenos">2715</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2716"><a href="#XMLState-2716"><span class="linenos">2716</span></a><span class="sd">        Copy packages marked as bootinclude to the packages</span>
</span><span id="XMLState-2717"><a href="#XMLState-2717"><span class="linenos">2717</span></a><span class="sd">        type=bootstrap section in the target xml state. The package</span>
</span><span id="XMLState-2718"><a href="#XMLState-2718"><span class="linenos">2718</span></a><span class="sd">        will also be removed from the packages type=delete section</span>
</span><span id="XMLState-2719"><a href="#XMLState-2719"><span class="linenos">2719</span></a><span class="sd">        in the target xml state if present there</span>
</span><span id="XMLState-2720"><a href="#XMLState-2720"><span class="linenos">2720</span></a>
</span><span id="XMLState-2721"><a href="#XMLState-2721"><span class="linenos">2721</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2722"><a href="#XMLState-2722"><span class="linenos">2722</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2723"><a href="#XMLState-2723"><span class="linenos">2723</span></a>        <span class="n">target_packages_sections</span> <span class="o">=</span> \
</span><span id="XMLState-2724"><a href="#XMLState-2724"><span class="linenos">2724</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState-2725"><a href="#XMLState-2725"><span class="linenos">2725</span></a>        <span class="k">if</span> <span class="n">target_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-2726"><a href="#XMLState-2726"><span class="linenos">2726</span></a>            <span class="n">target_packages_section</span> <span class="o">=</span> \
</span><span id="XMLState-2727"><a href="#XMLState-2727"><span class="linenos">2727</span></a>                <span class="n">target_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-2728"><a href="#XMLState-2728"><span class="linenos">2728</span></a>            <span class="n">package_names_added</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2729"><a href="#XMLState-2729"><span class="linenos">2729</span></a>            <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-2730"><a href="#XMLState-2730"><span class="linenos">2730</span></a>                <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-2731"><a href="#XMLState-2731"><span class="linenos">2731</span></a>            <span class="p">)</span>
</span><span id="XMLState-2732"><a href="#XMLState-2732"><span class="linenos">2732</span></a>            <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState-2733"><a href="#XMLState-2733"><span class="linenos">2733</span></a>                <span class="n">packages_sections</span>
</span><span id="XMLState-2734"><a href="#XMLState-2734"><span class="linenos">2734</span></a>            <span class="p">)</span>
</span><span id="XMLState-2735"><a href="#XMLState-2735"><span class="linenos">2735</span></a>            <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-2736"><a href="#XMLState-2736"><span class="linenos">2736</span></a>                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-2737"><a href="#XMLState-2737"><span class="linenos">2737</span></a>                    <span class="k">if</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_bootinclude</span><span class="p">():</span>
</span><span id="XMLState-2738"><a href="#XMLState-2738"><span class="linenos">2738</span></a>                        <span class="n">target_packages_section</span><span class="o">.</span><span class="n">add_package</span><span class="p">(</span>
</span><span id="XMLState-2739"><a href="#XMLState-2739"><span class="linenos">2739</span></a>                            <span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span><span class="p">(</span>
</span><span id="XMLState-2740"><a href="#XMLState-2740"><span class="linenos">2740</span></a>                                <span class="n">name</span><span class="o">=</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-2741"><a href="#XMLState-2741"><span class="linenos">2741</span></a>                            <span class="p">)</span>
</span><span id="XMLState-2742"><a href="#XMLState-2742"><span class="linenos">2742</span></a>                        <span class="p">)</span>
</span><span id="XMLState-2743"><a href="#XMLState-2743"><span class="linenos">2743</span></a>                        <span class="n">package_names_added</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-2744"><a href="#XMLState-2744"><span class="linenos">2744</span></a>                            <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-2745"><a href="#XMLState-2745"><span class="linenos">2745</span></a>                        <span class="p">)</span>
</span><span id="XMLState-2746"><a href="#XMLState-2746"><span class="linenos">2746</span></a>            <span class="n">delete_packages_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-2747"><a href="#XMLState-2747"><span class="linenos">2747</span></a>                <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">]</span>
</span><span id="XMLState-2748"><a href="#XMLState-2748"><span class="linenos">2748</span></a>            <span class="p">)</span>
</span><span id="XMLState-2749"><a href="#XMLState-2749"><span class="linenos">2749</span></a>            <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState-2750"><a href="#XMLState-2750"><span class="linenos">2750</span></a>                <span class="n">delete_packages_sections</span>
</span><span id="XMLState-2751"><a href="#XMLState-2751"><span class="linenos">2751</span></a>            <span class="p">)</span>
</span><span id="XMLState-2752"><a href="#XMLState-2752"><span class="linenos">2752</span></a>            <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-2753"><a href="#XMLState-2753"><span class="linenos">2753</span></a>                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-2754"><a href="#XMLState-2754"><span class="linenos">2754</span></a>                    <span class="n">package_name</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-2755"><a href="#XMLState-2755"><span class="linenos">2755</span></a>                    <span class="k">if</span> <span class="n">package_name</span> <span class="ow">in</span> <span class="n">package_names_added</span><span class="p">:</span>
</span><span id="XMLState-2756"><a href="#XMLState-2756"><span class="linenos">2756</span></a>                        <span class="n">package</span><span class="o">.</span><span class="n">packages_section</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span>
</span><span id="XMLState-2757"><a href="#XMLState-2757"><span class="linenos">2757</span></a>                            <span class="n">package</span><span class="o">.</span><span class="n">package_section</span>
</span><span id="XMLState-2758"><a href="#XMLState-2758"><span class="linenos">2758</span></a>                        <span class="p">)</span>
</span><span id="XMLState-2759"><a href="#XMLState-2759"><span class="linenos">2759</span></a>
</span><span id="XMLState-2760"><a href="#XMLState-2760"><span class="linenos">2760</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootincluded_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2761"><a href="#XMLState-2761"><span class="linenos">2761</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2762"><a href="#XMLState-2762"><span class="linenos">2762</span></a><span class="sd">        Copy archives marked as bootinclude to the packages type=bootstrap</span>
</span><span id="XMLState-2763"><a href="#XMLState-2763"><span class="linenos">2763</span></a><span class="sd">        section in the target xml state</span>
</span><span id="XMLState-2764"><a href="#XMLState-2764"><span class="linenos">2764</span></a>
</span><span id="XMLState-2765"><a href="#XMLState-2765"><span class="linenos">2765</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2766"><a href="#XMLState-2766"><span class="linenos">2766</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2767"><a href="#XMLState-2767"><span class="linenos">2767</span></a>        <span class="n">target_bootstrap_packages_sections</span> <span class="o">=</span> \
</span><span id="XMLState-2768"><a href="#XMLState-2768"><span class="linenos">2768</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState-2769"><a href="#XMLState-2769"><span class="linenos">2769</span></a>        <span class="k">if</span> <span class="n">target_bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-2770"><a href="#XMLState-2770"><span class="linenos">2770</span></a>            <span class="n">target_bootstrap_packages_section</span> <span class="o">=</span> \
</span><span id="XMLState-2771"><a href="#XMLState-2771"><span class="linenos">2771</span></a>                <span class="n">target_bootstrap_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-2772"><a href="#XMLState-2772"><span class="linenos">2772</span></a>            <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-2773"><a href="#XMLState-2773"><span class="linenos">2773</span></a>                <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-2774"><a href="#XMLState-2774"><span class="linenos">2774</span></a>            <span class="p">)</span>
</span><span id="XMLState-2775"><a href="#XMLState-2775"><span class="linenos">2775</span></a>            <span class="k">for</span> <span class="n">packages_section</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState-2776"><a href="#XMLState-2776"><span class="linenos">2776</span></a>                <span class="n">archive_list</span> <span class="o">=</span> <span class="n">packages_section</span><span class="o">.</span><span class="n">get_archive</span><span class="p">()</span>
</span><span id="XMLState-2777"><a href="#XMLState-2777"><span class="linenos">2777</span></a>                <span class="k">if</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState-2778"><a href="#XMLState-2778"><span class="linenos">2778</span></a>                    <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState-2779"><a href="#XMLState-2779"><span class="linenos">2779</span></a>                        <span class="k">if</span> <span class="n">archive</span><span class="o">.</span><span class="n">get_bootinclude</span><span class="p">():</span>
</span><span id="XMLState-2780"><a href="#XMLState-2780"><span class="linenos">2780</span></a>                            <span class="n">target_bootstrap_packages_section</span><span class="o">.</span><span class="n">add_archive</span><span class="p">(</span>
</span><span id="XMLState-2781"><a href="#XMLState-2781"><span class="linenos">2781</span></a>                                <span class="n">xml_parse</span><span class="o">.</span><span class="n">archive</span><span class="p">(</span>
</span><span id="XMLState-2782"><a href="#XMLState-2782"><span class="linenos">2782</span></a>                                    <span class="n">name</span><span class="o">=</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-2783"><a href="#XMLState-2783"><span class="linenos">2783</span></a>                                <span class="p">)</span>
</span><span id="XMLState-2784"><a href="#XMLState-2784"><span class="linenos">2784</span></a>                            <span class="p">)</span>
</span><span id="XMLState-2785"><a href="#XMLState-2785"><span class="linenos">2785</span></a>
</span><span id="XMLState-2786"><a href="#XMLState-2786"><span class="linenos">2786</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootdelete_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2787"><a href="#XMLState-2787"><span class="linenos">2787</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2788"><a href="#XMLState-2788"><span class="linenos">2788</span></a><span class="sd">        Copy packages marked as bootdelete to the packages type=delete</span>
</span><span id="XMLState-2789"><a href="#XMLState-2789"><span class="linenos">2789</span></a><span class="sd">        section in the target xml state</span>
</span><span id="XMLState-2790"><a href="#XMLState-2790"><span class="linenos">2790</span></a>
</span><span id="XMLState-2791"><a href="#XMLState-2791"><span class="linenos">2791</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState-2792"><a href="#XMLState-2792"><span class="linenos">2792</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2793"><a href="#XMLState-2793"><span class="linenos">2793</span></a>        <span class="n">target_delete_packages_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-2794"><a href="#XMLState-2794"><span class="linenos">2794</span></a>            <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">]</span>
</span><span id="XMLState-2795"><a href="#XMLState-2795"><span class="linenos">2795</span></a>        <span class="p">)</span>
</span><span id="XMLState-2796"><a href="#XMLState-2796"><span class="linenos">2796</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">target_delete_packages_sections</span><span class="p">:</span>
</span><span id="XMLState-2797"><a href="#XMLState-2797"><span class="linenos">2797</span></a>            <span class="n">target_delete_packages_sections</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState-2798"><a href="#XMLState-2798"><span class="linenos">2798</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</span><span id="XMLState-2799"><a href="#XMLState-2799"><span class="linenos">2799</span></a>            <span class="p">]</span>
</span><span id="XMLState-2800"><a href="#XMLState-2800"><span class="linenos">2800</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_packages</span><span class="p">(</span>
</span><span id="XMLState-2801"><a href="#XMLState-2801"><span class="linenos">2801</span></a>                <span class="n">target_delete_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-2802"><a href="#XMLState-2802"><span class="linenos">2802</span></a>            <span class="p">)</span>
</span><span id="XMLState-2803"><a href="#XMLState-2803"><span class="linenos">2803</span></a>
</span><span id="XMLState-2804"><a href="#XMLState-2804"><span class="linenos">2804</span></a>        <span class="n">target_delete_packages_section</span> <span class="o">=</span> \
</span><span id="XMLState-2805"><a href="#XMLState-2805"><span class="linenos">2805</span></a>            <span class="n">target_delete_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-2806"><a href="#XMLState-2806"><span class="linenos">2806</span></a>        <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState-2807"><a href="#XMLState-2807"><span class="linenos">2807</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState-2808"><a href="#XMLState-2808"><span class="linenos">2808</span></a>        <span class="p">)</span>
</span><span id="XMLState-2809"><a href="#XMLState-2809"><span class="linenos">2809</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState-2810"><a href="#XMLState-2810"><span class="linenos">2810</span></a>            <span class="n">packages_sections</span>
</span><span id="XMLState-2811"><a href="#XMLState-2811"><span class="linenos">2811</span></a>        <span class="p">)</span>
</span><span id="XMLState-2812"><a href="#XMLState-2812"><span class="linenos">2812</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-2813"><a href="#XMLState-2813"><span class="linenos">2813</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState-2814"><a href="#XMLState-2814"><span class="linenos">2814</span></a>                <span class="k">if</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_bootdelete</span><span class="p">():</span>
</span><span id="XMLState-2815"><a href="#XMLState-2815"><span class="linenos">2815</span></a>                    <span class="n">target_delete_packages_section</span><span class="o">.</span><span class="n">add_package</span><span class="p">(</span>
</span><span id="XMLState-2816"><a href="#XMLState-2816"><span class="linenos">2816</span></a>                        <span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span><span class="p">(</span>
</span><span id="XMLState-2817"><a href="#XMLState-2817"><span class="linenos">2817</span></a>                            <span class="n">name</span><span class="o">=</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-2818"><a href="#XMLState-2818"><span class="linenos">2818</span></a>                        <span class="p">)</span>
</span><span id="XMLState-2819"><a href="#XMLState-2819"><span class="linenos">2819</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2820"><a href="#XMLState-2820"><span class="linenos">2820</span></a>
</span><span id="XMLState-2821"><a href="#XMLState-2821"><span class="linenos">2821</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_distribution_name_from_boot_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState-2822"><a href="#XMLState-2822"><span class="linenos">2822</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2823"><a href="#XMLState-2823"><span class="linenos">2823</span></a><span class="sd">        Extract the distribution name from the boot attribute of the</span>
</span><span id="XMLState-2824"><a href="#XMLState-2824"><span class="linenos">2824</span></a><span class="sd">        build type section.</span>
</span><span id="XMLState-2825"><a href="#XMLState-2825"><span class="linenos">2825</span></a>
</span><span id="XMLState-2826"><a href="#XMLState-2826"><span class="linenos">2826</span></a><span class="sd">        If no boot attribute is configured or the contents does not</span>
</span><span id="XMLState-2827"><a href="#XMLState-2827"><span class="linenos">2827</span></a><span class="sd">        match the kiwi defined naming schema for boot image descriptions,</span>
</span><span id="XMLState-2828"><a href="#XMLState-2828"><span class="linenos">2828</span></a><span class="sd">        an exception is thrown</span>
</span><span id="XMLState-2829"><a href="#XMLState-2829"><span class="linenos">2829</span></a>
</span><span id="XMLState-2830"><a href="#XMLState-2830"><span class="linenos">2830</span></a><span class="sd">        :return: lowercase distribution name</span>
</span><span id="XMLState-2831"><a href="#XMLState-2831"><span class="linenos">2831</span></a>
</span><span id="XMLState-2832"><a href="#XMLState-2832"><span class="linenos">2832</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-2833"><a href="#XMLState-2833"><span class="linenos">2833</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2834"><a href="#XMLState-2834"><span class="linenos">2834</span></a>        <span class="n">boot_attribute</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_boot</span><span class="p">()</span>
</span><span id="XMLState-2835"><a href="#XMLState-2835"><span class="linenos">2835</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">boot_attribute</span><span class="p">:</span>
</span><span id="XMLState-2836"><a href="#XMLState-2836"><span class="linenos">2836</span></a>            <span class="k">raise</span> <span class="n">KiwiDistributionNameError</span><span class="p">(</span>
</span><span id="XMLState-2837"><a href="#XMLState-2837"><span class="linenos">2837</span></a>                <span class="s1">&#39;No boot attribute to extract distribution name from found&#39;</span>
</span><span id="XMLState-2838"><a href="#XMLState-2838"><span class="linenos">2838</span></a>            <span class="p">)</span>
</span><span id="XMLState-2839"><a href="#XMLState-2839"><span class="linenos">2839</span></a>        <span class="n">boot_attribute_format</span> <span class="o">=</span> <span class="s1">&#39;^.*-(.*)$&#39;</span>
</span><span id="XMLState-2840"><a href="#XMLState-2840"><span class="linenos">2840</span></a>        <span class="n">boot_attribute_expression</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="XMLState-2841"><a href="#XMLState-2841"><span class="linenos">2841</span></a>            <span class="n">boot_attribute_format</span><span class="p">,</span> <span class="n">boot_attribute</span>
</span><span id="XMLState-2842"><a href="#XMLState-2842"><span class="linenos">2842</span></a>        <span class="p">)</span>
</span><span id="XMLState-2843"><a href="#XMLState-2843"><span class="linenos">2843</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">boot_attribute_expression</span><span class="p">:</span>
</span><span id="XMLState-2844"><a href="#XMLState-2844"><span class="linenos">2844</span></a>            <span class="k">raise</span> <span class="n">KiwiDistributionNameError</span><span class="p">(</span>
</span><span id="XMLState-2845"><a href="#XMLState-2845"><span class="linenos">2845</span></a>                <span class="s1">&#39;Boot attribute &quot;</span><span class="si">%s</span><span class="s1">&quot; does not match expected format </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="XMLState-2846"><a href="#XMLState-2846"><span class="linenos">2846</span></a>                <span class="p">(</span><span class="n">boot_attribute</span><span class="p">,</span> <span class="n">boot_attribute_format</span><span class="p">)</span>
</span><span id="XMLState-2847"><a href="#XMLState-2847"><span class="linenos">2847</span></a>            <span class="p">)</span>
</span><span id="XMLState-2848"><a href="#XMLState-2848"><span class="linenos">2848</span></a>        <span class="k">return</span> <span class="n">boot_attribute_expression</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="XMLState-2849"><a href="#XMLState-2849"><span class="linenos">2849</span></a>
</span><span id="XMLState-2850"><a href="#XMLState-2850"><span class="linenos">2850</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_fs_mount_option_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2851"><a href="#XMLState-2851"><span class="linenos">2851</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2852"><a href="#XMLState-2852"><span class="linenos">2852</span></a><span class="sd">        List of root filesystem mount options</span>
</span><span id="XMLState-2853"><a href="#XMLState-2853"><span class="linenos">2853</span></a>
</span><span id="XMLState-2854"><a href="#XMLState-2854"><span class="linenos">2854</span></a><span class="sd">        The list contains one element with the information from the</span>
</span><span id="XMLState-2855"><a href="#XMLState-2855"><span class="linenos">2855</span></a><span class="sd">        fsmountoptions attribute. The value there is passed along to</span>
</span><span id="XMLState-2856"><a href="#XMLState-2856"><span class="linenos">2856</span></a><span class="sd">        the -o mount option</span>
</span><span id="XMLState-2857"><a href="#XMLState-2857"><span class="linenos">2857</span></a>
</span><span id="XMLState-2858"><a href="#XMLState-2858"><span class="linenos">2858</span></a><span class="sd">        :return: max one element list with mount option string</span>
</span><span id="XMLState-2859"><a href="#XMLState-2859"><span class="linenos">2859</span></a>
</span><span id="XMLState-2860"><a href="#XMLState-2860"><span class="linenos">2860</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2861"><a href="#XMLState-2861"><span class="linenos">2861</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2862"><a href="#XMLState-2862"><span class="linenos">2862</span></a>        <span class="n">option_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2863"><a href="#XMLState-2863"><span class="linenos">2863</span></a>        <span class="n">mount_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_fsmountoptions</span><span class="p">()</span>
</span><span id="XMLState-2864"><a href="#XMLState-2864"><span class="linenos">2864</span></a>        <span class="k">if</span> <span class="n">mount_options</span><span class="p">:</span>
</span><span id="XMLState-2865"><a href="#XMLState-2865"><span class="linenos">2865</span></a>            <span class="n">option_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">mount_options</span><span class="p">]</span>
</span><span id="XMLState-2866"><a href="#XMLState-2866"><span class="linenos">2866</span></a>
</span><span id="XMLState-2867"><a href="#XMLState-2867"><span class="linenos">2867</span></a>        <span class="k">return</span> <span class="n">option_list</span>
</span><span id="XMLState-2868"><a href="#XMLState-2868"><span class="linenos">2868</span></a>
</span><span id="XMLState-2869"><a href="#XMLState-2869"><span class="linenos">2869</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_fs_create_option_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState-2870"><a href="#XMLState-2870"><span class="linenos">2870</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2871"><a href="#XMLState-2871"><span class="linenos">2871</span></a><span class="sd">        List of root filesystem creation options</span>
</span><span id="XMLState-2872"><a href="#XMLState-2872"><span class="linenos">2872</span></a>
</span><span id="XMLState-2873"><a href="#XMLState-2873"><span class="linenos">2873</span></a><span class="sd">        The list contains elements with the information from the</span>
</span><span id="XMLState-2874"><a href="#XMLState-2874"><span class="linenos">2874</span></a><span class="sd">        fscreateoptions attribute string that got split into its</span>
</span><span id="XMLState-2875"><a href="#XMLState-2875"><span class="linenos">2875</span></a><span class="sd">        substring components</span>
</span><span id="XMLState-2876"><a href="#XMLState-2876"><span class="linenos">2876</span></a>
</span><span id="XMLState-2877"><a href="#XMLState-2877"><span class="linenos">2877</span></a><span class="sd">        :return: list with create options</span>
</span><span id="XMLState-2878"><a href="#XMLState-2878"><span class="linenos">2878</span></a>
</span><span id="XMLState-2879"><a href="#XMLState-2879"><span class="linenos">2879</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2880"><a href="#XMLState-2880"><span class="linenos">2880</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2881"><a href="#XMLState-2881"><span class="linenos">2881</span></a>        <span class="n">option_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2882"><a href="#XMLState-2882"><span class="linenos">2882</span></a>        <span class="n">create_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_fscreateoptions</span><span class="p">()</span>
</span><span id="XMLState-2883"><a href="#XMLState-2883"><span class="linenos">2883</span></a>        <span class="k">if</span> <span class="n">create_options</span><span class="p">:</span>
</span><span id="XMLState-2884"><a href="#XMLState-2884"><span class="linenos">2884</span></a>            <span class="n">option_list</span> <span class="o">=</span> <span class="n">create_options</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</span><span id="XMLState-2885"><a href="#XMLState-2885"><span class="linenos">2885</span></a>
</span><span id="XMLState-2886"><a href="#XMLState-2886"><span class="linenos">2886</span></a>        <span class="k">return</span> <span class="n">option_list</span>
</span><span id="XMLState-2887"><a href="#XMLState-2887"><span class="linenos">2887</span></a>
</span><span id="XMLState-2888"><a href="#XMLState-2888"><span class="linenos">2888</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_luks_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-2889"><a href="#XMLState-2889"><span class="linenos">2889</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2890"><a href="#XMLState-2890"><span class="linenos">2890</span></a><span class="sd">        Return key or passphrase credentials to open the luks pool</span>
</span><span id="XMLState-2891"><a href="#XMLState-2891"><span class="linenos">2891</span></a>
</span><span id="XMLState-2892"><a href="#XMLState-2892"><span class="linenos">2892</span></a><span class="sd">        :return: data</span>
</span><span id="XMLState-2893"><a href="#XMLState-2893"><span class="linenos">2893</span></a>
</span><span id="XMLState-2894"><a href="#XMLState-2894"><span class="linenos">2894</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState-2895"><a href="#XMLState-2895"><span class="linenos">2895</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2896"><a href="#XMLState-2896"><span class="linenos">2896</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks</span><span class="p">()</span>
</span><span id="XMLState-2897"><a href="#XMLState-2897"><span class="linenos">2897</span></a>        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
</span><span id="XMLState-2898"><a href="#XMLState-2898"><span class="linenos">2898</span></a>            <span class="n">keyfile_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState-2899"><a href="#XMLState-2899"><span class="linenos">2899</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="XMLState-2900"><a href="#XMLState-2900"><span class="linenos">2900</span></a>                <span class="c1"># try to interpret data as an URI</span>
</span><span id="XMLState-2901"><a href="#XMLState-2901"><span class="linenos">2901</span></a>                <span class="n">uri</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="XMLState-2902"><a href="#XMLState-2902"><span class="linenos">2902</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">is_remote</span><span class="p">():</span>
</span><span id="XMLState-2903"><a href="#XMLState-2903"><span class="linenos">2903</span></a>                    <span class="n">keyfile_name</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="XMLState-2904"><a href="#XMLState-2904"><span class="linenos">2904</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="XMLState-2905"><a href="#XMLState-2905"><span class="linenos">2905</span></a>                <span class="c1"># this doesn&#39;t look like a valid URI, continue as just data</span>
</span><span id="XMLState-2906"><a href="#XMLState-2906"><span class="linenos">2906</span></a>                <span class="k">pass</span>
</span><span id="XMLState-2907"><a href="#XMLState-2907"><span class="linenos">2907</span></a>            <span class="k">if</span> <span class="n">keyfile_name</span><span class="p">:</span>
</span><span id="XMLState-2908"><a href="#XMLState-2908"><span class="linenos">2908</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="XMLState-2909"><a href="#XMLState-2909"><span class="linenos">2909</span></a>                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">keyfile_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">keyfile</span><span class="p">:</span>
</span><span id="XMLState-2910"><a href="#XMLState-2910"><span class="linenos">2910</span></a>                        <span class="k">return</span> <span class="n">keyfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="XMLState-2911"><a href="#XMLState-2911"><span class="linenos">2911</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">issue</span><span class="p">:</span>
</span><span id="XMLState-2912"><a href="#XMLState-2912"><span class="linenos">2912</span></a>                    <span class="k">raise</span> <span class="n">KiwiFileAccessError</span><span class="p">(</span>
</span><span id="XMLState-2913"><a href="#XMLState-2913"><span class="linenos">2913</span></a>                        <span class="sa">f</span><span class="s1">&#39;Failed to read from </span><span class="si">{</span><span class="n">keyfile_name</span><span class="si">!r}</span><span class="s1">: </span><span class="si">{</span><span class="n">issue</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="XMLState-2914"><a href="#XMLState-2914"><span class="linenos">2914</span></a>                    <span class="p">)</span>
</span><span id="XMLState-2915"><a href="#XMLState-2915"><span class="linenos">2915</span></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="XMLState-2916"><a href="#XMLState-2916"><span class="linenos">2916</span></a>
</span><span id="XMLState-2917"><a href="#XMLState-2917"><span class="linenos">2917</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_luks_format_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-2918"><a href="#XMLState-2918"><span class="linenos">2918</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2919"><a href="#XMLState-2919"><span class="linenos">2919</span></a><span class="sd">        Return list of luks format options</span>
</span><span id="XMLState-2920"><a href="#XMLState-2920"><span class="linenos">2920</span></a>
</span><span id="XMLState-2921"><a href="#XMLState-2921"><span class="linenos">2921</span></a><span class="sd">        :return: list of options</span>
</span><span id="XMLState-2922"><a href="#XMLState-2922"><span class="linenos">2922</span></a>
</span><span id="XMLState-2923"><a href="#XMLState-2923"><span class="linenos">2923</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2924"><a href="#XMLState-2924"><span class="linenos">2924</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2925"><a href="#XMLState-2925"><span class="linenos">2925</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2926"><a href="#XMLState-2926"><span class="linenos">2926</span></a>        <span class="n">luksversion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks_version</span><span class="p">()</span>
</span><span id="XMLState-2927"><a href="#XMLState-2927"><span class="linenos">2927</span></a>        <span class="n">luksformat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luksformat</span><span class="p">()</span>
</span><span id="XMLState-2928"><a href="#XMLState-2928"><span class="linenos">2928</span></a>        <span class="n">luks_pbkdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks_pbkdf</span><span class="p">()</span>
</span><span id="XMLState-2929"><a href="#XMLState-2929"><span class="linenos">2929</span></a>        <span class="k">if</span> <span class="n">luksversion</span><span class="p">:</span>
</span><span id="XMLState-2930"><a href="#XMLState-2930"><span class="linenos">2930</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--type&#39;</span><span class="p">)</span>
</span><span id="XMLState-2931"><a href="#XMLState-2931"><span class="linenos">2931</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">luksversion</span><span class="p">)</span>
</span><span id="XMLState-2932"><a href="#XMLState-2932"><span class="linenos">2932</span></a>        <span class="k">if</span> <span class="n">luksformat</span><span class="p">:</span>
</span><span id="XMLState-2933"><a href="#XMLState-2933"><span class="linenos">2933</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">luksformat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_option</span><span class="p">():</span>
</span><span id="XMLState-2934"><a href="#XMLState-2934"><span class="linenos">2934</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-2935"><a href="#XMLState-2935"><span class="linenos">2935</span></a>                <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">():</span>
</span><span id="XMLState-2936"><a href="#XMLState-2936"><span class="linenos">2936</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
</span><span id="XMLState-2937"><a href="#XMLState-2937"><span class="linenos">2937</span></a>        <span class="k">if</span> <span class="n">luks_pbkdf</span><span class="p">:</span>
</span><span id="XMLState-2938"><a href="#XMLState-2938"><span class="linenos">2938</span></a>            <span class="c1"># Allow to override the pbkdf algorithm that cryptsetup</span>
</span><span id="XMLState-2939"><a href="#XMLState-2939"><span class="linenos">2939</span></a>            <span class="c1"># uses by default. Cryptsetup may use argon2i by default,</span>
</span><span id="XMLState-2940"><a href="#XMLState-2940"><span class="linenos">2940</span></a>            <span class="c1"># which is not supported by all bootloaders.</span>
</span><span id="XMLState-2941"><a href="#XMLState-2941"><span class="linenos">2941</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--pbkdf&#39;</span><span class="p">)</span>
</span><span id="XMLState-2942"><a href="#XMLState-2942"><span class="linenos">2942</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">luks_pbkdf</span><span class="p">)</span>
</span><span id="XMLState-2943"><a href="#XMLState-2943"><span class="linenos">2943</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-2944"><a href="#XMLState-2944"><span class="linenos">2944</span></a>
</span><span id="XMLState-2945"><a href="#XMLState-2945"><span class="linenos">2945</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_derived_from_image_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Uri</span><span class="p">]:</span>
</span><span id="XMLState-2946"><a href="#XMLState-2946"><span class="linenos">2946</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2947"><a href="#XMLState-2947"><span class="linenos">2947</span></a><span class="sd">        Uri object(s) of derived image if configured</span>
</span><span id="XMLState-2948"><a href="#XMLState-2948"><span class="linenos">2948</span></a>
</span><span id="XMLState-2949"><a href="#XMLState-2949"><span class="linenos">2949</span></a><span class="sd">        Specific image types can be based on one ore more derived</span>
</span><span id="XMLState-2950"><a href="#XMLState-2950"><span class="linenos">2950</span></a><span class="sd">        images. This method returns the location of this image(s)</span>
</span><span id="XMLState-2951"><a href="#XMLState-2951"><span class="linenos">2951</span></a><span class="sd">        when configured in the XML description</span>
</span><span id="XMLState-2952"><a href="#XMLState-2952"><span class="linenos">2952</span></a>
</span><span id="XMLState-2953"><a href="#XMLState-2953"><span class="linenos">2953</span></a><span class="sd">        :return: List of Uri instances</span>
</span><span id="XMLState-2954"><a href="#XMLState-2954"><span class="linenos">2954</span></a>
</span><span id="XMLState-2955"><a href="#XMLState-2955"><span class="linenos">2955</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState-2956"><a href="#XMLState-2956"><span class="linenos">2956</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2957"><a href="#XMLState-2957"><span class="linenos">2957</span></a>        <span class="n">image_uris</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-2958"><a href="#XMLState-2958"><span class="linenos">2958</span></a>        <span class="n">derived_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_derived_from</span><span class="p">()</span>
</span><span id="XMLState-2959"><a href="#XMLState-2959"><span class="linenos">2959</span></a>        <span class="k">if</span> <span class="n">derived_images</span><span class="p">:</span>
</span><span id="XMLState-2960"><a href="#XMLState-2960"><span class="linenos">2960</span></a>            <span class="k">for</span> <span class="n">derived_image</span> <span class="ow">in</span> <span class="n">derived_images</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="XMLState-2961"><a href="#XMLState-2961"><span class="linenos">2961</span></a>                <span class="n">image_uris</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-2962"><a href="#XMLState-2962"><span class="linenos">2962</span></a>                    <span class="n">Uri</span><span class="p">(</span><span class="n">derived_image</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span>
</span><span id="XMLState-2963"><a href="#XMLState-2963"><span class="linenos">2963</span></a>                <span class="p">)</span>
</span><span id="XMLState-2964"><a href="#XMLState-2964"><span class="linenos">2964</span></a>        <span class="k">return</span> <span class="n">image_uris</span>
</span><span id="XMLState-2965"><a href="#XMLState-2965"><span class="linenos">2965</span></a>
</span><span id="XMLState-2966"><a href="#XMLState-2966"><span class="linenos">2966</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_derived_from_image_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2967"><a href="#XMLState-2967"><span class="linenos">2967</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2968"><a href="#XMLState-2968"><span class="linenos">2968</span></a><span class="sd">        Set derived_from attribute to a new value</span>
</span><span id="XMLState-2969"><a href="#XMLState-2969"><span class="linenos">2969</span></a>
</span><span id="XMLState-2970"><a href="#XMLState-2970"><span class="linenos">2970</span></a><span class="sd">        In order to set a new value the derived_from attribute</span>
</span><span id="XMLState-2971"><a href="#XMLState-2971"><span class="linenos">2971</span></a><span class="sd">        must be already present in the image configuration</span>
</span><span id="XMLState-2972"><a href="#XMLState-2972"><span class="linenos">2972</span></a>
</span><span id="XMLState-2973"><a href="#XMLState-2973"><span class="linenos">2973</span></a><span class="sd">        :param str uri: URI</span>
</span><span id="XMLState-2974"><a href="#XMLState-2974"><span class="linenos">2974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2975"><a href="#XMLState-2975"><span class="linenos">2975</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_derived_from</span><span class="p">():</span>
</span><span id="XMLState-2976"><a href="#XMLState-2976"><span class="linenos">2976</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_derived_from</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
</span><span id="XMLState-2977"><a href="#XMLState-2977"><span class="linenos">2977</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-2978"><a href="#XMLState-2978"><span class="linenos">2978</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="XMLState-2979"><a href="#XMLState-2979"><span class="linenos">2979</span></a><span class="s1">                No derived_from attribute configured in image &lt;type&gt;</span>
</span><span id="XMLState-2980"><a href="#XMLState-2980"><span class="linenos">2980</span></a>
</span><span id="XMLState-2981"><a href="#XMLState-2981"><span class="linenos">2981</span></a><span class="s1">                In order to set the uri </span><span class="si">{0}</span><span class="s1"> as base container reference</span>
</span><span id="XMLState-2982"><a href="#XMLState-2982"><span class="linenos">2982</span></a><span class="s1">                an initial derived_from attribute must be set in the</span>
</span><span id="XMLState-2983"><a href="#XMLState-2983"><span class="linenos">2983</span></a><span class="s1">                type section</span>
</span><span id="XMLState-2984"><a href="#XMLState-2984"><span class="linenos">2984</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState-2985"><a href="#XMLState-2985"><span class="linenos">2985</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</span><span id="XMLState-2986"><a href="#XMLState-2986"><span class="linenos">2986</span></a>
</span><span id="XMLState-2987"><a href="#XMLState-2987"><span class="linenos">2987</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_root_partition_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-2988"><a href="#XMLState-2988"><span class="linenos">2988</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2989"><a href="#XMLState-2989"><span class="linenos">2989</span></a><span class="sd">        Store PARTUUID provided in uuid as state information</span>
</span><span id="XMLState-2990"><a href="#XMLState-2990"><span class="linenos">2990</span></a>
</span><span id="XMLState-2991"><a href="#XMLState-2991"><span class="linenos">2991</span></a><span class="sd">        :param str uuid: PARTUUID</span>
</span><span id="XMLState-2992"><a href="#XMLState-2992"><span class="linenos">2992</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2993"><a href="#XMLState-2993"><span class="linenos">2993</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span> <span class="o">=</span> <span class="n">uuid</span>
</span><span id="XMLState-2994"><a href="#XMLState-2994"><span class="linenos">2994</span></a>
</span><span id="XMLState-2995"><a href="#XMLState-2995"><span class="linenos">2995</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_partition_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-2996"><a href="#XMLState-2996"><span class="linenos">2996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-2997"><a href="#XMLState-2997"><span class="linenos">2997</span></a><span class="sd">        Return preserved PARTUUID</span>
</span><span id="XMLState-2998"><a href="#XMLState-2998"><span class="linenos">2998</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-2999"><a href="#XMLState-2999"><span class="linenos">2999</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span>
</span><span id="XMLState-3000"><a href="#XMLState-3000"><span class="linenos">3000</span></a>
</span><span id="XMLState-3001"><a href="#XMLState-3001"><span class="linenos">3001</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_root_filesystem_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState-3002"><a href="#XMLState-3002"><span class="linenos">3002</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3003"><a href="#XMLState-3003"><span class="linenos">3003</span></a><span class="sd">        Store UUID provided in uuid as state information</span>
</span><span id="XMLState-3004"><a href="#XMLState-3004"><span class="linenos">3004</span></a>
</span><span id="XMLState-3005"><a href="#XMLState-3005"><span class="linenos">3005</span></a><span class="sd">        :param str uuid: UUID</span>
</span><span id="XMLState-3006"><a href="#XMLState-3006"><span class="linenos">3006</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3007"><a href="#XMLState-3007"><span class="linenos">3007</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span> <span class="o">=</span> <span class="n">uuid</span>
</span><span id="XMLState-3008"><a href="#XMLState-3008"><span class="linenos">3008</span></a>
</span><span id="XMLState-3009"><a href="#XMLState-3009"><span class="linenos">3009</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_filesystem_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState-3010"><a href="#XMLState-3010"><span class="linenos">3010</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3011"><a href="#XMLState-3011"><span class="linenos">3011</span></a><span class="sd">        Return preserved UUID</span>
</span><span id="XMLState-3012"><a href="#XMLState-3012"><span class="linenos">3012</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3013"><a href="#XMLState-3013"><span class="linenos">3013</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span>
</span><span id="XMLState-3014"><a href="#XMLState-3014"><span class="linenos">3014</span></a>
</span><span id="XMLState-3015"><a href="#XMLState-3015"><span class="linenos">3015</span></a>    <span class="nd">@staticmethod</span>
</span><span id="XMLState-3016"><a href="#XMLState-3016"><span class="linenos">3016</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="XMLState-3017"><a href="#XMLState-3017"><span class="linenos">3017</span></a>        <span class="n">packages_sections_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">]]</span>
</span><span id="XMLState-3018"><a href="#XMLState-3018"><span class="linenos">3018</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState-3019"><a href="#XMLState-3019"><span class="linenos">3019</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3020"><a href="#XMLState-3020"><span class="linenos">3020</span></a><span class="sd">        Dict of archive names and target dirs for packages section(s), if any</span>
</span><span id="XMLState-3021"><a href="#XMLState-3021"><span class="linenos">3021</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="XMLState-3022"><a href="#XMLState-3022"><span class="linenos">3022</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-3023"><a href="#XMLState-3023"><span class="linenos">3023</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3024"><a href="#XMLState-3024"><span class="linenos">3024</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3025"><a href="#XMLState-3025"><span class="linenos">3025</span></a>        <span class="k">if</span> <span class="n">packages_sections_names</span><span class="p">:</span>
</span><span id="XMLState-3026"><a href="#XMLState-3026"><span class="linenos">3026</span></a>            <span class="k">for</span> <span class="n">package_section_name</span> <span class="ow">in</span> <span class="n">packages_sections_names</span><span class="p">:</span>
</span><span id="XMLState-3027"><a href="#XMLState-3027"><span class="linenos">3027</span></a>                <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">package_section_name</span><span class="o">.</span><span class="n">get_archive</span><span class="p">():</span>
</span><span id="XMLState-3028"><a href="#XMLState-3028"><span class="linenos">3028</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="n">archive</span><span class="o">.</span><span class="n">get_target_dir</span><span class="p">()</span>
</span><span id="XMLState-3029"><a href="#XMLState-3029"><span class="linenos">3029</span></a>
</span><span id="XMLState-3030"><a href="#XMLState-3030"><span class="linenos">3030</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-3031"><a href="#XMLState-3031"><span class="linenos">3031</span></a>
</span><span id="XMLState-3032"><a href="#XMLState-3032"><span class="linenos">3032</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_archives_target_dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState-3033"><a href="#XMLState-3033"><span class="linenos">3033</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3034"><a href="#XMLState-3034"><span class="linenos">3034</span></a><span class="sd">        Dict of archive names and target dirs from the type=&quot;bootstrap&quot;</span>
</span><span id="XMLState-3035"><a href="#XMLState-3035"><span class="linenos">3035</span></a><span class="sd">        packages section(s)</span>
</span><span id="XMLState-3036"><a href="#XMLState-3036"><span class="linenos">3036</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="XMLState-3037"><a href="#XMLState-3037"><span class="linenos">3037</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-3038"><a href="#XMLState-3038"><span class="linenos">3038</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3039"><a href="#XMLState-3039"><span class="linenos">3039</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="XMLState-3040"><a href="#XMLState-3040"><span class="linenos">3040</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">])</span>
</span><span id="XMLState-3041"><a href="#XMLState-3041"><span class="linenos">3041</span></a>        <span class="p">)</span>
</span><span id="XMLState-3042"><a href="#XMLState-3042"><span class="linenos">3042</span></a>
</span><span id="XMLState-3043"><a href="#XMLState-3043"><span class="linenos">3043</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_archives_target_dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState-3044"><a href="#XMLState-3044"><span class="linenos">3044</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3045"><a href="#XMLState-3045"><span class="linenos">3045</span></a><span class="sd">        Dict of archive names and its target dir from the packages sections matching</span>
</span><span id="XMLState-3046"><a href="#XMLState-3046"><span class="linenos">3046</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState-3047"><a href="#XMLState-3047"><span class="linenos">3047</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="XMLState-3048"><a href="#XMLState-3048"><span class="linenos">3048</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState-3049"><a href="#XMLState-3049"><span class="linenos">3049</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3050"><a href="#XMLState-3050"><span class="linenos">3050</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="XMLState-3051"><a href="#XMLState-3051"><span class="linenos">3051</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()])</span>
</span><span id="XMLState-3052"><a href="#XMLState-3052"><span class="linenos">3052</span></a>        <span class="p">)</span>
</span><span id="XMLState-3053"><a href="#XMLState-3053"><span class="linenos">3053</span></a>
</span><span id="XMLState-3054"><a href="#XMLState-3054"><span class="linenos">3054</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_used_profiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profiles</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="XMLState-3055"><a href="#XMLState-3055"><span class="linenos">3055</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3056"><a href="#XMLState-3056"><span class="linenos">3056</span></a><span class="sd">        return list of profiles to use. The method looks up the</span>
</span><span id="XMLState-3057"><a href="#XMLState-3057"><span class="linenos">3057</span></a><span class="sd">        profiles section in the XML description and searches for</span>
</span><span id="XMLState-3058"><a href="#XMLState-3058"><span class="linenos">3058</span></a><span class="sd">        profiles matching the architecture. If no arch specifier</span>
</span><span id="XMLState-3059"><a href="#XMLState-3059"><span class="linenos">3059</span></a><span class="sd">        is set the profile is considered to be valid for any arch</span>
</span><span id="XMLState-3060"><a href="#XMLState-3060"><span class="linenos">3060</span></a>
</span><span id="XMLState-3061"><a href="#XMLState-3061"><span class="linenos">3061</span></a><span class="sd">        If the profiles argument is not set only profiles</span>
</span><span id="XMLState-3062"><a href="#XMLState-3062"><span class="linenos">3062</span></a><span class="sd">        marked with the attribute import=true will be selected.</span>
</span><span id="XMLState-3063"><a href="#XMLState-3063"><span class="linenos">3063</span></a><span class="sd">        Profiles specified in the argument will take the highest</span>
</span><span id="XMLState-3064"><a href="#XMLState-3064"><span class="linenos">3064</span></a><span class="sd">        priority and causes to skip the lookup of import profiles</span>
</span><span id="XMLState-3065"><a href="#XMLState-3065"><span class="linenos">3065</span></a><span class="sd">        in the XML description</span>
</span><span id="XMLState-3066"><a href="#XMLState-3066"><span class="linenos">3066</span></a>
</span><span id="XMLState-3067"><a href="#XMLState-3067"><span class="linenos">3067</span></a><span class="sd">        :param list profiles: selected profile names</span>
</span><span id="XMLState-3068"><a href="#XMLState-3068"><span class="linenos">3068</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3069"><a href="#XMLState-3069"><span class="linenos">3069</span></a>        <span class="n">available_profiles</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="XMLState-3070"><a href="#XMLState-3070"><span class="linenos">3070</span></a>        <span class="n">import_profiles</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3071"><a href="#XMLState-3071"><span class="linenos">3071</span></a>        <span class="k">for</span> <span class="n">profiles_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_profiles</span><span class="p">():</span>
</span><span id="XMLState-3072"><a href="#XMLState-3072"><span class="linenos">3072</span></a>            <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">profiles_section</span><span class="o">.</span><span class="n">get_profile</span><span class="p">():</span>
</span><span id="XMLState-3073"><a href="#XMLState-3073"><span class="linenos">3073</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile_matches_host_architecture</span><span class="p">(</span><span class="n">profile</span><span class="p">):</span>
</span><span id="XMLState-3074"><a href="#XMLState-3074"><span class="linenos">3074</span></a>                    <span class="n">name</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-3075"><a href="#XMLState-3075"><span class="linenos">3075</span></a>                    <span class="n">available_profiles</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">profile</span>
</span><span id="XMLState-3076"><a href="#XMLState-3076"><span class="linenos">3076</span></a>                    <span class="k">if</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_import</span><span class="p">():</span>
</span><span id="XMLState-3077"><a href="#XMLState-3077"><span class="linenos">3077</span></a>                        <span class="n">import_profiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="XMLState-3078"><a href="#XMLState-3078"><span class="linenos">3078</span></a>
</span><span id="XMLState-3079"><a href="#XMLState-3079"><span class="linenos">3079</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">profiles</span><span class="p">:</span>
</span><span id="XMLState-3080"><a href="#XMLState-3080"><span class="linenos">3080</span></a>            <span class="k">return</span> <span class="n">import_profiles</span>
</span><span id="XMLState-3081"><a href="#XMLState-3081"><span class="linenos">3081</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-3082"><a href="#XMLState-3082"><span class="linenos">3082</span></a>            <span class="n">resolved_profiles</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3083"><a href="#XMLState-3083"><span class="linenos">3083</span></a>            <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">profiles</span><span class="p">:</span>
</span><span id="XMLState-3084"><a href="#XMLState-3084"><span class="linenos">3084</span></a>                <span class="n">resolved_profiles</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_profile_dependencies</span><span class="p">(</span>
</span><span id="XMLState-3085"><a href="#XMLState-3085"><span class="linenos">3085</span></a>                    <span class="n">profile</span><span class="p">,</span> <span class="n">available_profiles</span><span class="p">,</span> <span class="n">resolved_profiles</span>
</span><span id="XMLState-3086"><a href="#XMLState-3086"><span class="linenos">3086</span></a>                <span class="p">)</span>
</span><span id="XMLState-3087"><a href="#XMLState-3087"><span class="linenos">3087</span></a>            <span class="k">return</span> <span class="n">resolved_profiles</span>
</span><span id="XMLState-3088"><a href="#XMLState-3088"><span class="linenos">3088</span></a>
</span><span id="XMLState-3089"><a href="#XMLState-3089"><span class="linenos">3089</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_section_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
</span><span id="XMLState-3090"><a href="#XMLState-3090"><span class="linenos">3090</span></a>        <span class="n">architectures</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_arch</span><span class="p">()</span>
</span><span id="XMLState-3091"><a href="#XMLState-3091"><span class="linenos">3091</span></a>        <span class="k">if</span> <span class="n">architectures</span><span class="p">:</span>
</span><span id="XMLState-3092"><a href="#XMLState-3092"><span class="linenos">3092</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="XMLState-3093"><a href="#XMLState-3093"><span class="linenos">3093</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState-3094"><a href="#XMLState-3094"><span class="linenos">3094</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState-3095"><a href="#XMLState-3095"><span class="linenos">3095</span></a>
</span><span id="XMLState-3096"><a href="#XMLState-3096"><span class="linenos">3096</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_base_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3097"><a href="#XMLState-3097"><span class="linenos">3097</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3098"><a href="#XMLState-3098"><span class="linenos">3098</span></a>        <span class="n">container_base</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3099"><a href="#XMLState-3099"><span class="linenos">3099</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3100"><a href="#XMLState-3100"><span class="linenos">3100</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-3101"><a href="#XMLState-3101"><span class="linenos">3101</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_tag</span><span class="p">()</span>
</span><span id="XMLState-3102"><a href="#XMLState-3102"><span class="linenos">3102</span></a>            <span class="n">maintainer</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_maintainer</span><span class="p">()</span>
</span><span id="XMLState-3103"><a href="#XMLState-3103"><span class="linenos">3103</span></a>            <span class="n">user</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">()</span>
</span><span id="XMLState-3104"><a href="#XMLState-3104"><span class="linenos">3104</span></a>            <span class="n">workingdir</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_workingdir</span><span class="p">()</span>
</span><span id="XMLState-3105"><a href="#XMLState-3105"><span class="linenos">3105</span></a>            <span class="n">additional_names</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_additionalnames</span><span class="p">()</span>
</span><span id="XMLState-3106"><a href="#XMLState-3106"><span class="linenos">3106</span></a>            <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="XMLState-3107"><a href="#XMLState-3107"><span class="linenos">3107</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;container_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="XMLState-3108"><a href="#XMLState-3108"><span class="linenos">3108</span></a>
</span><span id="XMLState-3109"><a href="#XMLState-3109"><span class="linenos">3109</span></a>            <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
</span><span id="XMLState-3110"><a href="#XMLState-3110"><span class="linenos">3110</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;container_tag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag</span>
</span><span id="XMLState-3111"><a href="#XMLState-3111"><span class="linenos">3111</span></a>
</span><span id="XMLState-3112"><a href="#XMLState-3112"><span class="linenos">3112</span></a>            <span class="k">if</span> <span class="n">additional_names</span><span class="p">:</span>
</span><span id="XMLState-3113"><a href="#XMLState-3113"><span class="linenos">3113</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;additional_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">additional_names</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="XMLState-3114"><a href="#XMLState-3114"><span class="linenos">3114</span></a>
</span><span id="XMLState-3115"><a href="#XMLState-3115"><span class="linenos">3115</span></a>            <span class="k">if</span> <span class="n">maintainer</span><span class="p">:</span>
</span><span id="XMLState-3116"><a href="#XMLState-3116"><span class="linenos">3116</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;maintainer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maintainer</span>
</span><span id="XMLState-3117"><a href="#XMLState-3117"><span class="linenos">3117</span></a>
</span><span id="XMLState-3118"><a href="#XMLState-3118"><span class="linenos">3118</span></a>            <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
</span><span id="XMLState-3119"><a href="#XMLState-3119"><span class="linenos">3119</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
</span><span id="XMLState-3120"><a href="#XMLState-3120"><span class="linenos">3120</span></a>
</span><span id="XMLState-3121"><a href="#XMLState-3121"><span class="linenos">3121</span></a>            <span class="k">if</span> <span class="n">workingdir</span><span class="p">:</span>
</span><span id="XMLState-3122"><a href="#XMLState-3122"><span class="linenos">3122</span></a>                <span class="n">container_base</span><span class="p">[</span><span class="s1">&#39;workingdir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">workingdir</span>
</span><span id="XMLState-3123"><a href="#XMLState-3123"><span class="linenos">3123</span></a>
</span><span id="XMLState-3124"><a href="#XMLState-3124"><span class="linenos">3124</span></a>        <span class="k">return</span> <span class="n">container_base</span>
</span><span id="XMLState-3125"><a href="#XMLState-3125"><span class="linenos">3125</span></a>
</span><span id="XMLState-3126"><a href="#XMLState-3126"><span class="linenos">3126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3127"><a href="#XMLState-3127"><span class="linenos">3127</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3128"><a href="#XMLState-3128"><span class="linenos">3128</span></a>        <span class="n">container_entry</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3129"><a href="#XMLState-3129"><span class="linenos">3129</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3130"><a href="#XMLState-3130"><span class="linenos">3130</span></a>            <span class="n">entrypoint</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_entrypoint</span><span class="p">()</span>
</span><span id="XMLState-3131"><a href="#XMLState-3131"><span class="linenos">3131</span></a>            <span class="k">if</span> <span class="n">entrypoint</span> <span class="ow">and</span> <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">():</span>
</span><span id="XMLState-3132"><a href="#XMLState-3132"><span class="linenos">3132</span></a>                <span class="n">container_entry</span><span class="p">[</span><span class="s1">&#39;entry_command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState-3133"><a href="#XMLState-3133"><span class="linenos">3133</span></a>                    <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">()</span>
</span><span id="XMLState-3134"><a href="#XMLState-3134"><span class="linenos">3134</span></a>                <span class="p">]</span>
</span><span id="XMLState-3135"><a href="#XMLState-3135"><span class="linenos">3135</span></a>                <span class="n">argument_list</span> <span class="o">=</span> <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_argument</span><span class="p">()</span>
</span><span id="XMLState-3136"><a href="#XMLState-3136"><span class="linenos">3136</span></a>                <span class="k">if</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="XMLState-3137"><a href="#XMLState-3137"><span class="linenos">3137</span></a>                    <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="XMLState-3138"><a href="#XMLState-3138"><span class="linenos">3138</span></a>                        <span class="n">container_entry</span><span class="p">[</span><span class="s1">&#39;entry_command&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-3139"><a href="#XMLState-3139"><span class="linenos">3139</span></a>                            <span class="n">argument</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-3140"><a href="#XMLState-3140"><span class="linenos">3140</span></a>                        <span class="p">)</span>
</span><span id="XMLState-3141"><a href="#XMLState-3141"><span class="linenos">3141</span></a>            <span class="k">elif</span> <span class="n">entrypoint</span> <span class="ow">and</span> <span class="n">entrypoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_clear</span><span class="p">():</span>
</span><span id="XMLState-3142"><a href="#XMLState-3142"><span class="linenos">3142</span></a>                <span class="n">container_entry</span><span class="p">[</span><span class="s1">&#39;entry_command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3143"><a href="#XMLState-3143"><span class="linenos">3143</span></a>        <span class="k">return</span> <span class="n">container_entry</span>
</span><span id="XMLState-3144"><a href="#XMLState-3144"><span class="linenos">3144</span></a>
</span><span id="XMLState-3145"><a href="#XMLState-3145"><span class="linenos">3145</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_subcommand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3146"><a href="#XMLState-3146"><span class="linenos">3146</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3147"><a href="#XMLState-3147"><span class="linenos">3147</span></a>        <span class="n">container_subcommand</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3148"><a href="#XMLState-3148"><span class="linenos">3148</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3149"><a href="#XMLState-3149"><span class="linenos">3149</span></a>            <span class="n">subcommand</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_subcommand</span><span class="p">()</span>
</span><span id="XMLState-3150"><a href="#XMLState-3150"><span class="linenos">3150</span></a>            <span class="k">if</span> <span class="n">subcommand</span> <span class="ow">and</span> <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">():</span>
</span><span id="XMLState-3151"><a href="#XMLState-3151"><span class="linenos">3151</span></a>                <span class="n">container_subcommand</span><span class="p">[</span><span class="s1">&#39;entry_subcommand&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState-3152"><a href="#XMLState-3152"><span class="linenos">3152</span></a>                    <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_execute</span><span class="p">()</span>
</span><span id="XMLState-3153"><a href="#XMLState-3153"><span class="linenos">3153</span></a>                <span class="p">]</span>
</span><span id="XMLState-3154"><a href="#XMLState-3154"><span class="linenos">3154</span></a>                <span class="n">argument_list</span> <span class="o">=</span> <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_argument</span><span class="p">()</span>
</span><span id="XMLState-3155"><a href="#XMLState-3155"><span class="linenos">3155</span></a>                <span class="k">if</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="XMLState-3156"><a href="#XMLState-3156"><span class="linenos">3156</span></a>                    <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">argument_list</span><span class="p">:</span>
</span><span id="XMLState-3157"><a href="#XMLState-3157"><span class="linenos">3157</span></a>                        <span class="n">container_subcommand</span><span class="p">[</span><span class="s1">&#39;entry_subcommand&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-3158"><a href="#XMLState-3158"><span class="linenos">3158</span></a>                            <span class="n">argument</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState-3159"><a href="#XMLState-3159"><span class="linenos">3159</span></a>                        <span class="p">)</span>
</span><span id="XMLState-3160"><a href="#XMLState-3160"><span class="linenos">3160</span></a>            <span class="k">elif</span> <span class="n">subcommand</span> <span class="ow">and</span> <span class="n">subcommand</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_clear</span><span class="p">():</span>
</span><span id="XMLState-3161"><a href="#XMLState-3161"><span class="linenos">3161</span></a>                <span class="n">container_subcommand</span><span class="p">[</span><span class="s1">&#39;entry_subcommand&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3162"><a href="#XMLState-3162"><span class="linenos">3162</span></a>        <span class="k">return</span> <span class="n">container_subcommand</span>
</span><span id="XMLState-3163"><a href="#XMLState-3163"><span class="linenos">3163</span></a>
</span><span id="XMLState-3164"><a href="#XMLState-3164"><span class="linenos">3164</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_expose_ports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3165"><a href="#XMLState-3165"><span class="linenos">3165</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3166"><a href="#XMLState-3166"><span class="linenos">3166</span></a>        <span class="n">container_expose</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3167"><a href="#XMLState-3167"><span class="linenos">3167</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3168"><a href="#XMLState-3168"><span class="linenos">3168</span></a>            <span class="n">expose</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_expose</span><span class="p">()</span>
</span><span id="XMLState-3169"><a href="#XMLState-3169"><span class="linenos">3169</span></a>            <span class="k">if</span> <span class="n">expose</span> <span class="ow">and</span> <span class="n">expose</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_port</span><span class="p">():</span>
</span><span id="XMLState-3170"><a href="#XMLState-3170"><span class="linenos">3170</span></a>                <span class="n">container_expose</span><span class="p">[</span><span class="s1">&#39;expose_ports&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3171"><a href="#XMLState-3171"><span class="linenos">3171</span></a>                <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">expose</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_port</span><span class="p">():</span>
</span><span id="XMLState-3172"><a href="#XMLState-3172"><span class="linenos">3172</span></a>                    <span class="n">container_expose</span><span class="p">[</span><span class="s1">&#39;expose_ports&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState-3173"><a href="#XMLState-3173"><span class="linenos">3173</span></a>                        <span class="nb">format</span><span class="p">(</span><span class="n">port</span><span class="o">.</span><span class="n">get_number</span><span class="p">())</span>
</span><span id="XMLState-3174"><a href="#XMLState-3174"><span class="linenos">3174</span></a>                    <span class="p">)</span>
</span><span id="XMLState-3175"><a href="#XMLState-3175"><span class="linenos">3175</span></a>        <span class="k">return</span> <span class="n">container_expose</span>
</span><span id="XMLState-3176"><a href="#XMLState-3176"><span class="linenos">3176</span></a>
</span><span id="XMLState-3177"><a href="#XMLState-3177"><span class="linenos">3177</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3178"><a href="#XMLState-3178"><span class="linenos">3178</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3179"><a href="#XMLState-3179"><span class="linenos">3179</span></a>        <span class="n">container_volumes</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3180"><a href="#XMLState-3180"><span class="linenos">3180</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3181"><a href="#XMLState-3181"><span class="linenos">3181</span></a>            <span class="n">volumes</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_volumes</span><span class="p">()</span>
</span><span id="XMLState-3182"><a href="#XMLState-3182"><span class="linenos">3182</span></a>            <span class="k">if</span> <span class="n">volumes</span> <span class="ow">and</span> <span class="n">volumes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_volume</span><span class="p">():</span>
</span><span id="XMLState-3183"><a href="#XMLState-3183"><span class="linenos">3183</span></a>                <span class="n">container_volumes</span><span class="p">[</span><span class="s1">&#39;volumes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3184"><a href="#XMLState-3184"><span class="linenos">3184</span></a>                <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">volumes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_volume</span><span class="p">():</span>
</span><span id="XMLState-3185"><a href="#XMLState-3185"><span class="linenos">3185</span></a>                    <span class="n">container_volumes</span><span class="p">[</span><span class="s1">&#39;volumes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">volume</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState-3186"><a href="#XMLState-3186"><span class="linenos">3186</span></a>        <span class="k">return</span> <span class="n">container_volumes</span>
</span><span id="XMLState-3187"><a href="#XMLState-3187"><span class="linenos">3187</span></a>
</span><span id="XMLState-3188"><a href="#XMLState-3188"><span class="linenos">3188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_stopsignal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="XMLState-3189"><a href="#XMLState-3189"><span class="linenos">3189</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3190"><a href="#XMLState-3190"><span class="linenos">3190</span></a>        <span class="n">container_stopsignal</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3191"><a href="#XMLState-3191"><span class="linenos">3191</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3192"><a href="#XMLState-3192"><span class="linenos">3192</span></a>            <span class="n">stopsignal_section</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_stopsignal</span><span class="p">()</span>
</span><span id="XMLState-3193"><a href="#XMLState-3193"><span class="linenos">3193</span></a>            <span class="k">if</span> <span class="n">stopsignal_section</span><span class="p">:</span>
</span><span id="XMLState-3194"><a href="#XMLState-3194"><span class="linenos">3194</span></a>                <span class="n">container_stopsignal</span><span class="p">[</span><span class="s1">&#39;stopsignal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stopsignal_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-3195"><a href="#XMLState-3195"><span class="linenos">3195</span></a>        <span class="k">return</span> <span class="n">container_stopsignal</span>
</span><span id="XMLState-3196"><a href="#XMLState-3196"><span class="linenos">3196</span></a>
</span><span id="XMLState-3197"><a href="#XMLState-3197"><span class="linenos">3197</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_environment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3198"><a href="#XMLState-3198"><span class="linenos">3198</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3199"><a href="#XMLState-3199"><span class="linenos">3199</span></a>        <span class="n">container_env</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3200"><a href="#XMLState-3200"><span class="linenos">3200</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3201"><a href="#XMLState-3201"><span class="linenos">3201</span></a>            <span class="n">environment</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_environment</span><span class="p">()</span>
</span><span id="XMLState-3202"><a href="#XMLState-3202"><span class="linenos">3202</span></a>            <span class="k">if</span> <span class="n">environment</span> <span class="ow">and</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="XMLState-3203"><a href="#XMLState-3203"><span class="linenos">3203</span></a>                <span class="n">container_env</span><span class="p">[</span><span class="s1">&#39;environment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3204"><a href="#XMLState-3204"><span class="linenos">3204</span></a>                <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="XMLState-3205"><a href="#XMLState-3205"><span class="linenos">3205</span></a>                    <span class="n">container_env</span><span class="p">[</span><span class="s1">&#39;environment&#39;</span><span class="p">][</span><span class="n">env</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> \
</span><span id="XMLState-3206"><a href="#XMLState-3206"><span class="linenos">3206</span></a>                        <span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
</span><span id="XMLState-3207"><a href="#XMLState-3207"><span class="linenos">3207</span></a>        <span class="k">return</span> <span class="n">container_env</span>
</span><span id="XMLState-3208"><a href="#XMLState-3208"><span class="linenos">3208</span></a>
</span><span id="XMLState-3209"><a href="#XMLState-3209"><span class="linenos">3209</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3210"><a href="#XMLState-3210"><span class="linenos">3210</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3211"><a href="#XMLState-3211"><span class="linenos">3211</span></a>        <span class="n">container_labels</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3212"><a href="#XMLState-3212"><span class="linenos">3212</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3213"><a href="#XMLState-3213"><span class="linenos">3213</span></a>            <span class="n">labels</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()</span>
</span><span id="XMLState-3214"><a href="#XMLState-3214"><span class="linenos">3214</span></a>            <span class="k">if</span> <span class="n">labels</span> <span class="ow">and</span> <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
</span><span id="XMLState-3215"><a href="#XMLState-3215"><span class="linenos">3215</span></a>                <span class="n">container_labels</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3216"><a href="#XMLState-3216"><span class="linenos">3216</span></a>                <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
</span><span id="XMLState-3217"><a href="#XMLState-3217"><span class="linenos">3217</span></a>                    <span class="n">container_labels</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">][</span><span class="n">label</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> \
</span><span id="XMLState-3218"><a href="#XMLState-3218"><span class="linenos">3218</span></a>                        <span class="n">label</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
</span><span id="XMLState-3219"><a href="#XMLState-3219"><span class="linenos">3219</span></a>        <span class="k">return</span> <span class="n">container_labels</span>
</span><span id="XMLState-3220"><a href="#XMLState-3220"><span class="linenos">3220</span></a>
</span><span id="XMLState-3221"><a href="#XMLState-3221"><span class="linenos">3221</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_docker_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="XMLState-3222"><a href="#XMLState-3222"><span class="linenos">3222</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState-3223"><a href="#XMLState-3223"><span class="linenos">3223</span></a>        <span class="n">container_history</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3224"><a href="#XMLState-3224"><span class="linenos">3224</span></a>        <span class="k">if</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState-3225"><a href="#XMLState-3225"><span class="linenos">3225</span></a>            <span class="n">history</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_history</span><span class="p">()</span>
</span><span id="XMLState-3226"><a href="#XMLState-3226"><span class="linenos">3226</span></a>            <span class="k">if</span> <span class="n">history</span><span class="p">:</span>
</span><span id="XMLState-3227"><a href="#XMLState-3227"><span class="linenos">3227</span></a>                <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState-3228"><a href="#XMLState-3228"><span class="linenos">3228</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_created_by</span><span class="p">():</span>
</span><span id="XMLState-3229"><a href="#XMLState-3229"><span class="linenos">3229</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;created_by&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="XMLState-3230"><a href="#XMLState-3230"><span class="linenos">3230</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_created_by</span><span class="p">()</span>
</span><span id="XMLState-3231"><a href="#XMLState-3231"><span class="linenos">3231</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_author</span><span class="p">():</span>
</span><span id="XMLState-3232"><a href="#XMLState-3232"><span class="linenos">3232</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;author&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="XMLState-3233"><a href="#XMLState-3233"><span class="linenos">3233</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_author</span><span class="p">()</span>
</span><span id="XMLState-3234"><a href="#XMLState-3234"><span class="linenos">3234</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_launcher</span><span class="p">():</span>
</span><span id="XMLState-3235"><a href="#XMLState-3235"><span class="linenos">3235</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;launcher&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="XMLState-3236"><a href="#XMLState-3236"><span class="linenos">3236</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_launcher</span><span class="p">()</span>
</span><span id="XMLState-3237"><a href="#XMLState-3237"><span class="linenos">3237</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_application_id</span><span class="p">():</span>
</span><span id="XMLState-3238"><a href="#XMLState-3238"><span class="linenos">3238</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;application_id&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="XMLState-3239"><a href="#XMLState-3239"><span class="linenos">3239</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_application_id</span><span class="p">()</span>
</span><span id="XMLState-3240"><a href="#XMLState-3240"><span class="linenos">3240</span></a>                <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_package_version</span><span class="p">():</span>
</span><span id="XMLState-3241"><a href="#XMLState-3241"><span class="linenos">3241</span></a>                    <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;package_version&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="XMLState-3242"><a href="#XMLState-3242"><span class="linenos">3242</span></a>                        <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_package_version</span><span class="p">()</span>
</span><span id="XMLState-3243"><a href="#XMLState-3243"><span class="linenos">3243</span></a>                <span class="n">container_history</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="XMLState-3244"><a href="#XMLState-3244"><span class="linenos">3244</span></a>                    <span class="n">history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_valueOf_</span><span class="p">()</span>
</span><span id="XMLState-3245"><a href="#XMLState-3245"><span class="linenos">3245</span></a>        <span class="k">return</span> <span class="n">container_history</span>
</span><span id="XMLState-3246"><a href="#XMLState-3246"><span class="linenos">3246</span></a>
</span><span id="XMLState-3247"><a href="#XMLState-3247"><span class="linenos">3247</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_solve_profile_dependencies</span><span class="p">(</span>
</span><span id="XMLState-3248"><a href="#XMLState-3248"><span class="linenos">3248</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">available_profiles</span><span class="p">,</span> <span class="n">current_profiles</span>
</span><span id="XMLState-3249"><a href="#XMLState-3249"><span class="linenos">3249</span></a>    <span class="p">):</span>
</span><span id="XMLState-3250"><a href="#XMLState-3250"><span class="linenos">3250</span></a>        <span class="k">if</span> <span class="n">profile</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">available_profiles</span><span class="p">:</span>
</span><span id="XMLState-3251"><a href="#XMLState-3251"><span class="linenos">3251</span></a>            <span class="k">raise</span> <span class="n">KiwiProfileNotFound</span><span class="p">(</span>
</span><span id="XMLState-3252"><a href="#XMLState-3252"><span class="linenos">3252</span></a>                <span class="s1">&#39;profile </span><span class="si">{0}</span><span class="s1"> not found for host arch </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-3253"><a href="#XMLState-3253"><span class="linenos">3253</span></a>                    <span class="n">profile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span>
</span><span id="XMLState-3254"><a href="#XMLState-3254"><span class="linenos">3254</span></a>                <span class="p">)</span>
</span><span id="XMLState-3255"><a href="#XMLState-3255"><span class="linenos">3255</span></a>            <span class="p">)</span>
</span><span id="XMLState-3256"><a href="#XMLState-3256"><span class="linenos">3256</span></a>        <span class="n">profiles_to_add</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3257"><a href="#XMLState-3257"><span class="linenos">3257</span></a>        <span class="k">if</span> <span class="n">profile</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_profiles</span><span class="p">:</span>
</span><span id="XMLState-3258"><a href="#XMLState-3258"><span class="linenos">3258</span></a>            <span class="n">profiles_to_add</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
</span><span id="XMLState-3259"><a href="#XMLState-3259"><span class="linenos">3259</span></a>            <span class="k">for</span> <span class="n">required</span> <span class="ow">in</span> <span class="n">available_profiles</span><span class="p">[</span><span class="n">profile</span><span class="p">]</span><span class="o">.</span><span class="n">get_requires</span><span class="p">():</span>
</span><span id="XMLState-3260"><a href="#XMLState-3260"><span class="linenos">3260</span></a>                <span class="k">if</span> <span class="n">required</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_profiles</span><span class="p">:</span>
</span><span id="XMLState-3261"><a href="#XMLState-3261"><span class="linenos">3261</span></a>                    <span class="n">profiles_to_add</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_profile_dependencies</span><span class="p">(</span>
</span><span id="XMLState-3262"><a href="#XMLState-3262"><span class="linenos">3262</span></a>                        <span class="n">required</span><span class="o">.</span><span class="n">get_profile</span><span class="p">(),</span> <span class="n">available_profiles</span><span class="p">,</span>
</span><span id="XMLState-3263"><a href="#XMLState-3263"><span class="linenos">3263</span></a>                        <span class="n">current_profiles</span> <span class="o">+</span> <span class="n">profiles_to_add</span>
</span><span id="XMLState-3264"><a href="#XMLState-3264"><span class="linenos">3264</span></a>                    <span class="p">)</span>
</span><span id="XMLState-3265"><a href="#XMLState-3265"><span class="linenos">3265</span></a>        <span class="k">return</span> <span class="n">profiles_to_add</span>
</span><span id="XMLState-3266"><a href="#XMLState-3266"><span class="linenos">3266</span></a>
</span><span id="XMLState-3267"><a href="#XMLState-3267"><span class="linenos">3267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_type_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="XMLState-3268"><a href="#XMLState-3268"><span class="linenos">3268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3269"><a href="#XMLState-3269"><span class="linenos">3269</span></a><span class="sd">        find type section matching build type and profiles or default</span>
</span><span id="XMLState-3270"><a href="#XMLState-3270"><span class="linenos">3270</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3271"><a href="#XMLState-3271"><span class="linenos">3271</span></a>        <span class="c1"># lookup all preferences sections for selected profiles</span>
</span><span id="XMLState-3272"><a href="#XMLState-3272"><span class="linenos">3272</span></a>        <span class="n">image_type_sections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3273"><a href="#XMLState-3273"><span class="linenos">3273</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState-3274"><a href="#XMLState-3274"><span class="linenos">3274</span></a>            <span class="n">image_type_sections</span> <span class="o">+=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span>
</span><span id="XMLState-3275"><a href="#XMLState-3275"><span class="linenos">3275</span></a>
</span><span id="XMLState-3276"><a href="#XMLState-3276"><span class="linenos">3276</span></a>        <span class="c1"># lookup if build type matches provided type</span>
</span><span id="XMLState-3277"><a href="#XMLState-3277"><span class="linenos">3277</span></a>        <span class="k">if</span> <span class="n">build_type</span><span class="p">:</span>
</span><span id="XMLState-3278"><a href="#XMLState-3278"><span class="linenos">3278</span></a>            <span class="k">for</span> <span class="n">image_type</span> <span class="ow">in</span> <span class="n">image_type_sections</span><span class="p">:</span>
</span><span id="XMLState-3279"><a href="#XMLState-3279"><span class="linenos">3279</span></a>                <span class="k">if</span> <span class="n">build_type</span> <span class="o">==</span> <span class="n">image_type</span><span class="o">.</span><span class="n">get_image</span><span class="p">():</span>
</span><span id="XMLState-3280"><a href="#XMLState-3280"><span class="linenos">3280</span></a>                    <span class="k">return</span> <span class="n">image_type</span>
</span><span id="XMLState-3281"><a href="#XMLState-3281"><span class="linenos">3281</span></a>            <span class="k">raise</span> <span class="n">KiwiTypeNotFound</span><span class="p">(</span>
</span><span id="XMLState-3282"><a href="#XMLState-3282"><span class="linenos">3282</span></a>                <span class="s1">&#39;Build type </span><span class="si">{0!r}</span><span class="s1"> not found for applied profiles: </span><span class="si">{1!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-3283"><a href="#XMLState-3283"><span class="linenos">3283</span></a>                    <span class="n">build_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span>
</span><span id="XMLState-3284"><a href="#XMLState-3284"><span class="linenos">3284</span></a>                <span class="p">)</span>
</span><span id="XMLState-3285"><a href="#XMLState-3285"><span class="linenos">3285</span></a>            <span class="p">)</span>
</span><span id="XMLState-3286"><a href="#XMLState-3286"><span class="linenos">3286</span></a>
</span><span id="XMLState-3287"><a href="#XMLState-3287"><span class="linenos">3287</span></a>        <span class="c1"># lookup if build type matches primary type</span>
</span><span id="XMLState-3288"><a href="#XMLState-3288"><span class="linenos">3288</span></a>        <span class="k">for</span> <span class="n">image_type</span> <span class="ow">in</span> <span class="n">image_type_sections</span><span class="p">:</span>
</span><span id="XMLState-3289"><a href="#XMLState-3289"><span class="linenos">3289</span></a>            <span class="k">if</span> <span class="n">image_type</span><span class="o">.</span><span class="n">get_primary</span><span class="p">():</span>
</span><span id="XMLState-3290"><a href="#XMLState-3290"><span class="linenos">3290</span></a>                <span class="k">return</span> <span class="n">image_type</span>
</span><span id="XMLState-3291"><a href="#XMLState-3291"><span class="linenos">3291</span></a>
</span><span id="XMLState-3292"><a href="#XMLState-3292"><span class="linenos">3292</span></a>        <span class="c1"># build type is first type section in XML sequence</span>
</span><span id="XMLState-3293"><a href="#XMLState-3293"><span class="linenos">3293</span></a>        <span class="k">if</span> <span class="n">image_type_sections</span><span class="p">:</span>
</span><span id="XMLState-3294"><a href="#XMLState-3294"><span class="linenos">3294</span></a>            <span class="k">return</span> <span class="n">image_type_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState-3295"><a href="#XMLState-3295"><span class="linenos">3295</span></a>        <span class="k">raise</span> <span class="n">KiwiTypeNotFound</span><span class="p">(</span>
</span><span id="XMLState-3296"><a href="#XMLState-3296"><span class="linenos">3296</span></a>            <span class="s1">&#39;No build type defined with applied profiles: </span><span class="si">{0!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState-3297"><a href="#XMLState-3297"><span class="linenos">3297</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span>
</span><span id="XMLState-3298"><a href="#XMLState-3298"><span class="linenos">3298</span></a>            <span class="p">)</span>
</span><span id="XMLState-3299"><a href="#XMLState-3299"><span class="linenos">3299</span></a>        <span class="p">)</span>
</span><span id="XMLState-3300"><a href="#XMLState-3300"><span class="linenos">3300</span></a>
</span><span id="XMLState-3301"><a href="#XMLState-3301"><span class="linenos">3301</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_abstract</span><span class="p">):</span>
</span><span id="XMLState-3302"><a href="#XMLState-3302"><span class="linenos">3302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState-3303"><a href="#XMLState-3303"><span class="linenos">3303</span></a><span class="sd">        return only those sections matching the instance stored</span>
</span><span id="XMLState-3304"><a href="#XMLState-3304"><span class="linenos">3304</span></a><span class="sd">        profile list from the given XML abstract. Sections without</span>
</span><span id="XMLState-3305"><a href="#XMLState-3305"><span class="linenos">3305</span></a><span class="sd">        a profile are wildcard sections and will be used in any</span>
</span><span id="XMLState-3306"><a href="#XMLState-3306"><span class="linenos">3306</span></a><span class="sd">        case</span>
</span><span id="XMLState-3307"><a href="#XMLState-3307"><span class="linenos">3307</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState-3308"><a href="#XMLState-3308"><span class="linenos">3308</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState-3309"><a href="#XMLState-3309"><span class="linenos">3309</span></a>        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">xml_abstract</span><span class="p">:</span>
</span><span id="XMLState-3310"><a href="#XMLState-3310"><span class="linenos">3310</span></a>            <span class="n">profiles</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_profiles</span><span class="p">()</span>
</span><span id="XMLState-3311"><a href="#XMLState-3311"><span class="linenos">3311</span></a>            <span class="k">if</span> <span class="n">profiles</span><span class="p">:</span>
</span><span id="XMLState-3312"><a href="#XMLState-3312"><span class="linenos">3312</span></a>                <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">profiles</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="XMLState-3313"><a href="#XMLState-3313"><span class="linenos">3313</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span> <span class="ow">and</span> <span class="n">profile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span><span class="p">:</span>
</span><span id="XMLState-3314"><a href="#XMLState-3314"><span class="linenos">3314</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span><span id="XMLState-3315"><a href="#XMLState-3315"><span class="linenos">3315</span></a>                        <span class="k">break</span>
</span><span id="XMLState-3316"><a href="#XMLState-3316"><span class="linenos">3316</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-3317"><a href="#XMLState-3317"><span class="linenos">3317</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span><span id="XMLState-3318"><a href="#XMLState-3318"><span class="linenos">3318</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="XMLState-3319"><a href="#XMLState-3319"><span class="linenos">3319</span></a>
</span><span id="XMLState-3320"><a href="#XMLState-3320"><span class="linenos">3320</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_to_volume_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="XMLState-3321"><a href="#XMLState-3321"><span class="linenos">3321</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="XMLState-3322"><a href="#XMLState-3322"><span class="linenos">3322</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^\/+&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="XMLState-3323"><a href="#XMLState-3323"><span class="linenos">3323</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
</span><span id="XMLState-3324"><a href="#XMLState-3324"><span class="linenos">3324</span></a>        <span class="k">return</span> <span class="n">name</span>
</span><span id="XMLState-3325"><a href="#XMLState-3325"><span class="linenos">3325</span></a>
</span><span id="XMLState-3326"><a href="#XMLState-3326"><span class="linenos">3326</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_to_mega_byte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="XMLState-3327"><a href="#XMLState-3327"><span class="linenos">3327</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)([MG]*)&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
</span><span id="XMLState-3328"><a href="#XMLState-3328"><span class="linenos">3328</span></a>        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
</span><span id="XMLState-3329"><a href="#XMLState-3329"><span class="linenos">3329</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="XMLState-3330"><a href="#XMLState-3330"><span class="linenos">3330</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="XMLState-3331"><a href="#XMLState-3331"><span class="linenos">3331</span></a>            <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
</span><span id="XMLState-3332"><a href="#XMLState-3332"><span class="linenos">3332</span></a>                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1024</span>
</span><span id="XMLState-3333"><a href="#XMLState-3333"><span class="linenos">3333</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-3334"><a href="#XMLState-3334"><span class="linenos">3334</span></a>                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="XMLState-3335"><a href="#XMLState-3335"><span class="linenos">3335</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState-3336"><a href="#XMLState-3336"><span class="linenos">3336</span></a>            <span class="k">return</span> <span class="n">size</span>
</span></pre></div>


            <div class="docstring"><p><strong>Implements methods to get stateful information from the XML data</strong></p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object xml_data</strong>:  parse result from XMLDescription.load()</li>
<li><strong>list profiles</strong>:  list of used profiles</li>
<li><strong>object build_type</strong>:  build <type> section reference</li>
</ul>
</div>


                            <div id="XMLState.__init__" class="classattr">
                                        <input id="XMLState.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">XMLState</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">xml_data</span><span class="p">:</span> <span class="n">Any</span>, </span><span class="param"><span class="n">profiles</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">build_type</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="XMLState.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.__init__-113"><a href="#XMLState.__init__-113"><span class="linenos">113</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="XMLState.__init__-114"><a href="#XMLState.__init__-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">xml_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">profiles</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.__init__-115"><a href="#XMLState.__init__-115"><span class="linenos">115</span></a>        <span class="n">build_type</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.__init__-116"><a href="#XMLState.__init__-116"><span class="linenos">116</span></a>    <span class="p">):</span>
</span><span id="XMLState.__init__-117"><a href="#XMLState.__init__-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.__init__-118"><a href="#XMLState.__init__-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.__init__-119"><a href="#XMLState.__init__-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">PLATFORM_MACHINE</span>
</span><span id="XMLState.__init__-120"><a href="#XMLState.__init__-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span> <span class="o">=</span> <span class="n">xml_data</span>
</span><span id="XMLState.__init__-121"><a href="#XMLState.__init__-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_used_profiles</span><span class="p">(</span><span class="n">profiles</span><span class="p">)</span>
</span><span id="XMLState.__init__-122"><a href="#XMLState.__init__-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_type_section</span><span class="p">(</span>
</span><span id="XMLState.__init__-123"><a href="#XMLState.__init__-123"><span class="linenos">123</span></a>            <span class="n">build_type</span>
</span><span id="XMLState.__init__-124"><a href="#XMLState.__init__-124"><span class="linenos">124</span></a>        <span class="p">)</span>
</span><span id="XMLState.__init__-125"><a href="#XMLState.__init__-125"><span class="linenos">125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resolve_this_path</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="XMLState.root_partition_uuid" class="classattr">
                                <div class="attr variable">
            <span class="name">root_partition_uuid</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#XMLState.root_partition_uuid"></a>
    
    

                            </div>
                            <div id="XMLState.root_filesystem_uuid" class="classattr">
                                <div class="attr variable">
            <span class="name">root_filesystem_uuid</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#XMLState.root_filesystem_uuid"></a>
    
    

                            </div>
                            <div id="XMLState.host_architecture" class="classattr">
                                <div class="attr variable">
            <span class="name">host_architecture</span>

        
    </div>
    <a class="headerlink" href="#XMLState.host_architecture"></a>
    
    

                            </div>
                            <div id="XMLState.xml_data" class="classattr">
                                <div class="attr variable">
            <span class="name">xml_data</span>

        
    </div>
    <a class="headerlink" href="#XMLState.xml_data"></a>
    
    

                            </div>
                            <div id="XMLState.profiles" class="classattr">
                                <div class="attr variable">
            <span class="name">profiles</span>

        
    </div>
    <a class="headerlink" href="#XMLState.profiles"></a>
    
    

                            </div>
                            <div id="XMLState.build_type" class="classattr">
                                <div class="attr variable">
            <span class="name">build_type</span>

        
    </div>
    <a class="headerlink" href="#XMLState.build_type"></a>
    
    

                            </div>
                            <div id="XMLState.get_preferences_sections" class="classattr">
                                        <input id="XMLState.get_preferences_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_preferences_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_preferences_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_preferences_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_preferences_sections-127"><a href="#XMLState.get_preferences_sections-127"><span class="linenos">127</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_preferences_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_preferences_sections-128"><a href="#XMLState.get_preferences_sections-128"><span class="linenos">128</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_preferences_sections-129"><a href="#XMLState.get_preferences_sections-129"><span class="linenos">129</span></a><span class="sd">        All preferences sections for the selected profiles that match the</span>
</span><span id="XMLState.get_preferences_sections-130"><a href="#XMLState.get_preferences_sections-130"><span class="linenos">130</span></a><span class="sd">        host architecture</span>
</span><span id="XMLState.get_preferences_sections-131"><a href="#XMLState.get_preferences_sections-131"><span class="linenos">131</span></a>
</span><span id="XMLState.get_preferences_sections-132"><a href="#XMLState.get_preferences_sections-132"><span class="linenos">132</span></a><span class="sd">        :return: list of &lt;preferences&gt; section reference(s)</span>
</span><span id="XMLState.get_preferences_sections-133"><a href="#XMLState.get_preferences_sections-133"><span class="linenos">133</span></a>
</span><span id="XMLState.get_preferences_sections-134"><a href="#XMLState.get_preferences_sections-134"><span class="linenos">134</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_preferences_sections-135"><a href="#XMLState.get_preferences_sections-135"><span class="linenos">135</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_preferences_sections-136"><a href="#XMLState.get_preferences_sections-136"><span class="linenos">136</span></a>        <span class="n">preferences_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_preferences_sections-137"><a href="#XMLState.get_preferences_sections-137"><span class="linenos">137</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_preferences</span><span class="p">()):</span>
</span><span id="XMLState.get_preferences_sections-138"><a href="#XMLState.get_preferences_sections-138"><span class="linenos">138</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences_matches_host_architecture</span><span class="p">(</span><span class="n">preferences</span><span class="p">):</span>
</span><span id="XMLState.get_preferences_sections-139"><a href="#XMLState.get_preferences_sections-139"><span class="linenos">139</span></a>                <span class="n">preferences_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">preferences</span><span class="p">)</span>
</span><span id="XMLState.get_preferences_sections-140"><a href="#XMLState.get_preferences_sections-140"><span class="linenos">140</span></a>        <span class="k">return</span> <span class="n">preferences_list</span>
</span></pre></div>


            <div class="docstring"><p>All preferences sections for the selected profiles that match the
host architecture</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of <preferences> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_description_section" class="classattr">
                                        <input id="XMLState.get_description_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_description_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#description_type">description_type</a></span>:</span></span>

                <label class="view-source-button" for="XMLState.get_description_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_description_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_description_section-142"><a href="#XMLState.get_description_section-142"><span class="linenos">142</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_description_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">description_type</span><span class="p">:</span>
</span><span id="XMLState.get_description_section-143"><a href="#XMLState.get_description_section-143"><span class="linenos">143</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_description_section-144"><a href="#XMLState.get_description_section-144"><span class="linenos">144</span></a><span class="sd">        The description section</span>
</span><span id="XMLState.get_description_section-145"><a href="#XMLState.get_description_section-145"><span class="linenos">145</span></a>
</span><span id="XMLState.get_description_section-146"><a href="#XMLState.get_description_section-146"><span class="linenos">146</span></a><span class="sd">        :return:</span>
</span><span id="XMLState.get_description_section-147"><a href="#XMLState.get_description_section-147"><span class="linenos">147</span></a><span class="sd">            description_type tuple providing the elements</span>
</span><span id="XMLState.get_description_section-148"><a href="#XMLState.get_description_section-148"><span class="linenos">148</span></a><span class="sd">            author contact and specification</span>
</span><span id="XMLState.get_description_section-149"><a href="#XMLState.get_description_section-149"><span class="linenos">149</span></a>
</span><span id="XMLState.get_description_section-150"><a href="#XMLState.get_description_section-150"><span class="linenos">150</span></a><span class="sd">        :rtype: tuple</span>
</span><span id="XMLState.get_description_section-151"><a href="#XMLState.get_description_section-151"><span class="linenos">151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_description_section-152"><a href="#XMLState.get_description_section-152"><span class="linenos">152</span></a>        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_description</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_description_section-153"><a href="#XMLState.get_description_section-153"><span class="linenos">153</span></a>        <span class="k">return</span> <span class="n">description_type</span><span class="p">(</span>
</span><span id="XMLState.get_description_section-154"><a href="#XMLState.get_description_section-154"><span class="linenos">154</span></a>            <span class="n">author</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_author</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="XMLState.get_description_section-155"><a href="#XMLState.get_description_section-155"><span class="linenos">155</span></a>            <span class="n">contact</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_contact</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="XMLState.get_description_section-156"><a href="#XMLState.get_description_section-156"><span class="linenos">156</span></a>            <span class="n">specification</span><span class="o">=</span><span class="n">description</span><span class="o">.</span><span class="n">get_specification</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="XMLState.get_description_section-157"><a href="#XMLState.get_description_section-157"><span class="linenos">157</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The description section</p>

<h6 id="returns">Returns</h6>

<blockquote>
<pre><code>description_type tuple providing the elements
author contact and specification
</code></pre>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_users_sections" class="classattr">
                                        <input id="XMLState.get_users_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_users_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_users_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_users_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_users_sections-159"><a href="#XMLState.get_users_sections-159"><span class="linenos">159</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_users_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_users_sections-160"><a href="#XMLState.get_users_sections-160"><span class="linenos">160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_users_sections-161"><a href="#XMLState.get_users_sections-161"><span class="linenos">161</span></a><span class="sd">        All users sections for the selected profiles</span>
</span><span id="XMLState.get_users_sections-162"><a href="#XMLState.get_users_sections-162"><span class="linenos">162</span></a>
</span><span id="XMLState.get_users_sections-163"><a href="#XMLState.get_users_sections-163"><span class="linenos">163</span></a><span class="sd">        :return: list of &lt;users&gt; section reference(s)</span>
</span><span id="XMLState.get_users_sections-164"><a href="#XMLState.get_users_sections-164"><span class="linenos">164</span></a>
</span><span id="XMLState.get_users_sections-165"><a href="#XMLState.get_users_sections-165"><span class="linenos">165</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_users_sections-166"><a href="#XMLState.get_users_sections-166"><span class="linenos">166</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_users_sections-167"><a href="#XMLState.get_users_sections-167"><span class="linenos">167</span></a>        <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_users_sections-168"><a href="#XMLState.get_users_sections-168"><span class="linenos">168</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_users</span><span class="p">()):</span>
</span><span id="XMLState.get_users_sections-169"><a href="#XMLState.get_users_sections-169"><span class="linenos">169</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_matches_host_architecture</span><span class="p">(</span><span class="n">users_section</span><span class="p">):</span>
</span><span id="XMLState.get_users_sections-170"><a href="#XMLState.get_users_sections-170"><span class="linenos">170</span></a>                <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">users_section</span><span class="p">)</span>
</span><span id="XMLState.get_users_sections-171"><a href="#XMLState.get_users_sections-171"><span class="linenos">171</span></a>        <span class="k">return</span> <span class="n">users</span>
</span></pre></div>


            <div class="docstring"><p>All users sections for the selected profiles</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of <users> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bundle_format" class="classattr">
                                        <input id="XMLState.get_build_type_bundle_format-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bundle_format</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bundle_format-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bundle_format"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bundle_format-173"><a href="#XMLState.get_build_type_bundle_format-173"><span class="linenos">173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bundle_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bundle_format-174"><a href="#XMLState.get_build_type_bundle_format-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bundle_format-175"><a href="#XMLState.get_build_type_bundle_format-175"><span class="linenos">175</span></a><span class="sd">        Return bundle_format for build type</span>
</span><span id="XMLState.get_build_type_bundle_format-176"><a href="#XMLState.get_build_type_bundle_format-176"><span class="linenos">176</span></a>
</span><span id="XMLState.get_build_type_bundle_format-177"><a href="#XMLState.get_build_type_bundle_format-177"><span class="linenos">177</span></a><span class="sd">        The bundle_format string is validated against the available</span>
</span><span id="XMLState.get_build_type_bundle_format-178"><a href="#XMLState.get_build_type_bundle_format-178"><span class="linenos">178</span></a><span class="sd">        name tags from kiwi.system.result::result_name_tags.</span>
</span><span id="XMLState.get_build_type_bundle_format-179"><a href="#XMLState.get_build_type_bundle_format-179"><span class="linenos">179</span></a>
</span><span id="XMLState.get_build_type_bundle_format-180"><a href="#XMLState.get_build_type_bundle_format-180"><span class="linenos">180</span></a><span class="sd">        :return: bundle format string</span>
</span><span id="XMLState.get_build_type_bundle_format-181"><a href="#XMLState.get_build_type_bundle_format-181"><span class="linenos">181</span></a>
</span><span id="XMLState.get_build_type_bundle_format-182"><a href="#XMLState.get_build_type_bundle_format-182"><span class="linenos">182</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_build_type_bundle_format-183"><a href="#XMLState.get_build_type_bundle_format-183"><span class="linenos">183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bundle_format-184"><a href="#XMLState.get_build_type_bundle_format-184"><span class="linenos">184</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_bundle_format</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Return bundle_format for build type</p>

<p>The bundle_format string is validated against the available
name tags from <a href="system/result.html">kiwi.system.result</a>::result_name_tags.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>bundle format string</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_name" class="classattr">
                                        <input id="XMLState.get_build_type_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_name-186"><a href="#XMLState.get_build_type_name-186"><span class="linenos">186</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_name-187"><a href="#XMLState.get_build_type_name-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_name-188"><a href="#XMLState.get_build_type_name-188"><span class="linenos">188</span></a><span class="sd">        Default build type name</span>
</span><span id="XMLState.get_build_type_name-189"><a href="#XMLState.get_build_type_name-189"><span class="linenos">189</span></a>
</span><span id="XMLState.get_build_type_name-190"><a href="#XMLState.get_build_type_name-190"><span class="linenos">190</span></a><span class="sd">        :return: Content of image attribute from build type</span>
</span><span id="XMLState.get_build_type_name-191"><a href="#XMLState.get_build_type_name-191"><span class="linenos">191</span></a>
</span><span id="XMLState.get_build_type_name-192"><a href="#XMLState.get_build_type_name-192"><span class="linenos">192</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_build_type_name-193"><a href="#XMLState.get_build_type_name-193"><span class="linenos">193</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_name-194"><a href="#XMLState.get_build_type_name-194"><span class="linenos">194</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_image</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Default build type name</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of image attribute from build type</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.btrfs_default_volume_requested" class="classattr">
                                        <input id="XMLState.btrfs_default_volume_requested-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">btrfs_default_volume_requested</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.btrfs_default_volume_requested-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.btrfs_default_volume_requested"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.btrfs_default_volume_requested-196"><a href="#XMLState.btrfs_default_volume_requested-196"><span class="linenos">196</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">btrfs_default_volume_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.btrfs_default_volume_requested-197"><a href="#XMLState.btrfs_default_volume_requested-197"><span class="linenos">197</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.btrfs_default_volume_requested-198"><a href="#XMLState.btrfs_default_volume_requested-198"><span class="linenos">198</span></a><span class="sd">        Check if setting a default volume for btrfs is requested</span>
</span><span id="XMLState.btrfs_default_volume_requested-199"><a href="#XMLState.btrfs_default_volume_requested-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.btrfs_default_volume_requested-200"><a href="#XMLState.btrfs_default_volume_requested-200"><span class="linenos">200</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_btrfs_set_default_volume</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="XMLState.btrfs_default_volume_requested-201"><a href="#XMLState.btrfs_default_volume_requested-201"><span class="linenos">201</span></a>            <span class="c1"># Setting a default volume is explicitly switched off</span>
</span><span id="XMLState.btrfs_default_volume_requested-202"><a href="#XMLState.btrfs_default_volume_requested-202"><span class="linenos">202</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState.btrfs_default_volume_requested-203"><a href="#XMLState.btrfs_default_volume_requested-203"><span class="linenos">203</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.btrfs_default_volume_requested-204"><a href="#XMLState.btrfs_default_volume_requested-204"><span class="linenos">204</span></a>            <span class="c1"># In any other case (True | None) a default volume</span>
</span><span id="XMLState.btrfs_default_volume_requested-205"><a href="#XMLState.btrfs_default_volume_requested-205"><span class="linenos">205</span></a>            <span class="c1"># is wanted and will be set</span>
</span><span id="XMLState.btrfs_default_volume_requested-206"><a href="#XMLState.btrfs_default_volume_requested-206"><span class="linenos">206</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Check if setting a default volume for btrfs is requested</p>
</div>


                            </div>
                            <div id="XMLState.get_image_version" class="classattr">
                                        <input id="XMLState.get_image_version-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_image_version</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_image_version-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_image_version"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_image_version-208"><a href="#XMLState.get_image_version-208"><span class="linenos">208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_image_version-209"><a href="#XMLState.get_image_version-209"><span class="linenos">209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_image_version-210"><a href="#XMLState.get_image_version-210"><span class="linenos">210</span></a><span class="sd">        Image version from preferences section.</span>
</span><span id="XMLState.get_image_version-211"><a href="#XMLState.get_image_version-211"><span class="linenos">211</span></a>
</span><span id="XMLState.get_image_version-212"><a href="#XMLState.get_image_version-212"><span class="linenos">212</span></a><span class="sd">        Multiple occurences of version in preferences sections are not</span>
</span><span id="XMLState.get_image_version-213"><a href="#XMLState.get_image_version-213"><span class="linenos">213</span></a><span class="sd">        forbidden, however only the first version found defines the</span>
</span><span id="XMLState.get_image_version-214"><a href="#XMLState.get_image_version-214"><span class="linenos">214</span></a><span class="sd">        final image version</span>
</span><span id="XMLState.get_image_version-215"><a href="#XMLState.get_image_version-215"><span class="linenos">215</span></a>
</span><span id="XMLState.get_image_version-216"><a href="#XMLState.get_image_version-216"><span class="linenos">216</span></a><span class="sd">        :return: Content of &lt;version&gt; section</span>
</span><span id="XMLState.get_image_version-217"><a href="#XMLState.get_image_version-217"><span class="linenos">217</span></a>
</span><span id="XMLState.get_image_version-218"><a href="#XMLState.get_image_version-218"><span class="linenos">218</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_image_version-219"><a href="#XMLState.get_image_version-219"><span class="linenos">219</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_image_version-220"><a href="#XMLState.get_image_version-220"><span class="linenos">220</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.get_image_version-221"><a href="#XMLState.get_image_version-221"><span class="linenos">221</span></a>            <span class="n">version</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span>
</span><span id="XMLState.get_image_version-222"><a href="#XMLState.get_image_version-222"><span class="linenos">222</span></a>            <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
</span><span id="XMLState.get_image_version-223"><a href="#XMLState.get_image_version-223"><span class="linenos">223</span></a>                <span class="k">return</span> <span class="n">version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_image_version-224"><a href="#XMLState.get_image_version-224"><span class="linenos">224</span></a>        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</span></pre></div>


            <div class="docstring"><p>Image version from preferences section.</p>

<p>Multiple occurences of version in preferences sections are not
forbidden, however only the first version found defines the
final image version</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of <version> section</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_initrd_system" class="classattr">
                                        <input id="XMLState.get_initrd_system-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_initrd_system</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_initrd_system-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_initrd_system"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_initrd_system-226"><a href="#XMLState.get_initrd_system-226"><span class="linenos">226</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_initrd_system</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_initrd_system-227"><a href="#XMLState.get_initrd_system-227"><span class="linenos">227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_initrd_system-228"><a href="#XMLState.get_initrd_system-228"><span class="linenos">228</span></a><span class="sd">        Name of initrd system to use</span>
</span><span id="XMLState.get_initrd_system-229"><a href="#XMLState.get_initrd_system-229"><span class="linenos">229</span></a>
</span><span id="XMLState.get_initrd_system-230"><a href="#XMLState.get_initrd_system-230"><span class="linenos">230</span></a><span class="sd">        Depending on the image type a specific initrd system is</span>
</span><span id="XMLState.get_initrd_system-231"><a href="#XMLState.get_initrd_system-231"><span class="linenos">231</span></a><span class="sd">        either pre selected or free of choice according to the</span>
</span><span id="XMLState.get_initrd_system-232"><a href="#XMLState.get_initrd_system-232"><span class="linenos">232</span></a><span class="sd">        XML type setup.</span>
</span><span id="XMLState.get_initrd_system-233"><a href="#XMLState.get_initrd_system-233"><span class="linenos">233</span></a>
</span><span id="XMLState.get_initrd_system-234"><a href="#XMLState.get_initrd_system-234"><span class="linenos">234</span></a><span class="sd">        :return: &#39;dracut&#39;, &#39;kiwi&#39; or &#39;none&#39;</span>
</span><span id="XMLState.get_initrd_system-235"><a href="#XMLState.get_initrd_system-235"><span class="linenos">235</span></a>
</span><span id="XMLState.get_initrd_system-236"><a href="#XMLState.get_initrd_system-236"><span class="linenos">236</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_initrd_system-237"><a href="#XMLState.get_initrd_system-237"><span class="linenos">237</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_initrd_system-238"><a href="#XMLState.get_initrd_system-238"><span class="linenos">238</span></a>        <span class="n">pre_selection_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="XMLState.get_initrd_system-239"><a href="#XMLState.get_initrd_system-239"><span class="linenos">239</span></a>            <span class="s1">&#39;vmx&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_initrd_system-240"><a href="#XMLState.get_initrd_system-240"><span class="linenos">240</span></a>            <span class="s1">&#39;oem&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_initrd_system-241"><a href="#XMLState.get_initrd_system-241"><span class="linenos">241</span></a>            <span class="s1">&#39;iso&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_initrd_system-242"><a href="#XMLState.get_initrd_system-242"><span class="linenos">242</span></a>            <span class="s1">&#39;kis&#39;</span><span class="p">:</span> <span class="s1">&#39;dracut&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_initrd_system-243"><a href="#XMLState.get_initrd_system-243"><span class="linenos">243</span></a>            <span class="s1">&#39;pxe&#39;</span><span class="p">:</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_initrd_system-244"><a href="#XMLState.get_initrd_system-244"><span class="linenos">244</span></a>        <span class="p">}</span>
</span><span id="XMLState.get_initrd_system-245"><a href="#XMLState.get_initrd_system-245"><span class="linenos">245</span></a>        <span class="n">build_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()</span>
</span><span id="XMLState.get_initrd_system-246"><a href="#XMLState.get_initrd_system-246"><span class="linenos">246</span></a>        <span class="n">default_initrd_system</span> <span class="o">=</span> <span class="n">pre_selection_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">build_type</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;none&#39;</span>
</span><span id="XMLState.get_initrd_system-247"><a href="#XMLState.get_initrd_system-247"><span class="linenos">247</span></a>
</span><span id="XMLState.get_initrd_system-248"><a href="#XMLState.get_initrd_system-248"><span class="linenos">248</span></a>        <span class="k">if</span> <span class="n">build_type</span> <span class="o">==</span> <span class="s1">&#39;iso&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_initrd_system-249"><a href="#XMLState.get_initrd_system-249"><span class="linenos">249</span></a>            <span class="c1"># iso type always use dracut as initrd system</span>
</span><span id="XMLState.get_initrd_system-250"><a href="#XMLState.get_initrd_system-250"><span class="linenos">250</span></a>            <span class="k">return</span> <span class="n">default_initrd_system</span>
</span><span id="XMLState.get_initrd_system-251"><a href="#XMLState.get_initrd_system-251"><span class="linenos">251</span></a>
</span><span id="XMLState.get_initrd_system-252"><a href="#XMLState.get_initrd_system-252"><span class="linenos">252</span></a>        <span class="c1"># Allow to choose for any other build type</span>
</span><span id="XMLState.get_initrd_system-253"><a href="#XMLState.get_initrd_system-253"><span class="linenos">253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_initrd_system</span><span class="p">()</span> <span class="ow">or</span> <span class="n">default_initrd_system</span>
</span></pre></div>


            <div class="docstring"><p>Name of initrd system to use</p>

<p>Depending on the image type a specific initrd system is
either pre selected or free of choice according to the
XML type setup.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>'dracut', 'kiwi' or 'none'</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_locale" class="classattr">
                                        <input id="XMLState.get_locale-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_locale</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_locale-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_locale"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_locale-255"><a href="#XMLState.get_locale-255"><span class="linenos">255</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_locale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="XMLState.get_locale-256"><a href="#XMLState.get_locale-256"><span class="linenos">256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_locale-257"><a href="#XMLState.get_locale-257"><span class="linenos">257</span></a><span class="sd">        Gets list of locale names if configured. Takes</span>
</span><span id="XMLState.get_locale-258"><a href="#XMLState.get_locale-258"><span class="linenos">258</span></a><span class="sd">        the first locale setup from the existing preferences</span>
</span><span id="XMLState.get_locale-259"><a href="#XMLState.get_locale-259"><span class="linenos">259</span></a><span class="sd">        sections into account.</span>
</span><span id="XMLState.get_locale-260"><a href="#XMLState.get_locale-260"><span class="linenos">260</span></a>
</span><span id="XMLState.get_locale-261"><a href="#XMLState.get_locale-261"><span class="linenos">261</span></a><span class="sd">        :return: List of names or None</span>
</span><span id="XMLState.get_locale-262"><a href="#XMLState.get_locale-262"><span class="linenos">262</span></a>
</span><span id="XMLState.get_locale-263"><a href="#XMLState.get_locale-263"><span class="linenos">263</span></a><span class="sd">        :rtype: list|None</span>
</span><span id="XMLState.get_locale-264"><a href="#XMLState.get_locale-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_locale-265"><a href="#XMLState.get_locale-265"><span class="linenos">265</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.get_locale-266"><a href="#XMLState.get_locale-266"><span class="linenos">266</span></a>            <span class="n">locale_section</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_locale</span><span class="p">()</span>
</span><span id="XMLState.get_locale-267"><a href="#XMLState.get_locale-267"><span class="linenos">267</span></a>            <span class="k">if</span> <span class="n">locale_section</span><span class="p">:</span>
</span><span id="XMLState.get_locale-268"><a href="#XMLState.get_locale-268"><span class="linenos">268</span></a>                <span class="k">return</span> <span class="n">locale_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_locale-269"><a href="#XMLState.get_locale-269"><span class="linenos">269</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Gets list of locale names if configured. Takes
the first locale setup from the existing preferences
sections into account.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List of names or None</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_rpm_locale" class="classattr">
                                        <input id="XMLState.get_rpm_locale-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_rpm_locale</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_rpm_locale-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_rpm_locale"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_rpm_locale-271"><a href="#XMLState.get_rpm_locale-271"><span class="linenos">271</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_locale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="XMLState.get_rpm_locale-272"><a href="#XMLState.get_rpm_locale-272"><span class="linenos">272</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_locale-273"><a href="#XMLState.get_rpm_locale-273"><span class="linenos">273</span></a><span class="sd">        Gets list of locale names to filter out by rpm</span>
</span><span id="XMLState.get_rpm_locale-274"><a href="#XMLState.get_rpm_locale-274"><span class="linenos">274</span></a><span class="sd">        if rpm-locale-filtering is switched on the</span>
</span><span id="XMLState.get_rpm_locale-275"><a href="#XMLState.get_rpm_locale-275"><span class="linenos">275</span></a><span class="sd">        the list always contains: [POSIX, C, C.UTF-8]</span>
</span><span id="XMLState.get_rpm_locale-276"><a href="#XMLState.get_rpm_locale-276"><span class="linenos">276</span></a><span class="sd">        and is extended by the optionaly configured</span>
</span><span id="XMLState.get_rpm_locale-277"><a href="#XMLState.get_rpm_locale-277"><span class="linenos">277</span></a><span class="sd">        locale</span>
</span><span id="XMLState.get_rpm_locale-278"><a href="#XMLState.get_rpm_locale-278"><span class="linenos">278</span></a>
</span><span id="XMLState.get_rpm_locale-279"><a href="#XMLState.get_rpm_locale-279"><span class="linenos">279</span></a><span class="sd">        :return: List of names or None</span>
</span><span id="XMLState.get_rpm_locale-280"><a href="#XMLState.get_rpm_locale-280"><span class="linenos">280</span></a>
</span><span id="XMLState.get_rpm_locale-281"><a href="#XMLState.get_rpm_locale-281"><span class="linenos">281</span></a><span class="sd">        :rtype: list|None</span>
</span><span id="XMLState.get_rpm_locale-282"><a href="#XMLState.get_rpm_locale-282"><span class="linenos">282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_locale-283"><a href="#XMLState.get_rpm_locale-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rpm_locale_filtering</span><span class="p">():</span>
</span><span id="XMLState.get_rpm_locale-284"><a href="#XMLState.get_rpm_locale-284"><span class="linenos">284</span></a>            <span class="n">rpm_locale</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POSIX&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C.UTF-8&#39;</span><span class="p">]</span>
</span><span id="XMLState.get_rpm_locale-285"><a href="#XMLState.get_rpm_locale-285"><span class="linenos">285</span></a>            <span class="n">configured_locale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_locale</span><span class="p">()</span>
</span><span id="XMLState.get_rpm_locale-286"><a href="#XMLState.get_rpm_locale-286"><span class="linenos">286</span></a>            <span class="k">if</span> <span class="n">configured_locale</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_locale-287"><a href="#XMLState.get_rpm_locale-287"><span class="linenos">287</span></a>                <span class="k">for</span> <span class="n">locale</span> <span class="ow">in</span> <span class="n">configured_locale</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_locale-288"><a href="#XMLState.get_rpm_locale-288"><span class="linenos">288</span></a>                    <span class="n">rpm_locale</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
</span><span id="XMLState.get_rpm_locale-289"><a href="#XMLState.get_rpm_locale-289"><span class="linenos">289</span></a>            <span class="k">return</span> <span class="n">rpm_locale</span>
</span><span id="XMLState.get_rpm_locale-290"><a href="#XMLState.get_rpm_locale-290"><span class="linenos">290</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Gets list of locale names to filter out by rpm
if rpm-locale-filtering is switched on the
the list always contains: [POSIX, C, C.UTF-8]
and is extended by the optionaly configured
locale</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List of names or None</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_rpm_locale_filtering" class="classattr">
                                        <input id="XMLState.get_rpm_locale_filtering-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_rpm_locale_filtering</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_rpm_locale_filtering-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_rpm_locale_filtering"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_rpm_locale_filtering-292"><a href="#XMLState.get_rpm_locale_filtering-292"><span class="linenos">292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_locale_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_locale_filtering-293"><a href="#XMLState.get_rpm_locale_filtering-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_locale_filtering-294"><a href="#XMLState.get_rpm_locale_filtering-294"><span class="linenos">294</span></a><span class="sd">        Gets the rpm-locale-filtering configuration flag. Returns</span>
</span><span id="XMLState.get_rpm_locale_filtering-295"><a href="#XMLState.get_rpm_locale_filtering-295"><span class="linenos">295</span></a><span class="sd">        False if not present.</span>
</span><span id="XMLState.get_rpm_locale_filtering-296"><a href="#XMLState.get_rpm_locale_filtering-296"><span class="linenos">296</span></a>
</span><span id="XMLState.get_rpm_locale_filtering-297"><a href="#XMLState.get_rpm_locale_filtering-297"><span class="linenos">297</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.get_rpm_locale_filtering-298"><a href="#XMLState.get_rpm_locale_filtering-298"><span class="linenos">298</span></a>
</span><span id="XMLState.get_rpm_locale_filtering-299"><a href="#XMLState.get_rpm_locale_filtering-299"><span class="linenos">299</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_rpm_locale_filtering-300"><a href="#XMLState.get_rpm_locale_filtering-300"><span class="linenos">300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_locale_filtering-301"><a href="#XMLState.get_rpm_locale_filtering-301"><span class="linenos">301</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.get_rpm_locale_filtering-302"><a href="#XMLState.get_rpm_locale_filtering-302"><span class="linenos">302</span></a>            <span class="n">locale_filtering</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_locale_filtering</span><span class="p">()</span>
</span><span id="XMLState.get_rpm_locale_filtering-303"><a href="#XMLState.get_rpm_locale_filtering-303"><span class="linenos">303</span></a>            <span class="k">if</span> <span class="n">locale_filtering</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_locale_filtering-304"><a href="#XMLState.get_rpm_locale_filtering-304"><span class="linenos">304</span></a>                <span class="k">return</span> <span class="n">locale_filtering</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_rpm_locale_filtering-305"><a href="#XMLState.get_rpm_locale_filtering-305"><span class="linenos">305</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Gets the rpm-locale-filtering configuration flag. Returns
False if not present.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_rpm_excludedocs" class="classattr">
                                        <input id="XMLState.get_rpm_excludedocs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_rpm_excludedocs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_rpm_excludedocs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_rpm_excludedocs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_rpm_excludedocs-307"><a href="#XMLState.get_rpm_excludedocs-307"><span class="linenos">307</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_excludedocs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_excludedocs-308"><a href="#XMLState.get_rpm_excludedocs-308"><span class="linenos">308</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_excludedocs-309"><a href="#XMLState.get_rpm_excludedocs-309"><span class="linenos">309</span></a><span class="sd">        Gets the rpm-excludedocs configuration flag. Returns</span>
</span><span id="XMLState.get_rpm_excludedocs-310"><a href="#XMLState.get_rpm_excludedocs-310"><span class="linenos">310</span></a><span class="sd">        False if not present.</span>
</span><span id="XMLState.get_rpm_excludedocs-311"><a href="#XMLState.get_rpm_excludedocs-311"><span class="linenos">311</span></a>
</span><span id="XMLState.get_rpm_excludedocs-312"><a href="#XMLState.get_rpm_excludedocs-312"><span class="linenos">312</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.get_rpm_excludedocs-313"><a href="#XMLState.get_rpm_excludedocs-313"><span class="linenos">313</span></a>
</span><span id="XMLState.get_rpm_excludedocs-314"><a href="#XMLState.get_rpm_excludedocs-314"><span class="linenos">314</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_rpm_excludedocs-315"><a href="#XMLState.get_rpm_excludedocs-315"><span class="linenos">315</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_excludedocs-316"><a href="#XMLState.get_rpm_excludedocs-316"><span class="linenos">316</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.get_rpm_excludedocs-317"><a href="#XMLState.get_rpm_excludedocs-317"><span class="linenos">317</span></a>            <span class="n">exclude_docs</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_excludedocs</span><span class="p">()</span>
</span><span id="XMLState.get_rpm_excludedocs-318"><a href="#XMLState.get_rpm_excludedocs-318"><span class="linenos">318</span></a>            <span class="k">if</span> <span class="n">exclude_docs</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_excludedocs-319"><a href="#XMLState.get_rpm_excludedocs-319"><span class="linenos">319</span></a>                <span class="k">return</span> <span class="n">exclude_docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_rpm_excludedocs-320"><a href="#XMLState.get_rpm_excludedocs-320"><span class="linenos">320</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Gets the rpm-excludedocs configuration flag. Returns
False if not present.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_rpm_check_signatures" class="classattr">
                                        <input id="XMLState.get_rpm_check_signatures-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_rpm_check_signatures</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_rpm_check_signatures-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_rpm_check_signatures"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_rpm_check_signatures-322"><a href="#XMLState.get_rpm_check_signatures-322"><span class="linenos">322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_rpm_check_signatures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_check_signatures-323"><a href="#XMLState.get_rpm_check_signatures-323"><span class="linenos">323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_check_signatures-324"><a href="#XMLState.get_rpm_check_signatures-324"><span class="linenos">324</span></a><span class="sd">        Gets the rpm-check-signatures configuration flag. Returns</span>
</span><span id="XMLState.get_rpm_check_signatures-325"><a href="#XMLState.get_rpm_check_signatures-325"><span class="linenos">325</span></a><span class="sd">        False if not present.</span>
</span><span id="XMLState.get_rpm_check_signatures-326"><a href="#XMLState.get_rpm_check_signatures-326"><span class="linenos">326</span></a>
</span><span id="XMLState.get_rpm_check_signatures-327"><a href="#XMLState.get_rpm_check_signatures-327"><span class="linenos">327</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.get_rpm_check_signatures-328"><a href="#XMLState.get_rpm_check_signatures-328"><span class="linenos">328</span></a>
</span><span id="XMLState.get_rpm_check_signatures-329"><a href="#XMLState.get_rpm_check_signatures-329"><span class="linenos">329</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_rpm_check_signatures-330"><a href="#XMLState.get_rpm_check_signatures-330"><span class="linenos">330</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_rpm_check_signatures-331"><a href="#XMLState.get_rpm_check_signatures-331"><span class="linenos">331</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.get_rpm_check_signatures-332"><a href="#XMLState.get_rpm_check_signatures-332"><span class="linenos">332</span></a>            <span class="n">check_signatures</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_rpm_check_signatures</span><span class="p">()</span>
</span><span id="XMLState.get_rpm_check_signatures-333"><a href="#XMLState.get_rpm_check_signatures-333"><span class="linenos">333</span></a>            <span class="k">if</span> <span class="n">check_signatures</span><span class="p">:</span>
</span><span id="XMLState.get_rpm_check_signatures-334"><a href="#XMLState.get_rpm_check_signatures-334"><span class="linenos">334</span></a>                <span class="k">return</span> <span class="n">check_signatures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_rpm_check_signatures-335"><a href="#XMLState.get_rpm_check_signatures-335"><span class="linenos">335</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Gets the rpm-check-signatures configuration flag. Returns
False if not present.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_package_manager" class="classattr">
                                        <input id="XMLState.get_package_manager-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_package_manager</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_package_manager-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_package_manager"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_package_manager-337"><a href="#XMLState.get_package_manager-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_package_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_package_manager-338"><a href="#XMLState.get_package_manager-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_package_manager-339"><a href="#XMLState.get_package_manager-339"><span class="linenos">339</span></a><span class="sd">        Get configured package manager from selected preferences section</span>
</span><span id="XMLState.get_package_manager-340"><a href="#XMLState.get_package_manager-340"><span class="linenos">340</span></a>
</span><span id="XMLState.get_package_manager-341"><a href="#XMLState.get_package_manager-341"><span class="linenos">341</span></a><span class="sd">        :return: Content of the &lt;packagemanager&gt; section</span>
</span><span id="XMLState.get_package_manager-342"><a href="#XMLState.get_package_manager-342"><span class="linenos">342</span></a>
</span><span id="XMLState.get_package_manager-343"><a href="#XMLState.get_package_manager-343"><span class="linenos">343</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_package_manager-344"><a href="#XMLState.get_package_manager-344"><span class="linenos">344</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_package_manager-345"><a href="#XMLState.get_package_manager-345"><span class="linenos">345</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.get_package_manager-346"><a href="#XMLState.get_package_manager-346"><span class="linenos">346</span></a>            <span class="n">package_manager</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_packagemanager</span><span class="p">()</span>
</span><span id="XMLState.get_package_manager-347"><a href="#XMLState.get_package_manager-347"><span class="linenos">347</span></a>            <span class="k">if</span> <span class="n">package_manager</span><span class="p">:</span>
</span><span id="XMLState.get_package_manager-348"><a href="#XMLState.get_package_manager-348"><span class="linenos">348</span></a>                <span class="k">return</span> <span class="n">package_manager</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_package_manager-349"><a href="#XMLState.get_package_manager-349"><span class="linenos">349</span></a>        <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_package_manager</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Get configured package manager from selected preferences section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of the <packagemanager> section</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_release_version" class="classattr">
                                        <input id="XMLState.get_release_version-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_release_version</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_release_version-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_release_version"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_release_version-351"><a href="#XMLState.get_release_version-351"><span class="linenos">351</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_release_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_release_version-352"><a href="#XMLState.get_release_version-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_release_version-353"><a href="#XMLState.get_release_version-353"><span class="linenos">353</span></a><span class="sd">        Get configured release version from selected preferences section</span>
</span><span id="XMLState.get_release_version-354"><a href="#XMLState.get_release_version-354"><span class="linenos">354</span></a>
</span><span id="XMLState.get_release_version-355"><a href="#XMLState.get_release_version-355"><span class="linenos">355</span></a><span class="sd">        :return: Content of the &lt;release-version&gt; section or &#39;&#39;</span>
</span><span id="XMLState.get_release_version-356"><a href="#XMLState.get_release_version-356"><span class="linenos">356</span></a>
</span><span id="XMLState.get_release_version-357"><a href="#XMLState.get_release_version-357"><span class="linenos">357</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_release_version-358"><a href="#XMLState.get_release_version-358"><span class="linenos">358</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_release_version-359"><a href="#XMLState.get_release_version-359"><span class="linenos">359</span></a>        <span class="n">release_version</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_release_version-360"><a href="#XMLState.get_release_version-360"><span class="linenos">360</span></a>        <span class="k">for</span> <span class="n">preferences</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.get_release_version-361"><a href="#XMLState.get_release_version-361"><span class="linenos">361</span></a>            <span class="n">release_version</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_release_version</span><span class="p">()</span>
</span><span id="XMLState.get_release_version-362"><a href="#XMLState.get_release_version-362"><span class="linenos">362</span></a>            <span class="k">if</span> <span class="n">release_version</span><span class="p">:</span>
</span><span id="XMLState.get_release_version-363"><a href="#XMLState.get_release_version-363"><span class="linenos">363</span></a>                <span class="n">release_version</span> <span class="o">=</span> <span class="n">release_version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_release_version-364"><a href="#XMLState.get_release_version-364"><span class="linenos">364</span></a>                <span class="k">break</span>
</span><span id="XMLState.get_release_version-365"><a href="#XMLState.get_release_version-365"><span class="linenos">365</span></a>        <span class="k">return</span> <span class="n">release_version</span>
</span></pre></div>


            <div class="docstring"><p>Get configured release version from selected preferences section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of the <release-version> section or ''</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_packages_sections" class="classattr">
                                        <input id="XMLState.get_packages_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_packages_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">section_types</span><span class="p">:</span> <span class="n">List</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_packages_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_packages_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_packages_sections-367"><a href="#XMLState.get_packages_sections-367"><span class="linenos">367</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_types</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_packages_sections-368"><a href="#XMLState.get_packages_sections-368"><span class="linenos">368</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_packages_sections-369"><a href="#XMLState.get_packages_sections-369"><span class="linenos">369</span></a><span class="sd">        List of packages sections matching given section type(s)</span>
</span><span id="XMLState.get_packages_sections-370"><a href="#XMLState.get_packages_sections-370"><span class="linenos">370</span></a>
</span><span id="XMLState.get_packages_sections-371"><a href="#XMLState.get_packages_sections-371"><span class="linenos">371</span></a><span class="sd">        :param list section_types: type name(s) from packages sections</span>
</span><span id="XMLState.get_packages_sections-372"><a href="#XMLState.get_packages_sections-372"><span class="linenos">372</span></a>
</span><span id="XMLState.get_packages_sections-373"><a href="#XMLState.get_packages_sections-373"><span class="linenos">373</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="XMLState.get_packages_sections-374"><a href="#XMLState.get_packages_sections-374"><span class="linenos">374</span></a>
</span><span id="XMLState.get_packages_sections-375"><a href="#XMLState.get_packages_sections-375"><span class="linenos">375</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_packages_sections-376"><a href="#XMLState.get_packages_sections-376"><span class="linenos">376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_packages_sections-377"><a href="#XMLState.get_packages_sections-377"><span class="linenos">377</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_packages_sections-378"><a href="#XMLState.get_packages_sections-378"><span class="linenos">378</span></a>        <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.get_packages_sections-379"><a href="#XMLState.get_packages_sections-379"><span class="linenos">379</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_packages</span><span class="p">()</span>
</span><span id="XMLState.get_packages_sections-380"><a href="#XMLState.get_packages_sections-380"><span class="linenos">380</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_packages_sections-381"><a href="#XMLState.get_packages_sections-381"><span class="linenos">381</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_packages_sections-382"><a href="#XMLState.get_packages_sections-382"><span class="linenos">382</span></a>            <span class="n">packages_type</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span>
</span><span id="XMLState.get_packages_sections-383"><a href="#XMLState.get_packages_sections-383"><span class="linenos">383</span></a>            <span class="k">if</span> <span class="n">packages_type</span> <span class="ow">in</span> <span class="n">section_types</span><span class="p">:</span>
</span><span id="XMLState.get_packages_sections-384"><a href="#XMLState.get_packages_sections-384"><span class="linenos">384</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">packages</span><span class="p">)</span>
</span><span id="XMLState.get_packages_sections-385"><a href="#XMLState.get_packages_sections-385"><span class="linenos">385</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>List of packages sections matching given section type(s)</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list section_types</strong>:  type name(s) from packages sections</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of <packages> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.volume_matches_host_architecture" class="classattr">
                                        <input id="XMLState.volume_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">volume_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">volume</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.volume_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.volume_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.volume_matches_host_architecture-387"><a href="#XMLState.volume_matches_host_architecture-387"><span class="linenos">387</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volume_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volume</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.volume_matches_host_architecture-388"><a href="#XMLState.volume_matches_host_architecture-388"><span class="linenos">388</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.volume_matches_host_architecture-389"><a href="#XMLState.volume_matches_host_architecture-389"><span class="linenos">389</span></a><span class="sd">        Tests if the given volume section is applicable for the current host</span>
</span><span id="XMLState.volume_matches_host_architecture-390"><a href="#XMLState.volume_matches_host_architecture-390"><span class="linenos">390</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState.volume_matches_host_architecture-391"><a href="#XMLState.volume_matches_host_architecture-391"><span class="linenos">391</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState.volume_matches_host_architecture-392"><a href="#XMLState.volume_matches_host_architecture-392"><span class="linenos">392</span></a>
</span><span id="XMLState.volume_matches_host_architecture-393"><a href="#XMLState.volume_matches_host_architecture-393"><span class="linenos">393</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState.volume_matches_host_architecture-394"><a href="#XMLState.volume_matches_host_architecture-394"><span class="linenos">394</span></a>
</span><span id="XMLState.volume_matches_host_architecture-395"><a href="#XMLState.volume_matches_host_architecture-395"><span class="linenos">395</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.volume_matches_host_architecture-396"><a href="#XMLState.volume_matches_host_architecture-396"><span class="linenos">396</span></a>
</span><span id="XMLState.volume_matches_host_architecture-397"><a href="#XMLState.volume_matches_host_architecture-397"><span class="linenos">397</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.volume_matches_host_architecture-398"><a href="#XMLState.volume_matches_host_architecture-398"><span class="linenos">398</span></a>
</span><span id="XMLState.volume_matches_host_architecture-399"><a href="#XMLState.volume_matches_host_architecture-399"><span class="linenos">399</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.volume_matches_host_architecture-400"><a href="#XMLState.volume_matches_host_architecture-400"><span class="linenos">400</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.volume_matches_host_architecture-401"><a href="#XMLState.volume_matches_host_architecture-401"><span class="linenos">401</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">volume</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given volume section is applicable for the current host
architecture. If no architecture is specified within the section
it is considered as a match returning True.</p>

<p>Note: The XML section pointer must provide an arch attribute</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.package_matches_host_architecture" class="classattr">
                                        <input id="XMLState.package_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">package_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">package</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.package_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.package_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.package_matches_host_architecture-403"><a href="#XMLState.package_matches_host_architecture-403"><span class="linenos">403</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">package_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.package_matches_host_architecture-404"><a href="#XMLState.package_matches_host_architecture-404"><span class="linenos">404</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.package_matches_host_architecture-405"><a href="#XMLState.package_matches_host_architecture-405"><span class="linenos">405</span></a><span class="sd">        Tests if the given package section is applicable for the current host</span>
</span><span id="XMLState.package_matches_host_architecture-406"><a href="#XMLState.package_matches_host_architecture-406"><span class="linenos">406</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState.package_matches_host_architecture-407"><a href="#XMLState.package_matches_host_architecture-407"><span class="linenos">407</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState.package_matches_host_architecture-408"><a href="#XMLState.package_matches_host_architecture-408"><span class="linenos">408</span></a>
</span><span id="XMLState.package_matches_host_architecture-409"><a href="#XMLState.package_matches_host_architecture-409"><span class="linenos">409</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState.package_matches_host_architecture-410"><a href="#XMLState.package_matches_host_architecture-410"><span class="linenos">410</span></a>
</span><span id="XMLState.package_matches_host_architecture-411"><a href="#XMLState.package_matches_host_architecture-411"><span class="linenos">411</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.package_matches_host_architecture-412"><a href="#XMLState.package_matches_host_architecture-412"><span class="linenos">412</span></a>
</span><span id="XMLState.package_matches_host_architecture-413"><a href="#XMLState.package_matches_host_architecture-413"><span class="linenos">413</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.package_matches_host_architecture-414"><a href="#XMLState.package_matches_host_architecture-414"><span class="linenos">414</span></a>
</span><span id="XMLState.package_matches_host_architecture-415"><a href="#XMLState.package_matches_host_architecture-415"><span class="linenos">415</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.package_matches_host_architecture-416"><a href="#XMLState.package_matches_host_architecture-416"><span class="linenos">416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.package_matches_host_architecture-417"><a href="#XMLState.package_matches_host_architecture-417"><span class="linenos">417</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given package section is applicable for the current host
architecture. If no architecture is specified within the section
it is considered as a match returning True.</p>

<p>Note: The XML section pointer must provide an arch attribute</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.users_matches_host_architecture" class="classattr">
                                        <input id="XMLState.users_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">users_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">users</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.users_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.users_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.users_matches_host_architecture-419"><a href="#XMLState.users_matches_host_architecture-419"><span class="linenos">419</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">users_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">users</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.users_matches_host_architecture-420"><a href="#XMLState.users_matches_host_architecture-420"><span class="linenos">420</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.users_matches_host_architecture-421"><a href="#XMLState.users_matches_host_architecture-421"><span class="linenos">421</span></a><span class="sd">        Tests if the given users section is applicable for the current host</span>
</span><span id="XMLState.users_matches_host_architecture-422"><a href="#XMLState.users_matches_host_architecture-422"><span class="linenos">422</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState.users_matches_host_architecture-423"><a href="#XMLState.users_matches_host_architecture-423"><span class="linenos">423</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState.users_matches_host_architecture-424"><a href="#XMLState.users_matches_host_architecture-424"><span class="linenos">424</span></a>
</span><span id="XMLState.users_matches_host_architecture-425"><a href="#XMLState.users_matches_host_architecture-425"><span class="linenos">425</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState.users_matches_host_architecture-426"><a href="#XMLState.users_matches_host_architecture-426"><span class="linenos">426</span></a>
</span><span id="XMLState.users_matches_host_architecture-427"><a href="#XMLState.users_matches_host_architecture-427"><span class="linenos">427</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.users_matches_host_architecture-428"><a href="#XMLState.users_matches_host_architecture-428"><span class="linenos">428</span></a>
</span><span id="XMLState.users_matches_host_architecture-429"><a href="#XMLState.users_matches_host_architecture-429"><span class="linenos">429</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.users_matches_host_architecture-430"><a href="#XMLState.users_matches_host_architecture-430"><span class="linenos">430</span></a>
</span><span id="XMLState.users_matches_host_architecture-431"><a href="#XMLState.users_matches_host_architecture-431"><span class="linenos">431</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.users_matches_host_architecture-432"><a href="#XMLState.users_matches_host_architecture-432"><span class="linenos">432</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.users_matches_host_architecture-433"><a href="#XMLState.users_matches_host_architecture-433"><span class="linenos">433</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given users section is applicable for the current host
architecture. If no architecture is specified within the section
it is considered as a match returning True.</p>

<p>Note: The XML section pointer must provide an arch attribute</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.collection_matches_host_architecture" class="classattr">
                                        <input id="XMLState.collection_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collection_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">collection</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.collection_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.collection_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.collection_matches_host_architecture-435"><a href="#XMLState.collection_matches_host_architecture-435"><span class="linenos">435</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collection_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.collection_matches_host_architecture-436"><a href="#XMLState.collection_matches_host_architecture-436"><span class="linenos">436</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.collection_matches_host_architecture-437"><a href="#XMLState.collection_matches_host_architecture-437"><span class="linenos">437</span></a><span class="sd">        Tests if the given namedcollection section is applicable for</span>
</span><span id="XMLState.collection_matches_host_architecture-438"><a href="#XMLState.collection_matches_host_architecture-438"><span class="linenos">438</span></a><span class="sd">        the current host architecture. If no architecture is specified</span>
</span><span id="XMLState.collection_matches_host_architecture-439"><a href="#XMLState.collection_matches_host_architecture-439"><span class="linenos">439</span></a><span class="sd">        within the section it is considered as a match returning True.</span>
</span><span id="XMLState.collection_matches_host_architecture-440"><a href="#XMLState.collection_matches_host_architecture-440"><span class="linenos">440</span></a>
</span><span id="XMLState.collection_matches_host_architecture-441"><a href="#XMLState.collection_matches_host_architecture-441"><span class="linenos">441</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState.collection_matches_host_architecture-442"><a href="#XMLState.collection_matches_host_architecture-442"><span class="linenos">442</span></a>
</span><span id="XMLState.collection_matches_host_architecture-443"><a href="#XMLState.collection_matches_host_architecture-443"><span class="linenos">443</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.collection_matches_host_architecture-444"><a href="#XMLState.collection_matches_host_architecture-444"><span class="linenos">444</span></a>
</span><span id="XMLState.collection_matches_host_architecture-445"><a href="#XMLState.collection_matches_host_architecture-445"><span class="linenos">445</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.collection_matches_host_architecture-446"><a href="#XMLState.collection_matches_host_architecture-446"><span class="linenos">446</span></a>
</span><span id="XMLState.collection_matches_host_architecture-447"><a href="#XMLState.collection_matches_host_architecture-447"><span class="linenos">447</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.collection_matches_host_architecture-448"><a href="#XMLState.collection_matches_host_architecture-448"><span class="linenos">448</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.collection_matches_host_architecture-449"><a href="#XMLState.collection_matches_host_architecture-449"><span class="linenos">449</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given namedcollection section is applicable for
the current host architecture. If no architecture is specified
within the section it is considered as a match returning True.</p>

<p>Note: The XML section pointer must provide an arch attribute</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.profile_matches_host_architecture" class="classattr">
                                        <input id="XMLState.profile_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">profile_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">profile</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.profile_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.profile_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.profile_matches_host_architecture-451"><a href="#XMLState.profile_matches_host_architecture-451"><span class="linenos">451</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">profile_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.profile_matches_host_architecture-452"><a href="#XMLState.profile_matches_host_architecture-452"><span class="linenos">452</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.profile_matches_host_architecture-453"><a href="#XMLState.profile_matches_host_architecture-453"><span class="linenos">453</span></a><span class="sd">        Tests if the given profile section is applicable for the current host</span>
</span><span id="XMLState.profile_matches_host_architecture-454"><a href="#XMLState.profile_matches_host_architecture-454"><span class="linenos">454</span></a><span class="sd">        architecture. If no architecture is specified within the section</span>
</span><span id="XMLState.profile_matches_host_architecture-455"><a href="#XMLState.profile_matches_host_architecture-455"><span class="linenos">455</span></a><span class="sd">        it is considered as a match returning True.</span>
</span><span id="XMLState.profile_matches_host_architecture-456"><a href="#XMLState.profile_matches_host_architecture-456"><span class="linenos">456</span></a>
</span><span id="XMLState.profile_matches_host_architecture-457"><a href="#XMLState.profile_matches_host_architecture-457"><span class="linenos">457</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState.profile_matches_host_architecture-458"><a href="#XMLState.profile_matches_host_architecture-458"><span class="linenos">458</span></a>
</span><span id="XMLState.profile_matches_host_architecture-459"><a href="#XMLState.profile_matches_host_architecture-459"><span class="linenos">459</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.profile_matches_host_architecture-460"><a href="#XMLState.profile_matches_host_architecture-460"><span class="linenos">460</span></a>
</span><span id="XMLState.profile_matches_host_architecture-461"><a href="#XMLState.profile_matches_host_architecture-461"><span class="linenos">461</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.profile_matches_host_architecture-462"><a href="#XMLState.profile_matches_host_architecture-462"><span class="linenos">462</span></a>
</span><span id="XMLState.profile_matches_host_architecture-463"><a href="#XMLState.profile_matches_host_architecture-463"><span class="linenos">463</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.profile_matches_host_architecture-464"><a href="#XMLState.profile_matches_host_architecture-464"><span class="linenos">464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.profile_matches_host_architecture-465"><a href="#XMLState.profile_matches_host_architecture-465"><span class="linenos">465</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given profile section is applicable for the current host
architecture. If no architecture is specified within the section
it is considered as a match returning True.</p>

<p>Note: The XML section pointer must provide an arch attribute</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.preferences_matches_host_architecture" class="classattr">
                                        <input id="XMLState.preferences_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">preferences_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">preferences</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.preferences_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.preferences_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.preferences_matches_host_architecture-467"><a href="#XMLState.preferences_matches_host_architecture-467"><span class="linenos">467</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">preferences_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preferences</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.preferences_matches_host_architecture-468"><a href="#XMLState.preferences_matches_host_architecture-468"><span class="linenos">468</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.preferences_matches_host_architecture-469"><a href="#XMLState.preferences_matches_host_architecture-469"><span class="linenos">469</span></a><span class="sd">        Tests if the given preferences section is applicable for the</span>
</span><span id="XMLState.preferences_matches_host_architecture-470"><a href="#XMLState.preferences_matches_host_architecture-470"><span class="linenos">470</span></a><span class="sd">        current host architecture. If no architecture is specified within</span>
</span><span id="XMLState.preferences_matches_host_architecture-471"><a href="#XMLState.preferences_matches_host_architecture-471"><span class="linenos">471</span></a><span class="sd">        the section it is considered as a match returning True.</span>
</span><span id="XMLState.preferences_matches_host_architecture-472"><a href="#XMLState.preferences_matches_host_architecture-472"><span class="linenos">472</span></a>
</span><span id="XMLState.preferences_matches_host_architecture-473"><a href="#XMLState.preferences_matches_host_architecture-473"><span class="linenos">473</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState.preferences_matches_host_architecture-474"><a href="#XMLState.preferences_matches_host_architecture-474"><span class="linenos">474</span></a>
</span><span id="XMLState.preferences_matches_host_architecture-475"><a href="#XMLState.preferences_matches_host_architecture-475"><span class="linenos">475</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.preferences_matches_host_architecture-476"><a href="#XMLState.preferences_matches_host_architecture-476"><span class="linenos">476</span></a>
</span><span id="XMLState.preferences_matches_host_architecture-477"><a href="#XMLState.preferences_matches_host_architecture-477"><span class="linenos">477</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.preferences_matches_host_architecture-478"><a href="#XMLState.preferences_matches_host_architecture-478"><span class="linenos">478</span></a>
</span><span id="XMLState.preferences_matches_host_architecture-479"><a href="#XMLState.preferences_matches_host_architecture-479"><span class="linenos">479</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.preferences_matches_host_architecture-480"><a href="#XMLState.preferences_matches_host_architecture-480"><span class="linenos">480</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.preferences_matches_host_architecture-481"><a href="#XMLState.preferences_matches_host_architecture-481"><span class="linenos">481</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">preferences</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given preferences section is applicable for the
current host architecture. If no architecture is specified within
the section it is considered as a match returning True.</p>

<p>Note: The XML section pointer must provide an arch attribute</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.repository_matches_host_architecture" class="classattr">
                                        <input id="XMLState.repository_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">repository_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">repository</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.repository_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.repository_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.repository_matches_host_architecture-483"><a href="#XMLState.repository_matches_host_architecture-483"><span class="linenos">483</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repository_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.repository_matches_host_architecture-484"><a href="#XMLState.repository_matches_host_architecture-484"><span class="linenos">484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.repository_matches_host_architecture-485"><a href="#XMLState.repository_matches_host_architecture-485"><span class="linenos">485</span></a><span class="sd">        Tests if the given repository section is applicable for the</span>
</span><span id="XMLState.repository_matches_host_architecture-486"><a href="#XMLState.repository_matches_host_architecture-486"><span class="linenos">486</span></a><span class="sd">        current host architecture. If no architecture is specified within</span>
</span><span id="XMLState.repository_matches_host_architecture-487"><a href="#XMLState.repository_matches_host_architecture-487"><span class="linenos">487</span></a><span class="sd">        the section it is considered as a match returning True.</span>
</span><span id="XMLState.repository_matches_host_architecture-488"><a href="#XMLState.repository_matches_host_architecture-488"><span class="linenos">488</span></a>
</span><span id="XMLState.repository_matches_host_architecture-489"><a href="#XMLState.repository_matches_host_architecture-489"><span class="linenos">489</span></a><span class="sd">        Note: The XML section pointer must provide an arch attribute</span>
</span><span id="XMLState.repository_matches_host_architecture-490"><a href="#XMLState.repository_matches_host_architecture-490"><span class="linenos">490</span></a>
</span><span id="XMLState.repository_matches_host_architecture-491"><a href="#XMLState.repository_matches_host_architecture-491"><span class="linenos">491</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.repository_matches_host_architecture-492"><a href="#XMLState.repository_matches_host_architecture-492"><span class="linenos">492</span></a>
</span><span id="XMLState.repository_matches_host_architecture-493"><a href="#XMLState.repository_matches_host_architecture-493"><span class="linenos">493</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.repository_matches_host_architecture-494"><a href="#XMLState.repository_matches_host_architecture-494"><span class="linenos">494</span></a>
</span><span id="XMLState.repository_matches_host_architecture-495"><a href="#XMLState.repository_matches_host_architecture-495"><span class="linenos">495</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.repository_matches_host_architecture-496"><a href="#XMLState.repository_matches_host_architecture-496"><span class="linenos">496</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.repository_matches_host_architecture-497"><a href="#XMLState.repository_matches_host_architecture-497"><span class="linenos">497</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given repository section is applicable for the
current host architecture. If no architecture is specified within
the section it is considered as a match returning True.</p>

<p>Note: The XML section pointer must provide an arch attribute</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.containers_matches_host_architecture" class="classattr">
                                        <input id="XMLState.containers_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">containers_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">containers</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.containers_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.containers_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.containers_matches_host_architecture-499"><a href="#XMLState.containers_matches_host_architecture-499"><span class="linenos">499</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">containers_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">containers</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.containers_matches_host_architecture-500"><a href="#XMLState.containers_matches_host_architecture-500"><span class="linenos">500</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.containers_matches_host_architecture-501"><a href="#XMLState.containers_matches_host_architecture-501"><span class="linenos">501</span></a><span class="sd">        Tests if the given containers section is applicable for the</span>
</span><span id="XMLState.containers_matches_host_architecture-502"><a href="#XMLState.containers_matches_host_architecture-502"><span class="linenos">502</span></a><span class="sd">        current host architecture. If no arch attribute is provided in</span>
</span><span id="XMLState.containers_matches_host_architecture-503"><a href="#XMLState.containers_matches_host_architecture-503"><span class="linenos">503</span></a><span class="sd">        the section it is considered as a match and returns: True.</span>
</span><span id="XMLState.containers_matches_host_architecture-504"><a href="#XMLState.containers_matches_host_architecture-504"><span class="linenos">504</span></a>
</span><span id="XMLState.containers_matches_host_architecture-505"><a href="#XMLState.containers_matches_host_architecture-505"><span class="linenos">505</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.containers_matches_host_architecture-506"><a href="#XMLState.containers_matches_host_architecture-506"><span class="linenos">506</span></a>
</span><span id="XMLState.containers_matches_host_architecture-507"><a href="#XMLState.containers_matches_host_architecture-507"><span class="linenos">507</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.containers_matches_host_architecture-508"><a href="#XMLState.containers_matches_host_architecture-508"><span class="linenos">508</span></a>
</span><span id="XMLState.containers_matches_host_architecture-509"><a href="#XMLState.containers_matches_host_architecture-509"><span class="linenos">509</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.containers_matches_host_architecture-510"><a href="#XMLState.containers_matches_host_architecture-510"><span class="linenos">510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.containers_matches_host_architecture-511"><a href="#XMLState.containers_matches_host_architecture-511"><span class="linenos">511</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given containers section is applicable for the
current host architecture. If no arch attribute is provided in
the section it is considered as a match and returns: True.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.container_matches_host_architecture" class="classattr">
                                        <input id="XMLState.container_matches_host_architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">container_matches_host_architecture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">container</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.container_matches_host_architecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.container_matches_host_architecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.container_matches_host_architecture-513"><a href="#XMLState.container_matches_host_architecture-513"><span class="linenos">513</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">container_matches_host_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.container_matches_host_architecture-514"><a href="#XMLState.container_matches_host_architecture-514"><span class="linenos">514</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.container_matches_host_architecture-515"><a href="#XMLState.container_matches_host_architecture-515"><span class="linenos">515</span></a><span class="sd">        Tests if the given container section is applicable for the</span>
</span><span id="XMLState.container_matches_host_architecture-516"><a href="#XMLState.container_matches_host_architecture-516"><span class="linenos">516</span></a><span class="sd">        current host architecture. If no arch attribute is provided in</span>
</span><span id="XMLState.container_matches_host_architecture-517"><a href="#XMLState.container_matches_host_architecture-517"><span class="linenos">517</span></a><span class="sd">        the section it is considered as a match and returns: True.</span>
</span><span id="XMLState.container_matches_host_architecture-518"><a href="#XMLState.container_matches_host_architecture-518"><span class="linenos">518</span></a>
</span><span id="XMLState.container_matches_host_architecture-519"><a href="#XMLState.container_matches_host_architecture-519"><span class="linenos">519</span></a><span class="sd">        :param section: XML section object</span>
</span><span id="XMLState.container_matches_host_architecture-520"><a href="#XMLState.container_matches_host_architecture-520"><span class="linenos">520</span></a>
</span><span id="XMLState.container_matches_host_architecture-521"><a href="#XMLState.container_matches_host_architecture-521"><span class="linenos">521</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.container_matches_host_architecture-522"><a href="#XMLState.container_matches_host_architecture-522"><span class="linenos">522</span></a>
</span><span id="XMLState.container_matches_host_architecture-523"><a href="#XMLState.container_matches_host_architecture-523"><span class="linenos">523</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.container_matches_host_architecture-524"><a href="#XMLState.container_matches_host_architecture-524"><span class="linenos">524</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.container_matches_host_architecture-525"><a href="#XMLState.container_matches_host_architecture-525"><span class="linenos">525</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_section_matches_host_architecture</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tests if the given container section is applicable for the
current host architecture. If no arch attribute is provided in
the section it is considered as a match and returns: True.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>section</strong>:  XML section object</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_package_sections" class="classattr">
                                        <input id="XMLState.get_package_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_package_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">packages_sections</span><span class="p">:</span> <span class="n">List</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#package_type">package_type</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_package_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_package_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_package_sections-527"><a href="#XMLState.get_package_sections-527"><span class="linenos">527</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState.get_package_sections-528"><a href="#XMLState.get_package_sections-528"><span class="linenos">528</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">packages_sections</span><span class="p">:</span> <span class="n">List</span>
</span><span id="XMLState.get_package_sections-529"><a href="#XMLState.get_package_sections-529"><span class="linenos">529</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">package_type</span><span class="p">]:</span>
</span><span id="XMLState.get_package_sections-530"><a href="#XMLState.get_package_sections-530"><span class="linenos">530</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_package_sections-531"><a href="#XMLState.get_package_sections-531"><span class="linenos">531</span></a><span class="sd">        List of package sections from the given packages sections.</span>
</span><span id="XMLState.get_package_sections-532"><a href="#XMLState.get_package_sections-532"><span class="linenos">532</span></a><span class="sd">        Each list element contains a tuple with the &lt;package&gt; section</span>
</span><span id="XMLState.get_package_sections-533"><a href="#XMLState.get_package_sections-533"><span class="linenos">533</span></a><span class="sd">        reference and the &lt;packages&gt; section this package belongs to</span>
</span><span id="XMLState.get_package_sections-534"><a href="#XMLState.get_package_sections-534"><span class="linenos">534</span></a>
</span><span id="XMLState.get_package_sections-535"><a href="#XMLState.get_package_sections-535"><span class="linenos">535</span></a><span class="sd">        If a package entry specfies an architecture, it is only taken if</span>
</span><span id="XMLState.get_package_sections-536"><a href="#XMLState.get_package_sections-536"><span class="linenos">536</span></a><span class="sd">        the host architecture matches the configured architecture</span>
</span><span id="XMLState.get_package_sections-537"><a href="#XMLState.get_package_sections-537"><span class="linenos">537</span></a>
</span><span id="XMLState.get_package_sections-538"><a href="#XMLState.get_package_sections-538"><span class="linenos">538</span></a><span class="sd">        :param list packages_sections: &lt;packages&gt;</span>
</span><span id="XMLState.get_package_sections-539"><a href="#XMLState.get_package_sections-539"><span class="linenos">539</span></a>
</span><span id="XMLState.get_package_sections-540"><a href="#XMLState.get_package_sections-540"><span class="linenos">540</span></a><span class="sd">        :return:</span>
</span><span id="XMLState.get_package_sections-541"><a href="#XMLState.get_package_sections-541"><span class="linenos">541</span></a><span class="sd">            Contains list of package_type tuples</span>
</span><span id="XMLState.get_package_sections-542"><a href="#XMLState.get_package_sections-542"><span class="linenos">542</span></a>
</span><span id="XMLState.get_package_sections-543"><a href="#XMLState.get_package_sections-543"><span class="linenos">543</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState.get_package_sections-544"><a href="#XMLState.get_package_sections-544"><span class="linenos">544</span></a>
</span><span id="XMLState.get_package_sections-545"><a href="#XMLState.get_package_sections-545"><span class="linenos">545</span></a><span class="sd">                [package_type(packages_section=object, package_section=object)]</span>
</span><span id="XMLState.get_package_sections-546"><a href="#XMLState.get_package_sections-546"><span class="linenos">546</span></a>
</span><span id="XMLState.get_package_sections-547"><a href="#XMLState.get_package_sections-547"><span class="linenos">547</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_package_sections-548"><a href="#XMLState.get_package_sections-548"><span class="linenos">548</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_package_sections-549"><a href="#XMLState.get_package_sections-549"><span class="linenos">549</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_package_sections-550"><a href="#XMLState.get_package_sections-550"><span class="linenos">550</span></a>        <span class="k">if</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_package_sections-551"><a href="#XMLState.get_package_sections-551"><span class="linenos">551</span></a>            <span class="k">for</span> <span class="n">packages_section</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_package_sections-552"><a href="#XMLState.get_package_sections-552"><span class="linenos">552</span></a>                <span class="n">package_list</span> <span class="o">=</span> <span class="n">packages_section</span><span class="o">.</span><span class="n">get_package</span><span class="p">()</span>
</span><span id="XMLState.get_package_sections-553"><a href="#XMLState.get_package_sections-553"><span class="linenos">553</span></a>                <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_package_sections-554"><a href="#XMLState.get_package_sections-554"><span class="linenos">554</span></a>                    <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_package_sections-555"><a href="#XMLState.get_package_sections-555"><span class="linenos">555</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
</span><span id="XMLState.get_package_sections-556"><a href="#XMLState.get_package_sections-556"><span class="linenos">556</span></a>                            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_package_sections-557"><a href="#XMLState.get_package_sections-557"><span class="linenos">557</span></a>                                <span class="n">package_type</span><span class="p">(</span>
</span><span id="XMLState.get_package_sections-558"><a href="#XMLState.get_package_sections-558"><span class="linenos">558</span></a>                                    <span class="n">packages_section</span><span class="o">=</span><span class="n">packages_section</span><span class="p">,</span>
</span><span id="XMLState.get_package_sections-559"><a href="#XMLState.get_package_sections-559"><span class="linenos">559</span></a>                                    <span class="n">package_section</span><span class="o">=</span><span class="n">package</span>
</span><span id="XMLState.get_package_sections-560"><a href="#XMLState.get_package_sections-560"><span class="linenos">560</span></a>                                <span class="p">)</span>
</span><span id="XMLState.get_package_sections-561"><a href="#XMLState.get_package_sections-561"><span class="linenos">561</span></a>                            <span class="p">)</span>
</span><span id="XMLState.get_package_sections-562"><a href="#XMLState.get_package_sections-562"><span class="linenos">562</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>List of package sections from the given packages sections.
Each list element contains a tuple with the <package> section
reference and the <packages> section this package belongs to</p>

<p>If a package entry specfies an architecture, it is only taken if
the host architecture matches the configured architecture</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list packages_sections</strong>:  <packages></li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
<pre><code>Contains list of package_type tuples

.. code:: python

    [package_type(packages_section=object, package_section=object)]
</code></pre>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_to_become_deleted_packages" class="classattr">
                                        <input id="XMLState.get_to_become_deleted_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_to_become_deleted_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_to_become_deleted_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_to_become_deleted_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_to_become_deleted_packages-564"><a href="#XMLState.get_to_become_deleted_packages-564"><span class="linenos">564</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_to_become_deleted_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_to_become_deleted_packages-565"><a href="#XMLState.get_to_become_deleted_packages-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_to_become_deleted_packages-566"><a href="#XMLState.get_to_become_deleted_packages-566"><span class="linenos">566</span></a><span class="sd">        List of package names from the type=&quot;delete&quot; or type=&quot;uninstall&quot;</span>
</span><span id="XMLState.get_to_become_deleted_packages-567"><a href="#XMLState.get_to_become_deleted_packages-567"><span class="linenos">567</span></a><span class="sd">        packages section(s)</span>
</span><span id="XMLState.get_to_become_deleted_packages-568"><a href="#XMLState.get_to_become_deleted_packages-568"><span class="linenos">568</span></a>
</span><span id="XMLState.get_to_become_deleted_packages-569"><a href="#XMLState.get_to_become_deleted_packages-569"><span class="linenos">569</span></a><span class="sd">        :param bool force: return &quot;delete&quot; type if True, &quot;uninstall&quot; type</span>
</span><span id="XMLState.get_to_become_deleted_packages-570"><a href="#XMLState.get_to_become_deleted_packages-570"><span class="linenos">570</span></a><span class="sd">            otherwise</span>
</span><span id="XMLState.get_to_become_deleted_packages-571"><a href="#XMLState.get_to_become_deleted_packages-571"><span class="linenos">571</span></a>
</span><span id="XMLState.get_to_become_deleted_packages-572"><a href="#XMLState.get_to_become_deleted_packages-572"><span class="linenos">572</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState.get_to_become_deleted_packages-573"><a href="#XMLState.get_to_become_deleted_packages-573"><span class="linenos">573</span></a>
</span><span id="XMLState.get_to_become_deleted_packages-574"><a href="#XMLState.get_to_become_deleted_packages-574"><span class="linenos">574</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_to_become_deleted_packages-575"><a href="#XMLState.get_to_become_deleted_packages-575"><span class="linenos">575</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_to_become_deleted_packages-576"><a href="#XMLState.get_to_become_deleted_packages-576"><span class="linenos">576</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_to_become_deleted_packages-577"><a href="#XMLState.get_to_become_deleted_packages-577"><span class="linenos">577</span></a>        <span class="n">to_become_deleted_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_to_become_deleted_packages-578"><a href="#XMLState.get_to_become_deleted_packages-578"><span class="linenos">578</span></a>            <span class="p">[</span><span class="s1">&#39;delete&#39;</span> <span class="k">if</span> <span class="n">force</span> <span class="k">else</span> <span class="s1">&#39;uninstall&#39;</span><span class="p">]</span>
</span><span id="XMLState.get_to_become_deleted_packages-579"><a href="#XMLState.get_to_become_deleted_packages-579"><span class="linenos">579</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_to_become_deleted_packages-580"><a href="#XMLState.get_to_become_deleted_packages-580"><span class="linenos">580</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState.get_to_become_deleted_packages-581"><a href="#XMLState.get_to_become_deleted_packages-581"><span class="linenos">581</span></a>            <span class="n">to_become_deleted_packages_sections</span>
</span><span id="XMLState.get_to_become_deleted_packages-582"><a href="#XMLState.get_to_become_deleted_packages-582"><span class="linenos">582</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_to_become_deleted_packages-583"><a href="#XMLState.get_to_become_deleted_packages-583"><span class="linenos">583</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_to_become_deleted_packages-584"><a href="#XMLState.get_to_become_deleted_packages-584"><span class="linenos">584</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_to_become_deleted_packages-585"><a href="#XMLState.get_to_become_deleted_packages-585"><span class="linenos">585</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_to_become_deleted_packages-586"><a href="#XMLState.get_to_become_deleted_packages-586"><span class="linenos">586</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span></pre></div>


            <div class="docstring"><p>List of package names from the type="delete" or type="uninstall"
packages section(s)</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>bool force</strong>:  return "delete" type if True, "uninstall" type
otherwise</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>package names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_packages_sections" class="classattr">
                                        <input id="XMLState.get_bootstrap_packages_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_packages_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_packages_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_packages_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_packages_sections-588"><a href="#XMLState.get_bootstrap_packages_sections-588"><span class="linenos">588</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_packages_sections-589"><a href="#XMLState.get_bootstrap_packages_sections-589"><span class="linenos">589</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_packages_sections-590"><a href="#XMLState.get_bootstrap_packages_sections-590"><span class="linenos">590</span></a><span class="sd">        List of packages sections matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState.get_bootstrap_packages_sections-591"><a href="#XMLState.get_bootstrap_packages_sections-591"><span class="linenos">591</span></a>
</span><span id="XMLState.get_bootstrap_packages_sections-592"><a href="#XMLState.get_bootstrap_packages_sections-592"><span class="linenos">592</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="XMLState.get_bootstrap_packages_sections-593"><a href="#XMLState.get_bootstrap_packages_sections-593"><span class="linenos">593</span></a>
</span><span id="XMLState.get_bootstrap_packages_sections-594"><a href="#XMLState.get_bootstrap_packages_sections-594"><span class="linenos">594</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_bootstrap_packages_sections-595"><a href="#XMLState.get_bootstrap_packages_sections-595"><span class="linenos">595</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_packages_sections-596"><a href="#XMLState.get_bootstrap_packages_sections-596"><span class="linenos">596</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>List of packages sections matching type="bootstrap"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of <packages> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_image_packages_sections" class="classattr">
                                        <input id="XMLState.get_image_packages_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_image_packages_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_image_packages_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_image_packages_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_image_packages_sections-598"><a href="#XMLState.get_image_packages_sections-598"><span class="linenos">598</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_packages_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_image_packages_sections-599"><a href="#XMLState.get_image_packages_sections-599"><span class="linenos">599</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_image_packages_sections-600"><a href="#XMLState.get_image_packages_sections-600"><span class="linenos">600</span></a><span class="sd">        List of packages sections matching type=&quot;image&quot;</span>
</span><span id="XMLState.get_image_packages_sections-601"><a href="#XMLState.get_image_packages_sections-601"><span class="linenos">601</span></a>
</span><span id="XMLState.get_image_packages_sections-602"><a href="#XMLState.get_image_packages_sections-602"><span class="linenos">602</span></a><span class="sd">        :return: list of &lt;packages&gt; section reference(s)</span>
</span><span id="XMLState.get_image_packages_sections-603"><a href="#XMLState.get_image_packages_sections-603"><span class="linenos">603</span></a>
</span><span id="XMLState.get_image_packages_sections-604"><a href="#XMLState.get_image_packages_sections-604"><span class="linenos">604</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_image_packages_sections-605"><a href="#XMLState.get_image_packages_sections-605"><span class="linenos">605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_image_packages_sections-606"><a href="#XMLState.get_image_packages_sections-606"><span class="linenos">606</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;image&#39;</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>List of packages sections matching type="image"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of <packages> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_packages" class="classattr">
                                        <input id="XMLState.get_bootstrap_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">plus_packages</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_packages-608"><a href="#XMLState.get_bootstrap_packages-608"><span class="linenos">608</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plus_packages</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_packages-609"><a href="#XMLState.get_bootstrap_packages-609"><span class="linenos">609</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_packages-610"><a href="#XMLState.get_bootstrap_packages-610"><span class="linenos">610</span></a><span class="sd">        List of package names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="XMLState.get_bootstrap_packages-611"><a href="#XMLState.get_bootstrap_packages-611"><span class="linenos">611</span></a>
</span><span id="XMLState.get_bootstrap_packages-612"><a href="#XMLState.get_bootstrap_packages-612"><span class="linenos">612</span></a><span class="sd">        The list gets the selected package manager appended</span>
</span><span id="XMLState.get_bootstrap_packages-613"><a href="#XMLState.get_bootstrap_packages-613"><span class="linenos">613</span></a><span class="sd">        if there is a request to install packages inside of</span>
</span><span id="XMLState.get_bootstrap_packages-614"><a href="#XMLState.get_bootstrap_packages-614"><span class="linenos">614</span></a><span class="sd">        the image via a chroot operation</span>
</span><span id="XMLState.get_bootstrap_packages-615"><a href="#XMLState.get_bootstrap_packages-615"><span class="linenos">615</span></a>
</span><span id="XMLState.get_bootstrap_packages-616"><a href="#XMLState.get_bootstrap_packages-616"><span class="linenos">616</span></a><span class="sd">        :param list plus_packages: list of additional packages</span>
</span><span id="XMLState.get_bootstrap_packages-617"><a href="#XMLState.get_bootstrap_packages-617"><span class="linenos">617</span></a>
</span><span id="XMLState.get_bootstrap_packages-618"><a href="#XMLState.get_bootstrap_packages-618"><span class="linenos">618</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState.get_bootstrap_packages-619"><a href="#XMLState.get_bootstrap_packages-619"><span class="linenos">619</span></a>
</span><span id="XMLState.get_bootstrap_packages-620"><a href="#XMLState.get_bootstrap_packages-620"><span class="linenos">620</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_bootstrap_packages-621"><a href="#XMLState.get_bootstrap_packages-621"><span class="linenos">621</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_packages-622"><a href="#XMLState.get_bootstrap_packages-622"><span class="linenos">622</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_bootstrap_packages-623"><a href="#XMLState.get_bootstrap_packages-623"><span class="linenos">623</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState.get_bootstrap_packages-624"><a href="#XMLState.get_bootstrap_packages-624"><span class="linenos">624</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState.get_bootstrap_packages-625"><a href="#XMLState.get_bootstrap_packages-625"><span class="linenos">625</span></a>            <span class="n">bootstrap_packages_sections</span>
</span><span id="XMLState.get_bootstrap_packages-626"><a href="#XMLState.get_bootstrap_packages-626"><span class="linenos">626</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_bootstrap_packages-627"><a href="#XMLState.get_bootstrap_packages-627"><span class="linenos">627</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_packages-628"><a href="#XMLState.get_bootstrap_packages-628"><span class="linenos">628</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_packages-629"><a href="#XMLState.get_bootstrap_packages-629"><span class="linenos">629</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState.get_bootstrap_packages-630"><a href="#XMLState.get_bootstrap_packages-630"><span class="linenos">630</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_system_packages</span><span class="p">():</span>
</span><span id="XMLState.get_bootstrap_packages-631"><a href="#XMLState.get_bootstrap_packages-631"><span class="linenos">631</span></a>                <span class="n">package_manager_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_manager</span><span class="p">()</span>
</span><span id="XMLState.get_bootstrap_packages-632"><a href="#XMLState.get_bootstrap_packages-632"><span class="linenos">632</span></a>                <span class="k">if</span> <span class="n">package_manager_name</span> <span class="o">==</span> <span class="s1">&#39;dnf4&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_packages-633"><a href="#XMLState.get_bootstrap_packages-633"><span class="linenos">633</span></a>                    <span class="c1"># The package name for dnf4 is just dnf. Thus</span>
</span><span id="XMLState.get_bootstrap_packages-634"><a href="#XMLState.get_bootstrap_packages-634"><span class="linenos">634</span></a>                    <span class="c1"># the name must be adapted in this case</span>
</span><span id="XMLState.get_bootstrap_packages-635"><a href="#XMLState.get_bootstrap_packages-635"><span class="linenos">635</span></a>                    <span class="n">package_manager_name</span> <span class="o">=</span> <span class="s1">&#39;dnf&#39;</span>
</span><span id="XMLState.get_bootstrap_packages-636"><a href="#XMLState.get_bootstrap_packages-636"><span class="linenos">636</span></a>                <span class="k">elif</span> <span class="n">package_manager_name</span> <span class="o">==</span> <span class="s1">&#39;apk&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_packages-637"><a href="#XMLState.get_bootstrap_packages-637"><span class="linenos">637</span></a>                    <span class="n">package_manager_name</span> <span class="o">=</span> <span class="s1">&#39;apk-tools&#39;</span>
</span><span id="XMLState.get_bootstrap_packages-638"><a href="#XMLState.get_bootstrap_packages-638"><span class="linenos">638</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package_manager_name</span><span class="p">)</span>
</span><span id="XMLState.get_bootstrap_packages-639"><a href="#XMLState.get_bootstrap_packages-639"><span class="linenos">639</span></a>        <span class="k">if</span> <span class="n">plus_packages</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_packages-640"><a href="#XMLState.get_bootstrap_packages-640"><span class="linenos">640</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">plus_packages</span>
</span><span id="XMLState.get_bootstrap_packages-641"><a href="#XMLState.get_bootstrap_packages-641"><span class="linenos">641</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span></pre></div>


            <div class="docstring"><p>List of package names from the type="bootstrap" packages section(s)</p>

<p>The list gets the selected package manager appended
if there is a request to install packages inside of
the image via a chroot operation</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list plus_packages</strong>:  list of additional packages</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>package names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_packages" class="classattr">
                                        <input id="XMLState.get_system_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_packages-643"><a href="#XMLState.get_system_packages-643"><span class="linenos">643</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_system_packages-644"><a href="#XMLState.get_system_packages-644"><span class="linenos">644</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_packages-645"><a href="#XMLState.get_system_packages-645"><span class="linenos">645</span></a><span class="sd">        List of package names from the packages sections matching</span>
</span><span id="XMLState.get_system_packages-646"><a href="#XMLState.get_system_packages-646"><span class="linenos">646</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState.get_system_packages-647"><a href="#XMLState.get_system_packages-647"><span class="linenos">647</span></a>
</span><span id="XMLState.get_system_packages-648"><a href="#XMLState.get_system_packages-648"><span class="linenos">648</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState.get_system_packages-649"><a href="#XMLState.get_system_packages-649"><span class="linenos">649</span></a>
</span><span id="XMLState.get_system_packages-650"><a href="#XMLState.get_system_packages-650"><span class="linenos">650</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_system_packages-651"><a href="#XMLState.get_system_packages-651"><span class="linenos">651</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_packages-652"><a href="#XMLState.get_system_packages-652"><span class="linenos">652</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_system_packages-653"><a href="#XMLState.get_system_packages-653"><span class="linenos">653</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_system_packages-654"><a href="#XMLState.get_system_packages-654"><span class="linenos">654</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_system_packages-655"><a href="#XMLState.get_system_packages-655"><span class="linenos">655</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_system_packages-656"><a href="#XMLState.get_system_packages-656"><span class="linenos">656</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState.get_system_packages-657"><a href="#XMLState.get_system_packages-657"><span class="linenos">657</span></a>            <span class="n">image_packages_sections</span>
</span><span id="XMLState.get_system_packages-658"><a href="#XMLState.get_system_packages-658"><span class="linenos">658</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_system_packages-659"><a href="#XMLState.get_system_packages-659"><span class="linenos">659</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_system_packages-660"><a href="#XMLState.get_system_packages-660"><span class="linenos">660</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.get_system_packages-661"><a href="#XMLState.get_system_packages-661"><span class="linenos">661</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState.get_system_packages-662"><a href="#XMLState.get_system_packages-662"><span class="linenos">662</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span></pre></div>


            <div class="docstring"><p>List of package names from the packages sections matching
type="image" and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>package names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_files" class="classattr">
                                        <input id="XMLState.get_bootstrap_files-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_files</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n"><a href="#FileT">FileT</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_files-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_files"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_files-664"><a href="#XMLState.get_bootstrap_files-664"><span class="linenos">664</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FileT</span><span class="p">]:</span>
</span><span id="XMLState.get_bootstrap_files-665"><a href="#XMLState.get_bootstrap_files-665"><span class="linenos">665</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_files-666"><a href="#XMLState.get_bootstrap_files-666"><span class="linenos">666</span></a><span class="sd">        List of file names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="XMLState.get_bootstrap_files-667"><a href="#XMLState.get_bootstrap_files-667"><span class="linenos">667</span></a>
</span><span id="XMLState.get_bootstrap_files-668"><a href="#XMLState.get_bootstrap_files-668"><span class="linenos">668</span></a><span class="sd">        :return: file names</span>
</span><span id="XMLState.get_bootstrap_files-669"><a href="#XMLState.get_bootstrap_files-669"><span class="linenos">669</span></a>
</span><span id="XMLState.get_bootstrap_files-670"><a href="#XMLState.get_bootstrap_files-670"><span class="linenos">670</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_bootstrap_files-671"><a href="#XMLState.get_bootstrap_files-671"><span class="linenos">671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_files-672"><a href="#XMLState.get_bootstrap_files-672"><span class="linenos">672</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState.get_bootstrap_files-673"><a href="#XMLState.get_bootstrap_files-673"><span class="linenos">673</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState.get_bootstrap_files-674"><a href="#XMLState.get_bootstrap_files-674"><span class="linenos">674</span></a>        <span class="k">if</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_files-675"><a href="#XMLState.get_bootstrap_files-675"><span class="linenos">675</span></a>            <span class="k">for</span> <span class="n">bootstrap_packages_section</span> <span class="ow">in</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_files-676"><a href="#XMLState.get_bootstrap_files-676"><span class="linenos">676</span></a>                <span class="n">file_list</span> <span class="o">=</span> <span class="n">bootstrap_packages_section</span><span class="o">.</span><span class="n">get_file</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="XMLState.get_bootstrap_files-677"><a href="#XMLState.get_bootstrap_files-677"><span class="linenos">677</span></a>                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_files-678"><a href="#XMLState.get_bootstrap_files-678"><span class="linenos">678</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> <span class="n">FileT</span><span class="p">(</span>
</span><span id="XMLState.get_bootstrap_files-679"><a href="#XMLState.get_bootstrap_files-679"><span class="linenos">679</span></a>                        <span class="n">target</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_target</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_bootstrap_files-680"><a href="#XMLState.get_bootstrap_files-680"><span class="linenos">680</span></a>                        <span class="n">owner</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_owner</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_bootstrap_files-681"><a href="#XMLState.get_bootstrap_files-681"><span class="linenos">681</span></a>                        <span class="n">permissions</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_permissions</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_bootstrap_files-682"><a href="#XMLState.get_bootstrap_files-682"><span class="linenos">682</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_bootstrap_files-683"><a href="#XMLState.get_bootstrap_files-683"><span class="linenos">683</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>List of file names from the type="bootstrap" packages section(s)</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>file names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_files" class="classattr">
                                        <input id="XMLState.get_system_files-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_files</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n"><a href="#FileT">FileT</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_files-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_files"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_files-685"><a href="#XMLState.get_system_files-685"><span class="linenos">685</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FileT</span><span class="p">]:</span>
</span><span id="XMLState.get_system_files-686"><a href="#XMLState.get_system_files-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_files-687"><a href="#XMLState.get_system_files-687"><span class="linenos">687</span></a><span class="sd">        List of file names from the packages sections matching</span>
</span><span id="XMLState.get_system_files-688"><a href="#XMLState.get_system_files-688"><span class="linenos">688</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState.get_system_files-689"><a href="#XMLState.get_system_files-689"><span class="linenos">689</span></a>
</span><span id="XMLState.get_system_files-690"><a href="#XMLState.get_system_files-690"><span class="linenos">690</span></a><span class="sd">        :return: file names</span>
</span><span id="XMLState.get_system_files-691"><a href="#XMLState.get_system_files-691"><span class="linenos">691</span></a>
</span><span id="XMLState.get_system_files-692"><a href="#XMLState.get_system_files-692"><span class="linenos">692</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_system_files-693"><a href="#XMLState.get_system_files-693"><span class="linenos">693</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_files-694"><a href="#XMLState.get_system_files-694"><span class="linenos">694</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState.get_system_files-695"><a href="#XMLState.get_system_files-695"><span class="linenos">695</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_system_files-696"><a href="#XMLState.get_system_files-696"><span class="linenos">696</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_system_files-697"><a href="#XMLState.get_system_files-697"><span class="linenos">697</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_system_files-698"><a href="#XMLState.get_system_files-698"><span class="linenos">698</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_system_files-699"><a href="#XMLState.get_system_files-699"><span class="linenos">699</span></a>            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="XMLState.get_system_files-700"><a href="#XMLState.get_system_files-700"><span class="linenos">700</span></a>                <span class="n">result</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span> <span class="o">=</span> <span class="n">FileT</span><span class="p">(</span>
</span><span id="XMLState.get_system_files-701"><a href="#XMLState.get_system_files-701"><span class="linenos">701</span></a>                    <span class="n">target</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_target</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_system_files-702"><a href="#XMLState.get_system_files-702"><span class="linenos">702</span></a>                    <span class="n">owner</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_owner</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_system_files-703"><a href="#XMLState.get_system_files-703"><span class="linenos">703</span></a>                    <span class="n">permissions</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">get_permissions</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_system_files-704"><a href="#XMLState.get_system_files-704"><span class="linenos">704</span></a>                <span class="p">)</span>
</span><span id="XMLState.get_system_files-705"><a href="#XMLState.get_system_files-705"><span class="linenos">705</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>List of file names from the packages sections matching
type="image" and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>file names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_archives" class="classattr">
                                        <input id="XMLState.get_bootstrap_archives-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_archives</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_archives-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_archives"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_archives-707"><a href="#XMLState.get_bootstrap_archives-707"><span class="linenos">707</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_archives-708"><a href="#XMLState.get_bootstrap_archives-708"><span class="linenos">708</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_archives-709"><a href="#XMLState.get_bootstrap_archives-709"><span class="linenos">709</span></a><span class="sd">        List of archive names from the type=&quot;bootstrap&quot; packages section(s)</span>
</span><span id="XMLState.get_bootstrap_archives-710"><a href="#XMLState.get_bootstrap_archives-710"><span class="linenos">710</span></a>
</span><span id="XMLState.get_bootstrap_archives-711"><a href="#XMLState.get_bootstrap_archives-711"><span class="linenos">711</span></a><span class="sd">        :return: archive names</span>
</span><span id="XMLState.get_bootstrap_archives-712"><a href="#XMLState.get_bootstrap_archives-712"><span class="linenos">712</span></a>
</span><span id="XMLState.get_bootstrap_archives-713"><a href="#XMLState.get_bootstrap_archives-713"><span class="linenos">713</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_bootstrap_archives-714"><a href="#XMLState.get_bootstrap_archives-714"><span class="linenos">714</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_archives-715"><a href="#XMLState.get_bootstrap_archives-715"><span class="linenos">715</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_bootstrap_archives-716"><a href="#XMLState.get_bootstrap_archives-716"><span class="linenos">716</span></a>        <span class="n">bootstrap_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState.get_bootstrap_archives-717"><a href="#XMLState.get_bootstrap_archives-717"><span class="linenos">717</span></a>        <span class="k">if</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_archives-718"><a href="#XMLState.get_bootstrap_archives-718"><span class="linenos">718</span></a>            <span class="k">for</span> <span class="n">bootstrap_packages_section</span> <span class="ow">in</span> <span class="n">bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_archives-719"><a href="#XMLState.get_bootstrap_archives-719"><span class="linenos">719</span></a>                <span class="n">archive_list</span> <span class="o">=</span> <span class="n">bootstrap_packages_section</span><span class="o">.</span><span class="n">get_archive</span><span class="p">()</span>
</span><span id="XMLState.get_bootstrap_archives-720"><a href="#XMLState.get_bootstrap_archives-720"><span class="linenos">720</span></a>                <span class="k">if</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_archives-721"><a href="#XMLState.get_bootstrap_archives-721"><span class="linenos">721</span></a>                    <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_archives-722"><a href="#XMLState.get_bootstrap_archives-722"><span class="linenos">722</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState.get_bootstrap_archives-723"><a href="#XMLState.get_bootstrap_archives-723"><span class="linenos">723</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of archive names from the type="bootstrap" packages section(s)</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>archive names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_archives" class="classattr">
                                        <input id="XMLState.get_system_archives-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_archives</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_archives-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_archives"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_archives-725"><a href="#XMLState.get_system_archives-725"><span class="linenos">725</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_system_archives-726"><a href="#XMLState.get_system_archives-726"><span class="linenos">726</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_archives-727"><a href="#XMLState.get_system_archives-727"><span class="linenos">727</span></a><span class="sd">        List of archive names from the packages sections matching</span>
</span><span id="XMLState.get_system_archives-728"><a href="#XMLState.get_system_archives-728"><span class="linenos">728</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState.get_system_archives-729"><a href="#XMLState.get_system_archives-729"><span class="linenos">729</span></a>
</span><span id="XMLState.get_system_archives-730"><a href="#XMLState.get_system_archives-730"><span class="linenos">730</span></a><span class="sd">        :return: archive names</span>
</span><span id="XMLState.get_system_archives-731"><a href="#XMLState.get_system_archives-731"><span class="linenos">731</span></a>
</span><span id="XMLState.get_system_archives-732"><a href="#XMLState.get_system_archives-732"><span class="linenos">732</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_system_archives-733"><a href="#XMLState.get_system_archives-733"><span class="linenos">733</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_archives-734"><a href="#XMLState.get_system_archives-734"><span class="linenos">734</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_system_archives-735"><a href="#XMLState.get_system_archives-735"><span class="linenos">735</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_system_archives-736"><a href="#XMLState.get_system_archives-736"><span class="linenos">736</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_system_archives-737"><a href="#XMLState.get_system_archives-737"><span class="linenos">737</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_system_archives-738"><a href="#XMLState.get_system_archives-738"><span class="linenos">738</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_system_archives-739"><a href="#XMLState.get_system_archives-739"><span class="linenos">739</span></a>            <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_archive</span><span class="p">():</span>
</span><span id="XMLState.get_system_archives-740"><a href="#XMLState.get_system_archives-740"><span class="linenos">740</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState.get_system_archives-741"><a href="#XMLState.get_system_archives-741"><span class="linenos">741</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of archive names from the packages sections matching
type="image" and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>archive names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_ignore_packages" class="classattr">
                                        <input id="XMLState.get_ignore_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_ignore_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_ignore_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_ignore_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_ignore_packages-743"><a href="#XMLState.get_ignore_packages-743"><span class="linenos">743</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_ignore_packages-744"><a href="#XMLState.get_ignore_packages-744"><span class="linenos">744</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_ignore_packages-745"><a href="#XMLState.get_ignore_packages-745"><span class="linenos">745</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="XMLState.get_ignore_packages-746"><a href="#XMLState.get_ignore_packages-746"><span class="linenos">746</span></a><span class="sd">        section_type and type=build_type</span>
</span><span id="XMLState.get_ignore_packages-747"><a href="#XMLState.get_ignore_packages-747"><span class="linenos">747</span></a>
</span><span id="XMLState.get_ignore_packages-748"><a href="#XMLState.get_ignore_packages-748"><span class="linenos">748</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState.get_ignore_packages-749"><a href="#XMLState.get_ignore_packages-749"><span class="linenos">749</span></a>
</span><span id="XMLState.get_ignore_packages-750"><a href="#XMLState.get_ignore_packages-750"><span class="linenos">750</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_ignore_packages-751"><a href="#XMLState.get_ignore_packages-751"><span class="linenos">751</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_ignore_packages-752"><a href="#XMLState.get_ignore_packages-752"><span class="linenos">752</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_ignore_packages-753"><a href="#XMLState.get_ignore_packages-753"><span class="linenos">753</span></a>        <span class="n">image_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_ignore_packages-754"><a href="#XMLState.get_ignore_packages-754"><span class="linenos">754</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_ignore_packages-755"><a href="#XMLState.get_ignore_packages-755"><span class="linenos">755</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_ignore_packages-756"><a href="#XMLState.get_ignore_packages-756"><span class="linenos">756</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">image_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_ignore_packages-757"><a href="#XMLState.get_ignore_packages-757"><span class="linenos">757</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_ignore</span><span class="p">():</span>
</span><span id="XMLState.get_ignore_packages-758"><a href="#XMLState.get_ignore_packages-758"><span class="linenos">758</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_matches_host_architecture</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
</span><span id="XMLState.get_ignore_packages-759"><a href="#XMLState.get_ignore_packages-759"><span class="linenos">759</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="XMLState.get_ignore_packages-760"><a href="#XMLState.get_ignore_packages-760"><span class="linenos">760</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of ignore package names from the packages sections matching
section_type and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>package names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_files_ignore_packages" class="classattr">
                                        <input id="XMLState.get_system_files_ignore_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_files_ignore_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_files_ignore_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_files_ignore_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_files_ignore_packages-762"><a href="#XMLState.get_system_files_ignore_packages-762"><span class="linenos">762</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_files_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_system_files_ignore_packages-763"><a href="#XMLState.get_system_files_ignore_packages-763"><span class="linenos">763</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_files_ignore_packages-764"><a href="#XMLState.get_system_files_ignore_packages-764"><span class="linenos">764</span></a><span class="sd">        List of ignore package names from the type=&quot;systemfiles&quot;</span>
</span><span id="XMLState.get_system_files_ignore_packages-765"><a href="#XMLState.get_system_files_ignore_packages-765"><span class="linenos">765</span></a><span class="sd">        packages section(s)</span>
</span><span id="XMLState.get_system_files_ignore_packages-766"><a href="#XMLState.get_system_files_ignore_packages-766"><span class="linenos">766</span></a>
</span><span id="XMLState.get_system_files_ignore_packages-767"><a href="#XMLState.get_system_files_ignore_packages-767"><span class="linenos">767</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState.get_system_files_ignore_packages-768"><a href="#XMLState.get_system_files_ignore_packages-768"><span class="linenos">768</span></a>
</span><span id="XMLState.get_system_files_ignore_packages-769"><a href="#XMLState.get_system_files_ignore_packages-769"><span class="linenos">769</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_system_files_ignore_packages-770"><a href="#XMLState.get_system_files_ignore_packages-770"><span class="linenos">770</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_files_ignore_packages-771"><a href="#XMLState.get_system_files_ignore_packages-771"><span class="linenos">771</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;systemfiles&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of ignore package names from the type="systemfiles"
packages section(s)</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>package names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_ignore_packages" class="classattr">
                                        <input id="XMLState.get_system_ignore_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_ignore_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_ignore_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_ignore_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_ignore_packages-773"><a href="#XMLState.get_system_ignore_packages-773"><span class="linenos">773</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_system_ignore_packages-774"><a href="#XMLState.get_system_ignore_packages-774"><span class="linenos">774</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_ignore_packages-775"><a href="#XMLState.get_system_ignore_packages-775"><span class="linenos">775</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="XMLState.get_system_ignore_packages-776"><a href="#XMLState.get_system_ignore_packages-776"><span class="linenos">776</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState.get_system_ignore_packages-777"><a href="#XMLState.get_system_ignore_packages-777"><span class="linenos">777</span></a>
</span><span id="XMLState.get_system_ignore_packages-778"><a href="#XMLState.get_system_ignore_packages-778"><span class="linenos">778</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState.get_system_ignore_packages-779"><a href="#XMLState.get_system_ignore_packages-779"><span class="linenos">779</span></a>
</span><span id="XMLState.get_system_ignore_packages-780"><a href="#XMLState.get_system_ignore_packages-780"><span class="linenos">780</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_system_ignore_packages-781"><a href="#XMLState.get_system_ignore_packages-781"><span class="linenos">781</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_ignore_packages-782"><a href="#XMLState.get_system_ignore_packages-782"><span class="linenos">782</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of ignore package names from the packages sections matching
type="image" and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>package names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_ignore_packages" class="classattr">
                                        <input id="XMLState.get_bootstrap_ignore_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_ignore_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_ignore_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_ignore_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_ignore_packages-784"><a href="#XMLState.get_bootstrap_ignore_packages-784"><span class="linenos">784</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_ignore_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_ignore_packages-785"><a href="#XMLState.get_bootstrap_ignore_packages-785"><span class="linenos">785</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_ignore_packages-786"><a href="#XMLState.get_bootstrap_ignore_packages-786"><span class="linenos">786</span></a><span class="sd">        List of ignore package names from the packages sections matching</span>
</span><span id="XMLState.get_bootstrap_ignore_packages-787"><a href="#XMLState.get_bootstrap_ignore_packages-787"><span class="linenos">787</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState.get_bootstrap_ignore_packages-788"><a href="#XMLState.get_bootstrap_ignore_packages-788"><span class="linenos">788</span></a>
</span><span id="XMLState.get_bootstrap_ignore_packages-789"><a href="#XMLState.get_bootstrap_ignore_packages-789"><span class="linenos">789</span></a><span class="sd">        :return: package names</span>
</span><span id="XMLState.get_bootstrap_ignore_packages-790"><a href="#XMLState.get_bootstrap_ignore_packages-790"><span class="linenos">790</span></a>
</span><span id="XMLState.get_bootstrap_ignore_packages-791"><a href="#XMLState.get_bootstrap_ignore_packages-791"><span class="linenos">791</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_bootstrap_ignore_packages-792"><a href="#XMLState.get_bootstrap_ignore_packages-792"><span class="linenos">792</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_ignore_packages-793"><a href="#XMLState.get_bootstrap_ignore_packages-793"><span class="linenos">793</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ignore_packages</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of ignore package names from the packages sections matching
type="image" and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>package names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_package_name" class="classattr">
                                        <input id="XMLState.get_bootstrap_package_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_package_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_package_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_package_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_package_name-795"><a href="#XMLState.get_bootstrap_package_name-795"><span class="linenos">795</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_package_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_package_name-796"><a href="#XMLState.get_bootstrap_package_name-796"><span class="linenos">796</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_package_name-797"><a href="#XMLState.get_bootstrap_package_name-797"><span class="linenos">797</span></a><span class="sd">        bootstrap_package name from type=&quot;bootstrap&quot; packages section</span>
</span><span id="XMLState.get_bootstrap_package_name-798"><a href="#XMLState.get_bootstrap_package_name-798"><span class="linenos">798</span></a>
</span><span id="XMLState.get_bootstrap_package_name-799"><a href="#XMLState.get_bootstrap_package_name-799"><span class="linenos">799</span></a><span class="sd">        :return: bootstrap_package name</span>
</span><span id="XMLState.get_bootstrap_package_name-800"><a href="#XMLState.get_bootstrap_package_name-800"><span class="linenos">800</span></a>
</span><span id="XMLState.get_bootstrap_package_name-801"><a href="#XMLState.get_bootstrap_package_name-801"><span class="linenos">801</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_bootstrap_package_name-802"><a href="#XMLState.get_bootstrap_package_name-802"><span class="linenos">802</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_package_name-803"><a href="#XMLState.get_bootstrap_package_name-803"><span class="linenos">803</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_bootstrap_package_name-804"><a href="#XMLState.get_bootstrap_package_name-804"><span class="linenos">804</span></a>            <span class="p">[</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_bootstrap_package_name-805"><a href="#XMLState.get_bootstrap_package_name-805"><span class="linenos">805</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_bootstrap_package_name-806"><a href="#XMLState.get_bootstrap_package_name-806"><span class="linenos">806</span></a>        <span class="n">bootstrap_package</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_bootstrap_package_name-807"><a href="#XMLState.get_bootstrap_package_name-807"><span class="linenos">807</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_package_name-808"><a href="#XMLState.get_bootstrap_package_name-808"><span class="linenos">808</span></a>            <span class="n">bootstrap_package</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_bootstrap_package</span><span class="p">()</span>
</span><span id="XMLState.get_bootstrap_package_name-809"><a href="#XMLState.get_bootstrap_package_name-809"><span class="linenos">809</span></a>            <span class="k">if</span> <span class="n">bootstrap_package</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_package_name-810"><a href="#XMLState.get_bootstrap_package_name-810"><span class="linenos">810</span></a>                <span class="k">break</span>
</span><span id="XMLState.get_bootstrap_package_name-811"><a href="#XMLState.get_bootstrap_package_name-811"><span class="linenos">811</span></a>        <span class="k">return</span> <span class="n">bootstrap_package</span>
</span></pre></div>


            <div class="docstring"><p>bootstrap_package name from type="bootstrap" packages section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>bootstrap_package name</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_collection_type" class="classattr">
                                        <input id="XMLState.get_collection_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_collection_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_collection_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_collection_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_collection_type-813"><a href="#XMLState.get_collection_type-813"><span class="linenos">813</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_collection_type-814"><a href="#XMLState.get_collection_type-814"><span class="linenos">814</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_collection_type-815"><a href="#XMLState.get_collection_type-815"><span class="linenos">815</span></a><span class="sd">        Collection type from packages sections matching given section</span>
</span><span id="XMLState.get_collection_type-816"><a href="#XMLState.get_collection_type-816"><span class="linenos">816</span></a><span class="sd">        type.</span>
</span><span id="XMLState.get_collection_type-817"><a href="#XMLState.get_collection_type-817"><span class="linenos">817</span></a>
</span><span id="XMLState.get_collection_type-818"><a href="#XMLState.get_collection_type-818"><span class="linenos">818</span></a><span class="sd">        If no collection type is specified the default collection</span>
</span><span id="XMLState.get_collection_type-819"><a href="#XMLState.get_collection_type-819"><span class="linenos">819</span></a><span class="sd">        type is set to: onlyRequired</span>
</span><span id="XMLState.get_collection_type-820"><a href="#XMLState.get_collection_type-820"><span class="linenos">820</span></a>
</span><span id="XMLState.get_collection_type-821"><a href="#XMLState.get_collection_type-821"><span class="linenos">821</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="XMLState.get_collection_type-822"><a href="#XMLState.get_collection_type-822"><span class="linenos">822</span></a>
</span><span id="XMLState.get_collection_type-823"><a href="#XMLState.get_collection_type-823"><span class="linenos">823</span></a><span class="sd">        :return: collection type name</span>
</span><span id="XMLState.get_collection_type-824"><a href="#XMLState.get_collection_type-824"><span class="linenos">824</span></a>
</span><span id="XMLState.get_collection_type-825"><a href="#XMLState.get_collection_type-825"><span class="linenos">825</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_collection_type-826"><a href="#XMLState.get_collection_type-826"><span class="linenos">826</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_collection_type-827"><a href="#XMLState.get_collection_type-827"><span class="linenos">827</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_collection_type-828"><a href="#XMLState.get_collection_type-828"><span class="linenos">828</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_collection_type-829"><a href="#XMLState.get_collection_type-829"><span class="linenos">829</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_collection_type-830"><a href="#XMLState.get_collection_type-830"><span class="linenos">830</span></a>        <span class="n">collection_type</span> <span class="o">=</span> <span class="s1">&#39;onlyRequired&#39;</span>
</span><span id="XMLState.get_collection_type-831"><a href="#XMLState.get_collection_type-831"><span class="linenos">831</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_collection_type-832"><a href="#XMLState.get_collection_type-832"><span class="linenos">832</span></a>            <span class="n">packages_collection_type</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_patternType</span><span class="p">()</span>
</span><span id="XMLState.get_collection_type-833"><a href="#XMLState.get_collection_type-833"><span class="linenos">833</span></a>            <span class="k">if</span> <span class="n">packages_collection_type</span><span class="p">:</span>
</span><span id="XMLState.get_collection_type-834"><a href="#XMLState.get_collection_type-834"><span class="linenos">834</span></a>                <span class="n">collection_type</span> <span class="o">=</span> <span class="n">packages_collection_type</span>
</span><span id="XMLState.get_collection_type-835"><a href="#XMLState.get_collection_type-835"><span class="linenos">835</span></a>                <span class="k">break</span>
</span><span id="XMLState.get_collection_type-836"><a href="#XMLState.get_collection_type-836"><span class="linenos">836</span></a>        <span class="k">return</span> <span class="n">collection_type</span>
</span></pre></div>


            <div class="docstring"><p>Collection type from packages sections matching given section
type.</p>

<p>If no collection type is specified the default collection
type is set to: onlyRequired</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str section_type</strong>:  type name from packages section</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>collection type name</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_collection_type" class="classattr">
                                        <input id="XMLState.get_bootstrap_collection_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_collection_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_collection_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_collection_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_collection_type-838"><a href="#XMLState.get_bootstrap_collection_type-838"><span class="linenos">838</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_collection_type-839"><a href="#XMLState.get_bootstrap_collection_type-839"><span class="linenos">839</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_collection_type-840"><a href="#XMLState.get_bootstrap_collection_type-840"><span class="linenos">840</span></a><span class="sd">        Collection type for packages sections matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState.get_bootstrap_collection_type-841"><a href="#XMLState.get_bootstrap_collection_type-841"><span class="linenos">841</span></a>
</span><span id="XMLState.get_bootstrap_collection_type-842"><a href="#XMLState.get_bootstrap_collection_type-842"><span class="linenos">842</span></a><span class="sd">        :return: collection type name</span>
</span><span id="XMLState.get_bootstrap_collection_type-843"><a href="#XMLState.get_bootstrap_collection_type-843"><span class="linenos">843</span></a>
</span><span id="XMLState.get_bootstrap_collection_type-844"><a href="#XMLState.get_bootstrap_collection_type-844"><span class="linenos">844</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_bootstrap_collection_type-845"><a href="#XMLState.get_bootstrap_collection_type-845"><span class="linenos">845</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_collection_type-846"><a href="#XMLState.get_bootstrap_collection_type-846"><span class="linenos">846</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Collection type for packages sections matching type="bootstrap"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>collection type name</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_collection_type" class="classattr">
                                        <input id="XMLState.get_system_collection_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_collection_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_collection_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_collection_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_collection_type-848"><a href="#XMLState.get_system_collection_type-848"><span class="linenos">848</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_collection_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_system_collection_type-849"><a href="#XMLState.get_system_collection_type-849"><span class="linenos">849</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_collection_type-850"><a href="#XMLState.get_system_collection_type-850"><span class="linenos">850</span></a><span class="sd">        Collection type for packages sections matching type=&quot;image&quot;</span>
</span><span id="XMLState.get_system_collection_type-851"><a href="#XMLState.get_system_collection_type-851"><span class="linenos">851</span></a>
</span><span id="XMLState.get_system_collection_type-852"><a href="#XMLState.get_system_collection_type-852"><span class="linenos">852</span></a><span class="sd">        :return: collection type name</span>
</span><span id="XMLState.get_system_collection_type-853"><a href="#XMLState.get_system_collection_type-853"><span class="linenos">853</span></a>
</span><span id="XMLState.get_system_collection_type-854"><a href="#XMLState.get_system_collection_type-854"><span class="linenos">854</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_system_collection_type-855"><a href="#XMLState.get_system_collection_type-855"><span class="linenos">855</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_collection_type-856"><a href="#XMLState.get_system_collection_type-856"><span class="linenos">856</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collection_type</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Collection type for packages sections matching type="image"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>collection type name</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_collection_modules" class="classattr">
                                        <input id="XMLState.get_collection_modules-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_collection_modules</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_collection_modules-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_collection_modules"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_collection_modules-858"><a href="#XMLState.get_collection_modules-858"><span class="linenos">858</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collection_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
</span><span id="XMLState.get_collection_modules-859"><a href="#XMLState.get_collection_modules-859"><span class="linenos">859</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_collection_modules-860"><a href="#XMLState.get_collection_modules-860"><span class="linenos">860</span></a><span class="sd">        Dict of collection modules to enable and/or disable</span>
</span><span id="XMLState.get_collection_modules-861"><a href="#XMLState.get_collection_modules-861"><span class="linenos">861</span></a>
</span><span id="XMLState.get_collection_modules-862"><a href="#XMLState.get_collection_modules-862"><span class="linenos">862</span></a><span class="sd">        :return:</span>
</span><span id="XMLState.get_collection_modules-863"><a href="#XMLState.get_collection_modules-863"><span class="linenos">863</span></a><span class="sd">            Dict of the form:</span>
</span><span id="XMLState.get_collection_modules-864"><a href="#XMLState.get_collection_modules-864"><span class="linenos">864</span></a>
</span><span id="XMLState.get_collection_modules-865"><a href="#XMLState.get_collection_modules-865"><span class="linenos">865</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState.get_collection_modules-866"><a href="#XMLState.get_collection_modules-866"><span class="linenos">866</span></a>
</span><span id="XMLState.get_collection_modules-867"><a href="#XMLState.get_collection_modules-867"><span class="linenos">867</span></a><span class="sd">                {</span>
</span><span id="XMLState.get_collection_modules-868"><a href="#XMLState.get_collection_modules-868"><span class="linenos">868</span></a><span class="sd">                    &#39;enable&#39;: [</span>
</span><span id="XMLState.get_collection_modules-869"><a href="#XMLState.get_collection_modules-869"><span class="linenos">869</span></a><span class="sd">                        &quot;module:stream&quot;, &quot;module&quot;</span>
</span><span id="XMLState.get_collection_modules-870"><a href="#XMLState.get_collection_modules-870"><span class="linenos">870</span></a><span class="sd">                    ],</span>
</span><span id="XMLState.get_collection_modules-871"><a href="#XMLState.get_collection_modules-871"><span class="linenos">871</span></a><span class="sd">                    &#39;disable&#39;: [</span>
</span><span id="XMLState.get_collection_modules-872"><a href="#XMLState.get_collection_modules-872"><span class="linenos">872</span></a><span class="sd">                        &quot;module&quot;</span>
</span><span id="XMLState.get_collection_modules-873"><a href="#XMLState.get_collection_modules-873"><span class="linenos">873</span></a><span class="sd">                    ]</span>
</span><span id="XMLState.get_collection_modules-874"><a href="#XMLState.get_collection_modules-874"><span class="linenos">874</span></a><span class="sd">                }</span>
</span><span id="XMLState.get_collection_modules-875"><a href="#XMLState.get_collection_modules-875"><span class="linenos">875</span></a>
</span><span id="XMLState.get_collection_modules-876"><a href="#XMLState.get_collection_modules-876"><span class="linenos">876</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_collection_modules-877"><a href="#XMLState.get_collection_modules-877"><span class="linenos">877</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_collection_modules-878"><a href="#XMLState.get_collection_modules-878"><span class="linenos">878</span></a>        <span class="n">modules</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="XMLState.get_collection_modules-879"><a href="#XMLState.get_collection_modules-879"><span class="linenos">879</span></a>            <span class="s1">&#39;disable&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="XMLState.get_collection_modules-880"><a href="#XMLState.get_collection_modules-880"><span class="linenos">880</span></a>            <span class="s1">&#39;enable&#39;</span><span class="p">:</span> <span class="p">[]</span>
</span><span id="XMLState.get_collection_modules-881"><a href="#XMLState.get_collection_modules-881"><span class="linenos">881</span></a>        <span class="p">}</span>
</span><span id="XMLState.get_collection_modules-882"><a href="#XMLState.get_collection_modules-882"><span class="linenos">882</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">():</span>
</span><span id="XMLState.get_collection_modules-883"><a href="#XMLState.get_collection_modules-883"><span class="linenos">883</span></a>            <span class="k">for</span> <span class="n">collection_module</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_collectionModule</span><span class="p">():</span>
</span><span id="XMLState.get_collection_modules-884"><a href="#XMLState.get_collection_modules-884"><span class="linenos">884</span></a>                <span class="n">module_name</span> <span class="o">=</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.get_collection_modules-885"><a href="#XMLState.get_collection_modules-885"><span class="linenos">885</span></a>                <span class="k">if</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_enable</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="XMLState.get_collection_modules-886"><a href="#XMLState.get_collection_modules-886"><span class="linenos">886</span></a>                    <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;disable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
</span><span id="XMLState.get_collection_modules-887"><a href="#XMLState.get_collection_modules-887"><span class="linenos">887</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_collection_modules-888"><a href="#XMLState.get_collection_modules-888"><span class="linenos">888</span></a>                    <span class="n">stream</span> <span class="o">=</span> <span class="n">collection_module</span><span class="o">.</span><span class="n">get_stream</span><span class="p">()</span>
</span><span id="XMLState.get_collection_modules-889"><a href="#XMLState.get_collection_modules-889"><span class="linenos">889</span></a>                    <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="XMLState.get_collection_modules-890"><a href="#XMLState.get_collection_modules-890"><span class="linenos">890</span></a>                        <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">stream</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_collection_modules-891"><a href="#XMLState.get_collection_modules-891"><span class="linenos">891</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_collection_modules-892"><a href="#XMLState.get_collection_modules-892"><span class="linenos">892</span></a>                        <span class="n">modules</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
</span><span id="XMLState.get_collection_modules-893"><a href="#XMLState.get_collection_modules-893"><span class="linenos">893</span></a>        <span class="k">return</span> <span class="n">modules</span>
</span></pre></div>


            <div class="docstring"><p>Dict of collection modules to enable and/or disable</p>

<h6 id="returns">Returns</h6>

<blockquote>
<pre><code>Dict of the form:

.. code:: python

    {
        'enable': [
            "module:stream", "module"
        ],
        'disable': [
            "module"
        ]
    }
</code></pre>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_collections" class="classattr">
                                        <input id="XMLState.get_collections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_collections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_collections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_collections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_collections-895"><a href="#XMLState.get_collections-895"><span class="linenos">895</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_collections-896"><a href="#XMLState.get_collections-896"><span class="linenos">896</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_collections-897"><a href="#XMLState.get_collections-897"><span class="linenos">897</span></a><span class="sd">        List of collection names from the packages sections matching</span>
</span><span id="XMLState.get_collections-898"><a href="#XMLState.get_collections-898"><span class="linenos">898</span></a><span class="sd">        type=section_type and type=build_type</span>
</span><span id="XMLState.get_collections-899"><a href="#XMLState.get_collections-899"><span class="linenos">899</span></a>
</span><span id="XMLState.get_collections-900"><a href="#XMLState.get_collections-900"><span class="linenos">900</span></a><span class="sd">        :return: collection names</span>
</span><span id="XMLState.get_collections-901"><a href="#XMLState.get_collections-901"><span class="linenos">901</span></a>
</span><span id="XMLState.get_collections-902"><a href="#XMLState.get_collections-902"><span class="linenos">902</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_collections-903"><a href="#XMLState.get_collections-903"><span class="linenos">903</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_collections-904"><a href="#XMLState.get_collections-904"><span class="linenos">904</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_collections-905"><a href="#XMLState.get_collections-905"><span class="linenos">905</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_collections-906"><a href="#XMLState.get_collections-906"><span class="linenos">906</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_collections-907"><a href="#XMLState.get_collections-907"><span class="linenos">907</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_collections-908"><a href="#XMLState.get_collections-908"><span class="linenos">908</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_collections-909"><a href="#XMLState.get_collections-909"><span class="linenos">909</span></a>            <span class="k">for</span> <span class="n">collection</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_namedCollection</span><span class="p">():</span>
</span><span id="XMLState.get_collections-910"><a href="#XMLState.get_collections-910"><span class="linenos">910</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_matches_host_architecture</span><span class="p">(</span><span class="n">collection</span><span class="p">):</span>
</span><span id="XMLState.get_collections-911"><a href="#XMLState.get_collections-911"><span class="linenos">911</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_collections-912"><a href="#XMLState.get_collections-912"><span class="linenos">912</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
</span></pre></div>


            <div class="docstring"><p>List of collection names from the packages sections matching
type=section_type and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>collection names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_collections" class="classattr">
                                        <input id="XMLState.get_bootstrap_collections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_collections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_collections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_collections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_collections-914"><a href="#XMLState.get_bootstrap_collections-914"><span class="linenos">914</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_collections-915"><a href="#XMLState.get_bootstrap_collections-915"><span class="linenos">915</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_collections-916"><a href="#XMLState.get_bootstrap_collections-916"><span class="linenos">916</span></a><span class="sd">        List of collection names from the packages sections</span>
</span><span id="XMLState.get_bootstrap_collections-917"><a href="#XMLState.get_bootstrap_collections-917"><span class="linenos">917</span></a><span class="sd">        matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState.get_bootstrap_collections-918"><a href="#XMLState.get_bootstrap_collections-918"><span class="linenos">918</span></a>
</span><span id="XMLState.get_bootstrap_collections-919"><a href="#XMLState.get_bootstrap_collections-919"><span class="linenos">919</span></a><span class="sd">        :return: collection names</span>
</span><span id="XMLState.get_bootstrap_collections-920"><a href="#XMLState.get_bootstrap_collections-920"><span class="linenos">920</span></a>
</span><span id="XMLState.get_bootstrap_collections-921"><a href="#XMLState.get_bootstrap_collections-921"><span class="linenos">921</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_bootstrap_collections-922"><a href="#XMLState.get_bootstrap_collections-922"><span class="linenos">922</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_collections-923"><a href="#XMLState.get_bootstrap_collections-923"><span class="linenos">923</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collections</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of collection names from the packages sections
matching type="bootstrap"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>collection names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_collections" class="classattr">
                                        <input id="XMLState.get_system_collections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_collections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_collections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_collections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_collections-925"><a href="#XMLState.get_system_collections-925"><span class="linenos">925</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_collections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_system_collections-926"><a href="#XMLState.get_system_collections-926"><span class="linenos">926</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_collections-927"><a href="#XMLState.get_system_collections-927"><span class="linenos">927</span></a><span class="sd">        List of collection names from the packages sections</span>
</span><span id="XMLState.get_system_collections-928"><a href="#XMLState.get_system_collections-928"><span class="linenos">928</span></a><span class="sd">        matching type=&quot;image&quot;</span>
</span><span id="XMLState.get_system_collections-929"><a href="#XMLState.get_system_collections-929"><span class="linenos">929</span></a>
</span><span id="XMLState.get_system_collections-930"><a href="#XMLState.get_system_collections-930"><span class="linenos">930</span></a><span class="sd">        :return: collection names</span>
</span><span id="XMLState.get_system_collections-931"><a href="#XMLState.get_system_collections-931"><span class="linenos">931</span></a>
</span><span id="XMLState.get_system_collections-932"><a href="#XMLState.get_system_collections-932"><span class="linenos">932</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_system_collections-933"><a href="#XMLState.get_system_collections-933"><span class="linenos">933</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_collections-934"><a href="#XMLState.get_system_collections-934"><span class="linenos">934</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collections</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of collection names from the packages sections
matching type="image"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>collection names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_products" class="classattr">
                                        <input id="XMLState.get_products-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_products</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_products-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_products"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_products-936"><a href="#XMLState.get_products-936"><span class="linenos">936</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_products</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_products-937"><a href="#XMLState.get_products-937"><span class="linenos">937</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_products-938"><a href="#XMLState.get_products-938"><span class="linenos">938</span></a><span class="sd">        List of product names from the packages sections matching</span>
</span><span id="XMLState.get_products-939"><a href="#XMLState.get_products-939"><span class="linenos">939</span></a><span class="sd">        type=section_type and type=build_type</span>
</span><span id="XMLState.get_products-940"><a href="#XMLState.get_products-940"><span class="linenos">940</span></a>
</span><span id="XMLState.get_products-941"><a href="#XMLState.get_products-941"><span class="linenos">941</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="XMLState.get_products-942"><a href="#XMLState.get_products-942"><span class="linenos">942</span></a>
</span><span id="XMLState.get_products-943"><a href="#XMLState.get_products-943"><span class="linenos">943</span></a><span class="sd">        :return: product names</span>
</span><span id="XMLState.get_products-944"><a href="#XMLState.get_products-944"><span class="linenos">944</span></a>
</span><span id="XMLState.get_products-945"><a href="#XMLState.get_products-945"><span class="linenos">945</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_products-946"><a href="#XMLState.get_products-946"><span class="linenos">946</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_products-947"><a href="#XMLState.get_products-947"><span class="linenos">947</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_products-948"><a href="#XMLState.get_products-948"><span class="linenos">948</span></a>        <span class="n">typed_packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.get_products-949"><a href="#XMLState.get_products-949"><span class="linenos">949</span></a>            <span class="p">[</span><span class="n">section_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.get_products-950"><a href="#XMLState.get_products-950"><span class="linenos">950</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_products-951"><a href="#XMLState.get_products-951"><span class="linenos">951</span></a>        <span class="k">for</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">typed_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.get_products-952"><a href="#XMLState.get_products-952"><span class="linenos">952</span></a>            <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">get_product</span><span class="p">():</span>
</span><span id="XMLState.get_products-953"><a href="#XMLState.get_products-953"><span class="linenos">953</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_products-954"><a href="#XMLState.get_products-954"><span class="linenos">954</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>List of product names from the packages sections matching
type=section_type and type=build_type</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str section_type</strong>:  type name from packages section</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>product names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_products" class="classattr">
                                        <input id="XMLState.get_bootstrap_products-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_products</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_products-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_products"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_products-956"><a href="#XMLState.get_bootstrap_products-956"><span class="linenos">956</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_products-957"><a href="#XMLState.get_bootstrap_products-957"><span class="linenos">957</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_products-958"><a href="#XMLState.get_bootstrap_products-958"><span class="linenos">958</span></a><span class="sd">        List of product names from the packages sections</span>
</span><span id="XMLState.get_bootstrap_products-959"><a href="#XMLState.get_bootstrap_products-959"><span class="linenos">959</span></a><span class="sd">        matching type=&quot;bootstrap&quot;</span>
</span><span id="XMLState.get_bootstrap_products-960"><a href="#XMLState.get_bootstrap_products-960"><span class="linenos">960</span></a>
</span><span id="XMLState.get_bootstrap_products-961"><a href="#XMLState.get_bootstrap_products-961"><span class="linenos">961</span></a><span class="sd">        :return: product names</span>
</span><span id="XMLState.get_bootstrap_products-962"><a href="#XMLState.get_bootstrap_products-962"><span class="linenos">962</span></a>
</span><span id="XMLState.get_bootstrap_products-963"><a href="#XMLState.get_bootstrap_products-963"><span class="linenos">963</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_bootstrap_products-964"><a href="#XMLState.get_bootstrap_products-964"><span class="linenos">964</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_products-965"><a href="#XMLState.get_bootstrap_products-965"><span class="linenos">965</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of product names from the packages sections
matching type="bootstrap"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>product names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_products" class="classattr">
                                        <input id="XMLState.get_system_products-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_products</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_products-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_products"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_products-967"><a href="#XMLState.get_system_products-967"><span class="linenos">967</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_system_products-968"><a href="#XMLState.get_system_products-968"><span class="linenos">968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_products-969"><a href="#XMLState.get_system_products-969"><span class="linenos">969</span></a><span class="sd">        List of product names from the packages sections</span>
</span><span id="XMLState.get_system_products-970"><a href="#XMLState.get_system_products-970"><span class="linenos">970</span></a><span class="sd">        matching type=&quot;image&quot;</span>
</span><span id="XMLState.get_system_products-971"><a href="#XMLState.get_system_products-971"><span class="linenos">971</span></a>
</span><span id="XMLState.get_system_products-972"><a href="#XMLState.get_system_products-972"><span class="linenos">972</span></a><span class="sd">        :return: product names</span>
</span><span id="XMLState.get_system_products-973"><a href="#XMLState.get_system_products-973"><span class="linenos">973</span></a>
</span><span id="XMLState.get_system_products-974"><a href="#XMLState.get_system_products-974"><span class="linenos">974</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_system_products-975"><a href="#XMLState.get_system_products-975"><span class="linenos">975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_products-976"><a href="#XMLState.get_system_products-976"><span class="linenos">976</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of product names from the packages sections
matching type="image"</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>product names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.is_xen_server" class="classattr">
                                        <input id="XMLState.is_xen_server-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_xen_server</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.is_xen_server-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.is_xen_server"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.is_xen_server-978"><a href="#XMLState.is_xen_server-978"><span class="linenos">978</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_xen_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.is_xen_server-979"><a href="#XMLState.is_xen_server-979"><span class="linenos">979</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.is_xen_server-980"><a href="#XMLState.is_xen_server-980"><span class="linenos">980</span></a><span class="sd">        Check if build type domain setup specifies a Xen Server (dom0)</span>
</span><span id="XMLState.is_xen_server-981"><a href="#XMLState.is_xen_server-981"><span class="linenos">981</span></a>
</span><span id="XMLState.is_xen_server-982"><a href="#XMLState.is_xen_server-982"><span class="linenos">982</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.is_xen_server-983"><a href="#XMLState.is_xen_server-983"><span class="linenos">983</span></a>
</span><span id="XMLState.is_xen_server-984"><a href="#XMLState.is_xen_server-984"><span class="linenos">984</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.is_xen_server-985"><a href="#XMLState.is_xen_server-985"><span class="linenos">985</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.is_xen_server-986"><a href="#XMLState.is_xen_server-986"><span class="linenos">986</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_xen_server</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Check if build type domain setup specifies a Xen Server (dom0)</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.is_xen_guest" class="classattr">
                                        <input id="XMLState.is_xen_guest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_xen_guest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.is_xen_guest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.is_xen_guest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.is_xen_guest-988"><a href="#XMLState.is_xen_guest-988"><span class="linenos"> 988</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_xen_guest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.is_xen_guest-989"><a href="#XMLState.is_xen_guest-989"><span class="linenos"> 989</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.is_xen_guest-990"><a href="#XMLState.is_xen_guest-990"><span class="linenos"> 990</span></a><span class="sd">        Check if build type setup specifies a Xen Guest (domX)</span>
</span><span id="XMLState.is_xen_guest-991"><a href="#XMLState.is_xen_guest-991"><span class="linenos"> 991</span></a><span class="sd">        The check is based on the architecture, the firmware and</span>
</span><span id="XMLState.is_xen_guest-992"><a href="#XMLState.is_xen_guest-992"><span class="linenos"> 992</span></a><span class="sd">        xen_loader configuration values:</span>
</span><span id="XMLState.is_xen_guest-993"><a href="#XMLState.is_xen_guest-993"><span class="linenos"> 993</span></a>
</span><span id="XMLState.is_xen_guest-994"><a href="#XMLState.is_xen_guest-994"><span class="linenos"> 994</span></a><span class="sd">        * We only support Xen setup on the x86_64 architecture</span>
</span><span id="XMLState.is_xen_guest-995"><a href="#XMLState.is_xen_guest-995"><span class="linenos"> 995</span></a>
</span><span id="XMLState.is_xen_guest-996"><a href="#XMLState.is_xen_guest-996"><span class="linenos"> 996</span></a><span class="sd">        * Firmware pointing to ec2 means the image is targeted to run</span>
</span><span id="XMLState.is_xen_guest-997"><a href="#XMLState.is_xen_guest-997"><span class="linenos"> 997</span></a><span class="sd">          in Amazon EC2 which is a Xen guest</span>
</span><span id="XMLState.is_xen_guest-998"><a href="#XMLState.is_xen_guest-998"><span class="linenos"> 998</span></a>
</span><span id="XMLState.is_xen_guest-999"><a href="#XMLState.is_xen_guest-999"><span class="linenos"> 999</span></a><span class="sd">        * Machine setup with a xen_loader attribute also indicates a</span>
</span><span id="XMLState.is_xen_guest-1000"><a href="#XMLState.is_xen_guest-1000"><span class="linenos">1000</span></a><span class="sd">          Xen guest target</span>
</span><span id="XMLState.is_xen_guest-1001"><a href="#XMLState.is_xen_guest-1001"><span class="linenos">1001</span></a>
</span><span id="XMLState.is_xen_guest-1002"><a href="#XMLState.is_xen_guest-1002"><span class="linenos">1002</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.is_xen_guest-1003"><a href="#XMLState.is_xen_guest-1003"><span class="linenos">1003</span></a>
</span><span id="XMLState.is_xen_guest-1004"><a href="#XMLState.is_xen_guest-1004"><span class="linenos">1004</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.is_xen_guest-1005"><a href="#XMLState.is_xen_guest-1005"><span class="linenos">1005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.is_xen_guest-1006"><a href="#XMLState.is_xen_guest-1006"><span class="linenos">1006</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_architecture</span> <span class="o">!=</span> <span class="s1">&#39;x86_64&#39;</span><span class="p">:</span>
</span><span id="XMLState.is_xen_guest-1007"><a href="#XMLState.is_xen_guest-1007"><span class="linenos">1007</span></a>            <span class="c1"># We only support Xen stuff on x86_64</span>
</span><span id="XMLState.is_xen_guest-1008"><a href="#XMLState.is_xen_guest-1008"><span class="linenos">1008</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="XMLState.is_xen_guest-1009"><a href="#XMLState.is_xen_guest-1009"><span class="linenos">1009</span></a>        <span class="n">firmware</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_firmware</span><span class="p">()</span>
</span><span id="XMLState.is_xen_guest-1010"><a href="#XMLState.is_xen_guest-1010"><span class="linenos">1010</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState.is_xen_guest-1011"><a href="#XMLState.is_xen_guest-1011"><span class="linenos">1011</span></a>        <span class="k">if</span> <span class="n">firmware</span> <span class="ow">and</span> <span class="n">firmware</span> <span class="ow">in</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_ec2_capable_firmware_names</span><span class="p">():</span>
</span><span id="XMLState.is_xen_guest-1012"><a href="#XMLState.is_xen_guest-1012"><span class="linenos">1012</span></a>            <span class="c1"># the image is targeted to run in Amazon EC2 which is a Xen system</span>
</span><span id="XMLState.is_xen_guest-1013"><a href="#XMLState.is_xen_guest-1013"><span class="linenos">1013</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState.is_xen_guest-1014"><a href="#XMLState.is_xen_guest-1014"><span class="linenos">1014</span></a>        <span class="k">elif</span> <span class="n">machine_section</span> <span class="ow">and</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_xen_loader</span><span class="p">():</span>
</span><span id="XMLState.is_xen_guest-1015"><a href="#XMLState.is_xen_guest-1015"><span class="linenos">1015</span></a>            <span class="c1"># the image provides a machine section with a guest loader setup</span>
</span><span id="XMLState.is_xen_guest-1016"><a href="#XMLState.is_xen_guest-1016"><span class="linenos">1016</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="XMLState.is_xen_guest-1017"><a href="#XMLState.is_xen_guest-1017"><span class="linenos">1017</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if build type setup specifies a Xen Guest (domX)
The check is based on the architecture, the firmware and
xen_loader configuration values:</p>

<ul>
<li><p>We only support Xen setup on the x86_64 architecture</p></li>
<li><p>Firmware pointing to ec2 means the image is targeted to run
in Amazon EC2 which is a Xen guest</p></li>
<li><p>Machine setup with a xen_loader attribute also indicates a
Xen guest target</p></li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_partitions_section" class="classattr">
                                        <input id="XMLState.get_build_type_partitions_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_partitions_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_partitions_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_partitions_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_partitions_section-1019"><a href="#XMLState.get_build_type_partitions_section-1019"><span class="linenos">1019</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_partitions_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_partitions_section-1020"><a href="#XMLState.get_build_type_partitions_section-1020"><span class="linenos">1020</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_partitions_section-1021"><a href="#XMLState.get_build_type_partitions_section-1021"><span class="linenos">1021</span></a><span class="sd">        First partitions section from the build type section</span>
</span><span id="XMLState.get_build_type_partitions_section-1022"><a href="#XMLState.get_build_type_partitions_section-1022"><span class="linenos">1022</span></a>
</span><span id="XMLState.get_build_type_partitions_section-1023"><a href="#XMLState.get_build_type_partitions_section-1023"><span class="linenos">1023</span></a><span class="sd">        :return: &lt;partitions&gt; section reference</span>
</span><span id="XMLState.get_build_type_partitions_section-1024"><a href="#XMLState.get_build_type_partitions_section-1024"><span class="linenos">1024</span></a>
</span><span id="XMLState.get_build_type_partitions_section-1025"><a href="#XMLState.get_build_type_partitions_section-1025"><span class="linenos">1025</span></a><span class="sd">        :rtype: xml_parse::partitions</span>
</span><span id="XMLState.get_build_type_partitions_section-1026"><a href="#XMLState.get_build_type_partitions_section-1026"><span class="linenos">1026</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_partitions_section-1027"><a href="#XMLState.get_build_type_partitions_section-1027"><span class="linenos">1027</span></a>        <span class="n">partitions_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_partitions</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_partitions_section-1028"><a href="#XMLState.get_build_type_partitions_section-1028"><span class="linenos">1028</span></a>        <span class="k">if</span> <span class="n">partitions_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_partitions_section-1029"><a href="#XMLState.get_build_type_partitions_section-1029"><span class="linenos">1029</span></a>            <span class="k">return</span> <span class="n">partitions_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_partitions_section-1030"><a href="#XMLState.get_build_type_partitions_section-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First partitions section from the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><partitions> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_system_disk_section" class="classattr">
                                        <input id="XMLState.get_build_type_system_disk_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_system_disk_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_system_disk_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_system_disk_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_system_disk_section-1032"><a href="#XMLState.get_build_type_system_disk_section-1032"><span class="linenos">1032</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_system_disk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_system_disk_section-1033"><a href="#XMLState.get_build_type_system_disk_section-1033"><span class="linenos">1033</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_system_disk_section-1034"><a href="#XMLState.get_build_type_system_disk_section-1034"><span class="linenos">1034</span></a><span class="sd">        First system disk section from the build type section</span>
</span><span id="XMLState.get_build_type_system_disk_section-1035"><a href="#XMLState.get_build_type_system_disk_section-1035"><span class="linenos">1035</span></a>
</span><span id="XMLState.get_build_type_system_disk_section-1036"><a href="#XMLState.get_build_type_system_disk_section-1036"><span class="linenos">1036</span></a><span class="sd">        :return: &lt;systemdisk&gt; section reference</span>
</span><span id="XMLState.get_build_type_system_disk_section-1037"><a href="#XMLState.get_build_type_system_disk_section-1037"><span class="linenos">1037</span></a>
</span><span id="XMLState.get_build_type_system_disk_section-1038"><a href="#XMLState.get_build_type_system_disk_section-1038"><span class="linenos">1038</span></a><span class="sd">        :rtype: xml_parse::systemdisk</span>
</span><span id="XMLState.get_build_type_system_disk_section-1039"><a href="#XMLState.get_build_type_system_disk_section-1039"><span class="linenos">1039</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_system_disk_section-1040"><a href="#XMLState.get_build_type_system_disk_section-1040"><span class="linenos">1040</span></a>        <span class="n">systemdisk_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_systemdisk</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_system_disk_section-1041"><a href="#XMLState.get_build_type_system_disk_section-1041"><span class="linenos">1041</span></a>        <span class="k">if</span> <span class="n">systemdisk_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_system_disk_section-1042"><a href="#XMLState.get_build_type_system_disk_section-1042"><span class="linenos">1042</span></a>            <span class="k">return</span> <span class="n">systemdisk_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_system_disk_section-1043"><a href="#XMLState.get_build_type_system_disk_section-1043"><span class="linenos">1043</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First system disk section from the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><systemdisk> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_machine_section" class="classattr">
                                        <input id="XMLState.get_build_type_machine_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_machine_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_machine_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_machine_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_machine_section-1045"><a href="#XMLState.get_build_type_machine_section-1045"><span class="linenos">1045</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_machine_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_machine_section-1046"><a href="#XMLState.get_build_type_machine_section-1046"><span class="linenos">1046</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_machine_section-1047"><a href="#XMLState.get_build_type_machine_section-1047"><span class="linenos">1047</span></a><span class="sd">        First machine section from the build type section</span>
</span><span id="XMLState.get_build_type_machine_section-1048"><a href="#XMLState.get_build_type_machine_section-1048"><span class="linenos">1048</span></a>
</span><span id="XMLState.get_build_type_machine_section-1049"><a href="#XMLState.get_build_type_machine_section-1049"><span class="linenos">1049</span></a><span class="sd">        :return: &lt;machine&gt; section reference</span>
</span><span id="XMLState.get_build_type_machine_section-1050"><a href="#XMLState.get_build_type_machine_section-1050"><span class="linenos">1050</span></a>
</span><span id="XMLState.get_build_type_machine_section-1051"><a href="#XMLState.get_build_type_machine_section-1051"><span class="linenos">1051</span></a><span class="sd">        :rtype: xml_parse::machine</span>
</span><span id="XMLState.get_build_type_machine_section-1052"><a href="#XMLState.get_build_type_machine_section-1052"><span class="linenos">1052</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_machine_section-1053"><a href="#XMLState.get_build_type_machine_section-1053"><span class="linenos">1053</span></a>        <span class="n">machine_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_machine</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_machine_section-1054"><a href="#XMLState.get_build_type_machine_section-1054"><span class="linenos">1054</span></a>        <span class="k">if</span> <span class="n">machine_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_machine_section-1055"><a href="#XMLState.get_build_type_machine_section-1055"><span class="linenos">1055</span></a>            <span class="k">return</span> <span class="n">machine_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_machine_section-1056"><a href="#XMLState.get_build_type_machine_section-1056"><span class="linenos">1056</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First machine section from the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><machine> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_vagrant_config_section" class="classattr">
                                        <input id="XMLState.get_build_type_vagrant_config_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_vagrant_config_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_vagrant_config_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_vagrant_config_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_vagrant_config_section-1058"><a href="#XMLState.get_build_type_vagrant_config_section-1058"><span class="linenos">1058</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vagrant_config_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1059"><a href="#XMLState.get_build_type_vagrant_config_section-1059"><span class="linenos">1059</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1060"><a href="#XMLState.get_build_type_vagrant_config_section-1060"><span class="linenos">1060</span></a><span class="sd">        First vagrantconfig section from the build type section</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1061"><a href="#XMLState.get_build_type_vagrant_config_section-1061"><span class="linenos">1061</span></a>
</span><span id="XMLState.get_build_type_vagrant_config_section-1062"><a href="#XMLState.get_build_type_vagrant_config_section-1062"><span class="linenos">1062</span></a><span class="sd">        :return: &lt;vagrantconfig&gt; section reference</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1063"><a href="#XMLState.get_build_type_vagrant_config_section-1063"><span class="linenos">1063</span></a>
</span><span id="XMLState.get_build_type_vagrant_config_section-1064"><a href="#XMLState.get_build_type_vagrant_config_section-1064"><span class="linenos">1064</span></a><span class="sd">        :rtype: xml_parse::vagrantconfig</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1065"><a href="#XMLState.get_build_type_vagrant_config_section-1065"><span class="linenos">1065</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1066"><a href="#XMLState.get_build_type_vagrant_config_section-1066"><span class="linenos">1066</span></a>        <span class="n">vagrant_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_vagrantconfig</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1067"><a href="#XMLState.get_build_type_vagrant_config_section-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="n">vagrant_config_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1068"><a href="#XMLState.get_build_type_vagrant_config_section-1068"><span class="linenos">1068</span></a>            <span class="k">return</span> <span class="n">vagrant_config_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_vagrant_config_section-1069"><a href="#XMLState.get_build_type_vagrant_config_section-1069"><span class="linenos">1069</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First vagrantconfig section from the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><vagrantconfig> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_vagrant_config_virtualbox_guest_additions" class="classattr">
                                        <input id="XMLState.get_vagrant_config_virtualbox_guest_additions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_vagrant_config_virtualbox_guest_additions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_vagrant_config_virtualbox_guest_additions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_vagrant_config_virtualbox_guest_additions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1071"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1071"><span class="linenos">1071</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_vagrant_config_virtualbox_guest_additions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1072"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1072"><span class="linenos">1072</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1073"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1073"><span class="linenos">1073</span></a><span class="sd">        Attribute virtualbox_guest_additions_present from the first</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1074"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1074"><span class="linenos">1074</span></a><span class="sd">        vagrantconfig section.</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1075"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1075"><span class="linenos">1075</span></a>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1076"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1076"><span class="linenos">1076</span></a><span class="sd">        :return: True|False</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1077"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1077"><span class="linenos">1077</span></a>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1078"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1078"><span class="linenos">1078</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1079"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1079"><span class="linenos">1079</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1080"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1080"><span class="linenos">1080</span></a>        <span class="n">vagrant_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_vagrant_config_section</span><span class="p">()</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1081"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1081"><span class="linenos">1081</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">vagrant_config_sections</span><span class="o">.</span><span class="n">virtualbox_guest_additions_present</span><span class="p">:</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1082"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1082"><span class="linenos">1082</span></a>            <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_vagrant_config_virtualbox_guest_additions</span><span class="p">()</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1083"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1083"><span class="linenos">1083</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_vagrant_config_virtualbox_guest_additions-1084"><a href="#XMLState.get_vagrant_config_virtualbox_guest_additions-1084"><span class="linenos">1084</span></a>            <span class="k">return</span> <span class="n">vagrant_config_sections</span><span class="o">.</span><span class="n">virtualbox_guest_additions_present</span>
</span></pre></div>


            <div class="docstring"><p>Attribute virtualbox_guest_additions_present from the first
vagrantconfig section.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True|False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_vmdisk_section" class="classattr">
                                        <input id="XMLState.get_build_type_vmdisk_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_vmdisk_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_vmdisk_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_vmdisk_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_vmdisk_section-1086"><a href="#XMLState.get_build_type_vmdisk_section-1086"><span class="linenos">1086</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmdisk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1087"><a href="#XMLState.get_build_type_vmdisk_section-1087"><span class="linenos">1087</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1088"><a href="#XMLState.get_build_type_vmdisk_section-1088"><span class="linenos">1088</span></a><span class="sd">        First vmdisk section from the first machine section in the</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1089"><a href="#XMLState.get_build_type_vmdisk_section-1089"><span class="linenos">1089</span></a><span class="sd">        build type section</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1090"><a href="#XMLState.get_build_type_vmdisk_section-1090"><span class="linenos">1090</span></a>
</span><span id="XMLState.get_build_type_vmdisk_section-1091"><a href="#XMLState.get_build_type_vmdisk_section-1091"><span class="linenos">1091</span></a><span class="sd">        :return: &lt;vmdisk&gt; section reference</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1092"><a href="#XMLState.get_build_type_vmdisk_section-1092"><span class="linenos">1092</span></a>
</span><span id="XMLState.get_build_type_vmdisk_section-1093"><a href="#XMLState.get_build_type_vmdisk_section-1093"><span class="linenos">1093</span></a><span class="sd">        :rtype: xml_parse::vmdisk</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1094"><a href="#XMLState.get_build_type_vmdisk_section-1094"><span class="linenos">1094</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1095"><a href="#XMLState.get_build_type_vmdisk_section-1095"><span class="linenos">1095</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1096"><a href="#XMLState.get_build_type_vmdisk_section-1096"><span class="linenos">1096</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1097"><a href="#XMLState.get_build_type_vmdisk_section-1097"><span class="linenos">1097</span></a>            <span class="n">vmdisk_sections</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmdisk</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1098"><a href="#XMLState.get_build_type_vmdisk_section-1098"><span class="linenos">1098</span></a>            <span class="k">if</span> <span class="n">vmdisk_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1099"><a href="#XMLState.get_build_type_vmdisk_section-1099"><span class="linenos">1099</span></a>                <span class="k">return</span> <span class="n">vmdisk_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_vmdisk_section-1100"><a href="#XMLState.get_build_type_vmdisk_section-1100"><span class="linenos">1100</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First vmdisk section from the first machine section in the
build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><vmdisk> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_vmnic_entries" class="classattr">
                                        <input id="XMLState.get_build_type_vmnic_entries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_vmnic_entries</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_vmnic_entries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_vmnic_entries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_vmnic_entries-1102"><a href="#XMLState.get_build_type_vmnic_entries-1102"><span class="linenos">1102</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmnic_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1103"><a href="#XMLState.get_build_type_vmnic_entries-1103"><span class="linenos">1103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1104"><a href="#XMLState.get_build_type_vmnic_entries-1104"><span class="linenos">1104</span></a><span class="sd">        vmnic section(s) from the first machine section in the</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1105"><a href="#XMLState.get_build_type_vmnic_entries-1105"><span class="linenos">1105</span></a><span class="sd">        build type section</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1106"><a href="#XMLState.get_build_type_vmnic_entries-1106"><span class="linenos">1106</span></a>
</span><span id="XMLState.get_build_type_vmnic_entries-1107"><a href="#XMLState.get_build_type_vmnic_entries-1107"><span class="linenos">1107</span></a><span class="sd">        :return: list of &lt;vmnic&gt; section reference(s)</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1108"><a href="#XMLState.get_build_type_vmnic_entries-1108"><span class="linenos">1108</span></a>
</span><span id="XMLState.get_build_type_vmnic_entries-1109"><a href="#XMLState.get_build_type_vmnic_entries-1109"><span class="linenos">1109</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1110"><a href="#XMLState.get_build_type_vmnic_entries-1110"><span class="linenos">1110</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1111"><a href="#XMLState.get_build_type_vmnic_entries-1111"><span class="linenos">1111</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1112"><a href="#XMLState.get_build_type_vmnic_entries-1112"><span class="linenos">1112</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1113"><a href="#XMLState.get_build_type_vmnic_entries-1113"><span class="linenos">1113</span></a>            <span class="k">return</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmnic</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1114"><a href="#XMLState.get_build_type_vmnic_entries-1114"><span class="linenos">1114</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmnic_entries-1115"><a href="#XMLState.get_build_type_vmnic_entries-1115"><span class="linenos">1115</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>vmnic section(s) from the first machine section in the
build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of <vmnic> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_vmdvd_section" class="classattr">
                                        <input id="XMLState.get_build_type_vmdvd_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_vmdvd_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_vmdvd_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_vmdvd_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_vmdvd_section-1117"><a href="#XMLState.get_build_type_vmdvd_section-1117"><span class="linenos">1117</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmdvd_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1118"><a href="#XMLState.get_build_type_vmdvd_section-1118"><span class="linenos">1118</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1119"><a href="#XMLState.get_build_type_vmdvd_section-1119"><span class="linenos">1119</span></a><span class="sd">        First vmdvd section from the first machine section in the</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1120"><a href="#XMLState.get_build_type_vmdvd_section-1120"><span class="linenos">1120</span></a><span class="sd">        build type section</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1121"><a href="#XMLState.get_build_type_vmdvd_section-1121"><span class="linenos">1121</span></a>
</span><span id="XMLState.get_build_type_vmdvd_section-1122"><a href="#XMLState.get_build_type_vmdvd_section-1122"><span class="linenos">1122</span></a><span class="sd">        :return: &lt;vmdvd&gt; section reference</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1123"><a href="#XMLState.get_build_type_vmdvd_section-1123"><span class="linenos">1123</span></a>
</span><span id="XMLState.get_build_type_vmdvd_section-1124"><a href="#XMLState.get_build_type_vmdvd_section-1124"><span class="linenos">1124</span></a><span class="sd">        :rtype: xml_parse::vmdvd</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1125"><a href="#XMLState.get_build_type_vmdvd_section-1125"><span class="linenos">1125</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1126"><a href="#XMLState.get_build_type_vmdvd_section-1126"><span class="linenos">1126</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1127"><a href="#XMLState.get_build_type_vmdvd_section-1127"><span class="linenos">1127</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1128"><a href="#XMLState.get_build_type_vmdvd_section-1128"><span class="linenos">1128</span></a>            <span class="n">vmdvd_sections</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmdvd</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1129"><a href="#XMLState.get_build_type_vmdvd_section-1129"><span class="linenos">1129</span></a>            <span class="k">if</span> <span class="n">vmdvd_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1130"><a href="#XMLState.get_build_type_vmdvd_section-1130"><span class="linenos">1130</span></a>                <span class="k">return</span> <span class="n">vmdvd_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_vmdvd_section-1131"><a href="#XMLState.get_build_type_vmdvd_section-1131"><span class="linenos">1131</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First vmdvd section from the first machine section in the
build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><vmdvd> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_vmconfig_entries" class="classattr">
                                        <input id="XMLState.get_build_type_vmconfig_entries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_vmconfig_entries</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_vmconfig_entries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_vmconfig_entries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_vmconfig_entries-1133"><a href="#XMLState.get_build_type_vmconfig_entries-1133"><span class="linenos">1133</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_vmconfig_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1134"><a href="#XMLState.get_build_type_vmconfig_entries-1134"><span class="linenos">1134</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1135"><a href="#XMLState.get_build_type_vmconfig_entries-1135"><span class="linenos">1135</span></a><span class="sd">        List of vmconfig-entry section values from the first</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1136"><a href="#XMLState.get_build_type_vmconfig_entries-1136"><span class="linenos">1136</span></a><span class="sd">        machine section in the build type section</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1137"><a href="#XMLState.get_build_type_vmconfig_entries-1137"><span class="linenos">1137</span></a>
</span><span id="XMLState.get_build_type_vmconfig_entries-1138"><a href="#XMLState.get_build_type_vmconfig_entries-1138"><span class="linenos">1138</span></a><span class="sd">        :return: &lt;vmconfig_entry&gt; section reference(s)</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1139"><a href="#XMLState.get_build_type_vmconfig_entries-1139"><span class="linenos">1139</span></a>
</span><span id="XMLState.get_build_type_vmconfig_entries-1140"><a href="#XMLState.get_build_type_vmconfig_entries-1140"><span class="linenos">1140</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1141"><a href="#XMLState.get_build_type_vmconfig_entries-1141"><span class="linenos">1141</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1142"><a href="#XMLState.get_build_type_vmconfig_entries-1142"><span class="linenos">1142</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1143"><a href="#XMLState.get_build_type_vmconfig_entries-1143"><span class="linenos">1143</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1144"><a href="#XMLState.get_build_type_vmconfig_entries-1144"><span class="linenos">1144</span></a>            <span class="n">vmconfig_entries</span> <span class="o">=</span> <span class="n">machine_section</span><span class="o">.</span><span class="n">get_vmconfig_entry</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1145"><a href="#XMLState.get_build_type_vmconfig_entries-1145"><span class="linenos">1145</span></a>            <span class="k">if</span> <span class="n">vmconfig_entries</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1146"><a href="#XMLState.get_build_type_vmconfig_entries-1146"><span class="linenos">1146</span></a>                <span class="k">return</span> <span class="n">vmconfig_entries</span>
</span><span id="XMLState.get_build_type_vmconfig_entries-1147"><a href="#XMLState.get_build_type_vmconfig_entries-1147"><span class="linenos">1147</span></a>
</span><span id="XMLState.get_build_type_vmconfig_entries-1148"><a href="#XMLState.get_build_type_vmconfig_entries-1148"><span class="linenos">1148</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>List of vmconfig-entry section values from the first
machine section in the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><vmconfig_entry> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_section" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_section-1150"><a href="#XMLState.get_build_type_bootloader_section-1150"><span class="linenos">1150</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_section-1151"><a href="#XMLState.get_build_type_bootloader_section-1151"><span class="linenos">1151</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_section-1152"><a href="#XMLState.get_build_type_bootloader_section-1152"><span class="linenos">1152</span></a><span class="sd">        First bootloader section from the build type section</span>
</span><span id="XMLState.get_build_type_bootloader_section-1153"><a href="#XMLState.get_build_type_bootloader_section-1153"><span class="linenos">1153</span></a>
</span><span id="XMLState.get_build_type_bootloader_section-1154"><a href="#XMLState.get_build_type_bootloader_section-1154"><span class="linenos">1154</span></a><span class="sd">        :return: &lt;bootloader&gt; section reference</span>
</span><span id="XMLState.get_build_type_bootloader_section-1155"><a href="#XMLState.get_build_type_bootloader_section-1155"><span class="linenos">1155</span></a>
</span><span id="XMLState.get_build_type_bootloader_section-1156"><a href="#XMLState.get_build_type_bootloader_section-1156"><span class="linenos">1156</span></a><span class="sd">        :rtype: xml_parse::bootloader</span>
</span><span id="XMLState.get_build_type_bootloader_section-1157"><a href="#XMLState.get_build_type_bootloader_section-1157"><span class="linenos">1157</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_section-1158"><a href="#XMLState.get_build_type_bootloader_section-1158"><span class="linenos">1158</span></a>        <span class="n">bootloader_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_bootloader</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_section-1159"><a href="#XMLState.get_build_type_bootloader_section-1159"><span class="linenos">1159</span></a>        <span class="k">if</span> <span class="n">bootloader_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_section-1160"><a href="#XMLState.get_build_type_bootloader_section-1160"><span class="linenos">1160</span></a>            <span class="k">return</span> <span class="n">bootloader_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_bootloader_section-1161"><a href="#XMLState.get_build_type_bootloader_section-1161"><span class="linenos">1161</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First bootloader section from the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><bootloader> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_name" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_name-1163"><a href="#XMLState.get_build_type_bootloader_name-1163"><span class="linenos">1163</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_name-1164"><a href="#XMLState.get_build_type_bootloader_name-1164"><span class="linenos">1164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_name-1165"><a href="#XMLState.get_build_type_bootloader_name-1165"><span class="linenos">1165</span></a><span class="sd">        Return bootloader name for selected build type</span>
</span><span id="XMLState.get_build_type_bootloader_name-1166"><a href="#XMLState.get_build_type_bootloader_name-1166"><span class="linenos">1166</span></a>
</span><span id="XMLState.get_build_type_bootloader_name-1167"><a href="#XMLState.get_build_type_bootloader_name-1167"><span class="linenos">1167</span></a><span class="sd">        :return: bootloader name</span>
</span><span id="XMLState.get_build_type_bootloader_name-1168"><a href="#XMLState.get_build_type_bootloader_name-1168"><span class="linenos">1168</span></a>
</span><span id="XMLState.get_build_type_bootloader_name-1169"><a href="#XMLState.get_build_type_bootloader_name-1169"><span class="linenos">1169</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_build_type_bootloader_name-1170"><a href="#XMLState.get_build_type_bootloader_name-1170"><span class="linenos">1170</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_name-1171"><a href="#XMLState.get_build_type_bootloader_name-1171"><span class="linenos">1171</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_name-1172"><a href="#XMLState.get_build_type_bootloader_name-1172"><span class="linenos">1172</span></a>        <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">if</span> <span class="n">bootloader</span> <span class="k">else</span> \
</span><span id="XMLState.get_build_type_bootloader_name-1173"><a href="#XMLState.get_build_type_bootloader_name-1173"><span class="linenos">1173</span></a>            <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_bootloader</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Return bootloader name for selected build type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>bootloader name</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_bls" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_bls-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_bls</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_bls-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_bls"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_bls-1175"><a href="#XMLState.get_build_type_bootloader_bls-1175"><span class="linenos">1175</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_bls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1176"><a href="#XMLState.get_build_type_bootloader_bls-1176"><span class="linenos">1176</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1177"><a href="#XMLState.get_build_type_bootloader_bls-1177"><span class="linenos">1177</span></a><span class="sd">        Return bootloader bls setting for selected build type</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1178"><a href="#XMLState.get_build_type_bootloader_bls-1178"><span class="linenos">1178</span></a>
</span><span id="XMLState.get_build_type_bootloader_bls-1179"><a href="#XMLState.get_build_type_bootloader_bls-1179"><span class="linenos">1179</span></a><span class="sd">        :return: True or False</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1180"><a href="#XMLState.get_build_type_bootloader_bls-1180"><span class="linenos">1180</span></a>
</span><span id="XMLState.get_build_type_bootloader_bls-1181"><a href="#XMLState.get_build_type_bootloader_bls-1181"><span class="linenos">1181</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1182"><a href="#XMLState.get_build_type_bootloader_bls-1182"><span class="linenos">1182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1183"><a href="#XMLState.get_build_type_bootloader_bls-1183"><span class="linenos">1183</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1184"><a href="#XMLState.get_build_type_bootloader_bls-1184"><span class="linenos">1184</span></a>        <span class="k">if</span> <span class="n">bootloader</span> <span class="ow">and</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_bls</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1185"><a href="#XMLState.get_build_type_bootloader_bls-1185"><span class="linenos">1185</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_bls</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_bls-1186"><a href="#XMLState.get_build_type_bootloader_bls-1186"><span class="linenos">1186</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Return bootloader bls setting for selected build type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True or False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_console" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_console-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_console</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_console-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_console"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_console-1188"><a href="#XMLState.get_build_type_bootloader_console-1188"><span class="linenos">1188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_console</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_bootloader_console-1189"><a href="#XMLState.get_build_type_bootloader_console-1189"><span class="linenos">1189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_console-1190"><a href="#XMLState.get_build_type_bootloader_console-1190"><span class="linenos">1190</span></a><span class="sd">        Return bootloader console setting for selected build type</span>
</span><span id="XMLState.get_build_type_bootloader_console-1191"><a href="#XMLState.get_build_type_bootloader_console-1191"><span class="linenos">1191</span></a>
</span><span id="XMLState.get_build_type_bootloader_console-1192"><a href="#XMLState.get_build_type_bootloader_console-1192"><span class="linenos">1192</span></a><span class="sd">        :return:</span>
</span><span id="XMLState.get_build_type_bootloader_console-1193"><a href="#XMLState.get_build_type_bootloader_console-1193"><span class="linenos">1193</span></a><span class="sd">            list of console settings for output (first element)</span>
</span><span id="XMLState.get_build_type_bootloader_console-1194"><a href="#XMLState.get_build_type_bootloader_console-1194"><span class="linenos">1194</span></a><span class="sd">            and input (second element)</span>
</span><span id="XMLState.get_build_type_bootloader_console-1195"><a href="#XMLState.get_build_type_bootloader_console-1195"><span class="linenos">1195</span></a>
</span><span id="XMLState.get_build_type_bootloader_console-1196"><a href="#XMLState.get_build_type_bootloader_console-1196"><span class="linenos">1196</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_build_type_bootloader_console-1197"><a href="#XMLState.get_build_type_bootloader_console-1197"><span class="linenos">1197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_console-1198"><a href="#XMLState.get_build_type_bootloader_console-1198"><span class="linenos">1198</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_bootloader_console-1199"><a href="#XMLState.get_build_type_bootloader_console-1199"><span class="linenos">1199</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_console-1200"><a href="#XMLState.get_build_type_bootloader_console-1200"><span class="linenos">1200</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_console-1201"><a href="#XMLState.get_build_type_bootloader_console-1201"><span class="linenos">1201</span></a>            <span class="n">console_out</span> <span class="o">=</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_output_console</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_console-1202"><a href="#XMLState.get_build_type_bootloader_console-1202"><span class="linenos">1202</span></a>            <span class="n">console_in</span> <span class="o">=</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_input_console</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_console-1203"><a href="#XMLState.get_build_type_bootloader_console-1203"><span class="linenos">1203</span></a>            <span class="n">console_in</span> <span class="o">=</span> <span class="n">console_in</span> <span class="k">if</span> <span class="n">console_in</span> <span class="k">else</span> <span class="n">console_out</span>
</span><span id="XMLState.get_build_type_bootloader_console-1204"><a href="#XMLState.get_build_type_bootloader_console-1204"><span class="linenos">1204</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState.get_build_type_bootloader_console-1205"><a href="#XMLState.get_build_type_bootloader_console-1205"><span class="linenos">1205</span></a>                <span class="n">console_out</span> <span class="k">if</span> <span class="n">console_out</span> <span class="ow">and</span> <span class="n">console_out</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_build_type_bootloader_console-1206"><a href="#XMLState.get_build_type_bootloader_console-1206"><span class="linenos">1206</span></a>                <span class="n">console_in</span> <span class="k">if</span> <span class="n">console_in</span> <span class="ow">and</span> <span class="n">console_in</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_build_type_bootloader_console-1207"><a href="#XMLState.get_build_type_bootloader_console-1207"><span class="linenos">1207</span></a>            <span class="p">]</span>
</span><span id="XMLState.get_build_type_bootloader_console-1208"><a href="#XMLState.get_build_type_bootloader_console-1208"><span class="linenos">1208</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Return bootloader console setting for selected build type</p>

<h6 id="returns">Returns</h6>

<blockquote>
<pre><code>list of console settings for output (first element)
and input (second element)
</code></pre>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_serial_line_setup" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_serial_line_setup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_serial_line_setup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_serial_line_setup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_serial_line_setup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1210"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1210"><span class="linenos">1210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_serial_line_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1211"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1211"><span class="linenos">1211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1212"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1212"><span class="linenos">1212</span></a><span class="sd">        Return bootloader serial line setup parameters for the</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1213"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1213"><span class="linenos">1213</span></a><span class="sd">        selected build type</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1214"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1214"><span class="linenos">1214</span></a>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1215"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1215"><span class="linenos">1215</span></a><span class="sd">        :return: serial line setup</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1216"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1216"><span class="linenos">1216</span></a>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1217"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1217"><span class="linenos">1217</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1218"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1218"><span class="linenos">1218</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1219"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1219"><span class="linenos">1219</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1220"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1220"><span class="linenos">1220</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1221"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1221"><span class="linenos">1221</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_serial_line</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_serial_line_setup-1222"><a href="#XMLState.get_build_type_bootloader_serial_line_setup-1222"><span class="linenos">1222</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Return bootloader serial line setup parameters for the
selected build type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>serial line setup</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_timeout" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_timeout-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_timeout</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_timeout-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_timeout"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_timeout-1224"><a href="#XMLState.get_build_type_bootloader_timeout-1224"><span class="linenos">1224</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1225"><a href="#XMLState.get_build_type_bootloader_timeout-1225"><span class="linenos">1225</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1226"><a href="#XMLState.get_build_type_bootloader_timeout-1226"><span class="linenos">1226</span></a><span class="sd">        Return bootloader timeout setting for selected build type</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1227"><a href="#XMLState.get_build_type_bootloader_timeout-1227"><span class="linenos">1227</span></a>
</span><span id="XMLState.get_build_type_bootloader_timeout-1228"><a href="#XMLState.get_build_type_bootloader_timeout-1228"><span class="linenos">1228</span></a><span class="sd">        :return: timeout string</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1229"><a href="#XMLState.get_build_type_bootloader_timeout-1229"><span class="linenos">1229</span></a>
</span><span id="XMLState.get_build_type_bootloader_timeout-1230"><a href="#XMLState.get_build_type_bootloader_timeout-1230"><span class="linenos">1230</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1231"><a href="#XMLState.get_build_type_bootloader_timeout-1231"><span class="linenos">1231</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1232"><a href="#XMLState.get_build_type_bootloader_timeout-1232"><span class="linenos">1232</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1233"><a href="#XMLState.get_build_type_bootloader_timeout-1233"><span class="linenos">1233</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1234"><a href="#XMLState.get_build_type_bootloader_timeout-1234"><span class="linenos">1234</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_timeout</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_timeout-1235"><a href="#XMLState.get_build_type_bootloader_timeout-1235"><span class="linenos">1235</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Return bootloader timeout setting for selected build type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>timeout string</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_timeout_style" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_timeout_style-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_timeout_style</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_timeout_style-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_timeout_style"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_timeout_style-1237"><a href="#XMLState.get_build_type_bootloader_timeout_style-1237"><span class="linenos">1237</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_timeout_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1238"><a href="#XMLState.get_build_type_bootloader_timeout_style-1238"><span class="linenos">1238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1239"><a href="#XMLState.get_build_type_bootloader_timeout_style-1239"><span class="linenos">1239</span></a><span class="sd">        Return bootloader timeout style setting for selected build type</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1240"><a href="#XMLState.get_build_type_bootloader_timeout_style-1240"><span class="linenos">1240</span></a>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1241"><a href="#XMLState.get_build_type_bootloader_timeout_style-1241"><span class="linenos">1241</span></a><span class="sd">        :return: timeout_style string</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1242"><a href="#XMLState.get_build_type_bootloader_timeout_style-1242"><span class="linenos">1242</span></a>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1243"><a href="#XMLState.get_build_type_bootloader_timeout_style-1243"><span class="linenos">1243</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1244"><a href="#XMLState.get_build_type_bootloader_timeout_style-1244"><span class="linenos">1244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1245"><a href="#XMLState.get_build_type_bootloader_timeout_style-1245"><span class="linenos">1245</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1246"><a href="#XMLState.get_build_type_bootloader_timeout_style-1246"><span class="linenos">1246</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1247"><a href="#XMLState.get_build_type_bootloader_timeout_style-1247"><span class="linenos">1247</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_timeout_style</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_timeout_style-1248"><a href="#XMLState.get_build_type_bootloader_timeout_style-1248"><span class="linenos">1248</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Return bootloader timeout style setting for selected build type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>timeout_style string</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_targettype" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_targettype-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_targettype</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_targettype-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_targettype"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_targettype-1250"><a href="#XMLState.get_build_type_bootloader_targettype-1250"><span class="linenos">1250</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_targettype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1251"><a href="#XMLState.get_build_type_bootloader_targettype-1251"><span class="linenos">1251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1252"><a href="#XMLState.get_build_type_bootloader_targettype-1252"><span class="linenos">1252</span></a><span class="sd">        Return bootloader target type setting. Only relevant for</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1253"><a href="#XMLState.get_build_type_bootloader_targettype-1253"><span class="linenos">1253</span></a><span class="sd">        the zipl bootloader because zipl is installed differently</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1254"><a href="#XMLState.get_build_type_bootloader_targettype-1254"><span class="linenos">1254</span></a><span class="sd">        depending on the storage target it runs later</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1255"><a href="#XMLState.get_build_type_bootloader_targettype-1255"><span class="linenos">1255</span></a>
</span><span id="XMLState.get_build_type_bootloader_targettype-1256"><a href="#XMLState.get_build_type_bootloader_targettype-1256"><span class="linenos">1256</span></a><span class="sd">        :return: target type string</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1257"><a href="#XMLState.get_build_type_bootloader_targettype-1257"><span class="linenos">1257</span></a>
</span><span id="XMLState.get_build_type_bootloader_targettype-1258"><a href="#XMLState.get_build_type_bootloader_targettype-1258"><span class="linenos">1258</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1259"><a href="#XMLState.get_build_type_bootloader_targettype-1259"><span class="linenos">1259</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1260"><a href="#XMLState.get_build_type_bootloader_targettype-1260"><span class="linenos">1260</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1261"><a href="#XMLState.get_build_type_bootloader_targettype-1261"><span class="linenos">1261</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1262"><a href="#XMLState.get_build_type_bootloader_targettype-1262"><span class="linenos">1262</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_targettype</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_targettype-1263"><a href="#XMLState.get_build_type_bootloader_targettype-1263"><span class="linenos">1263</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Return bootloader target type setting. Only relevant for
the zipl bootloader because zipl is installed differently
depending on the storage target it runs later</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>target type string</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_settings_section" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_settings_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_settings_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_settings_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_settings_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_settings_section-1265"><a href="#XMLState.get_build_type_bootloader_settings_section-1265"><span class="linenos">1265</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_settings_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1266"><a href="#XMLState.get_build_type_bootloader_settings_section-1266"><span class="linenos">1266</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1267"><a href="#XMLState.get_build_type_bootloader_settings_section-1267"><span class="linenos">1267</span></a><span class="sd">        First bootloadersettings section from the build</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1268"><a href="#XMLState.get_build_type_bootloader_settings_section-1268"><span class="linenos">1268</span></a><span class="sd">        type bootloader section</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1269"><a href="#XMLState.get_build_type_bootloader_settings_section-1269"><span class="linenos">1269</span></a>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1270"><a href="#XMLState.get_build_type_bootloader_settings_section-1270"><span class="linenos">1270</span></a><span class="sd">        :return: &lt;bootloadersettings&gt; section reference</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1271"><a href="#XMLState.get_build_type_bootloader_settings_section-1271"><span class="linenos">1271</span></a>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1272"><a href="#XMLState.get_build_type_bootloader_settings_section-1272"><span class="linenos">1272</span></a><span class="sd">        :rtype: xml_parse::bootloadersettings</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1273"><a href="#XMLState.get_build_type_bootloader_settings_section-1273"><span class="linenos">1273</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1274"><a href="#XMLState.get_build_type_bootloader_settings_section-1274"><span class="linenos">1274</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1275"><a href="#XMLState.get_build_type_bootloader_settings_section-1275"><span class="linenos">1275</span></a>        <span class="n">bootloader_settings_section</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1276"><a href="#XMLState.get_build_type_bootloader_settings_section-1276"><span class="linenos">1276</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span> <span class="ow">and</span> <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_bootloadersettings</span><span class="p">():</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1277"><a href="#XMLState.get_build_type_bootloader_settings_section-1277"><span class="linenos">1277</span></a>            <span class="n">bootloader_settings_section</span> <span class="o">=</span> \
</span><span id="XMLState.get_build_type_bootloader_settings_section-1278"><a href="#XMLState.get_build_type_bootloader_settings_section-1278"><span class="linenos">1278</span></a>                <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_bootloadersettings</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_bootloader_settings_section-1279"><a href="#XMLState.get_build_type_bootloader_settings_section-1279"><span class="linenos">1279</span></a>        <span class="k">return</span> <span class="n">bootloader_settings_section</span>
</span></pre></div>


            <div class="docstring"><p>First bootloadersettings section from the build
type bootloader section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><bootloadersettings> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_securelinux_section" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_securelinux_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_securelinux_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_securelinux_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_securelinux_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_securelinux_section-1281"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1281"><span class="linenos">1281</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_securelinux_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1282"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1282"><span class="linenos">1282</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1283"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1283"><span class="linenos">1283</span></a><span class="sd">        First securelinux section from the build</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1284"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1284"><span class="linenos">1284</span></a><span class="sd">        type bootloader section</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1285"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1285"><span class="linenos">1285</span></a>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1286"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1286"><span class="linenos">1286</span></a><span class="sd">        :return: &lt;securelinux&gt; section reference</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1287"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1287"><span class="linenos">1287</span></a>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1288"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1288"><span class="linenos">1288</span></a><span class="sd">        :rtype: xml_parse::securelinux</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1289"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1289"><span class="linenos">1289</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1290"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1290"><span class="linenos">1290</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1291"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1291"><span class="linenos">1291</span></a>        <span class="n">bootloader_securelinux_section</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1292"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1292"><span class="linenos">1292</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span> <span class="ow">and</span> <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_securelinux</span><span class="p">():</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1293"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1293"><span class="linenos">1293</span></a>            <span class="n">bootloader_securelinux_section</span> <span class="o">=</span> \
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1294"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1294"><span class="linenos">1294</span></a>                <span class="n">bootloader_section</span><span class="o">.</span><span class="n">get_securelinux</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_securelinux_section-1295"><a href="#XMLState.get_build_type_bootloader_securelinux_section-1295"><span class="linenos">1295</span></a>        <span class="k">return</span> <span class="n">bootloader_securelinux_section</span>
</span></pre></div>


            <div class="docstring"><p>First securelinux section from the build
type bootloader section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><securelinux> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_environment_variables" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_environment_variables-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_environment_variables</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_environment_variables-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_environment_variables"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_environment_variables-1297"><a href="#XMLState.get_build_type_bootloader_environment_variables-1297"><span class="linenos">1297</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_environment_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1298"><a href="#XMLState.get_build_type_bootloader_environment_variables-1298"><span class="linenos">1298</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1299"><a href="#XMLState.get_build_type_bootloader_environment_variables-1299"><span class="linenos">1299</span></a><span class="sd">        List of bootloader variables from the build</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1300"><a href="#XMLState.get_build_type_bootloader_environment_variables-1300"><span class="linenos">1300</span></a><span class="sd">        type &gt; bootloader &gt; bootloadersettings section</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1301"><a href="#XMLState.get_build_type_bootloader_environment_variables-1301"><span class="linenos">1301</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1302"><a href="#XMLState.get_build_type_bootloader_environment_variables-1302"><span class="linenos">1302</span></a>        <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1303"><a href="#XMLState.get_build_type_bootloader_environment_variables-1303"><span class="linenos">1303</span></a>        <span class="n">bootloader_settings_section</span> <span class="o">=</span> \
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1304"><a href="#XMLState.get_build_type_bootloader_environment_variables-1304"><span class="linenos">1304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_settings_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1305"><a href="#XMLState.get_build_type_bootloader_environment_variables-1305"><span class="linenos">1305</span></a>        <span class="k">if</span> <span class="n">bootloader_settings_section</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1306"><a href="#XMLState.get_build_type_bootloader_environment_variables-1306"><span class="linenos">1306</span></a>            <span class="n">environment</span> <span class="o">=</span> <span class="n">bootloader_settings_section</span><span class="o">.</span><span class="n">get_environment</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1307"><a href="#XMLState.get_build_type_bootloader_environment_variables-1307"><span class="linenos">1307</span></a>            <span class="k">if</span> <span class="n">environment</span> <span class="ow">and</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1308"><a href="#XMLState.get_build_type_bootloader_environment_variables-1308"><span class="linenos">1308</span></a>                <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">environment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">():</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1309"><a href="#XMLState.get_build_type_bootloader_environment_variables-1309"><span class="linenos">1309</span></a>                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1310"><a href="#XMLState.get_build_type_bootloader_environment_variables-1310"><span class="linenos">1310</span></a>                        <span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1311"><a href="#XMLState.get_build_type_bootloader_environment_variables-1311"><span class="linenos">1311</span></a>                            <span class="n">env</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1312"><a href="#XMLState.get_build_type_bootloader_environment_variables-1312"><span class="linenos">1312</span></a>                            <span class="sa">f</span><span class="s1">&#39;=</span><span class="si">{</span><span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1313"><a href="#XMLState.get_build_type_bootloader_environment_variables-1313"><span class="linenos">1313</span></a>                        <span class="p">)</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1314"><a href="#XMLState.get_build_type_bootloader_environment_variables-1314"><span class="linenos">1314</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_build_type_bootloader_environment_variables-1315"><a href="#XMLState.get_build_type_bootloader_environment_variables-1315"><span class="linenos">1315</span></a>        <span class="k">return</span> <span class="n">variable_list</span>
</span></pre></div>


            <div class="docstring"><p>List of bootloader variables from the build
type &gt; bootloader &gt; bootloadersettings section</p>
</div>


                            </div>
                            <div id="XMLState.get_bootloader_options" class="classattr">
                                        <input id="XMLState.get_bootloader_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootloader_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">option_type</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootloader_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootloader_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootloader_options-1317"><a href="#XMLState.get_bootloader_options-1317"><span class="linenos">1317</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_bootloader_options-1318"><a href="#XMLState.get_bootloader_options-1318"><span class="linenos">1318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_options-1319"><a href="#XMLState.get_bootloader_options-1319"><span class="linenos">1319</span></a><span class="sd">        List of custom options used in the process to</span>
</span><span id="XMLState.get_bootloader_options-1320"><a href="#XMLState.get_bootloader_options-1320"><span class="linenos">1320</span></a><span class="sd">        run bootloader setup workloads</span>
</span><span id="XMLState.get_bootloader_options-1321"><a href="#XMLState.get_bootloader_options-1321"><span class="linenos">1321</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_options-1322"><a href="#XMLState.get_bootloader_options-1322"><span class="linenos">1322</span></a>        <span class="n">result</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_bootloader_options-1323"><a href="#XMLState.get_bootloader_options-1323"><span class="linenos">1323</span></a>        <span class="n">bootloader_settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_settings_section</span><span class="p">()</span>
</span><span id="XMLState.get_bootloader_options-1324"><a href="#XMLState.get_bootloader_options-1324"><span class="linenos">1324</span></a>        <span class="k">if</span> <span class="n">bootloader_settings</span><span class="p">:</span>
</span><span id="XMLState.get_bootloader_options-1325"><a href="#XMLState.get_bootloader_options-1325"><span class="linenos">1325</span></a>            <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_bootloader_options-1326"><a href="#XMLState.get_bootloader_options-1326"><span class="linenos">1326</span></a>            <span class="k">if</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;shim&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_bootloader_options-1327"><a href="#XMLState.get_bootloader_options-1327"><span class="linenos">1327</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_shimoption</span><span class="p">()</span>
</span><span id="XMLState.get_bootloader_options-1328"><a href="#XMLState.get_bootloader_options-1328"><span class="linenos">1328</span></a>            <span class="k">elif</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;install&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_bootloader_options-1329"><a href="#XMLState.get_bootloader_options-1329"><span class="linenos">1329</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_installoption</span><span class="p">()</span>
</span><span id="XMLState.get_bootloader_options-1330"><a href="#XMLState.get_bootloader_options-1330"><span class="linenos">1330</span></a>            <span class="k">elif</span> <span class="n">option_type</span> <span class="o">==</span> <span class="s1">&#39;config&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_bootloader_options-1331"><a href="#XMLState.get_bootloader_options-1331"><span class="linenos">1331</span></a>                <span class="n">options</span> <span class="o">=</span> <span class="n">bootloader_settings</span><span class="o">.</span><span class="n">get_configoption</span><span class="p">()</span>
</span><span id="XMLState.get_bootloader_options-1332"><a href="#XMLState.get_bootloader_options-1332"><span class="linenos">1332</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
</span><span id="XMLState.get_bootloader_options-1333"><a href="#XMLState.get_bootloader_options-1333"><span class="linenos">1333</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_bootloader_options-1334"><a href="#XMLState.get_bootloader_options-1334"><span class="linenos">1334</span></a>                <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">():</span>
</span><span id="XMLState.get_bootloader_options-1335"><a href="#XMLState.get_bootloader_options-1335"><span class="linenos">1335</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
</span><span id="XMLState.get_bootloader_options-1336"><a href="#XMLState.get_bootloader_options-1336"><span class="linenos">1336</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>List of custom options used in the process to
run bootloader setup workloads</p>
</div>


                            </div>
                            <div id="XMLState.get_bootloader_shim_options" class="classattr">
                                        <input id="XMLState.get_bootloader_shim_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootloader_shim_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootloader_shim_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootloader_shim_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootloader_shim_options-1338"><a href="#XMLState.get_bootloader_shim_options-1338"><span class="linenos">1338</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_shim_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_bootloader_shim_options-1339"><a href="#XMLState.get_bootloader_shim_options-1339"><span class="linenos">1339</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_shim_options-1340"><a href="#XMLState.get_bootloader_shim_options-1340"><span class="linenos">1340</span></a><span class="sd">        List of custom options used in the process to setup secure boot</span>
</span><span id="XMLState.get_bootloader_shim_options-1341"><a href="#XMLState.get_bootloader_shim_options-1341"><span class="linenos">1341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_shim_options-1342"><a href="#XMLState.get_bootloader_shim_options-1342"><span class="linenos">1342</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;shim&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of custom options used in the process to setup secure boot</p>
</div>


                            </div>
                            <div id="XMLState.get_bootloader_install_options" class="classattr">
                                        <input id="XMLState.get_bootloader_install_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootloader_install_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootloader_install_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootloader_install_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootloader_install_options-1344"><a href="#XMLState.get_bootloader_install_options-1344"><span class="linenos">1344</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_install_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_bootloader_install_options-1345"><a href="#XMLState.get_bootloader_install_options-1345"><span class="linenos">1345</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_install_options-1346"><a href="#XMLState.get_bootloader_install_options-1346"><span class="linenos">1346</span></a><span class="sd">        List of custom options used in the bootloader installation</span>
</span><span id="XMLState.get_bootloader_install_options-1347"><a href="#XMLState.get_bootloader_install_options-1347"><span class="linenos">1347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_install_options-1348"><a href="#XMLState.get_bootloader_install_options-1348"><span class="linenos">1348</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;install&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of custom options used in the bootloader installation</p>
</div>


                            </div>
                            <div id="XMLState.get_bootloader_config_options" class="classattr">
                                        <input id="XMLState.get_bootloader_config_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootloader_config_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootloader_config_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootloader_config_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootloader_config_options-1350"><a href="#XMLState.get_bootloader_config_options-1350"><span class="linenos">1350</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootloader_config_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_bootloader_config_options-1351"><a href="#XMLState.get_bootloader_config_options-1351"><span class="linenos">1351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_config_options-1352"><a href="#XMLState.get_bootloader_config_options-1352"><span class="linenos">1352</span></a><span class="sd">        List of custom options used in the bootloader configuration</span>
</span><span id="XMLState.get_bootloader_config_options-1353"><a href="#XMLState.get_bootloader_config_options-1353"><span class="linenos">1353</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootloader_config_options-1354"><a href="#XMLState.get_bootloader_config_options-1354"><span class="linenos">1354</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bootloader_options</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of custom options used in the bootloader configuration</p>
</div>


                            </div>
                            <div id="XMLState.get_build_type_bootloader_use_disk_password" class="classattr">
                                        <input id="XMLState.get_build_type_bootloader_use_disk_password-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_bootloader_use_disk_password</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_bootloader_use_disk_password-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_bootloader_use_disk_password"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_bootloader_use_disk_password-1356"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1356"><span class="linenos">1356</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_bootloader_use_disk_password</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1357"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1357"><span class="linenos">1357</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1358"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1358"><span class="linenos">1358</span></a><span class="sd">        Indicate whether the bootloader configuration should use the</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1359"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1359"><span class="linenos">1359</span></a><span class="sd">        password protecting the encrypted root volume.</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1360"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1360"><span class="linenos">1360</span></a>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1361"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1361"><span class="linenos">1361</span></a><span class="sd">        :return: True|False</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1362"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1362"><span class="linenos">1362</span></a>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1363"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1363"><span class="linenos">1363</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1364"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1364"><span class="linenos">1364</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1365"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1365"><span class="linenos">1365</span></a>        <span class="n">bootloader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1366"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1366"><span class="linenos">1366</span></a>        <span class="k">if</span> <span class="n">bootloader</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1367"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1367"><span class="linenos">1367</span></a>            <span class="k">return</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">get_use_disk_password</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_bootloader_use_disk_password-1368"><a href="#XMLState.get_build_type_bootloader_use_disk_password-1368"><span class="linenos">1368</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Indicate whether the bootloader configuration should use the
password protecting the encrypted root volume.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True|False</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_oemconfig_section" class="classattr">
                                        <input id="XMLState.get_build_type_oemconfig_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_oemconfig_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_oemconfig_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_oemconfig_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_oemconfig_section-1370"><a href="#XMLState.get_build_type_oemconfig_section-1370"><span class="linenos">1370</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_oemconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1371"><a href="#XMLState.get_build_type_oemconfig_section-1371"><span class="linenos">1371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1372"><a href="#XMLState.get_build_type_oemconfig_section-1372"><span class="linenos">1372</span></a><span class="sd">        First oemconfig section from the build type section</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1373"><a href="#XMLState.get_build_type_oemconfig_section-1373"><span class="linenos">1373</span></a>
</span><span id="XMLState.get_build_type_oemconfig_section-1374"><a href="#XMLState.get_build_type_oemconfig_section-1374"><span class="linenos">1374</span></a><span class="sd">        :return: &lt;oemconfig&gt; section reference</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1375"><a href="#XMLState.get_build_type_oemconfig_section-1375"><span class="linenos">1375</span></a>
</span><span id="XMLState.get_build_type_oemconfig_section-1376"><a href="#XMLState.get_build_type_oemconfig_section-1376"><span class="linenos">1376</span></a><span class="sd">        :rtype: xml_parse::oemconfig</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1377"><a href="#XMLState.get_build_type_oemconfig_section-1377"><span class="linenos">1377</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1378"><a href="#XMLState.get_build_type_oemconfig_section-1378"><span class="linenos">1378</span></a>        <span class="n">oemconfig_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_oemconfig</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1379"><a href="#XMLState.get_build_type_oemconfig_section-1379"><span class="linenos">1379</span></a>        <span class="k">if</span> <span class="n">oemconfig_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1380"><a href="#XMLState.get_build_type_oemconfig_section-1380"><span class="linenos">1380</span></a>            <span class="k">return</span> <span class="n">oemconfig_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_oemconfig_section-1381"><a href="#XMLState.get_build_type_oemconfig_section-1381"><span class="linenos">1381</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First oemconfig section from the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><oemconfig> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_oemconfig_oem_resize" class="classattr">
                                        <input id="XMLState.get_oemconfig_oem_resize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_oemconfig_oem_resize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_oemconfig_oem_resize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_oemconfig_oem_resize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_oemconfig_oem_resize-1383"><a href="#XMLState.get_oemconfig_oem_resize-1383"><span class="linenos">1383</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1384"><a href="#XMLState.get_oemconfig_oem_resize-1384"><span class="linenos">1384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1385"><a href="#XMLState.get_oemconfig_oem_resize-1385"><span class="linenos">1385</span></a><span class="sd">        State value to activate/deactivate disk resize. Returns a</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1386"><a href="#XMLState.get_oemconfig_oem_resize-1386"><span class="linenos">1386</span></a><span class="sd">        boolean value if specified or True to set resize on by default</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1387"><a href="#XMLState.get_oemconfig_oem_resize-1387"><span class="linenos">1387</span></a>
</span><span id="XMLState.get_oemconfig_oem_resize-1388"><a href="#XMLState.get_oemconfig_oem_resize-1388"><span class="linenos">1388</span></a><span class="sd">        :return: Content of &lt;oem-resize&gt; section value</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1389"><a href="#XMLState.get_oemconfig_oem_resize-1389"><span class="linenos">1389</span></a>
</span><span id="XMLState.get_oemconfig_oem_resize-1390"><a href="#XMLState.get_oemconfig_oem_resize-1390"><span class="linenos">1390</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1391"><a href="#XMLState.get_oemconfig_oem_resize-1391"><span class="linenos">1391</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1392"><a href="#XMLState.get_oemconfig_oem_resize-1392"><span class="linenos">1392</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1393"><a href="#XMLState.get_oemconfig_oem_resize-1393"><span class="linenos">1393</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_resize</span><span class="p">():</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1394"><a href="#XMLState.get_oemconfig_oem_resize-1394"><span class="linenos">1394</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_resize</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1395"><a href="#XMLState.get_oemconfig_oem_resize-1395"><span class="linenos">1395</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_oem_resize-1396"><a href="#XMLState.get_oemconfig_oem_resize-1396"><span class="linenos">1396</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>State value to activate/deactivate disk resize. Returns a
boolean value if specified or True to set resize on by default</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of <oem-resize> section value</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_oemconfig_oem_systemsize" class="classattr">
                                        <input id="XMLState.get_oemconfig_oem_systemsize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_oemconfig_oem_systemsize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_oemconfig_oem_systemsize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_oemconfig_oem_systemsize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_oemconfig_oem_systemsize-1398"><a href="#XMLState.get_oemconfig_oem_systemsize-1398"><span class="linenos">1398</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_systemsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1399"><a href="#XMLState.get_oemconfig_oem_systemsize-1399"><span class="linenos">1399</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1400"><a href="#XMLState.get_oemconfig_oem_systemsize-1400"><span class="linenos">1400</span></a><span class="sd">        State value to retrieve root partition size</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1401"><a href="#XMLState.get_oemconfig_oem_systemsize-1401"><span class="linenos">1401</span></a>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1402"><a href="#XMLState.get_oemconfig_oem_systemsize-1402"><span class="linenos">1402</span></a><span class="sd">        :return: Content of &lt;oem-systemsize&gt; section value</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1403"><a href="#XMLState.get_oemconfig_oem_systemsize-1403"><span class="linenos">1403</span></a>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1404"><a href="#XMLState.get_oemconfig_oem_systemsize-1404"><span class="linenos">1404</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1405"><a href="#XMLState.get_oemconfig_oem_systemsize-1405"><span class="linenos">1405</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1406"><a href="#XMLState.get_oemconfig_oem_systemsize-1406"><span class="linenos">1406</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1407"><a href="#XMLState.get_oemconfig_oem_systemsize-1407"><span class="linenos">1407</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_systemsize</span><span class="p">():</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1408"><a href="#XMLState.get_oemconfig_oem_systemsize-1408"><span class="linenos">1408</span></a>            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_systemsize</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1409"><a href="#XMLState.get_oemconfig_oem_systemsize-1409"><span class="linenos">1409</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_oem_systemsize-1410"><a href="#XMLState.get_oemconfig_oem_systemsize-1410"><span class="linenos">1410</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span></pre></div>


            <div class="docstring"><p>State value to retrieve root partition size</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of <oem-systemsize> section value</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_oemconfig_oem_multipath_scan" class="classattr">
                                        <input id="XMLState.get_oemconfig_oem_multipath_scan-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_oemconfig_oem_multipath_scan</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_oemconfig_oem_multipath_scan-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_oemconfig_oem_multipath_scan"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_oemconfig_oem_multipath_scan-1412"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1412"><span class="linenos">1412</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_oem_multipath_scan</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1413"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1413"><span class="linenos">1413</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1414"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1414"><span class="linenos">1414</span></a><span class="sd">        State value to activate multipath maps. Returns a boolean</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1415"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1415"><span class="linenos">1415</span></a><span class="sd">        value if specified or False</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1416"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1416"><span class="linenos">1416</span></a>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1417"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1417"><span class="linenos">1417</span></a><span class="sd">        :return: Content of &lt;oem-multipath-scan&gt; section value</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1418"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1418"><span class="linenos">1418</span></a>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1419"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1419"><span class="linenos">1419</span></a><span class="sd">        :rtype: bool</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1420"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1420"><span class="linenos">1420</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1421"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1421"><span class="linenos">1421</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1422"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1422"><span class="linenos">1422</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_multipath_scan</span><span class="p">():</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1423"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1423"><span class="linenos">1423</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_multipath_scan</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_oemconfig_oem_multipath_scan-1424"><a href="#XMLState.get_oemconfig_oem_multipath_scan-1424"><span class="linenos">1424</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>State value to activate multipath maps. Returns a boolean
value if specified or False</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of <oem-multipath-scan> section value</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_oemconfig_swap_mbytes" class="classattr">
                                        <input id="XMLState.get_oemconfig_swap_mbytes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_oemconfig_swap_mbytes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_oemconfig_swap_mbytes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_oemconfig_swap_mbytes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_oemconfig_swap_mbytes-1426"><a href="#XMLState.get_oemconfig_swap_mbytes-1426"><span class="linenos">1426</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_swap_mbytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1427"><a href="#XMLState.get_oemconfig_swap_mbytes-1427"><span class="linenos">1427</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1428"><a href="#XMLState.get_oemconfig_swap_mbytes-1428"><span class="linenos">1428</span></a><span class="sd">        Return swapsize in MB if requested or None</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1429"><a href="#XMLState.get_oemconfig_swap_mbytes-1429"><span class="linenos">1429</span></a>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1430"><a href="#XMLState.get_oemconfig_swap_mbytes-1430"><span class="linenos">1430</span></a><span class="sd">        Operates on the value of oem-swap and if set to true</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1431"><a href="#XMLState.get_oemconfig_swap_mbytes-1431"><span class="linenos">1431</span></a><span class="sd">        returns the given size or the default value.</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1432"><a href="#XMLState.get_oemconfig_swap_mbytes-1432"><span class="linenos">1432</span></a>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1433"><a href="#XMLState.get_oemconfig_swap_mbytes-1433"><span class="linenos">1433</span></a><span class="sd">        :return: Content of &lt;oem-swapsize&gt; section value or default</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1434"><a href="#XMLState.get_oemconfig_swap_mbytes-1434"><span class="linenos">1434</span></a>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1435"><a href="#XMLState.get_oemconfig_swap_mbytes-1435"><span class="linenos">1435</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1436"><a href="#XMLState.get_oemconfig_swap_mbytes-1436"><span class="linenos">1436</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1437"><a href="#XMLState.get_oemconfig_swap_mbytes-1437"><span class="linenos">1437</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1438"><a href="#XMLState.get_oemconfig_swap_mbytes-1438"><span class="linenos">1438</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swap</span><span class="p">():</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1439"><a href="#XMLState.get_oemconfig_swap_mbytes-1439"><span class="linenos">1439</span></a>            <span class="n">swap_requested</span> <span class="o">=</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swap</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1440"><a href="#XMLState.get_oemconfig_swap_mbytes-1440"><span class="linenos">1440</span></a>            <span class="k">if</span> <span class="n">swap_requested</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1441"><a href="#XMLState.get_oemconfig_swap_mbytes-1441"><span class="linenos">1441</span></a>                <span class="n">swapsize</span> <span class="o">=</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapsize</span><span class="p">()</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1442"><a href="#XMLState.get_oemconfig_swap_mbytes-1442"><span class="linenos">1442</span></a>                <span class="k">if</span> <span class="n">swapsize</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1443"><a href="#XMLState.get_oemconfig_swap_mbytes-1443"><span class="linenos">1443</span></a>                    <span class="k">return</span> <span class="n">swapsize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1444"><a href="#XMLState.get_oemconfig_swap_mbytes-1444"><span class="linenos">1444</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1445"><a href="#XMLState.get_oemconfig_swap_mbytes-1445"><span class="linenos">1445</span></a>                    <span class="k">return</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_swapsize_mbytes</span><span class="p">()</span>
</span><span id="XMLState.get_oemconfig_swap_mbytes-1446"><a href="#XMLState.get_oemconfig_swap_mbytes-1446"><span class="linenos">1446</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Return swapsize in MB if requested or None</p>

<p>Operates on the value of oem-swap and if set to true
returns the given size or the default value.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of <oem-swapsize> section value or default</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_oemconfig_swap_name" class="classattr">
                                        <input id="XMLState.get_oemconfig_swap_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_oemconfig_swap_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_oemconfig_swap_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_oemconfig_swap_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_oemconfig_swap_name-1448"><a href="#XMLState.get_oemconfig_swap_name-1448"><span class="linenos">1448</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_oemconfig_swap_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_oemconfig_swap_name-1449"><a href="#XMLState.get_oemconfig_swap_name-1449"><span class="linenos">1449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_swap_name-1450"><a href="#XMLState.get_oemconfig_swap_name-1450"><span class="linenos">1450</span></a><span class="sd">        Return the swap space name</span>
</span><span id="XMLState.get_oemconfig_swap_name-1451"><a href="#XMLState.get_oemconfig_swap_name-1451"><span class="linenos">1451</span></a>
</span><span id="XMLState.get_oemconfig_swap_name-1452"><a href="#XMLState.get_oemconfig_swap_name-1452"><span class="linenos">1452</span></a><span class="sd">        Operates on the value of oem-swapname and if set</span>
</span><span id="XMLState.get_oemconfig_swap_name-1453"><a href="#XMLState.get_oemconfig_swap_name-1453"><span class="linenos">1453</span></a><span class="sd">        returns the configured name or the default name: LVSwap</span>
</span><span id="XMLState.get_oemconfig_swap_name-1454"><a href="#XMLState.get_oemconfig_swap_name-1454"><span class="linenos">1454</span></a>
</span><span id="XMLState.get_oemconfig_swap_name-1455"><a href="#XMLState.get_oemconfig_swap_name-1455"><span class="linenos">1455</span></a><span class="sd">        The name of the swap space is used only if the</span>
</span><span id="XMLState.get_oemconfig_swap_name-1456"><a href="#XMLState.get_oemconfig_swap_name-1456"><span class="linenos">1456</span></a><span class="sd">        image is configured to use the LVM volume manager.</span>
</span><span id="XMLState.get_oemconfig_swap_name-1457"><a href="#XMLState.get_oemconfig_swap_name-1457"><span class="linenos">1457</span></a><span class="sd">        In this case swap is a volume and the volume takes</span>
</span><span id="XMLState.get_oemconfig_swap_name-1458"><a href="#XMLState.get_oemconfig_swap_name-1458"><span class="linenos">1458</span></a><span class="sd">        a name. In any other case the given name will have</span>
</span><span id="XMLState.get_oemconfig_swap_name-1459"><a href="#XMLState.get_oemconfig_swap_name-1459"><span class="linenos">1459</span></a><span class="sd">        no effect.</span>
</span><span id="XMLState.get_oemconfig_swap_name-1460"><a href="#XMLState.get_oemconfig_swap_name-1460"><span class="linenos">1460</span></a>
</span><span id="XMLState.get_oemconfig_swap_name-1461"><a href="#XMLState.get_oemconfig_swap_name-1461"><span class="linenos">1461</span></a><span class="sd">        :return: Content of &lt;oem-swapname&gt; section value or default</span>
</span><span id="XMLState.get_oemconfig_swap_name-1462"><a href="#XMLState.get_oemconfig_swap_name-1462"><span class="linenos">1462</span></a>
</span><span id="XMLState.get_oemconfig_swap_name-1463"><a href="#XMLState.get_oemconfig_swap_name-1463"><span class="linenos">1463</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_oemconfig_swap_name-1464"><a href="#XMLState.get_oemconfig_swap_name-1464"><span class="linenos">1464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_oemconfig_swap_name-1465"><a href="#XMLState.get_oemconfig_swap_name-1465"><span class="linenos">1465</span></a>        <span class="n">oemconfig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState.get_oemconfig_swap_name-1466"><a href="#XMLState.get_oemconfig_swap_name-1466"><span class="linenos">1466</span></a>        <span class="k">if</span> <span class="n">oemconfig</span> <span class="ow">and</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapname</span><span class="p">():</span>
</span><span id="XMLState.get_oemconfig_swap_name-1467"><a href="#XMLState.get_oemconfig_swap_name-1467"><span class="linenos">1467</span></a>            <span class="k">return</span> <span class="n">oemconfig</span><span class="o">.</span><span class="n">get_oem_swapname</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_oemconfig_swap_name-1468"><a href="#XMLState.get_oemconfig_swap_name-1468"><span class="linenos">1468</span></a>        <span class="k">return</span> <span class="s1">&#39;LVSwap&#39;</span>
</span></pre></div>


            <div class="docstring"><p>Return the swap space name</p>

<p>Operates on the value of oem-swapname and if set
returns the configured name or the default name: LVSwap</p>

<p>The name of the swap space is used only if the
image is configured to use the LVM volume manager.
In this case swap is a volume and the volume takes
a name. In any other case the given name will have
no effect.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Content of <oem-swapname> section value or default</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_containerconfig_section" class="classattr">
                                        <input id="XMLState.get_build_type_containerconfig_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_containerconfig_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_containerconfig_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_containerconfig_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_containerconfig_section-1470"><a href="#XMLState.get_build_type_containerconfig_section-1470"><span class="linenos">1470</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_containerconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1471"><a href="#XMLState.get_build_type_containerconfig_section-1471"><span class="linenos">1471</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1472"><a href="#XMLState.get_build_type_containerconfig_section-1472"><span class="linenos">1472</span></a><span class="sd">        First containerconfig section from the build type section</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1473"><a href="#XMLState.get_build_type_containerconfig_section-1473"><span class="linenos">1473</span></a>
</span><span id="XMLState.get_build_type_containerconfig_section-1474"><a href="#XMLState.get_build_type_containerconfig_section-1474"><span class="linenos">1474</span></a><span class="sd">        :return: &lt;containerconfig&gt; section reference</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1475"><a href="#XMLState.get_build_type_containerconfig_section-1475"><span class="linenos">1475</span></a>
</span><span id="XMLState.get_build_type_containerconfig_section-1476"><a href="#XMLState.get_build_type_containerconfig_section-1476"><span class="linenos">1476</span></a><span class="sd">        :rtype: xml_parse::containerconfig</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1477"><a href="#XMLState.get_build_type_containerconfig_section-1477"><span class="linenos">1477</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1478"><a href="#XMLState.get_build_type_containerconfig_section-1478"><span class="linenos">1478</span></a>        <span class="n">container_config_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_containerconfig</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1479"><a href="#XMLState.get_build_type_containerconfig_section-1479"><span class="linenos">1479</span></a>        <span class="k">if</span> <span class="n">container_config_sections</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1480"><a href="#XMLState.get_build_type_containerconfig_section-1480"><span class="linenos">1480</span></a>            <span class="k">return</span> <span class="n">container_config_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_containerconfig_section-1481"><a href="#XMLState.get_build_type_containerconfig_section-1481"><span class="linenos">1481</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>First containerconfig section from the build type section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><containerconfig> section reference</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_dracut_config" class="classattr">
                                        <input id="XMLState.get_dracut_config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_dracut_config</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">action</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n"><a href="#DracutT">DracutT</a></span>:</span></span>

                <label class="view-source-button" for="XMLState.get_dracut_config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_dracut_config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_dracut_config-1483"><a href="#XMLState.get_dracut_config-1483"><span class="linenos">1483</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_dracut_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DracutT</span><span class="p">:</span>
</span><span id="XMLState.get_dracut_config-1484"><a href="#XMLState.get_dracut_config-1484"><span class="linenos">1484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_dracut_config-1485"><a href="#XMLState.get_dracut_config-1485"><span class="linenos">1485</span></a><span class="sd">        Get dracut initrd config for the specified action</span>
</span><span id="XMLState.get_dracut_config-1486"><a href="#XMLState.get_dracut_config-1486"><span class="linenos">1486</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_dracut_config-1487"><a href="#XMLState.get_dracut_config-1487"><span class="linenos">1487</span></a>        <span class="n">uefi</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.get_dracut_config-1488"><a href="#XMLState.get_dracut_config-1488"><span class="linenos">1488</span></a>        <span class="n">modules</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_dracut_config-1489"><a href="#XMLState.get_dracut_config-1489"><span class="linenos">1489</span></a>        <span class="n">drivers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_dracut_config-1490"><a href="#XMLState.get_dracut_config-1490"><span class="linenos">1490</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="XMLState.get_dracut_config-1491"><a href="#XMLState.get_dracut_config-1491"><span class="linenos">1491</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="XMLState.get_dracut_config-1492"><a href="#XMLState.get_dracut_config-1492"><span class="linenos">1492</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="XMLState.get_dracut_config-1493"><a href="#XMLState.get_dracut_config-1493"><span class="linenos">1493</span></a>                <span class="k">for</span> <span class="n">dracut</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="XMLState.get_dracut_config-1494"><a href="#XMLState.get_dracut_config-1494"><span class="linenos">1494</span></a>                    <span class="n">uefi</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_uefi</span><span class="p">())</span>
</span><span id="XMLState.get_dracut_config-1495"><a href="#XMLState.get_dracut_config-1495"><span class="linenos">1495</span></a>                    <span class="k">if</span> <span class="n">dracut</span><span class="o">.</span><span class="n">get_module</span><span class="p">():</span>
</span><span id="XMLState.get_dracut_config-1496"><a href="#XMLState.get_dracut_config-1496"><span class="linenos">1496</span></a>                        <span class="n">modules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_module</span><span class="p">())</span>
</span><span id="XMLState.get_dracut_config-1497"><a href="#XMLState.get_dracut_config-1497"><span class="linenos">1497</span></a>                    <span class="k">if</span> <span class="n">dracut</span><span class="o">.</span><span class="n">get_driver</span><span class="p">():</span>
</span><span id="XMLState.get_dracut_config-1498"><a href="#XMLState.get_dracut_config-1498"><span class="linenos">1498</span></a>                        <span class="n">drivers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dracut</span><span class="o">.</span><span class="n">get_driver</span><span class="p">())</span>
</span><span id="XMLState.get_dracut_config-1499"><a href="#XMLState.get_dracut_config-1499"><span class="linenos">1499</span></a>        <span class="k">return</span> <span class="n">DracutT</span><span class="p">(</span>
</span><span id="XMLState.get_dracut_config-1500"><a href="#XMLState.get_dracut_config-1500"><span class="linenos">1500</span></a>            <span class="n">uefi</span><span class="o">=</span><span class="n">uefi</span><span class="p">,</span> <span class="n">modules</span><span class="o">=</span><span class="n">modules</span><span class="p">,</span> <span class="n">drivers</span><span class="o">=</span><span class="n">drivers</span>
</span><span id="XMLState.get_dracut_config-1501"><a href="#XMLState.get_dracut_config-1501"><span class="linenos">1501</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get dracut initrd config for the specified action</p>
</div>


                            </div>
                            <div id="XMLState.get_installmedia_initrd_modules" class="classattr">
                                        <input id="XMLState.get_installmedia_initrd_modules-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_installmedia_initrd_modules</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">action</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_installmedia_initrd_modules-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_installmedia_initrd_modules"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_installmedia_initrd_modules-1503"><a href="#XMLState.get_installmedia_initrd_modules-1503"><span class="linenos">1503</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_installmedia_initrd_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1504"><a href="#XMLState.get_installmedia_initrd_modules-1504"><span class="linenos">1504</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1505"><a href="#XMLState.get_installmedia_initrd_modules-1505"><span class="linenos">1505</span></a><span class="sd">        Gets the list of modules to append in installation initrds</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1506"><a href="#XMLState.get_installmedia_initrd_modules-1506"><span class="linenos">1506</span></a>
</span><span id="XMLState.get_installmedia_initrd_modules-1507"><a href="#XMLState.get_installmedia_initrd_modules-1507"><span class="linenos">1507</span></a><span class="sd">        :return: a list of dracut module names</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1508"><a href="#XMLState.get_installmedia_initrd_modules-1508"><span class="linenos">1508</span></a>
</span><span id="XMLState.get_installmedia_initrd_modules-1509"><a href="#XMLState.get_installmedia_initrd_modules-1509"><span class="linenos">1509</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1510"><a href="#XMLState.get_installmedia_initrd_modules-1510"><span class="linenos">1510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1511"><a href="#XMLState.get_installmedia_initrd_modules-1511"><span class="linenos">1511</span></a>        <span class="n">modules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1512"><a href="#XMLState.get_installmedia_initrd_modules-1512"><span class="linenos">1512</span></a>        <span class="n">installmedia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_installmedia</span><span class="p">()</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1513"><a href="#XMLState.get_installmedia_initrd_modules-1513"><span class="linenos">1513</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">installmedia</span><span class="p">:</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1514"><a href="#XMLState.get_installmedia_initrd_modules-1514"><span class="linenos">1514</span></a>            <span class="k">return</span> <span class="n">modules</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1515"><a href="#XMLState.get_installmedia_initrd_modules-1515"><span class="linenos">1515</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="n">installmedia</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1516"><a href="#XMLState.get_installmedia_initrd_modules-1516"><span class="linenos">1516</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1517"><a href="#XMLState.get_installmedia_initrd_modules-1517"><span class="linenos">1517</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1518"><a href="#XMLState.get_installmedia_initrd_modules-1518"><span class="linenos">1518</span></a>                <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1519"><a href="#XMLState.get_installmedia_initrd_modules-1519"><span class="linenos">1519</span></a>                    <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="n">get_module</span><span class="p">():</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1520"><a href="#XMLState.get_installmedia_initrd_modules-1520"><span class="linenos">1520</span></a>                        <span class="n">modules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">get_module</span><span class="p">())</span>
</span><span id="XMLState.get_installmedia_initrd_modules-1521"><a href="#XMLState.get_installmedia_initrd_modules-1521"><span class="linenos">1521</span></a>        <span class="k">return</span> <span class="n">modules</span>
</span></pre></div>


            <div class="docstring"><p>Gets the list of modules to append in installation initrds</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a list of dracut module names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_installmedia_initrd_drivers" class="classattr">
                                        <input id="XMLState.get_installmedia_initrd_drivers-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_installmedia_initrd_drivers</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">action</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_installmedia_initrd_drivers-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_installmedia_initrd_drivers"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_installmedia_initrd_drivers-1523"><a href="#XMLState.get_installmedia_initrd_drivers-1523"><span class="linenos">1523</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_installmedia_initrd_drivers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1524"><a href="#XMLState.get_installmedia_initrd_drivers-1524"><span class="linenos">1524</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1525"><a href="#XMLState.get_installmedia_initrd_drivers-1525"><span class="linenos">1525</span></a><span class="sd">        Gets the list of drivers to append in installation initrds</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1526"><a href="#XMLState.get_installmedia_initrd_drivers-1526"><span class="linenos">1526</span></a>
</span><span id="XMLState.get_installmedia_initrd_drivers-1527"><a href="#XMLState.get_installmedia_initrd_drivers-1527"><span class="linenos">1527</span></a><span class="sd">        :return: a list of dracut driver names</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1528"><a href="#XMLState.get_installmedia_initrd_drivers-1528"><span class="linenos">1528</span></a>
</span><span id="XMLState.get_installmedia_initrd_drivers-1529"><a href="#XMLState.get_installmedia_initrd_drivers-1529"><span class="linenos">1529</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1530"><a href="#XMLState.get_installmedia_initrd_drivers-1530"><span class="linenos">1530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1531"><a href="#XMLState.get_installmedia_initrd_drivers-1531"><span class="linenos">1531</span></a>        <span class="n">drivers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1532"><a href="#XMLState.get_installmedia_initrd_drivers-1532"><span class="linenos">1532</span></a>        <span class="n">installmedia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_installmedia</span><span class="p">()</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1533"><a href="#XMLState.get_installmedia_initrd_drivers-1533"><span class="linenos">1533</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">installmedia</span><span class="p">:</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1534"><a href="#XMLState.get_installmedia_initrd_drivers-1534"><span class="linenos">1534</span></a>            <span class="k">return</span> <span class="n">drivers</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1535"><a href="#XMLState.get_installmedia_initrd_drivers-1535"><span class="linenos">1535</span></a>        <span class="n">initrd_sections</span> <span class="o">=</span> <span class="n">installmedia</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_initrd</span><span class="p">()</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1536"><a href="#XMLState.get_installmedia_initrd_drivers-1536"><span class="linenos">1536</span></a>        <span class="k">for</span> <span class="n">initrd_section</span> <span class="ow">in</span> <span class="n">initrd_sections</span><span class="p">:</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1537"><a href="#XMLState.get_installmedia_initrd_drivers-1537"><span class="linenos">1537</span></a>            <span class="k">if</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_action</span><span class="p">()</span> <span class="o">==</span> <span class="n">action</span><span class="p">:</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1538"><a href="#XMLState.get_installmedia_initrd_drivers-1538"><span class="linenos">1538</span></a>                <span class="k">for</span> <span class="n">driver</span> <span class="ow">in</span> <span class="n">initrd_section</span><span class="o">.</span><span class="n">get_dracut</span><span class="p">():</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1539"><a href="#XMLState.get_installmedia_initrd_drivers-1539"><span class="linenos">1539</span></a>                    <span class="k">if</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_driver</span><span class="p">():</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1540"><a href="#XMLState.get_installmedia_initrd_drivers-1540"><span class="linenos">1540</span></a>                        <span class="n">drivers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">get_driver</span><span class="p">())</span>
</span><span id="XMLState.get_installmedia_initrd_drivers-1541"><a href="#XMLState.get_installmedia_initrd_drivers-1541"><span class="linenos">1541</span></a>        <span class="k">return</span> <span class="n">drivers</span>
</span></pre></div>


            <div class="docstring"><p>Gets the list of drivers to append in installation initrds</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a list of dracut driver names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_size" class="classattr">
                                        <input id="XMLState.get_build_type_size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_size</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">include_unpartitioned</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#size_type">size_type</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_size-1543"><a href="#XMLState.get_build_type_size-1543"><span class="linenos">1543</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_size</span><span class="p">(</span>
</span><span id="XMLState.get_build_type_size-1544"><a href="#XMLState.get_build_type_size-1544"><span class="linenos">1544</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">include_unpartitioned</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.get_build_type_size-1545"><a href="#XMLState.get_build_type_size-1545"><span class="linenos">1545</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">size_type</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_size-1546"><a href="#XMLState.get_build_type_size-1546"><span class="linenos">1546</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_size-1547"><a href="#XMLState.get_build_type_size-1547"><span class="linenos">1547</span></a><span class="sd">        Size information from the build type section.</span>
</span><span id="XMLState.get_build_type_size-1548"><a href="#XMLState.get_build_type_size-1548"><span class="linenos">1548</span></a><span class="sd">        If no unit is set the value is treated as mbytes</span>
</span><span id="XMLState.get_build_type_size-1549"><a href="#XMLState.get_build_type_size-1549"><span class="linenos">1549</span></a>
</span><span id="XMLState.get_build_type_size-1550"><a href="#XMLState.get_build_type_size-1550"><span class="linenos">1550</span></a><span class="sd">        :param bool include_unpartitioned: sets if the unpartitioned area</span>
</span><span id="XMLState.get_build_type_size-1551"><a href="#XMLState.get_build_type_size-1551"><span class="linenos">1551</span></a><span class="sd">            should be included in the computed size or not</span>
</span><span id="XMLState.get_build_type_size-1552"><a href="#XMLState.get_build_type_size-1552"><span class="linenos">1552</span></a>
</span><span id="XMLState.get_build_type_size-1553"><a href="#XMLState.get_build_type_size-1553"><span class="linenos">1553</span></a><span class="sd">        :return: mbytes</span>
</span><span id="XMLState.get_build_type_size-1554"><a href="#XMLState.get_build_type_size-1554"><span class="linenos">1554</span></a>
</span><span id="XMLState.get_build_type_size-1555"><a href="#XMLState.get_build_type_size-1555"><span class="linenos">1555</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState.get_build_type_size-1556"><a href="#XMLState.get_build_type_size-1556"><span class="linenos">1556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_size-1557"><a href="#XMLState.get_build_type_size-1557"><span class="linenos">1557</span></a>        <span class="n">size_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_size-1558"><a href="#XMLState.get_build_type_size-1558"><span class="linenos">1558</span></a>        <span class="k">if</span> <span class="n">size_section</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_size-1559"><a href="#XMLState.get_build_type_size-1559"><span class="linenos">1559</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unit</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_size-1560"><a href="#XMLState.get_build_type_size-1560"><span class="linenos">1560</span></a>            <span class="n">additive</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_additive</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_size-1561"><a href="#XMLState.get_build_type_size-1561"><span class="linenos">1561</span></a>            <span class="n">unpartitioned</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unpartitioned</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_size-1562"><a href="#XMLState.get_build_type_size-1562"><span class="linenos">1562</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_valueOf_</span><span class="p">())</span>
</span><span id="XMLState.get_build_type_size-1563"><a href="#XMLState.get_build_type_size-1563"><span class="linenos">1563</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">include_unpartitioned</span> <span class="ow">and</span> <span class="n">unpartitioned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_size-1564"><a href="#XMLState.get_build_type_size-1564"><span class="linenos">1564</span></a>                <span class="n">value</span> <span class="o">-=</span> <span class="n">unpartitioned</span>
</span><span id="XMLState.get_build_type_size-1565"><a href="#XMLState.get_build_type_size-1565"><span class="linenos">1565</span></a>            <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_size-1566"><a href="#XMLState.get_build_type_size-1566"><span class="linenos">1566</span></a>                <span class="n">value</span> <span class="o">*=</span> <span class="mi">1024</span>
</span><span id="XMLState.get_build_type_size-1567"><a href="#XMLState.get_build_type_size-1567"><span class="linenos">1567</span></a>            <span class="k">return</span> <span class="n">size_type</span><span class="p">(</span>
</span><span id="XMLState.get_build_type_size-1568"><a href="#XMLState.get_build_type_size-1568"><span class="linenos">1568</span></a>                <span class="n">mbytes</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">additive</span><span class="o">=</span><span class="n">additive</span>
</span><span id="XMLState.get_build_type_size-1569"><a href="#XMLState.get_build_type_size-1569"><span class="linenos">1569</span></a>            <span class="p">)</span>
</span><span id="XMLState.get_build_type_size-1570"><a href="#XMLState.get_build_type_size-1570"><span class="linenos">1570</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Size information from the build type section.
If no unit is set the value is treated as mbytes</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>bool include_unpartitioned</strong>:  sets if the unpartitioned area
should be included in the computed size or not</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mbytes</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_unpartitioned_bytes" class="classattr">
                                        <input id="XMLState.get_build_type_unpartitioned_bytes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_unpartitioned_bytes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_unpartitioned_bytes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_unpartitioned_bytes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_unpartitioned_bytes-1572"><a href="#XMLState.get_build_type_unpartitioned_bytes-1572"><span class="linenos">1572</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_unpartitioned_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1573"><a href="#XMLState.get_build_type_unpartitioned_bytes-1573"><span class="linenos">1573</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1574"><a href="#XMLState.get_build_type_unpartitioned_bytes-1574"><span class="linenos">1574</span></a><span class="sd">        Size of the unpartitioned area for image in megabytes</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1575"><a href="#XMLState.get_build_type_unpartitioned_bytes-1575"><span class="linenos">1575</span></a>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1576"><a href="#XMLState.get_build_type_unpartitioned_bytes-1576"><span class="linenos">1576</span></a><span class="sd">        :return: mbytes</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1577"><a href="#XMLState.get_build_type_unpartitioned_bytes-1577"><span class="linenos">1577</span></a>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1578"><a href="#XMLState.get_build_type_unpartitioned_bytes-1578"><span class="linenos">1578</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1579"><a href="#XMLState.get_build_type_unpartitioned_bytes-1579"><span class="linenos">1579</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1580"><a href="#XMLState.get_build_type_unpartitioned_bytes-1580"><span class="linenos">1580</span></a>        <span class="n">size_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1581"><a href="#XMLState.get_build_type_unpartitioned_bytes-1581"><span class="linenos">1581</span></a>        <span class="k">if</span> <span class="n">size_section</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1582"><a href="#XMLState.get_build_type_unpartitioned_bytes-1582"><span class="linenos">1582</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unit</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;M&#39;</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1583"><a href="#XMLState.get_build_type_unpartitioned_bytes-1583"><span class="linenos">1583</span></a>            <span class="n">unpartitioned</span> <span class="o">=</span> <span class="n">size_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_unpartitioned</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1584"><a href="#XMLState.get_build_type_unpartitioned_bytes-1584"><span class="linenos">1584</span></a>            <span class="k">return</span> <span class="n">StringToSize</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unpartitioned</span><span class="p">,</span> <span class="n">unit</span><span class="p">))</span>
</span><span id="XMLState.get_build_type_unpartitioned_bytes-1585"><a href="#XMLState.get_build_type_unpartitioned_bytes-1585"><span class="linenos">1585</span></a>        <span class="k">return</span> <span class="mi">0</span>
</span></pre></div>


            <div class="docstring"><p>Size of the unpartitioned area for image in megabytes</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mbytes</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_disk_start_sector" class="classattr">
                                        <input id="XMLState.get_disk_start_sector-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_disk_start_sector</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_disk_start_sector-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_disk_start_sector"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_disk_start_sector-1587"><a href="#XMLState.get_disk_start_sector-1587"><span class="linenos">1587</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_disk_start_sector</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="XMLState.get_disk_start_sector-1588"><a href="#XMLState.get_disk_start_sector-1588"><span class="linenos">1588</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_disk_start_sector-1589"><a href="#XMLState.get_disk_start_sector-1589"><span class="linenos">1589</span></a><span class="sd">        First disk sector number to be used by the first disk partition.</span>
</span><span id="XMLState.get_disk_start_sector-1590"><a href="#XMLState.get_disk_start_sector-1590"><span class="linenos">1590</span></a>
</span><span id="XMLState.get_disk_start_sector-1591"><a href="#XMLState.get_disk_start_sector-1591"><span class="linenos">1591</span></a><span class="sd">        :return: number</span>
</span><span id="XMLState.get_disk_start_sector-1592"><a href="#XMLState.get_disk_start_sector-1592"><span class="linenos">1592</span></a>
</span><span id="XMLState.get_disk_start_sector-1593"><a href="#XMLState.get_disk_start_sector-1593"><span class="linenos">1593</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState.get_disk_start_sector-1594"><a href="#XMLState.get_disk_start_sector-1594"><span class="linenos">1594</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_disk_start_sector-1595"><a href="#XMLState.get_disk_start_sector-1595"><span class="linenos">1595</span></a>        <span class="n">disk_start_sector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_disk_start_sector</span><span class="p">()</span>
</span><span id="XMLState.get_disk_start_sector-1596"><a href="#XMLState.get_disk_start_sector-1596"><span class="linenos">1596</span></a>        <span class="k">if</span> <span class="n">disk_start_sector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.get_disk_start_sector-1597"><a href="#XMLState.get_disk_start_sector-1597"><span class="linenos">1597</span></a>            <span class="n">disk_start_sector</span> <span class="o">=</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_disk_start_sector</span><span class="p">()</span>
</span><span id="XMLState.get_disk_start_sector-1598"><a href="#XMLState.get_disk_start_sector-1598"><span class="linenos">1598</span></a>        <span class="k">return</span> <span class="n">disk_start_sector</span>
</span></pre></div>


            <div class="docstring"><p>First disk sector number to be used by the first disk partition.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>number</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_spare_part_size" class="classattr">
                                        <input id="XMLState.get_build_type_spare_part_size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_spare_part_size</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_spare_part_size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_spare_part_size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_spare_part_size-1600"><a href="#XMLState.get_build_type_spare_part_size-1600"><span class="linenos">1600</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_spare_part_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_spare_part_size-1601"><a href="#XMLState.get_build_type_spare_part_size-1601"><span class="linenos">1601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_spare_part_size-1602"><a href="#XMLState.get_build_type_spare_part_size-1602"><span class="linenos">1602</span></a><span class="sd">        Size information for the spare_part size from the build</span>
</span><span id="XMLState.get_build_type_spare_part_size-1603"><a href="#XMLState.get_build_type_spare_part_size-1603"><span class="linenos">1603</span></a><span class="sd">        type. If no unit is set the value is treated as mbytes</span>
</span><span id="XMLState.get_build_type_spare_part_size-1604"><a href="#XMLState.get_build_type_spare_part_size-1604"><span class="linenos">1604</span></a>
</span><span id="XMLState.get_build_type_spare_part_size-1605"><a href="#XMLState.get_build_type_spare_part_size-1605"><span class="linenos">1605</span></a><span class="sd">        :return: mbytes</span>
</span><span id="XMLState.get_build_type_spare_part_size-1606"><a href="#XMLState.get_build_type_spare_part_size-1606"><span class="linenos">1606</span></a>
</span><span id="XMLState.get_build_type_spare_part_size-1607"><a href="#XMLState.get_build_type_spare_part_size-1607"><span class="linenos">1607</span></a><span class="sd">        :rtype: int</span>
</span><span id="XMLState.get_build_type_spare_part_size-1608"><a href="#XMLState.get_build_type_spare_part_size-1608"><span class="linenos">1608</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_spare_part_size-1609"><a href="#XMLState.get_build_type_spare_part_size-1609"><span class="linenos">1609</span></a>        <span class="n">spare_part_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_spare_part</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_spare_part_size-1610"><a href="#XMLState.get_build_type_spare_part_size-1610"><span class="linenos">1610</span></a>        <span class="k">if</span> <span class="n">spare_part_size</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_spare_part_size-1611"><a href="#XMLState.get_build_type_spare_part_size-1611"><span class="linenos">1611</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">spare_part_size</span><span class="p">)</span>
</span><span id="XMLState.get_build_type_spare_part_size-1612"><a href="#XMLState.get_build_type_spare_part_size-1612"><span class="linenos">1612</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Size information for the spare_part size from the build
type. If no unit is set the value is treated as mbytes</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mbytes</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_spare_part_fs_attributes" class="classattr">
                                        <input id="XMLState.get_build_type_spare_part_fs_attributes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_spare_part_fs_attributes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_spare_part_fs_attributes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_spare_part_fs_attributes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_spare_part_fs_attributes-1614"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1614"><span class="linenos">1614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_spare_part_fs_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]:</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1615"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1615"><span class="linenos">1615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1616"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1616"><span class="linenos">1616</span></a><span class="sd">        Build type specific list of filesystem attributes applied to</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1617"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1617"><span class="linenos">1617</span></a><span class="sd">        the spare partition.</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1618"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1618"><span class="linenos">1618</span></a>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1619"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1619"><span class="linenos">1619</span></a><span class="sd">        :return: list of strings or empty list</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1620"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1620"><span class="linenos">1620</span></a>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1621"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1621"><span class="linenos">1621</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1622"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1622"><span class="linenos">1622</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1623"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1623"><span class="linenos">1623</span></a>        <span class="n">spare_part_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_spare_part_fs_attributes</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1624"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1624"><span class="linenos">1624</span></a>        <span class="k">if</span> <span class="n">spare_part_attributes</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1625"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1625"><span class="linenos">1625</span></a>            <span class="k">return</span> <span class="n">spare_part_attributes</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_build_type_spare_part_fs_attributes-1626"><a href="#XMLState.get_build_type_spare_part_fs_attributes-1626"><span class="linenos">1626</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Build type specific list of filesystem attributes applied to
the spare partition.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of strings or empty list</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_build_type_format_options" class="classattr">
                                        <input id="XMLState.get_build_type_format_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_build_type_format_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_build_type_format_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_build_type_format_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_build_type_format_options-1628"><a href="#XMLState.get_build_type_format_options-1628"><span class="linenos">1628</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_build_type_format_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_format_options-1629"><a href="#XMLState.get_build_type_format_options-1629"><span class="linenos">1629</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_format_options-1630"><a href="#XMLState.get_build_type_format_options-1630"><span class="linenos">1630</span></a><span class="sd">        Disk format options returned as a dictionary</span>
</span><span id="XMLState.get_build_type_format_options-1631"><a href="#XMLState.get_build_type_format_options-1631"><span class="linenos">1631</span></a>
</span><span id="XMLState.get_build_type_format_options-1632"><a href="#XMLState.get_build_type_format_options-1632"><span class="linenos">1632</span></a><span class="sd">        :return: format options</span>
</span><span id="XMLState.get_build_type_format_options-1633"><a href="#XMLState.get_build_type_format_options-1633"><span class="linenos">1633</span></a>
</span><span id="XMLState.get_build_type_format_options-1634"><a href="#XMLState.get_build_type_format_options-1634"><span class="linenos">1634</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_build_type_format_options-1635"><a href="#XMLState.get_build_type_format_options-1635"><span class="linenos">1635</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_build_type_format_options-1636"><a href="#XMLState.get_build_type_format_options-1636"><span class="linenos">1636</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState.get_build_type_format_options-1637"><a href="#XMLState.get_build_type_format_options-1637"><span class="linenos">1637</span></a>        <span class="n">format_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_formatoptions</span><span class="p">()</span>
</span><span id="XMLState.get_build_type_format_options-1638"><a href="#XMLState.get_build_type_format_options-1638"><span class="linenos">1638</span></a>        <span class="k">if</span> <span class="n">format_options</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_format_options-1639"><a href="#XMLState.get_build_type_format_options-1639"><span class="linenos">1639</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">format_options</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="XMLState.get_build_type_format_options-1640"><a href="#XMLState.get_build_type_format_options-1640"><span class="linenos">1640</span></a>                <span class="n">key_value_list</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_build_type_format_options-1641"><a href="#XMLState.get_build_type_format_options-1641"><span class="linenos">1641</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_value_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_format_options-1642"><a href="#XMLState.get_build_type_format_options-1642"><span class="linenos">1642</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">key_value_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">key_value_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="XMLState.get_build_type_format_options-1643"><a href="#XMLState.get_build_type_format_options-1643"><span class="linenos">1643</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_build_type_format_options-1644"><a href="#XMLState.get_build_type_format_options-1644"><span class="linenos">1644</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">key_value_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_build_type_format_options-1645"><a href="#XMLState.get_build_type_format_options-1645"><span class="linenos">1645</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Disk format options returned as a dictionary</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>format options</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_volume_group_name" class="classattr">
                                        <input id="XMLState.get_volume_group_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_volume_group_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_volume_group_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_volume_group_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_volume_group_name-1647"><a href="#XMLState.get_volume_group_name-1647"><span class="linenos">1647</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volume_group_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_volume_group_name-1648"><a href="#XMLState.get_volume_group_name-1648"><span class="linenos">1648</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_volume_group_name-1649"><a href="#XMLState.get_volume_group_name-1649"><span class="linenos">1649</span></a><span class="sd">        Volume group name from selected &lt;systemdisk&gt; section</span>
</span><span id="XMLState.get_volume_group_name-1650"><a href="#XMLState.get_volume_group_name-1650"><span class="linenos">1650</span></a>
</span><span id="XMLState.get_volume_group_name-1651"><a href="#XMLState.get_volume_group_name-1651"><span class="linenos">1651</span></a><span class="sd">        :return: volume group name</span>
</span><span id="XMLState.get_volume_group_name-1652"><a href="#XMLState.get_volume_group_name-1652"><span class="linenos">1652</span></a>
</span><span id="XMLState.get_volume_group_name-1653"><a href="#XMLState.get_volume_group_name-1653"><span class="linenos">1653</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_volume_group_name-1654"><a href="#XMLState.get_volume_group_name-1654"><span class="linenos">1654</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_volume_group_name-1655"><a href="#XMLState.get_volume_group_name-1655"><span class="linenos">1655</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState.get_volume_group_name-1656"><a href="#XMLState.get_volume_group_name-1656"><span class="linenos">1656</span></a>        <span class="n">volume_group_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_volume_group_name-1657"><a href="#XMLState.get_volume_group_name-1657"><span class="linenos">1657</span></a>        <span class="k">if</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="XMLState.get_volume_group_name-1658"><a href="#XMLState.get_volume_group_name-1658"><span class="linenos">1658</span></a>            <span class="n">volume_group_name</span> <span class="o">=</span> <span class="n">systemdisk_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.get_volume_group_name-1659"><a href="#XMLState.get_volume_group_name-1659"><span class="linenos">1659</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">volume_group_name</span><span class="p">:</span>
</span><span id="XMLState.get_volume_group_name-1660"><a href="#XMLState.get_volume_group_name-1660"><span class="linenos">1660</span></a>            <span class="n">volume_group_name</span> <span class="o">=</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_volume_group_name</span><span class="p">()</span>
</span><span id="XMLState.get_volume_group_name-1661"><a href="#XMLState.get_volume_group_name-1661"><span class="linenos">1661</span></a>        <span class="k">return</span> <span class="n">volume_group_name</span>
</span></pre></div>


            <div class="docstring"><p>Volume group name from selected <systemdisk> section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>volume group name</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_users" class="classattr">
                                        <input id="XMLState.get_users-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_users</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_users-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_users"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_users-1663"><a href="#XMLState.get_users-1663"><span class="linenos">1663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_users-1664"><a href="#XMLState.get_users-1664"><span class="linenos">1664</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_users-1665"><a href="#XMLState.get_users-1665"><span class="linenos">1665</span></a><span class="sd">        List of configured users.</span>
</span><span id="XMLState.get_users-1666"><a href="#XMLState.get_users-1666"><span class="linenos">1666</span></a>
</span><span id="XMLState.get_users-1667"><a href="#XMLState.get_users-1667"><span class="linenos">1667</span></a><span class="sd">        Each entry in the list is a single xml_parse::user instance.</span>
</span><span id="XMLState.get_users-1668"><a href="#XMLState.get_users-1668"><span class="linenos">1668</span></a>
</span><span id="XMLState.get_users-1669"><a href="#XMLState.get_users-1669"><span class="linenos">1669</span></a><span class="sd">        :return: list of &lt;user&gt; section reference(s)</span>
</span><span id="XMLState.get_users-1670"><a href="#XMLState.get_users-1670"><span class="linenos">1670</span></a>
</span><span id="XMLState.get_users-1671"><a href="#XMLState.get_users-1671"><span class="linenos">1671</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_users-1672"><a href="#XMLState.get_users-1672"><span class="linenos">1672</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_users-1673"><a href="#XMLState.get_users-1673"><span class="linenos">1673</span></a>        <span class="n">users_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_users-1674"><a href="#XMLState.get_users-1674"><span class="linenos">1674</span></a>        <span class="n">users_names_added</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_users-1675"><a href="#XMLState.get_users-1675"><span class="linenos">1675</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users_sections</span><span class="p">():</span>
</span><span id="XMLState.get_users-1676"><a href="#XMLState.get_users-1676"><span class="linenos">1676</span></a>            <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">():</span>
</span><span id="XMLState.get_users-1677"><a href="#XMLState.get_users-1677"><span class="linenos">1677</span></a>                <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">users_names_added</span><span class="p">:</span>
</span><span id="XMLState.get_users-1678"><a href="#XMLState.get_users-1678"><span class="linenos">1678</span></a>                    <span class="n">users_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="XMLState.get_users-1679"><a href="#XMLState.get_users-1679"><span class="linenos">1679</span></a>                    <span class="n">users_names_added</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_users-1680"><a href="#XMLState.get_users-1680"><span class="linenos">1680</span></a>
</span><span id="XMLState.get_users-1681"><a href="#XMLState.get_users-1681"><span class="linenos">1681</span></a>        <span class="k">return</span> <span class="n">users_list</span>
</span></pre></div>


            <div class="docstring"><p>List of configured users.</p>

<p>Each entry in the list is a single xml_parse::user instance.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of <user> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_user_groups" class="classattr">
                                        <input id="XMLState.get_user_groups-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_user_groups</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">user_name</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_user_groups-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_user_groups"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_user_groups-1683"><a href="#XMLState.get_user_groups-1683"><span class="linenos">1683</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_user_groups-1684"><a href="#XMLState.get_user_groups-1684"><span class="linenos">1684</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_user_groups-1685"><a href="#XMLState.get_user_groups-1685"><span class="linenos">1685</span></a><span class="sd">        List of group names matching specified user</span>
</span><span id="XMLState.get_user_groups-1686"><a href="#XMLState.get_user_groups-1686"><span class="linenos">1686</span></a>
</span><span id="XMLState.get_user_groups-1687"><a href="#XMLState.get_user_groups-1687"><span class="linenos">1687</span></a><span class="sd">        Each entry in the list is the name of a group and optionally its</span>
</span><span id="XMLState.get_user_groups-1688"><a href="#XMLState.get_user_groups-1688"><span class="linenos">1688</span></a><span class="sd">        group ID separated by a colon, that the specified user belongs to.</span>
</span><span id="XMLState.get_user_groups-1689"><a href="#XMLState.get_user_groups-1689"><span class="linenos">1689</span></a><span class="sd">        The first item in the list is the login or primary group. The</span>
</span><span id="XMLState.get_user_groups-1690"><a href="#XMLState.get_user_groups-1690"><span class="linenos">1690</span></a><span class="sd">        list will be empty if no groups are specified in the</span>
</span><span id="XMLState.get_user_groups-1691"><a href="#XMLState.get_user_groups-1691"><span class="linenos">1691</span></a><span class="sd">        description file.</span>
</span><span id="XMLState.get_user_groups-1692"><a href="#XMLState.get_user_groups-1692"><span class="linenos">1692</span></a>
</span><span id="XMLState.get_user_groups-1693"><a href="#XMLState.get_user_groups-1693"><span class="linenos">1693</span></a><span class="sd">        :return: groups data for the given user</span>
</span><span id="XMLState.get_user_groups-1694"><a href="#XMLState.get_user_groups-1694"><span class="linenos">1694</span></a>
</span><span id="XMLState.get_user_groups-1695"><a href="#XMLState.get_user_groups-1695"><span class="linenos">1695</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_user_groups-1696"><a href="#XMLState.get_user_groups-1696"><span class="linenos">1696</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_user_groups-1697"><a href="#XMLState.get_user_groups-1697"><span class="linenos">1697</span></a>        <span class="n">groups_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_user_groups-1698"><a href="#XMLState.get_user_groups-1698"><span class="linenos">1698</span></a>        <span class="k">for</span> <span class="n">users_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users_sections</span><span class="p">():</span>
</span><span id="XMLState.get_user_groups-1699"><a href="#XMLState.get_user_groups-1699"><span class="linenos">1699</span></a>            <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_section</span><span class="o">.</span><span class="n">get_user</span><span class="p">():</span>
</span><span id="XMLState.get_user_groups-1700"><a href="#XMLState.get_user_groups-1700"><span class="linenos">1700</span></a>                <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="n">user_name</span><span class="p">:</span>
</span><span id="XMLState.get_user_groups-1701"><a href="#XMLState.get_user_groups-1701"><span class="linenos">1701</span></a>                    <span class="n">user_groups</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span>
</span><span id="XMLState.get_user_groups-1702"><a href="#XMLState.get_user_groups-1702"><span class="linenos">1702</span></a>                    <span class="k">if</span> <span class="n">user_groups</span><span class="p">:</span>
</span><span id="XMLState.get_user_groups-1703"><a href="#XMLState.get_user_groups-1703"><span class="linenos">1703</span></a>                        <span class="n">groups_list</span> <span class="o">+=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_user_groups-1704"><a href="#XMLState.get_user_groups-1704"><span class="linenos">1704</span></a>
</span><span id="XMLState.get_user_groups-1705"><a href="#XMLState.get_user_groups-1705"><span class="linenos">1705</span></a>        <span class="c1"># order of list items matter, thus we don&#39;t use set() here</span>
</span><span id="XMLState.get_user_groups-1706"><a href="#XMLState.get_user_groups-1706"><span class="linenos">1706</span></a>        <span class="c1"># better faster, nicer solutions welcome :)</span>
</span><span id="XMLState.get_user_groups-1707"><a href="#XMLState.get_user_groups-1707"><span class="linenos">1707</span></a>        <span class="n">result_group_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_user_groups-1708"><a href="#XMLState.get_user_groups-1708"><span class="linenos">1708</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">groups_list</span><span class="p">:</span>
</span><span id="XMLState.get_user_groups-1709"><a href="#XMLState.get_user_groups-1709"><span class="linenos">1709</span></a>            <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result_group_list</span><span class="p">:</span>
</span><span id="XMLState.get_user_groups-1710"><a href="#XMLState.get_user_groups-1710"><span class="linenos">1710</span></a>                <span class="n">result_group_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="XMLState.get_user_groups-1711"><a href="#XMLState.get_user_groups-1711"><span class="linenos">1711</span></a>
</span><span id="XMLState.get_user_groups-1712"><a href="#XMLState.get_user_groups-1712"><span class="linenos">1712</span></a>        <span class="k">return</span> <span class="n">result_group_list</span>
</span></pre></div>


            <div class="docstring"><p>List of group names matching specified user</p>

<p>Each entry in the list is the name of a group and optionally its
group ID separated by a colon, that the specified user belongs to.
The first item in the list is the login or primary group. The
list will be empty if no groups are specified in the
description file.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>groups data for the given user</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_container_config" class="classattr">
                                        <input id="XMLState.get_container_config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_container_config</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_container_config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_container_config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_container_config-1714"><a href="#XMLState.get_container_config-1714"><span class="linenos">1714</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_container_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState.get_container_config-1715"><a href="#XMLState.get_container_config-1715"><span class="linenos">1715</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_container_config-1716"><a href="#XMLState.get_container_config-1716"><span class="linenos">1716</span></a><span class="sd">        Dictionary of containerconfig information</span>
</span><span id="XMLState.get_container_config-1717"><a href="#XMLState.get_container_config-1717"><span class="linenos">1717</span></a>
</span><span id="XMLState.get_container_config-1718"><a href="#XMLState.get_container_config-1718"><span class="linenos">1718</span></a><span class="sd">        Takes attributes and subsection data from the selected</span>
</span><span id="XMLState.get_container_config-1719"><a href="#XMLState.get_container_config-1719"><span class="linenos">1719</span></a><span class="sd">        &lt;containerconfig&gt; section and stores it in a dictionary</span>
</span><span id="XMLState.get_container_config-1720"><a href="#XMLState.get_container_config-1720"><span class="linenos">1720</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_container_config-1721"><a href="#XMLState.get_container_config-1721"><span class="linenos">1721</span></a>        <span class="n">container_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_base_data</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1722"><a href="#XMLState.get_container_config-1722"><span class="linenos">1722</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1723"><a href="#XMLState.get_container_config-1723"><span class="linenos">1723</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_entrypoint</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1724"><a href="#XMLState.get_container_config-1724"><span class="linenos">1724</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1725"><a href="#XMLState.get_container_config-1725"><span class="linenos">1725</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1726"><a href="#XMLState.get_container_config-1726"><span class="linenos">1726</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_subcommand</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1727"><a href="#XMLState.get_container_config-1727"><span class="linenos">1727</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1728"><a href="#XMLState.get_container_config-1728"><span class="linenos">1728</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1729"><a href="#XMLState.get_container_config-1729"><span class="linenos">1729</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_expose_ports</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1730"><a href="#XMLState.get_container_config-1730"><span class="linenos">1730</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1731"><a href="#XMLState.get_container_config-1731"><span class="linenos">1731</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1732"><a href="#XMLState.get_container_config-1732"><span class="linenos">1732</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_volumes</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1733"><a href="#XMLState.get_container_config-1733"><span class="linenos">1733</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1734"><a href="#XMLState.get_container_config-1734"><span class="linenos">1734</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1735"><a href="#XMLState.get_container_config-1735"><span class="linenos">1735</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_stopsignal</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1736"><a href="#XMLState.get_container_config-1736"><span class="linenos">1736</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1737"><a href="#XMLState.get_container_config-1737"><span class="linenos">1737</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1738"><a href="#XMLState.get_container_config-1738"><span class="linenos">1738</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_environment</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1739"><a href="#XMLState.get_container_config-1739"><span class="linenos">1739</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1740"><a href="#XMLState.get_container_config-1740"><span class="linenos">1740</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1741"><a href="#XMLState.get_container_config-1741"><span class="linenos">1741</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_labels</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1742"><a href="#XMLState.get_container_config-1742"><span class="linenos">1742</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1743"><a href="#XMLState.get_container_config-1743"><span class="linenos">1743</span></a>        <span class="n">container_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="XMLState.get_container_config-1744"><a href="#XMLState.get_container_config-1744"><span class="linenos">1744</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_match_docker_history</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1745"><a href="#XMLState.get_container_config-1745"><span class="linenos">1745</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_container_config-1746"><a href="#XMLState.get_container_config-1746"><span class="linenos">1746</span></a>
</span><span id="XMLState.get_container_config-1747"><a href="#XMLState.get_container_config-1747"><span class="linenos">1747</span></a>        <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_description_section</span><span class="p">()</span>
</span><span id="XMLState.get_container_config-1748"><a href="#XMLState.get_container_config-1748"><span class="linenos">1748</span></a>        <span class="n">author_contact</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> &lt;</span><span class="si">{1}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">desc</span><span class="o">.</span><span class="n">author</span><span class="p">,</span> <span class="n">desc</span><span class="o">.</span><span class="n">contact</span><span class="p">)</span>
</span><span id="XMLState.get_container_config-1749"><a href="#XMLState.get_container_config-1749"><span class="linenos">1749</span></a>        <span class="k">if</span> <span class="s1">&#39;history&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">:</span>
</span><span id="XMLState.get_container_config-1750"><a href="#XMLState.get_container_config-1750"><span class="linenos">1750</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState.get_container_config-1751"><a href="#XMLState.get_container_config-1751"><span class="linenos">1751</span></a>        <span class="k">if</span> <span class="s1">&#39;author&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]:</span>
</span><span id="XMLState.get_container_config-1752"><a href="#XMLState.get_container_config-1752"><span class="linenos">1752</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="s1">&#39;author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">author_contact</span>
</span><span id="XMLState.get_container_config-1753"><a href="#XMLState.get_container_config-1753"><span class="linenos">1753</span></a>        <span class="k">if</span> <span class="s1">&#39;maintainer&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">container_config</span><span class="p">:</span>
</span><span id="XMLState.get_container_config-1754"><a href="#XMLState.get_container_config-1754"><span class="linenos">1754</span></a>            <span class="n">container_config</span><span class="p">[</span><span class="s1">&#39;maintainer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">author_contact</span>
</span><span id="XMLState.get_container_config-1755"><a href="#XMLState.get_container_config-1755"><span class="linenos">1755</span></a>
</span><span id="XMLState.get_container_config-1756"><a href="#XMLState.get_container_config-1756"><span class="linenos">1756</span></a>        <span class="k">return</span> <span class="n">container_config</span>
</span></pre></div>


            <div class="docstring"><p>Dictionary of containerconfig information</p>

<p>Takes attributes and subsection data from the selected
<containerconfig> section and stores it in a dictionary</p>
</div>


                            </div>
                            <div id="XMLState.set_container_config_tag" class="classattr">
                                        <input id="XMLState.set_container_config_tag-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_container_config_tag</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">tag</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.set_container_config_tag-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.set_container_config_tag"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.set_container_config_tag-1758"><a href="#XMLState.set_container_config_tag-1758"><span class="linenos">1758</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_container_config_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.set_container_config_tag-1759"><a href="#XMLState.set_container_config_tag-1759"><span class="linenos">1759</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.set_container_config_tag-1760"><a href="#XMLState.set_container_config_tag-1760"><span class="linenos">1760</span></a><span class="sd">        Set new tag name in containerconfig section</span>
</span><span id="XMLState.set_container_config_tag-1761"><a href="#XMLState.set_container_config_tag-1761"><span class="linenos">1761</span></a>
</span><span id="XMLState.set_container_config_tag-1762"><a href="#XMLState.set_container_config_tag-1762"><span class="linenos">1762</span></a><span class="sd">        In order to set a new tag value an existing containerconfig and</span>
</span><span id="XMLState.set_container_config_tag-1763"><a href="#XMLState.set_container_config_tag-1763"><span class="linenos">1763</span></a><span class="sd">        tag setup is required</span>
</span><span id="XMLState.set_container_config_tag-1764"><a href="#XMLState.set_container_config_tag-1764"><span class="linenos">1764</span></a>
</span><span id="XMLState.set_container_config_tag-1765"><a href="#XMLState.set_container_config_tag-1765"><span class="linenos">1765</span></a><span class="sd">        :param str tag: tag name</span>
</span><span id="XMLState.set_container_config_tag-1766"><a href="#XMLState.set_container_config_tag-1766"><span class="linenos">1766</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.set_container_config_tag-1767"><a href="#XMLState.set_container_config_tag-1767"><span class="linenos">1767</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState.set_container_config_tag-1768"><a href="#XMLState.set_container_config_tag-1768"><span class="linenos">1768</span></a>        <span class="k">if</span> <span class="n">container_config_section</span> <span class="ow">and</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_tag</span><span class="p">():</span>
</span><span id="XMLState.set_container_config_tag-1769"><a href="#XMLState.set_container_config_tag-1769"><span class="linenos">1769</span></a>            <span class="n">container_config_section</span><span class="o">.</span><span class="n">set_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span id="XMLState.set_container_config_tag-1770"><a href="#XMLState.set_container_config_tag-1770"><span class="linenos">1770</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.set_container_config_tag-1771"><a href="#XMLState.set_container_config_tag-1771"><span class="linenos">1771</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="XMLState.set_container_config_tag-1772"><a href="#XMLState.set_container_config_tag-1772"><span class="linenos">1772</span></a><span class="s1">                No &lt;containerconfig&gt; section and/or tag attribute configured</span>
</span><span id="XMLState.set_container_config_tag-1773"><a href="#XMLState.set_container_config_tag-1773"><span class="linenos">1773</span></a>
</span><span id="XMLState.set_container_config_tag-1774"><a href="#XMLState.set_container_config_tag-1774"><span class="linenos">1774</span></a><span class="s1">                In order to set the tag </span><span class="si">{0}</span><span class="s1"> as new container tag,</span>
</span><span id="XMLState.set_container_config_tag-1775"><a href="#XMLState.set_container_config_tag-1775"><span class="linenos">1775</span></a><span class="s1">                an initial containerconfig section including a tag</span>
</span><span id="XMLState.set_container_config_tag-1776"><a href="#XMLState.set_container_config_tag-1776"><span class="linenos">1776</span></a><span class="s1">                setup is required</span>
</span><span id="XMLState.set_container_config_tag-1777"><a href="#XMLState.set_container_config_tag-1777"><span class="linenos">1777</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState.set_container_config_tag-1778"><a href="#XMLState.set_container_config_tag-1778"><span class="linenos">1778</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Set new tag name in containerconfig section</p>

<p>In order to set a new tag value an existing containerconfig and
tag setup is required</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str tag</strong>:  tag name</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.add_container_config_label" class="classattr">
                                        <input id="XMLState.add_container_config_label-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_container_config_label</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">label_name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.add_container_config_label-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.add_container_config_label"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.add_container_config_label-1780"><a href="#XMLState.add_container_config_label-1780"><span class="linenos">1780</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_container_config_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.add_container_config_label-1781"><a href="#XMLState.add_container_config_label-1781"><span class="linenos">1781</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.add_container_config_label-1782"><a href="#XMLState.add_container_config_label-1782"><span class="linenos">1782</span></a><span class="sd">        Adds a new label in the containerconfig section, if a label with the</span>
</span><span id="XMLState.add_container_config_label-1783"><a href="#XMLState.add_container_config_label-1783"><span class="linenos">1783</span></a><span class="sd">        same name is already defined in containerconfig it gets overwritten by</span>
</span><span id="XMLState.add_container_config_label-1784"><a href="#XMLState.add_container_config_label-1784"><span class="linenos">1784</span></a><span class="sd">        this method.</span>
</span><span id="XMLState.add_container_config_label-1785"><a href="#XMLState.add_container_config_label-1785"><span class="linenos">1785</span></a>
</span><span id="XMLState.add_container_config_label-1786"><a href="#XMLState.add_container_config_label-1786"><span class="linenos">1786</span></a><span class="sd">        :param str label_name: the string representing the label name</span>
</span><span id="XMLState.add_container_config_label-1787"><a href="#XMLState.add_container_config_label-1787"><span class="linenos">1787</span></a><span class="sd">        :param str value: the value of the label</span>
</span><span id="XMLState.add_container_config_label-1788"><a href="#XMLState.add_container_config_label-1788"><span class="linenos">1788</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.add_container_config_label-1789"><a href="#XMLState.add_container_config_label-1789"><span class="linenos">1789</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;docker&#39;</span><span class="p">,</span> <span class="s1">&#39;oci&#39;</span><span class="p">]:</span>
</span><span id="XMLState.add_container_config_label-1790"><a href="#XMLState.add_container_config_label-1790"><span class="linenos">1790</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="XMLState.add_container_config_label-1791"><a href="#XMLState.add_container_config_label-1791"><span class="linenos">1791</span></a><span class="s1">                Labels can only be configured for container image types</span>
</span><span id="XMLState.add_container_config_label-1792"><a href="#XMLState.add_container_config_label-1792"><span class="linenos">1792</span></a><span class="s1">                docker and oci.</span>
</span><span id="XMLState.add_container_config_label-1793"><a href="#XMLState.add_container_config_label-1793"><span class="linenos">1793</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState.add_container_config_label-1794"><a href="#XMLState.add_container_config_label-1794"><span class="linenos">1794</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="XMLState.add_container_config_label-1795"><a href="#XMLState.add_container_config_label-1795"><span class="linenos">1795</span></a>            <span class="k">return</span>
</span><span id="XMLState.add_container_config_label-1796"><a href="#XMLState.add_container_config_label-1796"><span class="linenos">1796</span></a>
</span><span id="XMLState.add_container_config_label-1797"><a href="#XMLState.add_container_config_label-1797"><span class="linenos">1797</span></a>        <span class="n">container_config_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_containerconfig_section</span><span class="p">()</span>
</span><span id="XMLState.add_container_config_label-1798"><a href="#XMLState.add_container_config_label-1798"><span class="linenos">1798</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">container_config_section</span><span class="p">:</span>
</span><span id="XMLState.add_container_config_label-1799"><a href="#XMLState.add_container_config_label-1799"><span class="linenos">1799</span></a>            <span class="n">container_config_section</span> <span class="o">=</span> <span class="n">xml_parse</span><span class="o">.</span><span class="n">containerconfig</span><span class="p">(</span>
</span><span id="XMLState.add_container_config_label-1800"><a href="#XMLState.add_container_config_label-1800"><span class="linenos">1800</span></a>                <span class="n">name</span><span class="o">=</span><span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_container_name</span><span class="p">(),</span>
</span><span id="XMLState.add_container_config_label-1801"><a href="#XMLState.add_container_config_label-1801"><span class="linenos">1801</span></a>                <span class="n">tag</span><span class="o">=</span><span class="n">Defaults</span><span class="o">.</span><span class="n">get_default_container_tag</span><span class="p">()</span>
</span><span id="XMLState.add_container_config_label-1802"><a href="#XMLState.add_container_config_label-1802"><span class="linenos">1802</span></a>            <span class="p">)</span>
</span><span id="XMLState.add_container_config_label-1803"><a href="#XMLState.add_container_config_label-1803"><span class="linenos">1803</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_containerconfig</span><span class="p">([</span><span class="n">container_config_section</span><span class="p">])</span>
</span><span id="XMLState.add_container_config_label-1804"><a href="#XMLState.add_container_config_label-1804"><span class="linenos">1804</span></a>
</span><span id="XMLState.add_container_config_label-1805"><a href="#XMLState.add_container_config_label-1805"><span class="linenos">1805</span></a>        <span class="n">labels</span> <span class="o">=</span> <span class="n">container_config_section</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()</span>
</span><span id="XMLState.add_container_config_label-1806"><a href="#XMLState.add_container_config_label-1806"><span class="linenos">1806</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">labels</span><span class="p">:</span>
</span><span id="XMLState.add_container_config_label-1807"><a href="#XMLState.add_container_config_label-1807"><span class="linenos">1807</span></a>            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">labels</span><span class="p">()]</span>
</span><span id="XMLState.add_container_config_label-1808"><a href="#XMLState.add_container_config_label-1808"><span class="linenos">1808</span></a>
</span><span id="XMLState.add_container_config_label-1809"><a href="#XMLState.add_container_config_label-1809"><span class="linenos">1809</span></a>        <span class="n">label_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.add_container_config_label-1810"><a href="#XMLState.add_container_config_label-1810"><span class="linenos">1810</span></a>        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
</span><span id="XMLState.add_container_config_label-1811"><a href="#XMLState.add_container_config_label-1811"><span class="linenos">1811</span></a>            <span class="n">label_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.add_container_config_label-1812"><a href="#XMLState.add_container_config_label-1812"><span class="linenos">1812</span></a>
</span><span id="XMLState.add_container_config_label-1813"><a href="#XMLState.add_container_config_label-1813"><span class="linenos">1813</span></a>        <span class="k">if</span> <span class="n">label_name</span> <span class="ow">in</span> <span class="n">label_names</span><span class="p">:</span>
</span><span id="XMLState.add_container_config_label-1814"><a href="#XMLState.add_container_config_label-1814"><span class="linenos">1814</span></a>            <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace_label_at</span><span class="p">(</span>
</span><span id="XMLState.add_container_config_label-1815"><a href="#XMLState.add_container_config_label-1815"><span class="linenos">1815</span></a>                <span class="n">label_names</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">label_name</span><span class="p">),</span>
</span><span id="XMLState.add_container_config_label-1816"><a href="#XMLState.add_container_config_label-1816"><span class="linenos">1816</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="XMLState.add_container_config_label-1817"><a href="#XMLState.add_container_config_label-1817"><span class="linenos">1817</span></a>            <span class="p">)</span>
</span><span id="XMLState.add_container_config_label-1818"><a href="#XMLState.add_container_config_label-1818"><span class="linenos">1818</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.add_container_config_label-1819"><a href="#XMLState.add_container_config_label-1819"><span class="linenos">1819</span></a>            <span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_label</span><span class="p">(</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span><span id="XMLState.add_container_config_label-1820"><a href="#XMLState.add_container_config_label-1820"><span class="linenos">1820</span></a>
</span><span id="XMLState.add_container_config_label-1821"><a href="#XMLState.add_container_config_label-1821"><span class="linenos">1821</span></a>        <span class="n">container_config_section</span><span class="o">.</span><span class="n">set_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds a new label in the containerconfig section, if a label with the
same name is already defined in containerconfig it gets overwritten by
this method.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str label_name</strong>:  the string representing the label name</li>
<li><strong>str value</strong>:  the value of the label</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.get_partitions" class="classattr">
                                        <input id="XMLState.get_partitions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_partitions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n"><a href="storage/disk.html#ptable_entry_type">kiwi.storage.disk.ptable_entry_type</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_partitions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_partitions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_partitions-1823"><a href="#XMLState.get_partitions-1823"><span class="linenos">1823</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ptable_entry_type</span><span class="p">]:</span>
</span><span id="XMLState.get_partitions-1824"><a href="#XMLState.get_partitions-1824"><span class="linenos">1824</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_partitions-1825"><a href="#XMLState.get_partitions-1825"><span class="linenos">1825</span></a><span class="sd">        Dictionary of configured partitions.</span>
</span><span id="XMLState.get_partitions-1826"><a href="#XMLState.get_partitions-1826"><span class="linenos">1826</span></a>
</span><span id="XMLState.get_partitions-1827"><a href="#XMLState.get_partitions-1827"><span class="linenos">1827</span></a><span class="sd">        Each entry in the dict references a ptable_entry_type</span>
</span><span id="XMLState.get_partitions-1828"><a href="#XMLState.get_partitions-1828"><span class="linenos">1828</span></a><span class="sd">        Each key in the dict references the name of the</span>
</span><span id="XMLState.get_partitions-1829"><a href="#XMLState.get_partitions-1829"><span class="linenos">1829</span></a><span class="sd">        partition entry as handled by KIWI</span>
</span><span id="XMLState.get_partitions-1830"><a href="#XMLState.get_partitions-1830"><span class="linenos">1830</span></a>
</span><span id="XMLState.get_partitions-1831"><a href="#XMLState.get_partitions-1831"><span class="linenos">1831</span></a><span class="sd">        :return:</span>
</span><span id="XMLState.get_partitions-1832"><a href="#XMLState.get_partitions-1832"><span class="linenos">1832</span></a><span class="sd">            Contains dict of ptable_entry_type tuples</span>
</span><span id="XMLState.get_partitions-1833"><a href="#XMLState.get_partitions-1833"><span class="linenos">1833</span></a>
</span><span id="XMLState.get_partitions-1834"><a href="#XMLState.get_partitions-1834"><span class="linenos">1834</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState.get_partitions-1835"><a href="#XMLState.get_partitions-1835"><span class="linenos">1835</span></a>
</span><span id="XMLState.get_partitions-1836"><a href="#XMLState.get_partitions-1836"><span class="linenos">1836</span></a><span class="sd">                {</span>
</span><span id="XMLState.get_partitions-1837"><a href="#XMLState.get_partitions-1837"><span class="linenos">1837</span></a><span class="sd">                    &#39;NAME&#39;: ptable_entry_type(</span>
</span><span id="XMLState.get_partitions-1838"><a href="#XMLState.get_partitions-1838"><span class="linenos">1838</span></a><span class="sd">                        mbsize=int,</span>
</span><span id="XMLState.get_partitions-1839"><a href="#XMLState.get_partitions-1839"><span class="linenos">1839</span></a><span class="sd">                        clone=int,</span>
</span><span id="XMLState.get_partitions-1840"><a href="#XMLState.get_partitions-1840"><span class="linenos">1840</span></a><span class="sd">                        partition_name=str,</span>
</span><span id="XMLState.get_partitions-1841"><a href="#XMLState.get_partitions-1841"><span class="linenos">1841</span></a><span class="sd">                        partition_type=str,</span>
</span><span id="XMLState.get_partitions-1842"><a href="#XMLState.get_partitions-1842"><span class="linenos">1842</span></a><span class="sd">                        partition_id=Optional[int],</span>
</span><span id="XMLState.get_partitions-1843"><a href="#XMLState.get_partitions-1843"><span class="linenos">1843</span></a><span class="sd">                        mountpoint=str,</span>
</span><span id="XMLState.get_partitions-1844"><a href="#XMLState.get_partitions-1844"><span class="linenos">1844</span></a><span class="sd">                        filesystem=str,</span>
</span><span id="XMLState.get_partitions-1845"><a href="#XMLState.get_partitions-1845"><span class="linenos">1845</span></a><span class="sd">                        label=str</span>
</span><span id="XMLState.get_partitions-1846"><a href="#XMLState.get_partitions-1846"><span class="linenos">1846</span></a><span class="sd">                    )</span>
</span><span id="XMLState.get_partitions-1847"><a href="#XMLState.get_partitions-1847"><span class="linenos">1847</span></a><span class="sd">                }</span>
</span><span id="XMLState.get_partitions-1848"><a href="#XMLState.get_partitions-1848"><span class="linenos">1848</span></a>
</span><span id="XMLState.get_partitions-1849"><a href="#XMLState.get_partitions-1849"><span class="linenos">1849</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_partitions-1850"><a href="#XMLState.get_partitions-1850"><span class="linenos">1850</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_partitions-1851"><a href="#XMLState.get_partitions-1851"><span class="linenos">1851</span></a>        <span class="n">partitions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ptable_entry_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState.get_partitions-1852"><a href="#XMLState.get_partitions-1852"><span class="linenos">1852</span></a>        <span class="n">partitions_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_partitions_section</span><span class="p">()</span>
</span><span id="XMLState.get_partitions-1853"><a href="#XMLState.get_partitions-1853"><span class="linenos">1853</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">partitions_section</span><span class="p">:</span>
</span><span id="XMLState.get_partitions-1854"><a href="#XMLState.get_partitions-1854"><span class="linenos">1854</span></a>            <span class="k">return</span> <span class="n">partitions</span>
</span><span id="XMLState.get_partitions-1855"><a href="#XMLState.get_partitions-1855"><span class="linenos">1855</span></a>        <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitions_section</span><span class="o">.</span><span class="n">get_partition</span><span class="p">():</span>
</span><span id="XMLState.get_partitions-1856"><a href="#XMLState.get_partitions-1856"><span class="linenos">1856</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.get_partitions-1857"><a href="#XMLState.get_partitions-1857"><span class="linenos">1857</span></a>            <span class="n">partition_name</span> <span class="o">=</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_partition_name</span><span class="p">()</span> <span class="ow">or</span> <span class="sa">f</span><span class="s1">&#39;p.lx</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="XMLState.get_partitions-1858"><a href="#XMLState.get_partitions-1858"><span class="linenos">1858</span></a>            <span class="n">partitions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptable_entry_type</span><span class="p">(</span>
</span><span id="XMLState.get_partitions-1859"><a href="#XMLState.get_partitions-1859"><span class="linenos">1859</span></a>                <span class="n">mbsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">partition</span><span class="o">.</span><span class="n">get_size</span><span class="p">()),</span>
</span><span id="XMLState.get_partitions-1860"><a href="#XMLState.get_partitions-1860"><span class="linenos">1860</span></a>                <span class="n">clone</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">partition</span><span class="o">.</span><span class="n">get_clone</span><span class="p">())</span> <span class="k">if</span> <span class="n">partition</span><span class="o">.</span><span class="n">get_clone</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="XMLState.get_partitions-1861"><a href="#XMLState.get_partitions-1861"><span class="linenos">1861</span></a>                <span class="n">partition_name</span><span class="o">=</span><span class="n">partition_name</span><span class="p">,</span>
</span><span id="XMLState.get_partitions-1862"><a href="#XMLState.get_partitions-1862"><span class="linenos">1862</span></a>                <span class="n">partition_type</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_partition_type</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;t.linux&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_partitions-1863"><a href="#XMLState.get_partitions-1863"><span class="linenos">1863</span></a>                <span class="n">partition_id</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_part_id</span><span class="p">(),</span>
</span><span id="XMLState.get_partitions-1864"><a href="#XMLState.get_partitions-1864"><span class="linenos">1864</span></a>                <span class="n">mountpoint</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_mountpoint</span><span class="p">(),</span>
</span><span id="XMLState.get_partitions-1865"><a href="#XMLState.get_partitions-1865"><span class="linenos">1865</span></a>                <span class="n">filesystem</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">(),</span>
</span><span id="XMLState.get_partitions-1866"><a href="#XMLState.get_partitions-1866"><span class="linenos">1866</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">partition</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_partitions-1867"><a href="#XMLState.get_partitions-1867"><span class="linenos">1867</span></a>            <span class="p">)</span>
</span><span id="XMLState.get_partitions-1868"><a href="#XMLState.get_partitions-1868"><span class="linenos">1868</span></a>        <span class="k">return</span> <span class="n">partitions</span>
</span></pre></div>


            <div class="docstring"><p>Dictionary of configured partitions.</p>

<p>Each entry in the dict references a ptable_entry_type
Each key in the dict references the name of the
partition entry as handled by KIWI</p>

<h6 id="returns">Returns</h6>

<blockquote>
<pre><code>Contains dict of ptable_entry_type tuples

.. code:: python

    {
        'NAME': ptable_entry_type(
            mbsize=int,
            clone=int,
            partition_name=str,
            partition_type=str,
            partition_id=Optional[int],
            mountpoint=str,
            filesystem=str,
            label=str
        )
    }
</code></pre>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_host_key_certificates" class="classattr">
                                        <input id="XMLState.get_host_key_certificates-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_host_key_certificates</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]],</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_host_key_certificates-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_host_key_certificates"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_host_key_certificates-1870"><a href="#XMLState.get_host_key_certificates-1870"><span class="linenos">1870</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_host_key_certificates</span><span class="p">(</span>
</span><span id="XMLState.get_host_key_certificates-1871"><a href="#XMLState.get_host_key_certificates-1871"><span class="linenos">1871</span></a>        <span class="bp">self</span>
</span><span id="XMLState.get_host_key_certificates-1872"><a href="#XMLState.get_host_key_certificates-1872"><span class="linenos">1872</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]],</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]:</span>
</span><span id="XMLState.get_host_key_certificates-1873"><a href="#XMLState.get_host_key_certificates-1873"><span class="linenos">1873</span></a>        <span class="n">cc_result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_host_key_certificates-1874"><a href="#XMLState.get_host_key_certificates-1874"><span class="linenos">1874</span></a>        <span class="n">cc_certificates</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState.get_host_key_certificates-1875"><a href="#XMLState.get_host_key_certificates-1875"><span class="linenos">1875</span></a>        <span class="n">securelinux_list</span> <span class="o">=</span> \
</span><span id="XMLState.get_host_key_certificates-1876"><a href="#XMLState.get_host_key_certificates-1876"><span class="linenos">1876</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_securelinux_section</span><span class="p">()</span>
</span><span id="XMLState.get_host_key_certificates-1877"><a href="#XMLState.get_host_key_certificates-1877"><span class="linenos">1877</span></a>        <span class="k">for</span> <span class="n">securelinux</span> <span class="ow">in</span> <span class="n">securelinux_list</span><span class="p">:</span>
</span><span id="XMLState.get_host_key_certificates-1878"><a href="#XMLState.get_host_key_certificates-1878"><span class="linenos">1878</span></a>            <span class="n">cc_certificates</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="XMLState.get_host_key_certificates-1879"><a href="#XMLState.get_host_key_certificates-1879"><span class="linenos">1879</span></a>                <span class="s1">&#39;hkd_cert&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="XMLState.get_host_key_certificates-1880"><a href="#XMLState.get_host_key_certificates-1880"><span class="linenos">1880</span></a>                <span class="s1">&#39;hkd_revocation_list&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="XMLState.get_host_key_certificates-1881"><a href="#XMLState.get_host_key_certificates-1881"><span class="linenos">1881</span></a>                <span class="s1">&#39;hkd_ca_cert&#39;</span><span class="p">:</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_ca_cert</span><span class="p">(),</span>
</span><span id="XMLState.get_host_key_certificates-1882"><a href="#XMLState.get_host_key_certificates-1882"><span class="linenos">1882</span></a>                <span class="s1">&#39;hkd_sign_cert&#39;</span><span class="p">:</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_sign_cert</span><span class="p">()</span>
</span><span id="XMLState.get_host_key_certificates-1883"><a href="#XMLState.get_host_key_certificates-1883"><span class="linenos">1883</span></a>            <span class="p">}</span>
</span><span id="XMLState.get_host_key_certificates-1884"><a href="#XMLState.get_host_key_certificates-1884"><span class="linenos">1884</span></a>            <span class="k">for</span> <span class="n">hkd_cert</span> <span class="ow">in</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_cert</span><span class="p">():</span>
</span><span id="XMLState.get_host_key_certificates-1885"><a href="#XMLState.get_host_key_certificates-1885"><span class="linenos">1885</span></a>                <span class="n">cc_certificates</span><span class="p">[</span><span class="s1">&#39;hkd_cert&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hkd_cert</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_host_key_certificates-1886"><a href="#XMLState.get_host_key_certificates-1886"><span class="linenos">1886</span></a>            <span class="k">for</span> <span class="n">hkd_revocation_list</span> <span class="ow">in</span> <span class="n">securelinux</span><span class="o">.</span><span class="n">get_hkd_revocation_list</span><span class="p">():</span>
</span><span id="XMLState.get_host_key_certificates-1887"><a href="#XMLState.get_host_key_certificates-1887"><span class="linenos">1887</span></a>                <span class="n">cc_certificates</span><span class="p">[</span><span class="s1">&#39;hkd_revocation_list&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_host_key_certificates-1888"><a href="#XMLState.get_host_key_certificates-1888"><span class="linenos">1888</span></a>                    <span class="n">hkd_revocation_list</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.get_host_key_certificates-1889"><a href="#XMLState.get_host_key_certificates-1889"><span class="linenos">1889</span></a>                <span class="p">)</span>
</span><span id="XMLState.get_host_key_certificates-1890"><a href="#XMLState.get_host_key_certificates-1890"><span class="linenos">1890</span></a>            <span class="n">cc_result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cc_certificates</span><span class="p">)</span>
</span><span id="XMLState.get_host_key_certificates-1891"><a href="#XMLState.get_host_key_certificates-1891"><span class="linenos">1891</span></a>        <span class="k">return</span> <span class="n">cc_result</span>
</span></pre></div>


    

                            </div>
                            <div id="XMLState.get_containers" class="classattr">
                                        <input id="XMLState.get_containers-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_containers</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#ContainerT">ContainerT</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_containers-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_containers"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_containers-1893"><a href="#XMLState.get_containers-1893"><span class="linenos">1893</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_containers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ContainerT</span><span class="p">]:</span>
</span><span id="XMLState.get_containers-1894"><a href="#XMLState.get_containers-1894"><span class="linenos">1894</span></a>        <span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_containers-1895"><a href="#XMLState.get_containers-1895"><span class="linenos">1895</span></a>
</span><span id="XMLState.get_containers-1896"><a href="#XMLState.get_containers-1896"><span class="linenos">1896</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1897"><a href="#XMLState.get_containers-1897"><span class="linenos">1897</span></a>            <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1898"><a href="#XMLState.get_containers-1898"><span class="linenos">1898</span></a>            <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1899"><a href="#XMLState.get_containers-1899"><span class="linenos">1899</span></a>            <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1900"><a href="#XMLState.get_containers-1900"><span class="linenos">1900</span></a>            <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_containers-1901"><a href="#XMLState.get_containers-1901"><span class="linenos">1901</span></a>        <span class="p">):</span>
</span><span id="XMLState.get_containers-1902"><a href="#XMLState.get_containers-1902"><span class="linenos">1902</span></a>            <span class="k">pass</span>  <span class="c1"># pragma: nocover</span>
</span><span id="XMLState.get_containers-1903"><a href="#XMLState.get_containers-1903"><span class="linenos">1903</span></a>        <span class="k">for</span> <span class="n">containers_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_containers_sections</span><span class="p">():</span>
</span><span id="XMLState.get_containers-1904"><a href="#XMLState.get_containers-1904"><span class="linenos">1904</span></a>            <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">containers_section</span><span class="o">.</span><span class="n">get_container</span><span class="p">():</span>
</span><span id="XMLState.get_containers-1905"><a href="#XMLState.get_containers-1905"><span class="linenos">1905</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container_matches_host_architecture</span><span class="p">(</span><span class="n">container</span><span class="p">):</span>
</span><span id="XMLState.get_containers-1906"><a href="#XMLState.get_containers-1906"><span class="linenos">1906</span></a>                    <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="XMLState.get_containers-1907"><a href="#XMLState.get_containers-1907"><span class="linenos">1907</span></a>                    <span class="n">load_command</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_containers-1908"><a href="#XMLState.get_containers-1908"><span class="linenos">1908</span></a>                    <span class="n">container_tag</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_tag</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;latest&#39;</span>
</span><span id="XMLState.get_containers-1909"><a href="#XMLState.get_containers-1909"><span class="linenos">1909</span></a>                    <span class="n">container_path</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_containers-1910"><a href="#XMLState.get_containers-1910"><span class="linenos">1910</span></a>                    <span class="n">container_endpoint</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1911"><a href="#XMLState.get_containers-1911"><span class="linenos">1911</span></a>                        <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">/</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1912"><a href="#XMLState.get_containers-1912"><span class="linenos">1912</span></a>                            <span class="n">containers_section</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="n">container_path</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1913"><a href="#XMLState.get_containers-1913"><span class="linenos">1913</span></a>                            <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">container_tag</span>
</span><span id="XMLState.get_containers-1914"><a href="#XMLState.get_containers-1914"><span class="linenos">1914</span></a>                        <span class="p">)</span>
</span><span id="XMLState.get_containers-1915"><a href="#XMLState.get_containers-1915"><span class="linenos">1915</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_containers-1916"><a href="#XMLState.get_containers-1916"><span class="linenos">1916</span></a>                    <span class="n">container_file_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">_</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1917"><a href="#XMLState.get_containers-1917"><span class="linenos">1917</span></a>                        <span class="n">defaults</span><span class="o">.</span><span class="n">LOCAL_CONTAINERS</span><span class="p">,</span> <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">container_tag</span>
</span><span id="XMLState.get_containers-1918"><a href="#XMLState.get_containers-1918"><span class="linenos">1918</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_containers-1919"><a href="#XMLState.get_containers-1919"><span class="linenos">1919</span></a>                    <span class="n">container_backend</span> <span class="o">=</span> <span class="n">containers_section</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_containers-1920"><a href="#XMLState.get_containers-1920"><span class="linenos">1920</span></a>                    <span class="k">if</span> <span class="n">container_backend</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;podman&#39;</span><span class="p">,</span> <span class="s1">&#39;docker&#39;</span><span class="p">,</span> <span class="s1">&#39;container-snap&#39;</span><span class="p">]:</span>
</span><span id="XMLState.get_containers-1921"><a href="#XMLState.get_containers-1921"><span class="linenos">1921</span></a>                        <span class="k">if</span> <span class="n">Defaults</span><span class="o">.</span><span class="n">is_buildservice_worker</span><span class="p">():</span>
</span><span id="XMLState.get_containers-1922"><a href="#XMLState.get_containers-1922"><span class="linenos">1922</span></a>                            <span class="n">container_uri</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1923"><a href="#XMLState.get_containers-1923"><span class="linenos">1923</span></a>                                <span class="s1">&#39;obsrepositories:/</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1924"><a href="#XMLState.get_containers-1924"><span class="linenos">1924</span></a>                                    <span class="n">container_endpoint</span>
</span><span id="XMLState.get_containers-1925"><a href="#XMLState.get_containers-1925"><span class="linenos">1925</span></a>                                <span class="p">),</span> <span class="s1">&#39;container&#39;</span>
</span><span id="XMLState.get_containers-1926"><a href="#XMLState.get_containers-1926"><span class="linenos">1926</span></a>                            <span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="XMLState.get_containers-1927"><a href="#XMLState.get_containers-1927"><span class="linenos">1927</span></a>
</span><span id="XMLState.get_containers-1928"><a href="#XMLState.get_containers-1928"><span class="linenos">1928</span></a>                            <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1929"><a href="#XMLState.get_containers-1929"><span class="linenos">1929</span></a>                                <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1930"><a href="#XMLState.get_containers-1930"><span class="linenos">1930</span></a>                                <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_uri</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1931"><a href="#XMLState.get_containers-1931"><span class="linenos">1931</span></a>                                <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1932"><a href="#XMLState.get_containers-1932"><span class="linenos">1932</span></a>                                <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_endpoint</span>
</span><span id="XMLState.get_containers-1933"><a href="#XMLState.get_containers-1933"><span class="linenos">1933</span></a>                            <span class="p">):</span>
</span><span id="XMLState.get_containers-1934"><a href="#XMLState.get_containers-1934"><span class="linenos">1934</span></a>                                <span class="k">def</span><span class="w"> </span><span class="nf">perform</span><span class="p">():</span>
</span><span id="XMLState.get_containers-1935"><a href="#XMLState.get_containers-1935"><span class="linenos">1935</span></a>                                    <span class="n">Command</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1936"><a href="#XMLState.get_containers-1936"><span class="linenos">1936</span></a>                                        <span class="p">[</span>
</span><span id="XMLState.get_containers-1937"><a href="#XMLState.get_containers-1937"><span class="linenos">1937</span></a>                                            <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.ociarchive&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1938"><a href="#XMLState.get_containers-1938"><span class="linenos">1938</span></a>                                                <span class="n">container_uri</span>
</span><span id="XMLState.get_containers-1939"><a href="#XMLState.get_containers-1939"><span class="linenos">1939</span></a>                                            <span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1940"><a href="#XMLState.get_containers-1940"><span class="linenos">1940</span></a>                                                <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1941"><a href="#XMLState.get_containers-1941"><span class="linenos">1941</span></a>                                                    <span class="n">root_dir</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1942"><a href="#XMLState.get_containers-1942"><span class="linenos">1942</span></a>                                                    <span class="n">container_file_name</span>
</span><span id="XMLState.get_containers-1943"><a href="#XMLState.get_containers-1943"><span class="linenos">1943</span></a>                                                <span class="p">)</span>
</span><span id="XMLState.get_containers-1944"><a href="#XMLState.get_containers-1944"><span class="linenos">1944</span></a>                                            <span class="p">)</span>
</span><span id="XMLState.get_containers-1945"><a href="#XMLState.get_containers-1945"><span class="linenos">1945</span></a>                                        <span class="p">]</span>
</span><span id="XMLState.get_containers-1946"><a href="#XMLState.get_containers-1946"><span class="linenos">1946</span></a>                                    <span class="p">)</span>
</span><span id="XMLState.get_containers-1947"><a href="#XMLState.get_containers-1947"><span class="linenos">1947</span></a>                                <span class="n">perform</span><span class="p">()</span>
</span><span id="XMLState.get_containers-1948"><a href="#XMLState.get_containers-1948"><span class="linenos">1948</span></a>                            <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="XMLState.get_containers-1949"><a href="#XMLState.get_containers-1949"><span class="linenos">1949</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_containers-1950"><a href="#XMLState.get_containers-1950"><span class="linenos">1950</span></a>
</span><span id="XMLState.get_containers-1951"><a href="#XMLState.get_containers-1951"><span class="linenos">1951</span></a>                            <span class="k">def</span><span class="w"> </span><span class="nf">build_fetch_command</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1952"><a href="#XMLState.get_containers-1952"><span class="linenos">1952</span></a>                                <span class="n">root_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1953"><a href="#XMLState.get_containers-1953"><span class="linenos">1953</span></a>                                <span class="n">container_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1954"><a href="#XMLState.get_containers-1954"><span class="linenos">1954</span></a>                                <span class="n">container_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1955"><a href="#XMLState.get_containers-1955"><span class="linenos">1955</span></a>                                <span class="n">container_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">container_endpoint</span>
</span><span id="XMLState.get_containers-1956"><a href="#XMLState.get_containers-1956"><span class="linenos">1956</span></a>                            <span class="p">):</span>
</span><span id="XMLState.get_containers-1957"><a href="#XMLState.get_containers-1957"><span class="linenos">1957</span></a>                                <span class="k">def</span><span class="w"> </span><span class="nf">perform</span><span class="p">():</span>
</span><span id="XMLState.get_containers-1958"><a href="#XMLState.get_containers-1958"><span class="linenos">1958</span></a>                                    <span class="n">Command</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1959"><a href="#XMLState.get_containers-1959"><span class="linenos">1959</span></a>                                        <span class="p">[</span>
</span><span id="XMLState.get_containers-1960"><a href="#XMLState.get_containers-1960"><span class="linenos">1960</span></a>                                            <span class="s1">&#39;chroot&#39;</span><span class="p">,</span> <span class="n">root_dir</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1961"><a href="#XMLState.get_containers-1961"><span class="linenos">1961</span></a>                                            <span class="s1">&#39;/usr/bin/skopeo&#39;</span><span class="p">,</span> <span class="s1">&#39;copy&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1962"><a href="#XMLState.get_containers-1962"><span class="linenos">1962</span></a>                                            <span class="s1">&#39;docker://</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1963"><a href="#XMLState.get_containers-1963"><span class="linenos">1963</span></a>                                                <span class="n">container_endpoint</span>
</span><span id="XMLState.get_containers-1964"><a href="#XMLState.get_containers-1964"><span class="linenos">1964</span></a>                                            <span class="p">),</span>
</span><span id="XMLState.get_containers-1965"><a href="#XMLState.get_containers-1965"><span class="linenos">1965</span></a>                                            <span class="s1">&#39;oci-archive:</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1966"><a href="#XMLState.get_containers-1966"><span class="linenos">1966</span></a>                                                <span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1967"><a href="#XMLState.get_containers-1967"><span class="linenos">1967</span></a>                                                <span class="n">container_endpoint</span>
</span><span id="XMLState.get_containers-1968"><a href="#XMLState.get_containers-1968"><span class="linenos">1968</span></a>                                            <span class="p">)</span>
</span><span id="XMLState.get_containers-1969"><a href="#XMLState.get_containers-1969"><span class="linenos">1969</span></a>                                        <span class="p">]</span>
</span><span id="XMLState.get_containers-1970"><a href="#XMLState.get_containers-1970"><span class="linenos">1970</span></a>                                    <span class="p">)</span>
</span><span id="XMLState.get_containers-1971"><a href="#XMLState.get_containers-1971"><span class="linenos">1971</span></a>                                <span class="n">perform</span><span class="p">()</span>
</span><span id="XMLState.get_containers-1972"><a href="#XMLState.get_containers-1972"><span class="linenos">1972</span></a>                            <span class="n">fetch_command</span> <span class="o">=</span> <span class="n">build_fetch_command</span>
</span><span id="XMLState.get_containers-1973"><a href="#XMLState.get_containers-1973"><span class="linenos">1973</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">container</span><span class="o">.</span><span class="n">get_fetch_only</span><span class="p">():</span>
</span><span id="XMLState.get_containers-1974"><a href="#XMLState.get_containers-1974"><span class="linenos">1974</span></a>                            <span class="n">load_command</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState.get_containers-1975"><a href="#XMLState.get_containers-1975"><span class="linenos">1975</span></a>                                <span class="sa">f</span><span class="s1">&#39;/usr/bin/</span><span class="si">{</span><span class="n">container_backend</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1976"><a href="#XMLState.get_containers-1976"><span class="linenos">1976</span></a>                                <span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="n">container_file_name</span>
</span><span id="XMLState.get_containers-1977"><a href="#XMLState.get_containers-1977"><span class="linenos">1977</span></a>                            <span class="p">]</span>
</span><span id="XMLState.get_containers-1978"><a href="#XMLState.get_containers-1978"><span class="linenos">1978</span></a>                    <span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1979"><a href="#XMLState.get_containers-1979"><span class="linenos">1979</span></a>                        <span class="n">ContainerT</span><span class="p">(</span>
</span><span id="XMLState.get_containers-1980"><a href="#XMLState.get_containers-1980"><span class="linenos">1980</span></a>                            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">container_tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1981"><a href="#XMLState.get_containers-1981"><span class="linenos">1981</span></a>                            <span class="n">backend</span><span class="o">=</span><span class="n">container_backend</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1982"><a href="#XMLState.get_containers-1982"><span class="linenos">1982</span></a>                            <span class="n">container_file</span><span class="o">=</span><span class="n">container_file_name</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1983"><a href="#XMLState.get_containers-1983"><span class="linenos">1983</span></a>                            <span class="n">fetch_only</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">get_fetch_only</span><span class="p">()),</span>
</span><span id="XMLState.get_containers-1984"><a href="#XMLState.get_containers-1984"><span class="linenos">1984</span></a>                            <span class="n">fetch_command</span><span class="o">=</span><span class="n">fetch_command</span><span class="p">,</span>
</span><span id="XMLState.get_containers-1985"><a href="#XMLState.get_containers-1985"><span class="linenos">1985</span></a>                            <span class="n">load_command</span><span class="o">=</span><span class="n">load_command</span>
</span><span id="XMLState.get_containers-1986"><a href="#XMLState.get_containers-1986"><span class="linenos">1986</span></a>                        <span class="p">)</span>
</span><span id="XMLState.get_containers-1987"><a href="#XMLState.get_containers-1987"><span class="linenos">1987</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_containers-1988"><a href="#XMLState.get_containers-1988"><span class="linenos">1988</span></a>        <span class="k">return</span> <span class="n">containers</span>
</span></pre></div>


    

                            </div>
                            <div id="XMLState.get_volumes" class="classattr">
                                        <input id="XMLState.get_volumes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_volumes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#volume_type">volume_type</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_volumes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_volumes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_volumes-1990"><a href="#XMLState.get_volumes-1990"><span class="linenos">1990</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">volume_type</span><span class="p">]:</span>
</span><span id="XMLState.get_volumes-1991"><a href="#XMLState.get_volumes-1991"><span class="linenos">1991</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_volumes-1992"><a href="#XMLState.get_volumes-1992"><span class="linenos">1992</span></a><span class="sd">        List of configured systemdisk volumes.</span>
</span><span id="XMLState.get_volumes-1993"><a href="#XMLState.get_volumes-1993"><span class="linenos">1993</span></a>
</span><span id="XMLState.get_volumes-1994"><a href="#XMLState.get_volumes-1994"><span class="linenos">1994</span></a><span class="sd">        Each entry in the list is a tuple with the following information</span>
</span><span id="XMLState.get_volumes-1995"><a href="#XMLState.get_volumes-1995"><span class="linenos">1995</span></a>
</span><span id="XMLState.get_volumes-1996"><a href="#XMLState.get_volumes-1996"><span class="linenos">1996</span></a><span class="sd">        * name: name of the volume</span>
</span><span id="XMLState.get_volumes-1997"><a href="#XMLState.get_volumes-1997"><span class="linenos">1997</span></a><span class="sd">        * size: size of the volume</span>
</span><span id="XMLState.get_volumes-1998"><a href="#XMLState.get_volumes-1998"><span class="linenos">1998</span></a><span class="sd">        * realpath: system path to lookup volume data. If no mountpoint</span>
</span><span id="XMLState.get_volumes-1999"><a href="#XMLState.get_volumes-1999"><span class="linenos">1999</span></a><span class="sd">          is set the volume name is used as data path.</span>
</span><span id="XMLState.get_volumes-2000"><a href="#XMLState.get_volumes-2000"><span class="linenos">2000</span></a><span class="sd">        * mountpoint: volume mount point and volume data path</span>
</span><span id="XMLState.get_volumes-2001"><a href="#XMLState.get_volumes-2001"><span class="linenos">2001</span></a><span class="sd">        * fullsize: takes all space True|False</span>
</span><span id="XMLState.get_volumes-2002"><a href="#XMLState.get_volumes-2002"><span class="linenos">2002</span></a><span class="sd">        * attributes: list of volume attributes handled via chattr</span>
</span><span id="XMLState.get_volumes-2003"><a href="#XMLState.get_volumes-2003"><span class="linenos">2003</span></a>
</span><span id="XMLState.get_volumes-2004"><a href="#XMLState.get_volumes-2004"><span class="linenos">2004</span></a><span class="sd">        :return:</span>
</span><span id="XMLState.get_volumes-2005"><a href="#XMLState.get_volumes-2005"><span class="linenos">2005</span></a><span class="sd">            Contains list of volume_type tuples</span>
</span><span id="XMLState.get_volumes-2006"><a href="#XMLState.get_volumes-2006"><span class="linenos">2006</span></a>
</span><span id="XMLState.get_volumes-2007"><a href="#XMLState.get_volumes-2007"><span class="linenos">2007</span></a><span class="sd">            .. code:: python</span>
</span><span id="XMLState.get_volumes-2008"><a href="#XMLState.get_volumes-2008"><span class="linenos">2008</span></a>
</span><span id="XMLState.get_volumes-2009"><a href="#XMLState.get_volumes-2009"><span class="linenos">2009</span></a><span class="sd">                [</span>
</span><span id="XMLState.get_volumes-2010"><a href="#XMLState.get_volumes-2010"><span class="linenos">2010</span></a><span class="sd">                    volume_type(</span>
</span><span id="XMLState.get_volumes-2011"><a href="#XMLState.get_volumes-2011"><span class="linenos">2011</span></a><span class="sd">                        name=volume_name,</span>
</span><span id="XMLState.get_volumes-2012"><a href="#XMLState.get_volumes-2012"><span class="linenos">2012</span></a><span class="sd">                        parent=volume_parent,</span>
</span><span id="XMLState.get_volumes-2013"><a href="#XMLState.get_volumes-2013"><span class="linenos">2013</span></a><span class="sd">                        size=volume_size,</span>
</span><span id="XMLState.get_volumes-2014"><a href="#XMLState.get_volumes-2014"><span class="linenos">2014</span></a><span class="sd">                        realpath=path,</span>
</span><span id="XMLState.get_volumes-2015"><a href="#XMLState.get_volumes-2015"><span class="linenos">2015</span></a><span class="sd">                        mountpoint=path,</span>
</span><span id="XMLState.get_volumes-2016"><a href="#XMLState.get_volumes-2016"><span class="linenos">2016</span></a><span class="sd">                        fullsize=True,</span>
</span><span id="XMLState.get_volumes-2017"><a href="#XMLState.get_volumes-2017"><span class="linenos">2017</span></a><span class="sd">                        label=volume_label,</span>
</span><span id="XMLState.get_volumes-2018"><a href="#XMLState.get_volumes-2018"><span class="linenos">2018</span></a><span class="sd">                        attributes=[&#39;no-copy-on-write&#39;],</span>
</span><span id="XMLState.get_volumes-2019"><a href="#XMLState.get_volumes-2019"><span class="linenos">2019</span></a><span class="sd">                        is_root_volume=True|False</span>
</span><span id="XMLState.get_volumes-2020"><a href="#XMLState.get_volumes-2020"><span class="linenos">2020</span></a><span class="sd">                    )</span>
</span><span id="XMLState.get_volumes-2021"><a href="#XMLState.get_volumes-2021"><span class="linenos">2021</span></a><span class="sd">                ]</span>
</span><span id="XMLState.get_volumes-2022"><a href="#XMLState.get_volumes-2022"><span class="linenos">2022</span></a>
</span><span id="XMLState.get_volumes-2023"><a href="#XMLState.get_volumes-2023"><span class="linenos">2023</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_volumes-2024"><a href="#XMLState.get_volumes-2024"><span class="linenos">2024</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_volumes-2025"><a href="#XMLState.get_volumes-2025"><span class="linenos">2025</span></a>        <span class="n">volume_type_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">volume_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_volumes-2026"><a href="#XMLState.get_volumes-2026"><span class="linenos">2026</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2027"><a href="#XMLState.get_volumes-2027"><span class="linenos">2027</span></a>        <span class="n">selected_filesystem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2028"><a href="#XMLState.get_volumes-2028"><span class="linenos">2028</span></a>        <span class="n">swap_mbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oemconfig_swap_mbytes</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2029"><a href="#XMLState.get_volumes-2029"><span class="linenos">2029</span></a>        <span class="n">swap_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oemconfig_swap_name</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2030"><a href="#XMLState.get_volumes-2030"><span class="linenos">2030</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2031"><a href="#XMLState.get_volumes-2031"><span class="linenos">2031</span></a>            <span class="k">return</span> <span class="n">volume_type_list</span>
</span><span id="XMLState.get_volumes-2032"><a href="#XMLState.get_volumes-2032"><span class="linenos">2032</span></a>        <span class="n">volumes</span> <span class="o">=</span> <span class="n">systemdisk_section</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2033"><a href="#XMLState.get_volumes-2033"><span class="linenos">2033</span></a>        <span class="n">have_root_volume_setup</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.get_volumes-2034"><a href="#XMLState.get_volumes-2034"><span class="linenos">2034</span></a>        <span class="n">have_full_size_volume</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.get_volumes-2035"><a href="#XMLState.get_volumes-2035"><span class="linenos">2035</span></a>        <span class="k">if</span> <span class="n">volumes</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2036"><a href="#XMLState.get_volumes-2036"><span class="linenos">2036</span></a>            <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">volumes</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2037"><a href="#XMLState.get_volumes-2037"><span class="linenos">2037</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_matches_host_architecture</span><span class="p">(</span><span class="n">volume</span><span class="p">):</span>
</span><span id="XMLState.get_volumes-2038"><a href="#XMLState.get_volumes-2038"><span class="linenos">2038</span></a>                    <span class="k">continue</span>
</span><span id="XMLState.get_volumes-2039"><a href="#XMLState.get_volumes-2039"><span class="linenos">2039</span></a>                <span class="c1"># volume setup for a full qualified volume with name and</span>
</span><span id="XMLState.get_volumes-2040"><a href="#XMLState.get_volumes-2040"><span class="linenos">2040</span></a>                <span class="c1"># mountpoint information. See below for exceptions</span>
</span><span id="XMLState.get_volumes-2041"><a href="#XMLState.get_volumes-2041"><span class="linenos">2041</span></a>                <span class="n">name</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2042"><a href="#XMLState.get_volumes-2042"><span class="linenos">2042</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_volumes-2043"><a href="#XMLState.get_volumes-2043"><span class="linenos">2043</span></a>                <span class="n">mountpoint</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_mountpoint</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2044"><a href="#XMLState.get_volumes-2044"><span class="linenos">2044</span></a>                <span class="n">realpath</span> <span class="o">=</span> <span class="n">mountpoint</span>
</span><span id="XMLState.get_volumes-2045"><a href="#XMLState.get_volumes-2045"><span class="linenos">2045</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2046"><a href="#XMLState.get_volumes-2046"><span class="linenos">2046</span></a>                <span class="n">freespace</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_freespace</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2047"><a href="#XMLState.get_volumes-2047"><span class="linenos">2047</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.get_volumes-2048"><a href="#XMLState.get_volumes-2048"><span class="linenos">2048</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2049"><a href="#XMLState.get_volumes-2049"><span class="linenos">2049</span></a>                <span class="n">attributes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_volumes-2050"><a href="#XMLState.get_volumes-2050"><span class="linenos">2050</span></a>                <span class="n">is_root_volume</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.get_volumes-2051"><a href="#XMLState.get_volumes-2051"><span class="linenos">2051</span></a>
</span><span id="XMLState.get_volumes-2052"><a href="#XMLState.get_volumes-2052"><span class="linenos">2052</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_quota</span><span class="p">():</span>
</span><span id="XMLState.get_volumes-2053"><a href="#XMLState.get_volumes-2053"><span class="linenos">2053</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;quota=</span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get_quota</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2054"><a href="#XMLState.get_volumes-2054"><span class="linenos">2054</span></a>
</span><span id="XMLState.get_volumes-2055"><a href="#XMLState.get_volumes-2055"><span class="linenos">2055</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_copy_on_write</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2056"><a href="#XMLState.get_volumes-2056"><span class="linenos">2056</span></a>                    <span class="c1"># by default copy-on-write is switched on for any</span>
</span><span id="XMLState.get_volumes-2057"><a href="#XMLState.get_volumes-2057"><span class="linenos">2057</span></a>                    <span class="c1"># filesystem. Thus only if no copy on write is requested</span>
</span><span id="XMLState.get_volumes-2058"><a href="#XMLState.get_volumes-2058"><span class="linenos">2058</span></a>                    <span class="c1"># the attribute is handled</span>
</span><span id="XMLState.get_volumes-2059"><a href="#XMLState.get_volumes-2059"><span class="linenos">2059</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;no-copy-on-write&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2060"><a href="#XMLState.get_volumes-2060"><span class="linenos">2060</span></a>
</span><span id="XMLState.get_volumes-2061"><a href="#XMLState.get_volumes-2061"><span class="linenos">2061</span></a>                <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_filesystem_check</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2062"><a href="#XMLState.get_volumes-2062"><span class="linenos">2062</span></a>                    <span class="c1"># by default filesystem check is switched off for any</span>
</span><span id="XMLState.get_volumes-2063"><a href="#XMLState.get_volumes-2063"><span class="linenos">2063</span></a>                    <span class="c1"># filesystem except the rootfs. Thus only if filesystem</span>
</span><span id="XMLState.get_volumes-2064"><a href="#XMLState.get_volumes-2064"><span class="linenos">2064</span></a>                    <span class="c1"># check is requested the attribute is handled</span>
</span><span id="XMLState.get_volumes-2065"><a href="#XMLState.get_volumes-2065"><span class="linenos">2065</span></a>                    <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;enable-for-filesystem-check&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2066"><a href="#XMLState.get_volumes-2066"><span class="linenos">2066</span></a>
</span><span id="XMLState.get_volumes-2067"><a href="#XMLState.get_volumes-2067"><span class="linenos">2067</span></a>                <span class="k">if</span> <span class="s1">&#39;@root&#39;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2068"><a href="#XMLState.get_volumes-2068"><span class="linenos">2068</span></a>                    <span class="c1"># setup root volume, it takes an optional volume</span>
</span><span id="XMLState.get_volumes-2069"><a href="#XMLState.get_volumes-2069"><span class="linenos">2069</span></a>                    <span class="c1"># name if specified as @root=name and has no specific</span>
</span><span id="XMLState.get_volumes-2070"><a href="#XMLState.get_volumes-2070"><span class="linenos">2070</span></a>                    <span class="c1"># mountpoint. The default name is set to</span>
</span><span id="XMLState.get_volumes-2071"><a href="#XMLState.get_volumes-2071"><span class="linenos">2071</span></a>                    <span class="c1"># defaults.ROOT_VOLUME_NAME if no other root volume</span>
</span><span id="XMLState.get_volumes-2072"><a href="#XMLState.get_volumes-2072"><span class="linenos">2072</span></a>                    <span class="c1"># name is provided</span>
</span><span id="XMLState.get_volumes-2073"><a href="#XMLState.get_volumes-2073"><span class="linenos">2073</span></a>                    <span class="n">mountpoint</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_volumes-2074"><a href="#XMLState.get_volumes-2074"><span class="linenos">2074</span></a>                    <span class="n">realpath</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>
</span><span id="XMLState.get_volumes-2075"><a href="#XMLState.get_volumes-2075"><span class="linenos">2075</span></a>                    <span class="n">is_root_volume</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState.get_volumes-2076"><a href="#XMLState.get_volumes-2076"><span class="linenos">2076</span></a>                    <span class="n">root_volume_expression</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2077"><a href="#XMLState.get_volumes-2077"><span class="linenos">2077</span></a>                        <span class="sa">r</span><span class="s1">&#39;@root=(.+)&#39;</span><span class="p">,</span> <span class="n">name</span>
</span><span id="XMLState.get_volumes-2078"><a href="#XMLState.get_volumes-2078"><span class="linenos">2078</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_volumes-2079"><a href="#XMLState.get_volumes-2079"><span class="linenos">2079</span></a>                    <span class="k">if</span> <span class="n">root_volume_expression</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2080"><a href="#XMLState.get_volumes-2080"><span class="linenos">2080</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="n">root_volume_expression</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2081"><a href="#XMLState.get_volumes-2081"><span class="linenos">2081</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2082"><a href="#XMLState.get_volumes-2082"><span class="linenos">2082</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">ROOT_VOLUME_NAME</span>
</span><span id="XMLState.get_volumes-2083"><a href="#XMLState.get_volumes-2083"><span class="linenos">2083</span></a>                    <span class="n">have_root_volume_setup</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState.get_volumes-2084"><a href="#XMLState.get_volumes-2084"><span class="linenos">2084</span></a>                <span class="k">elif</span> <span class="ow">not</span> <span class="n">mountpoint</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2085"><a href="#XMLState.get_volumes-2085"><span class="linenos">2085</span></a>                    <span class="c1"># setup volume without mountpoint. In this case the name</span>
</span><span id="XMLState.get_volumes-2086"><a href="#XMLState.get_volumes-2086"><span class="linenos">2086</span></a>                    <span class="c1"># attribute is used as mountpoint path and a name for the</span>
</span><span id="XMLState.get_volumes-2087"><a href="#XMLState.get_volumes-2087"><span class="linenos">2087</span></a>                    <span class="c1"># volume is created from that path information</span>
</span><span id="XMLState.get_volumes-2088"><a href="#XMLState.get_volumes-2088"><span class="linenos">2088</span></a>                    <span class="n">mountpoint</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="XMLState.get_volumes-2089"><a href="#XMLState.get_volumes-2089"><span class="linenos">2089</span></a>                    <span class="n">realpath</span> <span class="o">=</span> <span class="n">mountpoint</span>
</span><span id="XMLState.get_volumes-2090"><a href="#XMLState.get_volumes-2090"><span class="linenos">2090</span></a>                    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_volume_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2091"><a href="#XMLState.get_volumes-2091"><span class="linenos">2091</span></a>
</span><span id="XMLState.get_volumes-2092"><a href="#XMLState.get_volumes-2092"><span class="linenos">2092</span></a>                <span class="k">if</span> <span class="n">size</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2093"><a href="#XMLState.get_volumes-2093"><span class="linenos">2093</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;size:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2094"><a href="#XMLState.get_volumes-2094"><span class="linenos">2094</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2095"><a href="#XMLState.get_volumes-2095"><span class="linenos">2095</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_volumes-2096"><a href="#XMLState.get_volumes-2096"><span class="linenos">2096</span></a>                <span class="k">elif</span> <span class="n">freespace</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2097"><a href="#XMLState.get_volumes-2097"><span class="linenos">2097</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2098"><a href="#XMLState.get_volumes-2098"><span class="linenos">2098</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_to_mega_byte</span><span class="p">(</span><span class="n">freespace</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2099"><a href="#XMLState.get_volumes-2099"><span class="linenos">2099</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_volumes-2100"><a href="#XMLState.get_volumes-2100"><span class="linenos">2100</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2101"><a href="#XMLState.get_volumes-2101"><span class="linenos">2101</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2102"><a href="#XMLState.get_volumes-2102"><span class="linenos">2102</span></a>                        <span class="n">Defaults</span><span class="o">.</span><span class="n">get_min_volume_mbytes</span><span class="p">(</span><span class="n">selected_filesystem</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2103"><a href="#XMLState.get_volumes-2103"><span class="linenos">2103</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_volumes-2104"><a href="#XMLState.get_volumes-2104"><span class="linenos">2104</span></a>
</span><span id="XMLState.get_volumes-2105"><a href="#XMLState.get_volumes-2105"><span class="linenos">2105</span></a>                <span class="k">if</span> <span class="s1">&#39;:all&#39;</span> <span class="ow">in</span> <span class="n">size</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2106"><a href="#XMLState.get_volumes-2106"><span class="linenos">2106</span></a>                    <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_volumes-2107"><a href="#XMLState.get_volumes-2107"><span class="linenos">2107</span></a>                    <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState.get_volumes-2108"><a href="#XMLState.get_volumes-2108"><span class="linenos">2108</span></a>                    <span class="n">have_full_size_volume</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState.get_volumes-2109"><a href="#XMLState.get_volumes-2109"><span class="linenos">2109</span></a>
</span><span id="XMLState.get_volumes-2110"><a href="#XMLState.get_volumes-2110"><span class="linenos">2110</span></a>                <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2111"><a href="#XMLState.get_volumes-2111"><span class="linenos">2111</span></a>                    <span class="n">volume_type</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2112"><a href="#XMLState.get_volumes-2112"><span class="linenos">2112</span></a>                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2113"><a href="#XMLState.get_volumes-2113"><span class="linenos">2113</span></a>                        <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2114"><a href="#XMLState.get_volumes-2114"><span class="linenos">2114</span></a>                        <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2115"><a href="#XMLState.get_volumes-2115"><span class="linenos">2115</span></a>                        <span class="n">fullsize</span><span class="o">=</span><span class="n">fullsize</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2116"><a href="#XMLState.get_volumes-2116"><span class="linenos">2116</span></a>                        <span class="n">mountpoint</span><span class="o">=</span><span class="n">mountpoint</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2117"><a href="#XMLState.get_volumes-2117"><span class="linenos">2117</span></a>                        <span class="n">realpath</span><span class="o">=</span><span class="n">realpath</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2118"><a href="#XMLState.get_volumes-2118"><span class="linenos">2118</span></a>                        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2119"><a href="#XMLState.get_volumes-2119"><span class="linenos">2119</span></a>                        <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2120"><a href="#XMLState.get_volumes-2120"><span class="linenos">2120</span></a>                        <span class="n">is_root_volume</span><span class="o">=</span><span class="n">is_root_volume</span>
</span><span id="XMLState.get_volumes-2121"><a href="#XMLState.get_volumes-2121"><span class="linenos">2121</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_volumes-2122"><a href="#XMLState.get_volumes-2122"><span class="linenos">2122</span></a>                <span class="p">)</span>
</span><span id="XMLState.get_volumes-2123"><a href="#XMLState.get_volumes-2123"><span class="linenos">2123</span></a>
</span><span id="XMLState.get_volumes-2124"><a href="#XMLState.get_volumes-2124"><span class="linenos">2124</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">have_root_volume_setup</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2125"><a href="#XMLState.get_volumes-2125"><span class="linenos">2125</span></a>            <span class="c1"># There must always be a root volume setup. It will be the</span>
</span><span id="XMLState.get_volumes-2126"><a href="#XMLState.get_volumes-2126"><span class="linenos">2126</span></a>            <span class="c1"># full size volume if no other volume has this setup</span>
</span><span id="XMLState.get_volumes-2127"><a href="#XMLState.get_volumes-2127"><span class="linenos">2127</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_management</span><span class="p">()</span>
</span><span id="XMLState.get_volumes-2128"><a href="#XMLState.get_volumes-2128"><span class="linenos">2128</span></a>            <span class="n">root_volume_name</span> <span class="o">=</span> \
</span><span id="XMLState.get_volumes-2129"><a href="#XMLState.get_volumes-2129"><span class="linenos">2129</span></a>                <span class="n">defaults</span><span class="o">.</span><span class="n">ROOT_VOLUME_NAME</span> <span class="k">if</span> <span class="n">volume_management</span> <span class="o">==</span> <span class="s1">&#39;lvm&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_volumes-2130"><a href="#XMLState.get_volumes-2130"><span class="linenos">2130</span></a>            <span class="k">if</span> <span class="n">have_full_size_volume</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2131"><a href="#XMLState.get_volumes-2131"><span class="linenos">2131</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;freespace:&#39;</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2132"><a href="#XMLState.get_volumes-2132"><span class="linenos">2132</span></a>                    <span class="n">Defaults</span><span class="o">.</span><span class="n">get_min_volume_mbytes</span><span class="p">(</span><span class="n">selected_filesystem</span><span class="p">)</span>
</span><span id="XMLState.get_volumes-2133"><a href="#XMLState.get_volumes-2133"><span class="linenos">2133</span></a>                <span class="p">)</span>
</span><span id="XMLState.get_volumes-2134"><a href="#XMLState.get_volumes-2134"><span class="linenos">2134</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.get_volumes-2135"><a href="#XMLState.get_volumes-2135"><span class="linenos">2135</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2136"><a href="#XMLState.get_volumes-2136"><span class="linenos">2136</span></a>                <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_volumes-2137"><a href="#XMLState.get_volumes-2137"><span class="linenos">2137</span></a>                <span class="n">fullsize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="XMLState.get_volumes-2138"><a href="#XMLState.get_volumes-2138"><span class="linenos">2138</span></a>            <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2139"><a href="#XMLState.get_volumes-2139"><span class="linenos">2139</span></a>                <span class="n">volume_type</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2140"><a href="#XMLState.get_volumes-2140"><span class="linenos">2140</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">root_volume_name</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2141"><a href="#XMLState.get_volumes-2141"><span class="linenos">2141</span></a>                    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2142"><a href="#XMLState.get_volumes-2142"><span class="linenos">2142</span></a>                    <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2143"><a href="#XMLState.get_volumes-2143"><span class="linenos">2143</span></a>                    <span class="n">fullsize</span><span class="o">=</span><span class="n">fullsize</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2144"><a href="#XMLState.get_volumes-2144"><span class="linenos">2144</span></a>                    <span class="n">mountpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2145"><a href="#XMLState.get_volumes-2145"><span class="linenos">2145</span></a>                    <span class="n">realpath</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2146"><a href="#XMLState.get_volumes-2146"><span class="linenos">2146</span></a>                    <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2147"><a href="#XMLState.get_volumes-2147"><span class="linenos">2147</span></a>                    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
</span><span id="XMLState.get_volumes-2148"><a href="#XMLState.get_volumes-2148"><span class="linenos">2148</span></a>                    <span class="n">is_root_volume</span><span class="o">=</span><span class="kc">True</span>
</span><span id="XMLState.get_volumes-2149"><a href="#XMLState.get_volumes-2149"><span class="linenos">2149</span></a>                <span class="p">)</span>
</span><span id="XMLState.get_volumes-2150"><a href="#XMLState.get_volumes-2150"><span class="linenos">2150</span></a>            <span class="p">)</span>
</span><span id="XMLState.get_volumes-2151"><a href="#XMLState.get_volumes-2151"><span class="linenos">2151</span></a>
</span><span id="XMLState.get_volumes-2152"><a href="#XMLState.get_volumes-2152"><span class="linenos">2152</span></a>        <span class="k">if</span> <span class="n">swap_mbytes</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_management</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;lvm&#39;</span><span class="p">:</span>
</span><span id="XMLState.get_volumes-2153"><a href="#XMLState.get_volumes-2153"><span class="linenos">2153</span></a>            <span class="n">volume_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2154"><a href="#XMLState.get_volumes-2154"><span class="linenos">2154</span></a>                <span class="n">volume_type</span><span class="p">(</span>
</span><span id="XMLState.get_volumes-2155"><a href="#XMLState.get_volumes-2155"><span class="linenos">2155</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">swap_name</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2156"><a href="#XMLState.get_volumes-2156"><span class="linenos">2156</span></a>                    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2157"><a href="#XMLState.get_volumes-2157"><span class="linenos">2157</span></a>                    <span class="n">size</span><span class="o">=</span><span class="s1">&#39;size:</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">swap_mbytes</span><span class="p">),</span>
</span><span id="XMLState.get_volumes-2158"><a href="#XMLState.get_volumes-2158"><span class="linenos">2158</span></a>                    <span class="n">fullsize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2159"><a href="#XMLState.get_volumes-2159"><span class="linenos">2159</span></a>                    <span class="n">mountpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2160"><a href="#XMLState.get_volumes-2160"><span class="linenos">2160</span></a>                    <span class="n">realpath</span><span class="o">=</span><span class="s1">&#39;swap&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2161"><a href="#XMLState.get_volumes-2161"><span class="linenos">2161</span></a>                    <span class="n">label</span><span class="o">=</span><span class="s1">&#39;SWAP&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_volumes-2162"><a href="#XMLState.get_volumes-2162"><span class="linenos">2162</span></a>                    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
</span><span id="XMLState.get_volumes-2163"><a href="#XMLState.get_volumes-2163"><span class="linenos">2163</span></a>                    <span class="n">is_root_volume</span><span class="o">=</span><span class="kc">False</span>
</span><span id="XMLState.get_volumes-2164"><a href="#XMLState.get_volumes-2164"><span class="linenos">2164</span></a>                <span class="p">)</span>
</span><span id="XMLState.get_volumes-2165"><a href="#XMLState.get_volumes-2165"><span class="linenos">2165</span></a>            <span class="p">)</span>
</span><span id="XMLState.get_volumes-2166"><a href="#XMLState.get_volumes-2166"><span class="linenos">2166</span></a>
</span><span id="XMLState.get_volumes-2167"><a href="#XMLState.get_volumes-2167"><span class="linenos">2167</span></a>        <span class="k">return</span> <span class="n">volume_type_list</span>
</span></pre></div>


            <div class="docstring"><p>List of configured systemdisk volumes.</p>

<p>Each entry in the list is a tuple with the following information</p>

<ul>
<li>name: name of the volume</li>
<li>size: size of the volume</li>
<li>realpath: system path to lookup volume data. If no mountpoint
is set the volume name is used as data path.</li>
<li>mountpoint: volume mount point and volume data path</li>
<li>fullsize: takes all space True|False</li>
<li>attributes: list of volume attributes handled via chattr</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
<pre><code>Contains list of volume_type tuples

.. code:: python

    [
        volume_type(
            name=volume_name,
            parent=volume_parent,
            size=volume_size,
            realpath=path,
            mountpoint=path,
            fullsize=True,
            label=volume_label,
            attributes=['no-copy-on-write'],
            is_root_volume=True|False
        )
    ]
</code></pre>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_volume_management" class="classattr">
                                        <input id="XMLState.get_volume_management-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_volume_management</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_volume_management-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_volume_management"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_volume_management-2169"><a href="#XMLState.get_volume_management-2169"><span class="linenos">2169</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_volume_management</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_volume_management-2170"><a href="#XMLState.get_volume_management-2170"><span class="linenos">2170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_volume_management-2171"><a href="#XMLState.get_volume_management-2171"><span class="linenos">2171</span></a><span class="sd">        Provides information which volume management system is used</span>
</span><span id="XMLState.get_volume_management-2172"><a href="#XMLState.get_volume_management-2172"><span class="linenos">2172</span></a>
</span><span id="XMLState.get_volume_management-2173"><a href="#XMLState.get_volume_management-2173"><span class="linenos">2173</span></a><span class="sd">        :return: name of volume manager</span>
</span><span id="XMLState.get_volume_management-2174"><a href="#XMLState.get_volume_management-2174"><span class="linenos">2174</span></a>
</span><span id="XMLState.get_volume_management-2175"><a href="#XMLState.get_volume_management-2175"><span class="linenos">2175</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_volume_management-2176"><a href="#XMLState.get_volume_management-2176"><span class="linenos">2176</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_volume_management-2177"><a href="#XMLState.get_volume_management-2177"><span class="linenos">2177</span></a>        <span class="n">volume_filesystems</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;btrfs&#39;</span><span class="p">]</span>
</span><span id="XMLState.get_volume_management-2178"><a href="#XMLState.get_volume_management-2178"><span class="linenos">2178</span></a>        <span class="n">selected_filesystem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_filesystem</span><span class="p">()</span>
</span><span id="XMLState.get_volume_management-2179"><a href="#XMLState.get_volume_management-2179"><span class="linenos">2179</span></a>        <span class="n">selected_system_disk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState.get_volume_management-2180"><a href="#XMLState.get_volume_management-2180"><span class="linenos">2180</span></a>        <span class="n">volume_management</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_volume_management-2181"><a href="#XMLState.get_volume_management-2181"><span class="linenos">2181</span></a>        <span class="k">if</span> <span class="n">selected_system_disk</span> <span class="ow">and</span> <span class="n">selected_system_disk</span><span class="o">.</span><span class="n">get_preferlvm</span><span class="p">():</span>
</span><span id="XMLState.get_volume_management-2182"><a href="#XMLState.get_volume_management-2182"><span class="linenos">2182</span></a>            <span class="c1"># LVM volume management is preferred, use it</span>
</span><span id="XMLState.get_volume_management-2183"><a href="#XMLState.get_volume_management-2183"><span class="linenos">2183</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="s1">&#39;lvm&#39;</span>
</span><span id="XMLState.get_volume_management-2184"><a href="#XMLState.get_volume_management-2184"><span class="linenos">2184</span></a>        <span class="k">elif</span> <span class="n">selected_filesystem</span> <span class="ow">in</span> <span class="n">volume_filesystems</span> <span class="ow">and</span> <span class="n">selected_system_disk</span><span class="p">:</span>
</span><span id="XMLState.get_volume_management-2185"><a href="#XMLState.get_volume_management-2185"><span class="linenos">2185</span></a>            <span class="c1"># specified filesystem has its own volume management system</span>
</span><span id="XMLState.get_volume_management-2186"><a href="#XMLState.get_volume_management-2186"><span class="linenos">2186</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="n">selected_filesystem</span>
</span><span id="XMLState.get_volume_management-2187"><a href="#XMLState.get_volume_management-2187"><span class="linenos">2187</span></a>        <span class="k">elif</span> <span class="n">selected_system_disk</span><span class="p">:</span>
</span><span id="XMLState.get_volume_management-2188"><a href="#XMLState.get_volume_management-2188"><span class="linenos">2188</span></a>            <span class="c1"># systemdisk section is specified with non volume capable</span>
</span><span id="XMLState.get_volume_management-2189"><a href="#XMLState.get_volume_management-2189"><span class="linenos">2189</span></a>            <span class="c1"># filesystem and no volume management preference. So let&#39;s</span>
</span><span id="XMLState.get_volume_management-2190"><a href="#XMLState.get_volume_management-2190"><span class="linenos">2190</span></a>            <span class="c1"># use LVM by default</span>
</span><span id="XMLState.get_volume_management-2191"><a href="#XMLState.get_volume_management-2191"><span class="linenos">2191</span></a>            <span class="n">volume_management</span> <span class="o">=</span> <span class="s1">&#39;lvm&#39;</span>
</span><span id="XMLState.get_volume_management-2192"><a href="#XMLState.get_volume_management-2192"><span class="linenos">2192</span></a>        <span class="k">return</span> <span class="n">volume_management</span>
</span></pre></div>


            <div class="docstring"><p>Provides information which volume management system is used</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>name of volume manager</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_drivers_list" class="classattr">
                                        <input id="XMLState.get_drivers_list-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_drivers_list</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_drivers_list-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_drivers_list"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_drivers_list-2194"><a href="#XMLState.get_drivers_list-2194"><span class="linenos">2194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_drivers_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_drivers_list-2195"><a href="#XMLState.get_drivers_list-2195"><span class="linenos">2195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_drivers_list-2196"><a href="#XMLState.get_drivers_list-2196"><span class="linenos">2196</span></a><span class="sd">        List of driver names from all drivers sections matching</span>
</span><span id="XMLState.get_drivers_list-2197"><a href="#XMLState.get_drivers_list-2197"><span class="linenos">2197</span></a><span class="sd">        configured profiles</span>
</span><span id="XMLState.get_drivers_list-2198"><a href="#XMLState.get_drivers_list-2198"><span class="linenos">2198</span></a>
</span><span id="XMLState.get_drivers_list-2199"><a href="#XMLState.get_drivers_list-2199"><span class="linenos">2199</span></a><span class="sd">        :return: driver names</span>
</span><span id="XMLState.get_drivers_list-2200"><a href="#XMLState.get_drivers_list-2200"><span class="linenos">2200</span></a>
</span><span id="XMLState.get_drivers_list-2201"><a href="#XMLState.get_drivers_list-2201"><span class="linenos">2201</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_drivers_list-2202"><a href="#XMLState.get_drivers_list-2202"><span class="linenos">2202</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_drivers_list-2203"><a href="#XMLState.get_drivers_list-2203"><span class="linenos">2203</span></a>        <span class="n">drivers_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.get_drivers_list-2204"><a href="#XMLState.get_drivers_list-2204"><span class="linenos">2204</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_drivers</span><span class="p">()</span>
</span><span id="XMLState.get_drivers_list-2205"><a href="#XMLState.get_drivers_list-2205"><span class="linenos">2205</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_drivers_list-2206"><a href="#XMLState.get_drivers_list-2206"><span class="linenos">2206</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_drivers_list-2207"><a href="#XMLState.get_drivers_list-2207"><span class="linenos">2207</span></a>        <span class="k">if</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState.get_drivers_list-2208"><a href="#XMLState.get_drivers_list-2208"><span class="linenos">2208</span></a>            <span class="k">for</span> <span class="n">driver</span> <span class="ow">in</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState.get_drivers_list-2209"><a href="#XMLState.get_drivers_list-2209"><span class="linenos">2209</span></a>                <span class="k">for</span> <span class="n">file_section</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="XMLState.get_drivers_list-2210"><a href="#XMLState.get_drivers_list-2210"><span class="linenos">2210</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_drivers_list-2211"><a href="#XMLState.get_drivers_list-2211"><span class="linenos">2211</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>List of driver names from all drivers sections matching
configured profiles</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>driver names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_strip_list" class="classattr">
                                        <input id="XMLState.get_strip_list-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_strip_list</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_strip_list-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_strip_list"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_strip_list-2213"><a href="#XMLState.get_strip_list-2213"><span class="linenos">2213</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_strip_list-2214"><a href="#XMLState.get_strip_list-2214"><span class="linenos">2214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_list-2215"><a href="#XMLState.get_strip_list-2215"><span class="linenos">2215</span></a><span class="sd">        List of strip names matching the given section type</span>
</span><span id="XMLState.get_strip_list-2216"><a href="#XMLState.get_strip_list-2216"><span class="linenos">2216</span></a><span class="sd">        and profiles</span>
</span><span id="XMLState.get_strip_list-2217"><a href="#XMLState.get_strip_list-2217"><span class="linenos">2217</span></a>
</span><span id="XMLState.get_strip_list-2218"><a href="#XMLState.get_strip_list-2218"><span class="linenos">2218</span></a><span class="sd">        :param str section_type: type name from packages section</span>
</span><span id="XMLState.get_strip_list-2219"><a href="#XMLState.get_strip_list-2219"><span class="linenos">2219</span></a>
</span><span id="XMLState.get_strip_list-2220"><a href="#XMLState.get_strip_list-2220"><span class="linenos">2220</span></a><span class="sd">        :return: strip names</span>
</span><span id="XMLState.get_strip_list-2221"><a href="#XMLState.get_strip_list-2221"><span class="linenos">2221</span></a>
</span><span id="XMLState.get_strip_list-2222"><a href="#XMLState.get_strip_list-2222"><span class="linenos">2222</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_strip_list-2223"><a href="#XMLState.get_strip_list-2223"><span class="linenos">2223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_list-2224"><a href="#XMLState.get_strip_list-2224"><span class="linenos">2224</span></a>        <span class="n">strip_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.get_strip_list-2225"><a href="#XMLState.get_strip_list-2225"><span class="linenos">2225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_strip</span><span class="p">()</span>
</span><span id="XMLState.get_strip_list-2226"><a href="#XMLState.get_strip_list-2226"><span class="linenos">2226</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_strip_list-2227"><a href="#XMLState.get_strip_list-2227"><span class="linenos">2227</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_strip_list-2228"><a href="#XMLState.get_strip_list-2228"><span class="linenos">2228</span></a>        <span class="k">if</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState.get_strip_list-2229"><a href="#XMLState.get_strip_list-2229"><span class="linenos">2229</span></a>            <span class="k">for</span> <span class="n">strip</span> <span class="ow">in</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState.get_strip_list-2230"><a href="#XMLState.get_strip_list-2230"><span class="linenos">2230</span></a>                <span class="k">if</span> <span class="n">strip</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span> <span class="o">==</span> <span class="n">section_type</span><span class="p">:</span>
</span><span id="XMLState.get_strip_list-2231"><a href="#XMLState.get_strip_list-2231"><span class="linenos">2231</span></a>                    <span class="k">for</span> <span class="n">file_section</span> <span class="ow">in</span> <span class="n">strip</span><span class="o">.</span><span class="n">get_file</span><span class="p">():</span>
</span><span id="XMLState.get_strip_list-2232"><a href="#XMLState.get_strip_list-2232"><span class="linenos">2232</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_strip_list-2233"><a href="#XMLState.get_strip_list-2233"><span class="linenos">2233</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>List of strip names matching the given section type
and profiles</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str section_type</strong>:  type name from packages section</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>strip names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_strip_files_to_delete" class="classattr">
                                        <input id="XMLState.get_strip_files_to_delete-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_strip_files_to_delete</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_strip_files_to_delete-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_strip_files_to_delete"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_strip_files_to_delete-2235"><a href="#XMLState.get_strip_files_to_delete-2235"><span class="linenos">2235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_files_to_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_strip_files_to_delete-2236"><a href="#XMLState.get_strip_files_to_delete-2236"><span class="linenos">2236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_files_to_delete-2237"><a href="#XMLState.get_strip_files_to_delete-2237"><span class="linenos">2237</span></a><span class="sd">        Items to delete from strip section</span>
</span><span id="XMLState.get_strip_files_to_delete-2238"><a href="#XMLState.get_strip_files_to_delete-2238"><span class="linenos">2238</span></a>
</span><span id="XMLState.get_strip_files_to_delete-2239"><a href="#XMLState.get_strip_files_to_delete-2239"><span class="linenos">2239</span></a><span class="sd">        :return: item names</span>
</span><span id="XMLState.get_strip_files_to_delete-2240"><a href="#XMLState.get_strip_files_to_delete-2240"><span class="linenos">2240</span></a>
</span><span id="XMLState.get_strip_files_to_delete-2241"><a href="#XMLState.get_strip_files_to_delete-2241"><span class="linenos">2241</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_strip_files_to_delete-2242"><a href="#XMLState.get_strip_files_to_delete-2242"><span class="linenos">2242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_files_to_delete-2243"><a href="#XMLState.get_strip_files_to_delete-2243"><span class="linenos">2243</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Items to delete from strip section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>item names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_strip_tools_to_keep" class="classattr">
                                        <input id="XMLState.get_strip_tools_to_keep-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_strip_tools_to_keep</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_strip_tools_to_keep-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_strip_tools_to_keep"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_strip_tools_to_keep-2245"><a href="#XMLState.get_strip_tools_to_keep-2245"><span class="linenos">2245</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_tools_to_keep</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_strip_tools_to_keep-2246"><a href="#XMLState.get_strip_tools_to_keep-2246"><span class="linenos">2246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_tools_to_keep-2247"><a href="#XMLState.get_strip_tools_to_keep-2247"><span class="linenos">2247</span></a><span class="sd">        Tools to keep from strip section</span>
</span><span id="XMLState.get_strip_tools_to_keep-2248"><a href="#XMLState.get_strip_tools_to_keep-2248"><span class="linenos">2248</span></a>
</span><span id="XMLState.get_strip_tools_to_keep-2249"><a href="#XMLState.get_strip_tools_to_keep-2249"><span class="linenos">2249</span></a><span class="sd">        :return: tool names</span>
</span><span id="XMLState.get_strip_tools_to_keep-2250"><a href="#XMLState.get_strip_tools_to_keep-2250"><span class="linenos">2250</span></a>
</span><span id="XMLState.get_strip_tools_to_keep-2251"><a href="#XMLState.get_strip_tools_to_keep-2251"><span class="linenos">2251</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_strip_tools_to_keep-2252"><a href="#XMLState.get_strip_tools_to_keep-2252"><span class="linenos">2252</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_tools_to_keep-2253"><a href="#XMLState.get_strip_tools_to_keep-2253"><span class="linenos">2253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;tools&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tools to keep from strip section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>tool names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_strip_libraries_to_keep" class="classattr">
                                        <input id="XMLState.get_strip_libraries_to_keep-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_strip_libraries_to_keep</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_strip_libraries_to_keep-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_strip_libraries_to_keep"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_strip_libraries_to_keep-2255"><a href="#XMLState.get_strip_libraries_to_keep-2255"><span class="linenos">2255</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_strip_libraries_to_keep</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_strip_libraries_to_keep-2256"><a href="#XMLState.get_strip_libraries_to_keep-2256"><span class="linenos">2256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_libraries_to_keep-2257"><a href="#XMLState.get_strip_libraries_to_keep-2257"><span class="linenos">2257</span></a><span class="sd">        Libraries to keep from strip section</span>
</span><span id="XMLState.get_strip_libraries_to_keep-2258"><a href="#XMLState.get_strip_libraries_to_keep-2258"><span class="linenos">2258</span></a>
</span><span id="XMLState.get_strip_libraries_to_keep-2259"><a href="#XMLState.get_strip_libraries_to_keep-2259"><span class="linenos">2259</span></a><span class="sd">        :return: librarie names</span>
</span><span id="XMLState.get_strip_libraries_to_keep-2260"><a href="#XMLState.get_strip_libraries_to_keep-2260"><span class="linenos">2260</span></a>
</span><span id="XMLState.get_strip_libraries_to_keep-2261"><a href="#XMLState.get_strip_libraries_to_keep-2261"><span class="linenos">2261</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_strip_libraries_to_keep-2262"><a href="#XMLState.get_strip_libraries_to_keep-2262"><span class="linenos">2262</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_strip_libraries_to_keep-2263"><a href="#XMLState.get_strip_libraries_to_keep-2263"><span class="linenos">2263</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_strip_list</span><span class="p">(</span><span class="s1">&#39;libs&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Libraries to keep from strip section</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>librarie names</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_include_section_reference_file_names" class="classattr">
                                        <input id="XMLState.get_include_section_reference_file_names-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_include_section_reference_file_names</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_include_section_reference_file_names-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_include_section_reference_file_names"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_include_section_reference_file_names-2265"><a href="#XMLState.get_include_section_reference_file_names-2265"><span class="linenos">2265</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_include_section_reference_file_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_include_section_reference_file_names-2266"><a href="#XMLState.get_include_section_reference_file_names-2266"><span class="linenos">2266</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_include_section_reference_file_names-2267"><a href="#XMLState.get_include_section_reference_file_names-2267"><span class="linenos">2267</span></a><span class="sd">        List of all &lt;include&gt; section file name references</span>
</span><span id="XMLState.get_include_section_reference_file_names-2268"><a href="#XMLState.get_include_section_reference_file_names-2268"><span class="linenos">2268</span></a>
</span><span id="XMLState.get_include_section_reference_file_names-2269"><a href="#XMLState.get_include_section_reference_file_names-2269"><span class="linenos">2269</span></a><span class="sd">        :return: List[str]</span>
</span><span id="XMLState.get_include_section_reference_file_names-2270"><a href="#XMLState.get_include_section_reference_file_names-2270"><span class="linenos">2270</span></a>
</span><span id="XMLState.get_include_section_reference_file_names-2271"><a href="#XMLState.get_include_section_reference_file_names-2271"><span class="linenos">2271</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_include_section_reference_file_names-2272"><a href="#XMLState.get_include_section_reference_file_names-2272"><span class="linenos">2272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_include_section_reference_file_names-2273"><a href="#XMLState.get_include_section_reference_file_names-2273"><span class="linenos">2273</span></a>        <span class="n">include_files</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_include_section_reference_file_names-2274"><a href="#XMLState.get_include_section_reference_file_names-2274"><span class="linenos">2274</span></a>        <span class="k">for</span> <span class="n">include</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_include</span><span class="p">():</span>
</span><span id="XMLState.get_include_section_reference_file_names-2275"><a href="#XMLState.get_include_section_reference_file_names-2275"><span class="linenos">2275</span></a>            <span class="n">include_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">include</span><span class="o">.</span><span class="n">get_from</span><span class="p">())</span>
</span><span id="XMLState.get_include_section_reference_file_names-2276"><a href="#XMLState.get_include_section_reference_file_names-2276"><span class="linenos">2276</span></a>        <span class="k">return</span> <span class="n">include_files</span>
</span></pre></div>


            <div class="docstring"><p>List of all <include> section file name references</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List[str]</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_repository_sections" class="classattr">
                                        <input id="XMLState.get_repository_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_repository_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_repository_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_repository_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_repository_sections-2278"><a href="#XMLState.get_repository_sections-2278"><span class="linenos">2278</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_repository_sections-2279"><a href="#XMLState.get_repository_sections-2279"><span class="linenos">2279</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_repository_sections-2280"><a href="#XMLState.get_repository_sections-2280"><span class="linenos">2280</span></a><span class="sd">        List of all repository sections for the selected profiles that</span>
</span><span id="XMLState.get_repository_sections-2281"><a href="#XMLState.get_repository_sections-2281"><span class="linenos">2281</span></a><span class="sd">        matches the host architecture</span>
</span><span id="XMLState.get_repository_sections-2282"><a href="#XMLState.get_repository_sections-2282"><span class="linenos">2282</span></a>
</span><span id="XMLState.get_repository_sections-2283"><a href="#XMLState.get_repository_sections-2283"><span class="linenos">2283</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="XMLState.get_repository_sections-2284"><a href="#XMLState.get_repository_sections-2284"><span class="linenos">2284</span></a>
</span><span id="XMLState.get_repository_sections-2285"><a href="#XMLState.get_repository_sections-2285"><span class="linenos">2285</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_repository_sections-2286"><a href="#XMLState.get_repository_sections-2286"><span class="linenos">2286</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_repository_sections-2287"><a href="#XMLState.get_repository_sections-2287"><span class="linenos">2287</span></a>        <span class="n">repository_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_repository_sections-2288"><a href="#XMLState.get_repository_sections-2288"><span class="linenos">2288</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_repository</span><span class="p">()):</span>
</span><span id="XMLState.get_repository_sections-2289"><a href="#XMLState.get_repository_sections-2289"><span class="linenos">2289</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">repository_matches_host_architecture</span><span class="p">(</span><span class="n">repository</span><span class="p">):</span>
</span><span id="XMLState.get_repository_sections-2290"><a href="#XMLState.get_repository_sections-2290"><span class="linenos">2290</span></a>                <span class="n">repository_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</span><span id="XMLState.get_repository_sections-2291"><a href="#XMLState.get_repository_sections-2291"><span class="linenos">2291</span></a>        <span class="k">return</span> <span class="n">repository_list</span>
</span></pre></div>


            <div class="docstring"><p>List of all repository sections for the selected profiles that
matches the host architecture</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><repository> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_containers_sections" class="classattr">
                                        <input id="XMLState.get_containers_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_containers_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_containers_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_containers_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_containers_sections-2293"><a href="#XMLState.get_containers_sections-2293"><span class="linenos">2293</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_containers_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_containers_sections-2294"><a href="#XMLState.get_containers_sections-2294"><span class="linenos">2294</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_containers_sections-2295"><a href="#XMLState.get_containers_sections-2295"><span class="linenos">2295</span></a><span class="sd">        List of all containers sections for the selected profiles that</span>
</span><span id="XMLState.get_containers_sections-2296"><a href="#XMLState.get_containers_sections-2296"><span class="linenos">2296</span></a><span class="sd">        matches the host architecture</span>
</span><span id="XMLState.get_containers_sections-2297"><a href="#XMLState.get_containers_sections-2297"><span class="linenos">2297</span></a>
</span><span id="XMLState.get_containers_sections-2298"><a href="#XMLState.get_containers_sections-2298"><span class="linenos">2298</span></a><span class="sd">        :return: &lt;containers&gt; section reference(s)</span>
</span><span id="XMLState.get_containers_sections-2299"><a href="#XMLState.get_containers_sections-2299"><span class="linenos">2299</span></a>
</span><span id="XMLState.get_containers_sections-2300"><a href="#XMLState.get_containers_sections-2300"><span class="linenos">2300</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_containers_sections-2301"><a href="#XMLState.get_containers_sections-2301"><span class="linenos">2301</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_containers_sections-2302"><a href="#XMLState.get_containers_sections-2302"><span class="linenos">2302</span></a>        <span class="n">containers_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_containers_sections-2303"><a href="#XMLState.get_containers_sections-2303"><span class="linenos">2303</span></a>        <span class="k">for</span> <span class="n">containers</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_containers</span><span class="p">()):</span>
</span><span id="XMLState.get_containers_sections-2304"><a href="#XMLState.get_containers_sections-2304"><span class="linenos">2304</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">containers_matches_host_architecture</span><span class="p">(</span><span class="n">containers</span><span class="p">):</span>
</span><span id="XMLState.get_containers_sections-2305"><a href="#XMLState.get_containers_sections-2305"><span class="linenos">2305</span></a>                <span class="n">containers_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
</span><span id="XMLState.get_containers_sections-2306"><a href="#XMLState.get_containers_sections-2306"><span class="linenos">2306</span></a>        <span class="k">return</span> <span class="n">containers_list</span>
</span></pre></div>


            <div class="docstring"><p>List of all containers sections for the selected profiles that
matches the host architecture</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><containers> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_repository_sections_used_for_build" class="classattr">
                                        <input id="XMLState.get_repository_sections_used_for_build-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_repository_sections_used_for_build</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_repository_sections_used_for_build-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_repository_sections_used_for_build"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_repository_sections_used_for_build-2308"><a href="#XMLState.get_repository_sections_used_for_build-2308"><span class="linenos">2308</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections_used_for_build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2309"><a href="#XMLState.get_repository_sections_used_for_build-2309"><span class="linenos">2309</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2310"><a href="#XMLState.get_repository_sections_used_for_build-2310"><span class="linenos">2310</span></a><span class="sd">        List of all repositorys sections used to build the image and</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2311"><a href="#XMLState.get_repository_sections_used_for_build-2311"><span class="linenos">2311</span></a><span class="sd">        matching configured profiles.</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2312"><a href="#XMLState.get_repository_sections_used_for_build-2312"><span class="linenos">2312</span></a>
</span><span id="XMLState.get_repository_sections_used_for_build-2313"><a href="#XMLState.get_repository_sections_used_for_build-2313"><span class="linenos">2313</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2314"><a href="#XMLState.get_repository_sections_used_for_build-2314"><span class="linenos">2314</span></a>
</span><span id="XMLState.get_repository_sections_used_for_build-2315"><a href="#XMLState.get_repository_sections_used_for_build-2315"><span class="linenos">2315</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2316"><a href="#XMLState.get_repository_sections_used_for_build-2316"><span class="linenos">2316</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2317"><a href="#XMLState.get_repository_sections_used_for_build-2317"><span class="linenos">2317</span></a>        <span class="n">repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2318"><a href="#XMLState.get_repository_sections_used_for_build-2318"><span class="linenos">2318</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2319"><a href="#XMLState.get_repository_sections_used_for_build-2319"><span class="linenos">2319</span></a>            <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repos</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageonly</span><span class="p">()</span>
</span><span id="XMLState.get_repository_sections_used_for_build-2320"><a href="#XMLState.get_repository_sections_used_for_build-2320"><span class="linenos">2320</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of all repositorys sections used to build the image and
matching configured profiles.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><repository> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_repository_sections_used_in_image" class="classattr">
                                        <input id="XMLState.get_repository_sections_used_in_image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_repository_sections_used_in_image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_repository_sections_used_in_image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_repository_sections_used_in_image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_repository_sections_used_in_image-2322"><a href="#XMLState.get_repository_sections_used_in_image-2322"><span class="linenos">2322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repository_sections_used_in_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2323"><a href="#XMLState.get_repository_sections_used_in_image-2323"><span class="linenos">2323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2324"><a href="#XMLState.get_repository_sections_used_in_image-2324"><span class="linenos">2324</span></a><span class="sd">        List of all repositorys sections to be configured in the resulting</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2325"><a href="#XMLState.get_repository_sections_used_in_image-2325"><span class="linenos">2325</span></a><span class="sd">        image matching configured profiles.</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2326"><a href="#XMLState.get_repository_sections_used_in_image-2326"><span class="linenos">2326</span></a>
</span><span id="XMLState.get_repository_sections_used_in_image-2327"><a href="#XMLState.get_repository_sections_used_in_image-2327"><span class="linenos">2327</span></a><span class="sd">        :return: &lt;repository&gt; section reference(s)</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2328"><a href="#XMLState.get_repository_sections_used_in_image-2328"><span class="linenos">2328</span></a>
</span><span id="XMLState.get_repository_sections_used_in_image-2329"><a href="#XMLState.get_repository_sections_used_in_image-2329"><span class="linenos">2329</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2330"><a href="#XMLState.get_repository_sections_used_in_image-2330"><span class="linenos">2330</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2331"><a href="#XMLState.get_repository_sections_used_in_image-2331"><span class="linenos">2331</span></a>        <span class="n">repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2332"><a href="#XMLState.get_repository_sections_used_in_image-2332"><span class="linenos">2332</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2333"><a href="#XMLState.get_repository_sections_used_in_image-2333"><span class="linenos">2333</span></a>            <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repos</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2334"><a href="#XMLState.get_repository_sections_used_in_image-2334"><span class="linenos">2334</span></a>            <span class="k">if</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageinclude</span><span class="p">()</span> <span class="ow">or</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_imageonly</span><span class="p">()</span>
</span><span id="XMLState.get_repository_sections_used_in_image-2335"><a href="#XMLState.get_repository_sections_used_in_image-2335"><span class="linenos">2335</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List of all repositorys sections to be configured in the resulting
image matching configured profiles.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><repository> section reference(s)</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.delete_repository_sections" class="classattr">
                                        <input id="XMLState.delete_repository_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_repository_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.delete_repository_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.delete_repository_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.delete_repository_sections-2337"><a href="#XMLState.delete_repository_sections-2337"><span class="linenos">2337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_repository_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.delete_repository_sections-2338"><a href="#XMLState.delete_repository_sections-2338"><span class="linenos">2338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.delete_repository_sections-2339"><a href="#XMLState.delete_repository_sections-2339"><span class="linenos">2339</span></a><span class="sd">        Delete all repository sections matching configured profiles</span>
</span><span id="XMLState.delete_repository_sections-2340"><a href="#XMLState.delete_repository_sections-2340"><span class="linenos">2340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.delete_repository_sections-2341"><a href="#XMLState.delete_repository_sections-2341"><span class="linenos">2341</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">([])</span>
</span></pre></div>


            <div class="docstring"><p>Delete all repository sections matching configured profiles</p>
</div>


                            </div>
                            <div id="XMLState.delete_repository_sections_used_for_build" class="classattr">
                                        <input id="XMLState.delete_repository_sections_used_for_build-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_repository_sections_used_for_build</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.delete_repository_sections_used_for_build-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.delete_repository_sections_used_for_build"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.delete_repository_sections_used_for_build-2343"><a href="#XMLState.delete_repository_sections_used_for_build-2343"><span class="linenos">2343</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_repository_sections_used_for_build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2344"><a href="#XMLState.delete_repository_sections_used_for_build-2344"><span class="linenos">2344</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2345"><a href="#XMLState.delete_repository_sections_used_for_build-2345"><span class="linenos">2345</span></a><span class="sd">        Delete all repository sections used to build the image matching</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2346"><a href="#XMLState.delete_repository_sections_used_for_build-2346"><span class="linenos">2346</span></a><span class="sd">        configured profiles</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2347"><a href="#XMLState.delete_repository_sections_used_for_build-2347"><span class="linenos">2347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2348"><a href="#XMLState.delete_repository_sections_used_for_build-2348"><span class="linenos">2348</span></a>        <span class="n">used_for_build</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections_used_for_build</span><span class="p">()</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2349"><a href="#XMLState.delete_repository_sections_used_for_build-2349"><span class="linenos">2349</span></a>        <span class="n">all_repos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2350"><a href="#XMLState.delete_repository_sections_used_for_build-2350"><span class="linenos">2350</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">(</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2351"><a href="#XMLState.delete_repository_sections_used_for_build-2351"><span class="linenos">2351</span></a>            <span class="p">[</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2352"><a href="#XMLState.delete_repository_sections_used_for_build-2352"><span class="linenos">2352</span></a>                <span class="n">repo</span> <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">all_repos</span> <span class="k">if</span> <span class="n">repo</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_for_build</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2353"><a href="#XMLState.delete_repository_sections_used_for_build-2353"><span class="linenos">2353</span></a>            <span class="p">]</span>
</span><span id="XMLState.delete_repository_sections_used_for_build-2354"><a href="#XMLState.delete_repository_sections_used_for_build-2354"><span class="linenos">2354</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Delete all repository sections used to build the image matching
configured profiles</p>
</div>


                            </div>
                            <div id="XMLState.get_repositories_signing_keys" class="classattr">
                                        <input id="XMLState.get_repositories_signing_keys-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_repositories_signing_keys</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_repositories_signing_keys-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_repositories_signing_keys"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_repositories_signing_keys-2356"><a href="#XMLState.get_repositories_signing_keys-2356"><span class="linenos">2356</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_repositories_signing_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_repositories_signing_keys-2357"><a href="#XMLState.get_repositories_signing_keys-2357"><span class="linenos">2357</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_repositories_signing_keys-2358"><a href="#XMLState.get_repositories_signing_keys-2358"><span class="linenos">2358</span></a><span class="sd">        Get list of signing keys specified on the repositories</span>
</span><span id="XMLState.get_repositories_signing_keys-2359"><a href="#XMLState.get_repositories_signing_keys-2359"><span class="linenos">2359</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_repositories_signing_keys-2360"><a href="#XMLState.get_repositories_signing_keys-2360"><span class="linenos">2360</span></a>        <span class="n">key_file_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_repositories_signing_keys-2361"><a href="#XMLState.get_repositories_signing_keys-2361"><span class="linenos">2361</span></a>        <span class="n">release_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_release_version</span><span class="p">()</span>
</span><span id="XMLState.get_repositories_signing_keys-2362"><a href="#XMLState.get_repositories_signing_keys-2362"><span class="linenos">2362</span></a>        <span class="n">release_vars</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState.get_repositories_signing_keys-2363"><a href="#XMLState.get_repositories_signing_keys-2363"><span class="linenos">2363</span></a>            <span class="s1">&#39;$releasever&#39;</span><span class="p">,</span>
</span><span id="XMLState.get_repositories_signing_keys-2364"><a href="#XMLState.get_repositories_signing_keys-2364"><span class="linenos">2364</span></a>            <span class="s1">&#39;$</span><span class="si">{releasever}</span><span class="s1">&#39;</span>
</span><span id="XMLState.get_repositories_signing_keys-2365"><a href="#XMLState.get_repositories_signing_keys-2365"><span class="linenos">2365</span></a>        <span class="p">]</span>
</span><span id="XMLState.get_repositories_signing_keys-2366"><a href="#XMLState.get_repositories_signing_keys-2366"><span class="linenos">2366</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="XMLState.get_repositories_signing_keys-2367"><a href="#XMLState.get_repositories_signing_keys-2367"><span class="linenos">2367</span></a>            <span class="k">for</span> <span class="n">signing</span> <span class="ow">in</span> <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">get_signing</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="XMLState.get_repositories_signing_keys-2368"><a href="#XMLState.get_repositories_signing_keys-2368"><span class="linenos">2368</span></a>                <span class="n">normalized_key_url</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">signing</span><span class="o">.</span><span class="n">get_key</span><span class="p">())</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="XMLState.get_repositories_signing_keys-2369"><a href="#XMLState.get_repositories_signing_keys-2369"><span class="linenos">2369</span></a>                <span class="k">if</span> <span class="n">release_version</span><span class="p">:</span>
</span><span id="XMLState.get_repositories_signing_keys-2370"><a href="#XMLState.get_repositories_signing_keys-2370"><span class="linenos">2370</span></a>                    <span class="k">for</span> <span class="n">release_var</span> <span class="ow">in</span> <span class="n">release_vars</span><span class="p">:</span>
</span><span id="XMLState.get_repositories_signing_keys-2371"><a href="#XMLState.get_repositories_signing_keys-2371"><span class="linenos">2371</span></a>                        <span class="k">if</span> <span class="n">release_var</span> <span class="ow">in</span> <span class="n">normalized_key_url</span><span class="p">:</span>
</span><span id="XMLState.get_repositories_signing_keys-2372"><a href="#XMLState.get_repositories_signing_keys-2372"><span class="linenos">2372</span></a>                            <span class="n">normalized_key_url</span> <span class="o">=</span> <span class="n">normalized_key_url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="XMLState.get_repositories_signing_keys-2373"><a href="#XMLState.get_repositories_signing_keys-2373"><span class="linenos">2373</span></a>                                <span class="n">release_var</span><span class="p">,</span> <span class="n">release_version</span>
</span><span id="XMLState.get_repositories_signing_keys-2374"><a href="#XMLState.get_repositories_signing_keys-2374"><span class="linenos">2374</span></a>                            <span class="p">)</span>
</span><span id="XMLState.get_repositories_signing_keys-2375"><a href="#XMLState.get_repositories_signing_keys-2375"><span class="linenos">2375</span></a>                <span class="k">if</span> <span class="n">normalized_key_url</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">key_file_list</span><span class="p">:</span>
</span><span id="XMLState.get_repositories_signing_keys-2376"><a href="#XMLState.get_repositories_signing_keys-2376"><span class="linenos">2376</span></a>                    <span class="n">key_file_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normalized_key_url</span><span class="p">)</span>
</span><span id="XMLState.get_repositories_signing_keys-2377"><a href="#XMLState.get_repositories_signing_keys-2377"><span class="linenos">2377</span></a>        <span class="k">return</span> <span class="n">key_file_list</span>
</span></pre></div>


            <div class="docstring"><p>Get list of signing keys specified on the repositories</p>
</div>


                            </div>
                            <div id="XMLState.set_repository" class="classattr">
                                        <input id="XMLState.set_repository-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_repository</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>,</span><span class="param">	<span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.set_repository-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.set_repository"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.set_repository-2379"><a href="#XMLState.set_repository-2379"><span class="linenos">2379</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_repository</span><span class="p">(</span>
</span><span id="XMLState.set_repository-2380"><a href="#XMLState.set_repository-2380"><span class="linenos">2380</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="XMLState.set_repository-2381"><a href="#XMLState.set_repository-2381"><span class="linenos">2381</span></a>        <span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="XMLState.set_repository-2382"><a href="#XMLState.set_repository-2382"><span class="linenos">2382</span></a>        <span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.set_repository-2383"><a href="#XMLState.set_repository-2383"><span class="linenos">2383</span></a>        <span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.set_repository-2384"><a href="#XMLState.set_repository-2384"><span class="linenos">2384</span></a>        <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.set_repository-2385"><a href="#XMLState.set_repository-2385"><span class="linenos">2385</span></a>        <span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.set_repository-2386"><a href="#XMLState.set_repository-2386"><span class="linenos">2386</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2387"><a href="#XMLState.set_repository-2387"><span class="linenos">2387</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.set_repository-2388"><a href="#XMLState.set_repository-2388"><span class="linenos">2388</span></a><span class="sd">        Overwrite repository data of the first repository</span>
</span><span id="XMLState.set_repository-2389"><a href="#XMLState.set_repository-2389"><span class="linenos">2389</span></a>
</span><span id="XMLState.set_repository-2390"><a href="#XMLState.set_repository-2390"><span class="linenos">2390</span></a><span class="sd">        :param str repo_source: repository URI</span>
</span><span id="XMLState.set_repository-2391"><a href="#XMLState.set_repository-2391"><span class="linenos">2391</span></a><span class="sd">        :param str repo_type: type name defined by schema</span>
</span><span id="XMLState.set_repository-2392"><a href="#XMLState.set_repository-2392"><span class="linenos">2392</span></a><span class="sd">        :param str repo_alias: alias name</span>
</span><span id="XMLState.set_repository-2393"><a href="#XMLState.set_repository-2393"><span class="linenos">2393</span></a><span class="sd">        :param str repo_prio: priority number, package manager specific</span>
</span><span id="XMLState.set_repository-2394"><a href="#XMLState.set_repository-2394"><span class="linenos">2394</span></a><span class="sd">        :param bool repo_imageinclude: setup repository inside of the image</span>
</span><span id="XMLState.set_repository-2395"><a href="#XMLState.set_repository-2395"><span class="linenos">2395</span></a><span class="sd">        :param bool repo_package_gpgcheck: enable/disable package gpg checks</span>
</span><span id="XMLState.set_repository-2396"><a href="#XMLState.set_repository-2396"><span class="linenos">2396</span></a><span class="sd">        :param list repo_signing_keys: list of signing key file names</span>
</span><span id="XMLState.set_repository-2397"><a href="#XMLState.set_repository-2397"><span class="linenos">2397</span></a><span class="sd">        :param str components: component names for debian repos</span>
</span><span id="XMLState.set_repository-2398"><a href="#XMLState.set_repository-2398"><span class="linenos">2398</span></a><span class="sd">        :param str distribution: base distribution name for debian repos</span>
</span><span id="XMLState.set_repository-2399"><a href="#XMLState.set_repository-2399"><span class="linenos">2399</span></a><span class="sd">        :param bool repo_gpgcheck: enable/disable repo gpg checks</span>
</span><span id="XMLState.set_repository-2400"><a href="#XMLState.set_repository-2400"><span class="linenos">2400</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.set_repository-2401"><a href="#XMLState.set_repository-2401"><span class="linenos">2401</span></a>        <span class="n">repository_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span>
</span><span id="XMLState.set_repository-2402"><a href="#XMLState.set_repository-2402"><span class="linenos">2402</span></a>        <span class="k">if</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2403"><a href="#XMLState.set_repository-2403"><span class="linenos">2403</span></a>            <span class="n">repository</span> <span class="o">=</span> <span class="n">repository_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.set_repository-2404"><a href="#XMLState.set_repository-2404"><span class="linenos">2404</span></a>            <span class="k">if</span> <span class="n">repo_alias</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2405"><a href="#XMLState.set_repository-2405"><span class="linenos">2405</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_alias</span><span class="p">(</span><span class="n">repo_alias</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2406"><a href="#XMLState.set_repository-2406"><span class="linenos">2406</span></a>            <span class="k">if</span> <span class="n">repo_type</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2407"><a href="#XMLState.set_repository-2407"><span class="linenos">2407</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_type</span><span class="p">(</span><span class="n">repo_type</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2408"><a href="#XMLState.set_repository-2408"><span class="linenos">2408</span></a>            <span class="k">if</span> <span class="n">repo_source</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2409"><a href="#XMLState.set_repository-2409"><span class="linenos">2409</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span><span class="n">repo_source</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2410"><a href="#XMLState.set_repository-2410"><span class="linenos">2410</span></a>            <span class="k">if</span> <span class="n">repo_prio</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2411"><a href="#XMLState.set_repository-2411"><span class="linenos">2411</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_priority</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">repo_prio</span><span class="p">))</span>
</span><span id="XMLState.set_repository-2412"><a href="#XMLState.set_repository-2412"><span class="linenos">2412</span></a>            <span class="k">if</span> <span class="n">repo_imageinclude</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2413"><a href="#XMLState.set_repository-2413"><span class="linenos">2413</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_imageinclude</span><span class="p">(</span><span class="n">repo_imageinclude</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2414"><a href="#XMLState.set_repository-2414"><span class="linenos">2414</span></a>            <span class="k">if</span> <span class="n">repo_package_gpgcheck</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2415"><a href="#XMLState.set_repository-2415"><span class="linenos">2415</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_package_gpgcheck</span><span class="p">(</span><span class="n">repo_package_gpgcheck</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2416"><a href="#XMLState.set_repository-2416"><span class="linenos">2416</span></a>            <span class="k">if</span> <span class="n">repo_signing_keys</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2417"><a href="#XMLState.set_repository-2417"><span class="linenos">2417</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span><span class="o">.</span><span class="n">set_signing</span><span class="p">(</span>
</span><span id="XMLState.set_repository-2418"><a href="#XMLState.set_repository-2418"><span class="linenos">2418</span></a>                    <span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">signing</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">repo_signing_keys</span><span class="p">]</span>
</span><span id="XMLState.set_repository-2419"><a href="#XMLState.set_repository-2419"><span class="linenos">2419</span></a>                <span class="p">)</span>
</span><span id="XMLState.set_repository-2420"><a href="#XMLState.set_repository-2420"><span class="linenos">2420</span></a>            <span class="k">if</span> <span class="n">components</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2421"><a href="#XMLState.set_repository-2421"><span class="linenos">2421</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_components</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2422"><a href="#XMLState.set_repository-2422"><span class="linenos">2422</span></a>            <span class="k">if</span> <span class="n">distribution</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2423"><a href="#XMLState.set_repository-2423"><span class="linenos">2423</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_distribution</span><span class="p">(</span><span class="n">distribution</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2424"><a href="#XMLState.set_repository-2424"><span class="linenos">2424</span></a>            <span class="k">if</span> <span class="n">repo_gpgcheck</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2425"><a href="#XMLState.set_repository-2425"><span class="linenos">2425</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_repository_gpgcheck</span><span class="p">(</span><span class="n">repo_gpgcheck</span><span class="p">)</span>
</span><span id="XMLState.set_repository-2426"><a href="#XMLState.set_repository-2426"><span class="linenos">2426</span></a>            <span class="k">if</span> <span class="n">repo_sourcetype</span><span class="p">:</span>
</span><span id="XMLState.set_repository-2427"><a href="#XMLState.set_repository-2427"><span class="linenos">2427</span></a>                <span class="n">repository</span><span class="o">.</span><span class="n">set_sourcetype</span><span class="p">(</span><span class="n">repo_sourcetype</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Overwrite repository data of the first repository</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str repo_source</strong>:  repository URI</li>
<li><strong>str repo_type</strong>:  type name defined by schema</li>
<li><strong>str repo_alias</strong>:  alias name</li>
<li><strong>str repo_prio</strong>:  priority number, package manager specific</li>
<li><strong>bool repo_imageinclude</strong>:  setup repository inside of the image</li>
<li><strong>bool repo_package_gpgcheck</strong>:  enable/disable package gpg checks</li>
<li><strong>list repo_signing_keys</strong>:  list of signing key file names</li>
<li><strong>str components</strong>:  component names for debian repos</li>
<li><strong>str distribution</strong>:  base distribution name for debian repos</li>
<li><strong>bool repo_gpgcheck</strong>:  enable/disable repo gpg checks</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.add_repository" class="classattr">
                                        <input id="XMLState.add_repository-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_repository</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>,</span><span class="param">	<span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.add_repository-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.add_repository"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.add_repository-2429"><a href="#XMLState.add_repository-2429"><span class="linenos">2429</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_repository</span><span class="p">(</span>
</span><span id="XMLState.add_repository-2430"><a href="#XMLState.add_repository-2430"><span class="linenos">2430</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">repo_source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2431"><a href="#XMLState.add_repository-2431"><span class="linenos">2431</span></a>        <span class="n">repo_prio</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">repo_imageinclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2432"><a href="#XMLState.add_repository-2432"><span class="linenos">2432</span></a>        <span class="n">repo_package_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2433"><a href="#XMLState.add_repository-2433"><span class="linenos">2433</span></a>        <span class="n">repo_signing_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2434"><a href="#XMLState.add_repository-2434"><span class="linenos">2434</span></a>        <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">repo_gpgcheck</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2435"><a href="#XMLState.add_repository-2435"><span class="linenos">2435</span></a>        <span class="n">repo_sourcetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.add_repository-2436"><a href="#XMLState.add_repository-2436"><span class="linenos">2436</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.add_repository-2437"><a href="#XMLState.add_repository-2437"><span class="linenos">2437</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.add_repository-2438"><a href="#XMLState.add_repository-2438"><span class="linenos">2438</span></a><span class="sd">        Add a new repository section at the end of the list</span>
</span><span id="XMLState.add_repository-2439"><a href="#XMLState.add_repository-2439"><span class="linenos">2439</span></a>
</span><span id="XMLState.add_repository-2440"><a href="#XMLState.add_repository-2440"><span class="linenos">2440</span></a><span class="sd">        :param str repo_source: repository URI</span>
</span><span id="XMLState.add_repository-2441"><a href="#XMLState.add_repository-2441"><span class="linenos">2441</span></a><span class="sd">        :param str repo_type: type name defined by schema</span>
</span><span id="XMLState.add_repository-2442"><a href="#XMLState.add_repository-2442"><span class="linenos">2442</span></a><span class="sd">        :param str repo_alias: alias name</span>
</span><span id="XMLState.add_repository-2443"><a href="#XMLState.add_repository-2443"><span class="linenos">2443</span></a><span class="sd">        :param str repo_prio: priority number, package manager specific</span>
</span><span id="XMLState.add_repository-2444"><a href="#XMLState.add_repository-2444"><span class="linenos">2444</span></a><span class="sd">        :param bool repo_imageinclude: setup repository inside of the image</span>
</span><span id="XMLState.add_repository-2445"><a href="#XMLState.add_repository-2445"><span class="linenos">2445</span></a><span class="sd">        :param bool repo_package_gpgcheck: enable/disable package gpg checks</span>
</span><span id="XMLState.add_repository-2446"><a href="#XMLState.add_repository-2446"><span class="linenos">2446</span></a><span class="sd">        :param list repo_signing_keys: list of signing key file names</span>
</span><span id="XMLState.add_repository-2447"><a href="#XMLState.add_repository-2447"><span class="linenos">2447</span></a><span class="sd">        :param str components: component names for debian repos</span>
</span><span id="XMLState.add_repository-2448"><a href="#XMLState.add_repository-2448"><span class="linenos">2448</span></a><span class="sd">        :param str distribution: base distribution name for debian repos</span>
</span><span id="XMLState.add_repository-2449"><a href="#XMLState.add_repository-2449"><span class="linenos">2449</span></a><span class="sd">        :param bool repo_gpgcheck: enable/disable repo gpg checks</span>
</span><span id="XMLState.add_repository-2450"><a href="#XMLState.add_repository-2450"><span class="linenos">2450</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.add_repository-2451"><a href="#XMLState.add_repository-2451"><span class="linenos">2451</span></a>        <span class="n">priority_number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.add_repository-2452"><a href="#XMLState.add_repository-2452"><span class="linenos">2452</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="XMLState.add_repository-2453"><a href="#XMLState.add_repository-2453"><span class="linenos">2453</span></a>            <span class="n">priority_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">repo_prio</span><span class="p">)</span>
</span><span id="XMLState.add_repository-2454"><a href="#XMLState.add_repository-2454"><span class="linenos">2454</span></a>        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="XMLState.add_repository-2455"><a href="#XMLState.add_repository-2455"><span class="linenos">2455</span></a>            <span class="k">pass</span>
</span><span id="XMLState.add_repository-2456"><a href="#XMLState.add_repository-2456"><span class="linenos">2456</span></a>
</span><span id="XMLState.add_repository-2457"><a href="#XMLState.add_repository-2457"><span class="linenos">2457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_repository</span><span class="p">(</span>
</span><span id="XMLState.add_repository-2458"><a href="#XMLState.add_repository-2458"><span class="linenos">2458</span></a>            <span class="n">xml_parse</span><span class="o">.</span><span class="n">repository</span><span class="p">(</span>
</span><span id="XMLState.add_repository-2459"><a href="#XMLState.add_repository-2459"><span class="linenos">2459</span></a>                <span class="n">type_</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2460"><a href="#XMLState.add_repository-2460"><span class="linenos">2460</span></a>                <span class="n">alias</span><span class="o">=</span><span class="n">repo_alias</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2461"><a href="#XMLState.add_repository-2461"><span class="linenos">2461</span></a>                <span class="n">priority</span><span class="o">=</span><span class="n">priority_number</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2462"><a href="#XMLState.add_repository-2462"><span class="linenos">2462</span></a>                <span class="n">source</span><span class="o">=</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">source</span><span class="p">(</span>
</span><span id="XMLState.add_repository-2463"><a href="#XMLState.add_repository-2463"><span class="linenos">2463</span></a>                    <span class="n">path</span><span class="o">=</span><span class="n">repo_source</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2464"><a href="#XMLState.add_repository-2464"><span class="linenos">2464</span></a>                    <span class="n">signing</span><span class="o">=</span><span class="p">[</span>
</span><span id="XMLState.add_repository-2465"><a href="#XMLState.add_repository-2465"><span class="linenos">2465</span></a>                        <span class="n">xml_parse</span><span class="o">.</span><span class="n">signing</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">repo_signing_keys</span>
</span><span id="XMLState.add_repository-2466"><a href="#XMLState.add_repository-2466"><span class="linenos">2466</span></a>                    <span class="p">]</span>
</span><span id="XMLState.add_repository-2467"><a href="#XMLState.add_repository-2467"><span class="linenos">2467</span></a>                <span class="p">),</span>
</span><span id="XMLState.add_repository-2468"><a href="#XMLState.add_repository-2468"><span class="linenos">2468</span></a>                <span class="n">imageinclude</span><span class="o">=</span><span class="n">repo_imageinclude</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2469"><a href="#XMLState.add_repository-2469"><span class="linenos">2469</span></a>                <span class="n">package_gpgcheck</span><span class="o">=</span><span class="n">repo_package_gpgcheck</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2470"><a href="#XMLState.add_repository-2470"><span class="linenos">2470</span></a>                <span class="n">repository_gpgcheck</span><span class="o">=</span><span class="n">repo_gpgcheck</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2471"><a href="#XMLState.add_repository-2471"><span class="linenos">2471</span></a>                <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2472"><a href="#XMLState.add_repository-2472"><span class="linenos">2472</span></a>                <span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span>
</span><span id="XMLState.add_repository-2473"><a href="#XMLState.add_repository-2473"><span class="linenos">2473</span></a>                <span class="n">sourcetype</span><span class="o">=</span><span class="n">repo_sourcetype</span>
</span><span id="XMLState.add_repository-2474"><a href="#XMLState.add_repository-2474"><span class="linenos">2474</span></a>            <span class="p">)</span>
</span><span id="XMLState.add_repository-2475"><a href="#XMLState.add_repository-2475"><span class="linenos">2475</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add a new repository section at the end of the list</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str repo_source</strong>:  repository URI</li>
<li><strong>str repo_type</strong>:  type name defined by schema</li>
<li><strong>str repo_alias</strong>:  alias name</li>
<li><strong>str repo_prio</strong>:  priority number, package manager specific</li>
<li><strong>bool repo_imageinclude</strong>:  setup repository inside of the image</li>
<li><strong>bool repo_package_gpgcheck</strong>:  enable/disable package gpg checks</li>
<li><strong>list repo_signing_keys</strong>:  list of signing key file names</li>
<li><strong>str components</strong>:  component names for debian repos</li>
<li><strong>str distribution</strong>:  base distribution name for debian repos</li>
<li><strong>bool repo_gpgcheck</strong>:  enable/disable repo gpg checks</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.add_certificate" class="classattr">
                                        <input id="XMLState.add_certificate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_certificate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">cert_file</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">target_distribution</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.add_certificate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.add_certificate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.add_certificate-2477"><a href="#XMLState.add_certificate-2477"><span class="linenos">2477</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cert_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_distribution</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.add_certificate-2478"><a href="#XMLState.add_certificate-2478"><span class="linenos">2478</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.add_certificate-2479"><a href="#XMLState.add_certificate-2479"><span class="linenos">2479</span></a><span class="sd">        Add &lt;certificate name=&quot;cert_file&quot;&gt; to main &lt;certificates&gt; section</span>
</span><span id="XMLState.add_certificate-2480"><a href="#XMLState.add_certificate-2480"><span class="linenos">2480</span></a><span class="sd">        The main section will be created if it does not exist. Also</span>
</span><span id="XMLState.add_certificate-2481"><a href="#XMLState.add_certificate-2481"><span class="linenos">2481</span></a><span class="sd">        setup the target_distribution in the resulting main section.</span>
</span><span id="XMLState.add_certificate-2482"><a href="#XMLState.add_certificate-2482"><span class="linenos">2482</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.add_certificate-2483"><a href="#XMLState.add_certificate-2483"><span class="linenos">2483</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.add_certificate-2484"><a href="#XMLState.add_certificate-2484"><span class="linenos">2484</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="XMLState.add_certificate-2485"><a href="#XMLState.add_certificate-2485"><span class="linenos">2485</span></a>        <span class="p">)</span>
</span><span id="XMLState.add_certificate-2486"><a href="#XMLState.add_certificate-2486"><span class="linenos">2486</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="XMLState.add_certificate-2487"><a href="#XMLState.add_certificate-2487"><span class="linenos">2487</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_certificates</span><span class="p">(</span>
</span><span id="XMLState.add_certificate-2488"><a href="#XMLState.add_certificate-2488"><span class="linenos">2488</span></a>                <span class="p">[</span>
</span><span id="XMLState.add_certificate-2489"><a href="#XMLState.add_certificate-2489"><span class="linenos">2489</span></a>                    <span class="n">xml_parse</span><span class="o">.</span><span class="n">certificates</span><span class="p">(</span>
</span><span id="XMLState.add_certificate-2490"><a href="#XMLState.add_certificate-2490"><span class="linenos">2490</span></a>                        <span class="n">target_distribution</span><span class="o">=</span><span class="n">target_distribution</span><span class="p">,</span>
</span><span id="XMLState.add_certificate-2491"><a href="#XMLState.add_certificate-2491"><span class="linenos">2491</span></a>                        <span class="n">certificate</span><span class="o">=</span><span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">certificate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">cert_file</span><span class="p">)]</span>
</span><span id="XMLState.add_certificate-2492"><a href="#XMLState.add_certificate-2492"><span class="linenos">2492</span></a>                    <span class="p">)</span>
</span><span id="XMLState.add_certificate-2493"><a href="#XMLState.add_certificate-2493"><span class="linenos">2493</span></a>                <span class="p">]</span>
</span><span id="XMLState.add_certificate-2494"><a href="#XMLState.add_certificate-2494"><span class="linenos">2494</span></a>            <span class="p">)</span>
</span><span id="XMLState.add_certificate-2495"><a href="#XMLState.add_certificate-2495"><span class="linenos">2495</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.add_certificate-2496"><a href="#XMLState.add_certificate-2496"><span class="linenos">2496</span></a>            <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_target_distribution</span><span class="p">(</span>
</span><span id="XMLState.add_certificate-2497"><a href="#XMLState.add_certificate-2497"><span class="linenos">2497</span></a>                <span class="n">target_distribution</span>
</span><span id="XMLState.add_certificate-2498"><a href="#XMLState.add_certificate-2498"><span class="linenos">2498</span></a>            <span class="p">)</span>
</span><span id="XMLState.add_certificate-2499"><a href="#XMLState.add_certificate-2499"><span class="linenos">2499</span></a>            <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_certificate</span><span class="p">(</span>
</span><span id="XMLState.add_certificate-2500"><a href="#XMLState.add_certificate-2500"><span class="linenos">2500</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">certificate</span><span class="p">(</span>
</span><span id="XMLState.add_certificate-2501"><a href="#XMLState.add_certificate-2501"><span class="linenos">2501</span></a>                    <span class="n">name</span><span class="o">=</span><span class="n">cert_file</span>
</span><span id="XMLState.add_certificate-2502"><a href="#XMLState.add_certificate-2502"><span class="linenos">2502</span></a>                <span class="p">)</span>
</span><span id="XMLState.add_certificate-2503"><a href="#XMLState.add_certificate-2503"><span class="linenos">2503</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add <certificate name="cert_file"> to main <certificates> section
The main section will be created if it does not exist. Also
setup the target_distribution in the resulting main section.</p>
</div>


                            </div>
                            <div id="XMLState.get_certificates" class="classattr">
                                        <input id="XMLState.get_certificates-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_certificates</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_certificates-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_certificates"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_certificates-2505"><a href="#XMLState.get_certificates-2505"><span class="linenos">2505</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_certificates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_certificates-2506"><a href="#XMLState.get_certificates-2506"><span class="linenos">2506</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_certificates-2507"><a href="#XMLState.get_certificates-2507"><span class="linenos">2507</span></a><span class="sd">        Read list of certificates</span>
</span><span id="XMLState.get_certificates-2508"><a href="#XMLState.get_certificates-2508"><span class="linenos">2508</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_certificates-2509"><a href="#XMLState.get_certificates-2509"><span class="linenos">2509</span></a>        <span class="n">cert_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_certificates-2510"><a href="#XMLState.get_certificates-2510"><span class="linenos">2510</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.get_certificates-2511"><a href="#XMLState.get_certificates-2511"><span class="linenos">2511</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="XMLState.get_certificates-2512"><a href="#XMLState.get_certificates-2512"><span class="linenos">2512</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_certificates-2513"><a href="#XMLState.get_certificates-2513"><span class="linenos">2513</span></a>        <span class="k">if</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="XMLState.get_certificates-2514"><a href="#XMLState.get_certificates-2514"><span class="linenos">2514</span></a>            <span class="k">for</span> <span class="n">certificate</span> <span class="ow">in</span> <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_certificate</span><span class="p">():</span>
</span><span id="XMLState.get_certificates-2515"><a href="#XMLState.get_certificates-2515"><span class="linenos">2515</span></a>                <span class="n">cert_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">certificate</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_certificates-2516"><a href="#XMLState.get_certificates-2516"><span class="linenos">2516</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cert_list</span><span class="p">)))</span>
</span></pre></div>


            <div class="docstring"><p>Read list of certificates</p>
</div>


                            </div>
                            <div id="XMLState.get_certificates_target_distribution" class="classattr">
                                        <input id="XMLState.get_certificates_target_distribution-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_certificates_target_distribution</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_certificates_target_distribution-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_certificates_target_distribution"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_certificates_target_distribution-2518"><a href="#XMLState.get_certificates_target_distribution-2518"><span class="linenos">2518</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_certificates_target_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_certificates_target_distribution-2519"><a href="#XMLState.get_certificates_target_distribution-2519"><span class="linenos">2519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_certificates_target_distribution-2520"><a href="#XMLState.get_certificates_target_distribution-2520"><span class="linenos">2520</span></a><span class="sd">        Read CA target distribution</span>
</span><span id="XMLState.get_certificates_target_distribution-2521"><a href="#XMLState.get_certificates_target_distribution-2521"><span class="linenos">2521</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_certificates_target_distribution-2522"><a href="#XMLState.get_certificates_target_distribution-2522"><span class="linenos">2522</span></a>        <span class="n">target_distribution</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="XMLState.get_certificates_target_distribution-2523"><a href="#XMLState.get_certificates_target_distribution-2523"><span class="linenos">2523</span></a>        <span class="n">certificates_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.get_certificates_target_distribution-2524"><a href="#XMLState.get_certificates_target_distribution-2524"><span class="linenos">2524</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()</span>
</span><span id="XMLState.get_certificates_target_distribution-2525"><a href="#XMLState.get_certificates_target_distribution-2525"><span class="linenos">2525</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_certificates_target_distribution-2526"><a href="#XMLState.get_certificates_target_distribution-2526"><span class="linenos">2526</span></a>        <span class="k">if</span> <span class="n">certificates_section</span><span class="p">:</span>
</span><span id="XMLState.get_certificates_target_distribution-2527"><a href="#XMLState.get_certificates_target_distribution-2527"><span class="linenos">2527</span></a>            <span class="n">target_distribution</span> <span class="o">=</span> \
</span><span id="XMLState.get_certificates_target_distribution-2528"><a href="#XMLState.get_certificates_target_distribution-2528"><span class="linenos">2528</span></a>                <span class="n">certificates_section</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_target_distribution</span><span class="p">()</span>
</span><span id="XMLState.get_certificates_target_distribution-2529"><a href="#XMLState.get_certificates_target_distribution-2529"><span class="linenos">2529</span></a>        <span class="k">return</span> <span class="n">target_distribution</span>
</span></pre></div>


            <div class="docstring"><p>Read CA target distribution</p>
</div>


                            </div>
                            <div id="XMLState.resolve_this_path" class="classattr">
                                        <input id="XMLState.resolve_this_path-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">resolve_this_path</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.resolve_this_path-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.resolve_this_path"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.resolve_this_path-2531"><a href="#XMLState.resolve_this_path-2531"><span class="linenos">2531</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_this_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.resolve_this_path-2532"><a href="#XMLState.resolve_this_path-2532"><span class="linenos">2532</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.resolve_this_path-2533"><a href="#XMLState.resolve_this_path-2533"><span class="linenos">2533</span></a><span class="sd">        Resolve any this:// repo source path into the path</span>
</span><span id="XMLState.resolve_this_path-2534"><a href="#XMLState.resolve_this_path-2534"><span class="linenos">2534</span></a><span class="sd">        representing the target inside of the image description</span>
</span><span id="XMLState.resolve_this_path-2535"><a href="#XMLState.resolve_this_path-2535"><span class="linenos">2535</span></a><span class="sd">        directory</span>
</span><span id="XMLState.resolve_this_path-2536"><a href="#XMLState.resolve_this_path-2536"><span class="linenos">2536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.resolve_this_path-2537"><a href="#XMLState.resolve_this_path-2537"><span class="linenos">2537</span></a>        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_repository_sections</span><span class="p">()</span> <span class="ow">or</span> <span class="p">[]:</span>
</span><span id="XMLState.resolve_this_path-2538"><a href="#XMLState.resolve_this_path-2538"><span class="linenos">2538</span></a>            <span class="n">repo_source</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span>
</span><span id="XMLState.resolve_this_path-2539"><a href="#XMLState.resolve_this_path-2539"><span class="linenos">2539</span></a>            <span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_source</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
</span><span id="XMLState.resolve_this_path-2540"><a href="#XMLState.resolve_this_path-2540"><span class="linenos">2540</span></a>            <span class="k">if</span> <span class="n">repo_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;this://&#39;</span><span class="p">):</span>
</span><span id="XMLState.resolve_this_path-2541"><a href="#XMLState.resolve_this_path-2541"><span class="linenos">2541</span></a>                <span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;this://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState.resolve_this_path-2542"><a href="#XMLState.resolve_this_path-2542"><span class="linenos">2542</span></a>                <span class="n">repo_source</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span>
</span><span id="XMLState.resolve_this_path-2543"><a href="#XMLState.resolve_this_path-2543"><span class="linenos">2543</span></a>                    <span class="s1">&#39;dir://</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="XMLState.resolve_this_path-2544"><a href="#XMLState.resolve_this_path-2544"><span class="linenos">2544</span></a>                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span>
</span><span id="XMLState.resolve_this_path-2545"><a href="#XMLState.resolve_this_path-2545"><span class="linenos">2545</span></a>                            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="XMLState.resolve_this_path-2546"><a href="#XMLState.resolve_this_path-2546"><span class="linenos">2546</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">description_dir</span><span class="p">,</span> <span class="n">repo_path</span>
</span><span id="XMLState.resolve_this_path-2547"><a href="#XMLState.resolve_this_path-2547"><span class="linenos">2547</span></a>                            <span class="p">)</span>
</span><span id="XMLState.resolve_this_path-2548"><a href="#XMLState.resolve_this_path-2548"><span class="linenos">2548</span></a>                        <span class="p">)</span>
</span><span id="XMLState.resolve_this_path-2549"><a href="#XMLState.resolve_this_path-2549"><span class="linenos">2549</span></a>                    <span class="p">)</span>
</span><span id="XMLState.resolve_this_path-2550"><a href="#XMLState.resolve_this_path-2550"><span class="linenos">2550</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Resolve any this:// repo source path into the path
representing the target inside of the image description
directory</p>
</div>


                            </div>
                            <div id="XMLState.copy_displayname" class="classattr">
                                        <input id="XMLState.copy_displayname-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_displayname</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_displayname-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_displayname"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_displayname-2552"><a href="#XMLState.copy_displayname-2552"><span class="linenos">2552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_displayname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_displayname-2553"><a href="#XMLState.copy_displayname-2553"><span class="linenos">2553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_displayname-2554"><a href="#XMLState.copy_displayname-2554"><span class="linenos">2554</span></a><span class="sd">        Copy image displayname from this xml state to the target xml state</span>
</span><span id="XMLState.copy_displayname-2555"><a href="#XMLState.copy_displayname-2555"><span class="linenos">2555</span></a>
</span><span id="XMLState.copy_displayname-2556"><a href="#XMLState.copy_displayname-2556"><span class="linenos">2556</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_displayname-2557"><a href="#XMLState.copy_displayname-2557"><span class="linenos">2557</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_displayname-2558"><a href="#XMLState.copy_displayname-2558"><span class="linenos">2558</span></a>        <span class="n">displayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_displayname</span><span class="p">()</span>
</span><span id="XMLState.copy_displayname-2559"><a href="#XMLState.copy_displayname-2559"><span class="linenos">2559</span></a>        <span class="k">if</span> <span class="n">displayname</span><span class="p">:</span>
</span><span id="XMLState.copy_displayname-2560"><a href="#XMLState.copy_displayname-2560"><span class="linenos">2560</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_displayname</span><span class="p">(</span><span class="n">displayname</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy image displayname from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_name" class="classattr">
                                        <input id="XMLState.copy_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_name-2562"><a href="#XMLState.copy_name-2562"><span class="linenos">2562</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_name-2563"><a href="#XMLState.copy_name-2563"><span class="linenos">2563</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_name-2564"><a href="#XMLState.copy_name-2564"><span class="linenos">2564</span></a><span class="sd">        Copy image name from this xml state to the target xml state</span>
</span><span id="XMLState.copy_name-2565"><a href="#XMLState.copy_name-2565"><span class="linenos">2565</span></a>
</span><span id="XMLState.copy_name-2566"><a href="#XMLState.copy_name-2566"><span class="linenos">2566</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_name-2567"><a href="#XMLState.copy_name-2567"><span class="linenos">2567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_name-2568"><a href="#XMLState.copy_name-2568"><span class="linenos">2568</span></a>        <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span>
</span><span id="XMLState.copy_name-2569"><a href="#XMLState.copy_name-2569"><span class="linenos">2569</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.copy_name-2570"><a href="#XMLState.copy_name-2570"><span class="linenos">2570</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy image name from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_drivers_sections" class="classattr">
                                        <input id="XMLState.copy_drivers_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_drivers_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_drivers_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_drivers_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_drivers_sections-2572"><a href="#XMLState.copy_drivers_sections-2572"><span class="linenos">2572</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_drivers_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_drivers_sections-2573"><a href="#XMLState.copy_drivers_sections-2573"><span class="linenos">2573</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_drivers_sections-2574"><a href="#XMLState.copy_drivers_sections-2574"><span class="linenos">2574</span></a><span class="sd">        Copy drivers sections from this xml state to the target xml state</span>
</span><span id="XMLState.copy_drivers_sections-2575"><a href="#XMLState.copy_drivers_sections-2575"><span class="linenos">2575</span></a>
</span><span id="XMLState.copy_drivers_sections-2576"><a href="#XMLState.copy_drivers_sections-2576"><span class="linenos">2576</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_drivers_sections-2577"><a href="#XMLState.copy_drivers_sections-2577"><span class="linenos">2577</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_drivers_sections-2578"><a href="#XMLState.copy_drivers_sections-2578"><span class="linenos">2578</span></a>        <span class="n">drivers_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.copy_drivers_sections-2579"><a href="#XMLState.copy_drivers_sections-2579"><span class="linenos">2579</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_drivers</span><span class="p">()</span>
</span><span id="XMLState.copy_drivers_sections-2580"><a href="#XMLState.copy_drivers_sections-2580"><span class="linenos">2580</span></a>        <span class="p">)</span>
</span><span id="XMLState.copy_drivers_sections-2581"><a href="#XMLState.copy_drivers_sections-2581"><span class="linenos">2581</span></a>        <span class="k">if</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_drivers_sections-2582"><a href="#XMLState.copy_drivers_sections-2582"><span class="linenos">2582</span></a>            <span class="k">for</span> <span class="n">drivers_section</span> <span class="ow">in</span> <span class="n">drivers_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_drivers_sections-2583"><a href="#XMLState.copy_drivers_sections-2583"><span class="linenos">2583</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_drivers</span><span class="p">(</span><span class="n">drivers_section</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy drivers sections from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_systemdisk_section" class="classattr">
                                        <input id="XMLState.copy_systemdisk_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_systemdisk_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_systemdisk_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_systemdisk_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_systemdisk_section-2585"><a href="#XMLState.copy_systemdisk_section-2585"><span class="linenos">2585</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_systemdisk_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_systemdisk_section-2586"><a href="#XMLState.copy_systemdisk_section-2586"><span class="linenos">2586</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_systemdisk_section-2587"><a href="#XMLState.copy_systemdisk_section-2587"><span class="linenos">2587</span></a><span class="sd">        Copy systemdisk sections from this xml state to the target xml state</span>
</span><span id="XMLState.copy_systemdisk_section-2588"><a href="#XMLState.copy_systemdisk_section-2588"><span class="linenos">2588</span></a>
</span><span id="XMLState.copy_systemdisk_section-2589"><a href="#XMLState.copy_systemdisk_section-2589"><span class="linenos">2589</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_systemdisk_section-2590"><a href="#XMLState.copy_systemdisk_section-2590"><span class="linenos">2590</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_systemdisk_section-2591"><a href="#XMLState.copy_systemdisk_section-2591"><span class="linenos">2591</span></a>        <span class="n">systemdisk_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_system_disk_section</span><span class="p">()</span>
</span><span id="XMLState.copy_systemdisk_section-2592"><a href="#XMLState.copy_systemdisk_section-2592"><span class="linenos">2592</span></a>        <span class="k">if</span> <span class="n">systemdisk_section</span><span class="p">:</span>
</span><span id="XMLState.copy_systemdisk_section-2593"><a href="#XMLState.copy_systemdisk_section-2593"><span class="linenos">2593</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_systemdisk</span><span class="p">(</span>
</span><span id="XMLState.copy_systemdisk_section-2594"><a href="#XMLState.copy_systemdisk_section-2594"><span class="linenos">2594</span></a>                <span class="p">[</span><span class="n">systemdisk_section</span><span class="p">]</span>
</span><span id="XMLState.copy_systemdisk_section-2595"><a href="#XMLState.copy_systemdisk_section-2595"><span class="linenos">2595</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy systemdisk sections from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_strip_sections" class="classattr">
                                        <input id="XMLState.copy_strip_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_strip_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_strip_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_strip_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_strip_sections-2597"><a href="#XMLState.copy_strip_sections-2597"><span class="linenos">2597</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_strip_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_strip_sections-2598"><a href="#XMLState.copy_strip_sections-2598"><span class="linenos">2598</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_strip_sections-2599"><a href="#XMLState.copy_strip_sections-2599"><span class="linenos">2599</span></a><span class="sd">        Copy strip sections from this xml state to the target xml state</span>
</span><span id="XMLState.copy_strip_sections-2600"><a href="#XMLState.copy_strip_sections-2600"><span class="linenos">2600</span></a>
</span><span id="XMLState.copy_strip_sections-2601"><a href="#XMLState.copy_strip_sections-2601"><span class="linenos">2601</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_strip_sections-2602"><a href="#XMLState.copy_strip_sections-2602"><span class="linenos">2602</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_strip_sections-2603"><a href="#XMLState.copy_strip_sections-2603"><span class="linenos">2603</span></a>        <span class="n">strip_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.copy_strip_sections-2604"><a href="#XMLState.copy_strip_sections-2604"><span class="linenos">2604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_strip</span><span class="p">()</span>
</span><span id="XMLState.copy_strip_sections-2605"><a href="#XMLState.copy_strip_sections-2605"><span class="linenos">2605</span></a>        <span class="p">)</span>
</span><span id="XMLState.copy_strip_sections-2606"><a href="#XMLState.copy_strip_sections-2606"><span class="linenos">2606</span></a>        <span class="k">if</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_strip_sections-2607"><a href="#XMLState.copy_strip_sections-2607"><span class="linenos">2607</span></a>            <span class="k">for</span> <span class="n">strip_section</span> <span class="ow">in</span> <span class="n">strip_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_strip_sections-2608"><a href="#XMLState.copy_strip_sections-2608"><span class="linenos">2608</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_strip</span><span class="p">(</span><span class="n">strip_section</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy strip sections from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_machine_section" class="classattr">
                                        <input id="XMLState.copy_machine_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_machine_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_machine_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_machine_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_machine_section-2610"><a href="#XMLState.copy_machine_section-2610"><span class="linenos">2610</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_machine_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_machine_section-2611"><a href="#XMLState.copy_machine_section-2611"><span class="linenos">2611</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_machine_section-2612"><a href="#XMLState.copy_machine_section-2612"><span class="linenos">2612</span></a><span class="sd">        Copy machine sections from this xml state to the target xml state</span>
</span><span id="XMLState.copy_machine_section-2613"><a href="#XMLState.copy_machine_section-2613"><span class="linenos">2613</span></a>
</span><span id="XMLState.copy_machine_section-2614"><a href="#XMLState.copy_machine_section-2614"><span class="linenos">2614</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_machine_section-2615"><a href="#XMLState.copy_machine_section-2615"><span class="linenos">2615</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_machine_section-2616"><a href="#XMLState.copy_machine_section-2616"><span class="linenos">2616</span></a>        <span class="n">machine_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_machine_section</span><span class="p">()</span>
</span><span id="XMLState.copy_machine_section-2617"><a href="#XMLState.copy_machine_section-2617"><span class="linenos">2617</span></a>        <span class="k">if</span> <span class="n">machine_section</span><span class="p">:</span>
</span><span id="XMLState.copy_machine_section-2618"><a href="#XMLState.copy_machine_section-2618"><span class="linenos">2618</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_machine</span><span class="p">(</span>
</span><span id="XMLState.copy_machine_section-2619"><a href="#XMLState.copy_machine_section-2619"><span class="linenos">2619</span></a>                <span class="p">[</span><span class="n">machine_section</span><span class="p">]</span>
</span><span id="XMLState.copy_machine_section-2620"><a href="#XMLState.copy_machine_section-2620"><span class="linenos">2620</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy machine sections from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_bootloader_section" class="classattr">
                                        <input id="XMLState.copy_bootloader_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_bootloader_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_bootloader_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_bootloader_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_bootloader_section-2622"><a href="#XMLState.copy_bootloader_section-2622"><span class="linenos">2622</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootloader_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_bootloader_section-2623"><a href="#XMLState.copy_bootloader_section-2623"><span class="linenos">2623</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootloader_section-2624"><a href="#XMLState.copy_bootloader_section-2624"><span class="linenos">2624</span></a><span class="sd">        Copy bootloader section from this xml state to the target xml state</span>
</span><span id="XMLState.copy_bootloader_section-2625"><a href="#XMLState.copy_bootloader_section-2625"><span class="linenos">2625</span></a>
</span><span id="XMLState.copy_bootloader_section-2626"><a href="#XMLState.copy_bootloader_section-2626"><span class="linenos">2626</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_bootloader_section-2627"><a href="#XMLState.copy_bootloader_section-2627"><span class="linenos">2627</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootloader_section-2628"><a href="#XMLState.copy_bootloader_section-2628"><span class="linenos">2628</span></a>        <span class="n">bootloader_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_bootloader_section</span><span class="p">()</span>
</span><span id="XMLState.copy_bootloader_section-2629"><a href="#XMLState.copy_bootloader_section-2629"><span class="linenos">2629</span></a>        <span class="k">if</span> <span class="n">bootloader_section</span><span class="p">:</span>
</span><span id="XMLState.copy_bootloader_section-2630"><a href="#XMLState.copy_bootloader_section-2630"><span class="linenos">2630</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_bootloader</span><span class="p">(</span>
</span><span id="XMLState.copy_bootloader_section-2631"><a href="#XMLState.copy_bootloader_section-2631"><span class="linenos">2631</span></a>                <span class="p">[</span><span class="n">bootloader_section</span><span class="p">]</span>
</span><span id="XMLState.copy_bootloader_section-2632"><a href="#XMLState.copy_bootloader_section-2632"><span class="linenos">2632</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy bootloader section from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_oemconfig_section" class="classattr">
                                        <input id="XMLState.copy_oemconfig_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_oemconfig_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_oemconfig_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_oemconfig_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_oemconfig_section-2634"><a href="#XMLState.copy_oemconfig_section-2634"><span class="linenos">2634</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_oemconfig_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_oemconfig_section-2635"><a href="#XMLState.copy_oemconfig_section-2635"><span class="linenos">2635</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_oemconfig_section-2636"><a href="#XMLState.copy_oemconfig_section-2636"><span class="linenos">2636</span></a><span class="sd">        Copy oemconfig sections from this xml state to the target xml state</span>
</span><span id="XMLState.copy_oemconfig_section-2637"><a href="#XMLState.copy_oemconfig_section-2637"><span class="linenos">2637</span></a>
</span><span id="XMLState.copy_oemconfig_section-2638"><a href="#XMLState.copy_oemconfig_section-2638"><span class="linenos">2638</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_oemconfig_section-2639"><a href="#XMLState.copy_oemconfig_section-2639"><span class="linenos">2639</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_oemconfig_section-2640"><a href="#XMLState.copy_oemconfig_section-2640"><span class="linenos">2640</span></a>        <span class="n">oemconfig_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_oemconfig_section</span><span class="p">()</span>
</span><span id="XMLState.copy_oemconfig_section-2641"><a href="#XMLState.copy_oemconfig_section-2641"><span class="linenos">2641</span></a>        <span class="k">if</span> <span class="n">oemconfig_section</span><span class="p">:</span>
</span><span id="XMLState.copy_oemconfig_section-2642"><a href="#XMLState.copy_oemconfig_section-2642"><span class="linenos">2642</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_oemconfig</span><span class="p">(</span>
</span><span id="XMLState.copy_oemconfig_section-2643"><a href="#XMLState.copy_oemconfig_section-2643"><span class="linenos">2643</span></a>                <span class="p">[</span><span class="n">oemconfig_section</span><span class="p">]</span>
</span><span id="XMLState.copy_oemconfig_section-2644"><a href="#XMLState.copy_oemconfig_section-2644"><span class="linenos">2644</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy oemconfig sections from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_repository_sections" class="classattr">
                                        <input id="XMLState.copy_repository_sections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_repository_sections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span>, </span><span class="param"><span class="n">wipe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_repository_sections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_repository_sections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_repository_sections-2646"><a href="#XMLState.copy_repository_sections-2646"><span class="linenos">2646</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_repository_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_repository_sections-2647"><a href="#XMLState.copy_repository_sections-2647"><span class="linenos">2647</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">wipe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="XMLState.copy_repository_sections-2648"><a href="#XMLState.copy_repository_sections-2648"><span class="linenos">2648</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_repository_sections-2649"><a href="#XMLState.copy_repository_sections-2649"><span class="linenos">2649</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_repository_sections-2650"><a href="#XMLState.copy_repository_sections-2650"><span class="linenos">2650</span></a><span class="sd">        Copy repository sections from this xml state to the target xml state</span>
</span><span id="XMLState.copy_repository_sections-2651"><a href="#XMLState.copy_repository_sections-2651"><span class="linenos">2651</span></a>
</span><span id="XMLState.copy_repository_sections-2652"><a href="#XMLState.copy_repository_sections-2652"><span class="linenos">2652</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_repository_sections-2653"><a href="#XMLState.copy_repository_sections-2653"><span class="linenos">2653</span></a><span class="sd">        :param bool wipe: delete all repos in target prior to copy</span>
</span><span id="XMLState.copy_repository_sections-2654"><a href="#XMLState.copy_repository_sections-2654"><span class="linenos">2654</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_repository_sections-2655"><a href="#XMLState.copy_repository_sections-2655"><span class="linenos">2655</span></a>        <span class="n">repository_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiled</span><span class="p">(</span>
</span><span id="XMLState.copy_repository_sections-2656"><a href="#XMLState.copy_repository_sections-2656"><span class="linenos">2656</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">get_repository</span><span class="p">()</span>
</span><span id="XMLState.copy_repository_sections-2657"><a href="#XMLState.copy_repository_sections-2657"><span class="linenos">2657</span></a>        <span class="p">)</span>
</span><span id="XMLState.copy_repository_sections-2658"><a href="#XMLState.copy_repository_sections-2658"><span class="linenos">2658</span></a>        <span class="k">if</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_repository_sections-2659"><a href="#XMLState.copy_repository_sections-2659"><span class="linenos">2659</span></a>            <span class="k">if</span> <span class="n">wipe</span><span class="p">:</span>
</span><span id="XMLState.copy_repository_sections-2660"><a href="#XMLState.copy_repository_sections-2660"><span class="linenos">2660</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">set_repository</span><span class="p">([])</span>
</span><span id="XMLState.copy_repository_sections-2661"><a href="#XMLState.copy_repository_sections-2661"><span class="linenos">2661</span></a>            <span class="k">for</span> <span class="n">repository_section</span> <span class="ow">in</span> <span class="n">repository_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_repository_sections-2662"><a href="#XMLState.copy_repository_sections-2662"><span class="linenos">2662</span></a>                <span class="n">repository_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">repository_section</span><span class="p">)</span>
</span><span id="XMLState.copy_repository_sections-2663"><a href="#XMLState.copy_repository_sections-2663"><span class="linenos">2663</span></a>                <span class="c1"># profiles are not copied because they might not exist</span>
</span><span id="XMLState.copy_repository_sections-2664"><a href="#XMLState.copy_repository_sections-2664"><span class="linenos">2664</span></a>                <span class="c1"># in the target description</span>
</span><span id="XMLState.copy_repository_sections-2665"><a href="#XMLState.copy_repository_sections-2665"><span class="linenos">2665</span></a>                <span class="n">repository_copy</span><span class="o">.</span><span class="n">set_profiles</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span><span id="XMLState.copy_repository_sections-2666"><a href="#XMLState.copy_repository_sections-2666"><span class="linenos">2666</span></a>                <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_repository</span><span class="p">(</span><span class="n">repository_copy</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy repository sections from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
<li><strong>bool wipe</strong>:  delete all repos in target prior to copy</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_preferences_subsections" class="classattr">
                                        <input id="XMLState.copy_preferences_subsections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_preferences_subsections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">section_names</span><span class="p">:</span> <span class="n">List</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_preferences_subsections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_preferences_subsections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_preferences_subsections-2668"><a href="#XMLState.copy_preferences_subsections-2668"><span class="linenos">2668</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_preferences_subsections</span><span class="p">(</span>
</span><span id="XMLState.copy_preferences_subsections-2669"><a href="#XMLState.copy_preferences_subsections-2669"><span class="linenos">2669</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">section_names</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="XMLState.copy_preferences_subsections-2670"><a href="#XMLState.copy_preferences_subsections-2670"><span class="linenos">2670</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_preferences_subsections-2671"><a href="#XMLState.copy_preferences_subsections-2671"><span class="linenos">2671</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_preferences_subsections-2672"><a href="#XMLState.copy_preferences_subsections-2672"><span class="linenos">2672</span></a><span class="sd">        Copy subsections of the preferences sections, matching given</span>
</span><span id="XMLState.copy_preferences_subsections-2673"><a href="#XMLState.copy_preferences_subsections-2673"><span class="linenos">2673</span></a><span class="sd">        section names, from this xml state to the target xml state</span>
</span><span id="XMLState.copy_preferences_subsections-2674"><a href="#XMLState.copy_preferences_subsections-2674"><span class="linenos">2674</span></a>
</span><span id="XMLState.copy_preferences_subsections-2675"><a href="#XMLState.copy_preferences_subsections-2675"><span class="linenos">2675</span></a><span class="sd">        :param list section_names: preferences subsection names</span>
</span><span id="XMLState.copy_preferences_subsections-2676"><a href="#XMLState.copy_preferences_subsections-2676"><span class="linenos">2676</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_preferences_subsections-2677"><a href="#XMLState.copy_preferences_subsections-2677"><span class="linenos">2677</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_preferences_subsections-2678"><a href="#XMLState.copy_preferences_subsections-2678"><span class="linenos">2678</span></a>        <span class="n">target_preferences_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">()</span>
</span><span id="XMLState.copy_preferences_subsections-2679"><a href="#XMLState.copy_preferences_subsections-2679"><span class="linenos">2679</span></a>        <span class="k">if</span> <span class="n">target_preferences_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_preferences_subsections-2680"><a href="#XMLState.copy_preferences_subsections-2680"><span class="linenos">2680</span></a>            <span class="n">target_preferences_section</span> <span class="o">=</span> <span class="n">target_preferences_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.copy_preferences_subsections-2681"><a href="#XMLState.copy_preferences_subsections-2681"><span class="linenos">2681</span></a>            <span class="k">for</span> <span class="n">preferences_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preferences_sections</span><span class="p">():</span>
</span><span id="XMLState.copy_preferences_subsections-2682"><a href="#XMLState.copy_preferences_subsections-2682"><span class="linenos">2682</span></a>                <span class="k">for</span> <span class="n">section_name</span> <span class="ow">in</span> <span class="n">section_names</span><span class="p">:</span>
</span><span id="XMLState.copy_preferences_subsections-2683"><a href="#XMLState.copy_preferences_subsections-2683"><span class="linenos">2683</span></a>                    <span class="n">get_section_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState.copy_preferences_subsections-2684"><a href="#XMLState.copy_preferences_subsections-2684"><span class="linenos">2684</span></a>                        <span class="n">preferences_section</span><span class="p">,</span> <span class="s1">&#39;get_&#39;</span> <span class="o">+</span> <span class="n">section_name</span>
</span><span id="XMLState.copy_preferences_subsections-2685"><a href="#XMLState.copy_preferences_subsections-2685"><span class="linenos">2685</span></a>                    <span class="p">)</span>
</span><span id="XMLState.copy_preferences_subsections-2686"><a href="#XMLState.copy_preferences_subsections-2686"><span class="linenos">2686</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">get_section_method</span><span class="p">()</span>
</span><span id="XMLState.copy_preferences_subsections-2687"><a href="#XMLState.copy_preferences_subsections-2687"><span class="linenos">2687</span></a>                    <span class="k">if</span> <span class="n">section</span><span class="p">:</span>
</span><span id="XMLState.copy_preferences_subsections-2688"><a href="#XMLState.copy_preferences_subsections-2688"><span class="linenos">2688</span></a>                        <span class="n">set_section_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState.copy_preferences_subsections-2689"><a href="#XMLState.copy_preferences_subsections-2689"><span class="linenos">2689</span></a>                            <span class="n">target_preferences_section</span><span class="p">,</span> <span class="s1">&#39;set_&#39;</span> <span class="o">+</span> <span class="n">section_name</span>
</span><span id="XMLState.copy_preferences_subsections-2690"><a href="#XMLState.copy_preferences_subsections-2690"><span class="linenos">2690</span></a>                        <span class="p">)</span>
</span><span id="XMLState.copy_preferences_subsections-2691"><a href="#XMLState.copy_preferences_subsections-2691"><span class="linenos">2691</span></a>                        <span class="n">set_section_method</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy subsections of the preferences sections, matching given
section names, from this xml state to the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list section_names</strong>:  preferences subsection names</li>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_build_type_attributes" class="classattr">
                                        <input id="XMLState.copy_build_type_attributes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_build_type_attributes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">attribute_names</span><span class="p">:</span> <span class="n">List</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_build_type_attributes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_build_type_attributes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_build_type_attributes-2693"><a href="#XMLState.copy_build_type_attributes-2693"><span class="linenos">2693</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_build_type_attributes</span><span class="p">(</span>
</span><span id="XMLState.copy_build_type_attributes-2694"><a href="#XMLState.copy_build_type_attributes-2694"><span class="linenos">2694</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">attribute_names</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="XMLState.copy_build_type_attributes-2695"><a href="#XMLState.copy_build_type_attributes-2695"><span class="linenos">2695</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_build_type_attributes-2696"><a href="#XMLState.copy_build_type_attributes-2696"><span class="linenos">2696</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_build_type_attributes-2697"><a href="#XMLState.copy_build_type_attributes-2697"><span class="linenos">2697</span></a><span class="sd">        Copy specified attributes from this build type section to the</span>
</span><span id="XMLState.copy_build_type_attributes-2698"><a href="#XMLState.copy_build_type_attributes-2698"><span class="linenos">2698</span></a><span class="sd">        target xml state build type section</span>
</span><span id="XMLState.copy_build_type_attributes-2699"><a href="#XMLState.copy_build_type_attributes-2699"><span class="linenos">2699</span></a>
</span><span id="XMLState.copy_build_type_attributes-2700"><a href="#XMLState.copy_build_type_attributes-2700"><span class="linenos">2700</span></a><span class="sd">        :param list attribute_names: type section attributes</span>
</span><span id="XMLState.copy_build_type_attributes-2701"><a href="#XMLState.copy_build_type_attributes-2701"><span class="linenos">2701</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_build_type_attributes-2702"><a href="#XMLState.copy_build_type_attributes-2702"><span class="linenos">2702</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_build_type_attributes-2703"><a href="#XMLState.copy_build_type_attributes-2703"><span class="linenos">2703</span></a>        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attribute_names</span><span class="p">:</span>
</span><span id="XMLState.copy_build_type_attributes-2704"><a href="#XMLState.copy_build_type_attributes-2704"><span class="linenos">2704</span></a>            <span class="n">get_type_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState.copy_build_type_attributes-2705"><a href="#XMLState.copy_build_type_attributes-2705"><span class="linenos">2705</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="p">,</span> <span class="s1">&#39;get_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
</span><span id="XMLState.copy_build_type_attributes-2706"><a href="#XMLState.copy_build_type_attributes-2706"><span class="linenos">2706</span></a>            <span class="p">)</span>
</span><span id="XMLState.copy_build_type_attributes-2707"><a href="#XMLState.copy_build_type_attributes-2707"><span class="linenos">2707</span></a>            <span class="n">attribute_value</span> <span class="o">=</span> <span class="n">get_type_method</span><span class="p">()</span>
</span><span id="XMLState.copy_build_type_attributes-2708"><a href="#XMLState.copy_build_type_attributes-2708"><span class="linenos">2708</span></a>            <span class="k">if</span> <span class="n">attribute_value</span><span class="p">:</span>
</span><span id="XMLState.copy_build_type_attributes-2709"><a href="#XMLState.copy_build_type_attributes-2709"><span class="linenos">2709</span></a>                <span class="n">set_type_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
</span><span id="XMLState.copy_build_type_attributes-2710"><a href="#XMLState.copy_build_type_attributes-2710"><span class="linenos">2710</span></a>                    <span class="n">target_state</span><span class="o">.</span><span class="n">build_type</span><span class="p">,</span> <span class="s1">&#39;set_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
</span><span id="XMLState.copy_build_type_attributes-2711"><a href="#XMLState.copy_build_type_attributes-2711"><span class="linenos">2711</span></a>                <span class="p">)</span>
</span><span id="XMLState.copy_build_type_attributes-2712"><a href="#XMLState.copy_build_type_attributes-2712"><span class="linenos">2712</span></a>                <span class="n">set_type_method</span><span class="p">(</span><span class="n">attribute_value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy specified attributes from this build type section to the
target xml state build type section</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list attribute_names</strong>:  type section attributes</li>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_bootincluded_packages" class="classattr">
                                        <input id="XMLState.copy_bootincluded_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_bootincluded_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_bootincluded_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_bootincluded_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_bootincluded_packages-2714"><a href="#XMLState.copy_bootincluded_packages-2714"><span class="linenos">2714</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootincluded_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_packages-2715"><a href="#XMLState.copy_bootincluded_packages-2715"><span class="linenos">2715</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootincluded_packages-2716"><a href="#XMLState.copy_bootincluded_packages-2716"><span class="linenos">2716</span></a><span class="sd">        Copy packages marked as bootinclude to the packages</span>
</span><span id="XMLState.copy_bootincluded_packages-2717"><a href="#XMLState.copy_bootincluded_packages-2717"><span class="linenos">2717</span></a><span class="sd">        type=bootstrap section in the target xml state. The package</span>
</span><span id="XMLState.copy_bootincluded_packages-2718"><a href="#XMLState.copy_bootincluded_packages-2718"><span class="linenos">2718</span></a><span class="sd">        will also be removed from the packages type=delete section</span>
</span><span id="XMLState.copy_bootincluded_packages-2719"><a href="#XMLState.copy_bootincluded_packages-2719"><span class="linenos">2719</span></a><span class="sd">        in the target xml state if present there</span>
</span><span id="XMLState.copy_bootincluded_packages-2720"><a href="#XMLState.copy_bootincluded_packages-2720"><span class="linenos">2720</span></a>
</span><span id="XMLState.copy_bootincluded_packages-2721"><a href="#XMLState.copy_bootincluded_packages-2721"><span class="linenos">2721</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_bootincluded_packages-2722"><a href="#XMLState.copy_bootincluded_packages-2722"><span class="linenos">2722</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootincluded_packages-2723"><a href="#XMLState.copy_bootincluded_packages-2723"><span class="linenos">2723</span></a>        <span class="n">target_packages_sections</span> <span class="o">=</span> \
</span><span id="XMLState.copy_bootincluded_packages-2724"><a href="#XMLState.copy_bootincluded_packages-2724"><span class="linenos">2724</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState.copy_bootincluded_packages-2725"><a href="#XMLState.copy_bootincluded_packages-2725"><span class="linenos">2725</span></a>        <span class="k">if</span> <span class="n">target_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_packages-2726"><a href="#XMLState.copy_bootincluded_packages-2726"><span class="linenos">2726</span></a>            <span class="n">target_packages_section</span> <span class="o">=</span> \
</span><span id="XMLState.copy_bootincluded_packages-2727"><a href="#XMLState.copy_bootincluded_packages-2727"><span class="linenos">2727</span></a>                <span class="n">target_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.copy_bootincluded_packages-2728"><a href="#XMLState.copy_bootincluded_packages-2728"><span class="linenos">2728</span></a>            <span class="n">package_names_added</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.copy_bootincluded_packages-2729"><a href="#XMLState.copy_bootincluded_packages-2729"><span class="linenos">2729</span></a>            <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2730"><a href="#XMLState.copy_bootincluded_packages-2730"><span class="linenos">2730</span></a>                <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.copy_bootincluded_packages-2731"><a href="#XMLState.copy_bootincluded_packages-2731"><span class="linenos">2731</span></a>            <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_packages-2732"><a href="#XMLState.copy_bootincluded_packages-2732"><span class="linenos">2732</span></a>            <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2733"><a href="#XMLState.copy_bootincluded_packages-2733"><span class="linenos">2733</span></a>                <span class="n">packages_sections</span>
</span><span id="XMLState.copy_bootincluded_packages-2734"><a href="#XMLState.copy_bootincluded_packages-2734"><span class="linenos">2734</span></a>            <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_packages-2735"><a href="#XMLState.copy_bootincluded_packages-2735"><span class="linenos">2735</span></a>            <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_packages-2736"><a href="#XMLState.copy_bootincluded_packages-2736"><span class="linenos">2736</span></a>                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_packages-2737"><a href="#XMLState.copy_bootincluded_packages-2737"><span class="linenos">2737</span></a>                    <span class="k">if</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_bootinclude</span><span class="p">():</span>
</span><span id="XMLState.copy_bootincluded_packages-2738"><a href="#XMLState.copy_bootincluded_packages-2738"><span class="linenos">2738</span></a>                        <span class="n">target_packages_section</span><span class="o">.</span><span class="n">add_package</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2739"><a href="#XMLState.copy_bootincluded_packages-2739"><span class="linenos">2739</span></a>                            <span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2740"><a href="#XMLState.copy_bootincluded_packages-2740"><span class="linenos">2740</span></a>                                <span class="n">name</span><span class="o">=</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.copy_bootincluded_packages-2741"><a href="#XMLState.copy_bootincluded_packages-2741"><span class="linenos">2741</span></a>                            <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_packages-2742"><a href="#XMLState.copy_bootincluded_packages-2742"><span class="linenos">2742</span></a>                        <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_packages-2743"><a href="#XMLState.copy_bootincluded_packages-2743"><span class="linenos">2743</span></a>                        <span class="n">package_names_added</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2744"><a href="#XMLState.copy_bootincluded_packages-2744"><span class="linenos">2744</span></a>                            <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.copy_bootincluded_packages-2745"><a href="#XMLState.copy_bootincluded_packages-2745"><span class="linenos">2745</span></a>                        <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_packages-2746"><a href="#XMLState.copy_bootincluded_packages-2746"><span class="linenos">2746</span></a>            <span class="n">delete_packages_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2747"><a href="#XMLState.copy_bootincluded_packages-2747"><span class="linenos">2747</span></a>                <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">]</span>
</span><span id="XMLState.copy_bootincluded_packages-2748"><a href="#XMLState.copy_bootincluded_packages-2748"><span class="linenos">2748</span></a>            <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_packages-2749"><a href="#XMLState.copy_bootincluded_packages-2749"><span class="linenos">2749</span></a>            <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2750"><a href="#XMLState.copy_bootincluded_packages-2750"><span class="linenos">2750</span></a>                <span class="n">delete_packages_sections</span>
</span><span id="XMLState.copy_bootincluded_packages-2751"><a href="#XMLState.copy_bootincluded_packages-2751"><span class="linenos">2751</span></a>            <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_packages-2752"><a href="#XMLState.copy_bootincluded_packages-2752"><span class="linenos">2752</span></a>            <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_packages-2753"><a href="#XMLState.copy_bootincluded_packages-2753"><span class="linenos">2753</span></a>                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_packages-2754"><a href="#XMLState.copy_bootincluded_packages-2754"><span class="linenos">2754</span></a>                    <span class="n">package_name</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.copy_bootincluded_packages-2755"><a href="#XMLState.copy_bootincluded_packages-2755"><span class="linenos">2755</span></a>                    <span class="k">if</span> <span class="n">package_name</span> <span class="ow">in</span> <span class="n">package_names_added</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_packages-2756"><a href="#XMLState.copy_bootincluded_packages-2756"><span class="linenos">2756</span></a>                        <span class="n">package</span><span class="o">.</span><span class="n">packages_section</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_packages-2757"><a href="#XMLState.copy_bootincluded_packages-2757"><span class="linenos">2757</span></a>                            <span class="n">package</span><span class="o">.</span><span class="n">package_section</span>
</span><span id="XMLState.copy_bootincluded_packages-2758"><a href="#XMLState.copy_bootincluded_packages-2758"><span class="linenos">2758</span></a>                        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy packages marked as bootinclude to the packages
type=bootstrap section in the target xml state. The package
will also be removed from the packages type=delete section
in the target xml state if present there</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_bootincluded_archives" class="classattr">
                                        <input id="XMLState.copy_bootincluded_archives-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_bootincluded_archives</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_bootincluded_archives-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_bootincluded_archives"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_bootincluded_archives-2760"><a href="#XMLState.copy_bootincluded_archives-2760"><span class="linenos">2760</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootincluded_archives</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_archives-2761"><a href="#XMLState.copy_bootincluded_archives-2761"><span class="linenos">2761</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootincluded_archives-2762"><a href="#XMLState.copy_bootincluded_archives-2762"><span class="linenos">2762</span></a><span class="sd">        Copy archives marked as bootinclude to the packages type=bootstrap</span>
</span><span id="XMLState.copy_bootincluded_archives-2763"><a href="#XMLState.copy_bootincluded_archives-2763"><span class="linenos">2763</span></a><span class="sd">        section in the target xml state</span>
</span><span id="XMLState.copy_bootincluded_archives-2764"><a href="#XMLState.copy_bootincluded_archives-2764"><span class="linenos">2764</span></a>
</span><span id="XMLState.copy_bootincluded_archives-2765"><a href="#XMLState.copy_bootincluded_archives-2765"><span class="linenos">2765</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_bootincluded_archives-2766"><a href="#XMLState.copy_bootincluded_archives-2766"><span class="linenos">2766</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootincluded_archives-2767"><a href="#XMLState.copy_bootincluded_archives-2767"><span class="linenos">2767</span></a>        <span class="n">target_bootstrap_packages_sections</span> <span class="o">=</span> \
</span><span id="XMLState.copy_bootincluded_archives-2768"><a href="#XMLState.copy_bootincluded_archives-2768"><span class="linenos">2768</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">get_bootstrap_packages_sections</span><span class="p">()</span>
</span><span id="XMLState.copy_bootincluded_archives-2769"><a href="#XMLState.copy_bootincluded_archives-2769"><span class="linenos">2769</span></a>        <span class="k">if</span> <span class="n">target_bootstrap_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_archives-2770"><a href="#XMLState.copy_bootincluded_archives-2770"><span class="linenos">2770</span></a>            <span class="n">target_bootstrap_packages_section</span> <span class="o">=</span> \
</span><span id="XMLState.copy_bootincluded_archives-2771"><a href="#XMLState.copy_bootincluded_archives-2771"><span class="linenos">2771</span></a>                <span class="n">target_bootstrap_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.copy_bootincluded_archives-2772"><a href="#XMLState.copy_bootincluded_archives-2772"><span class="linenos">2772</span></a>            <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_archives-2773"><a href="#XMLState.copy_bootincluded_archives-2773"><span class="linenos">2773</span></a>                <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.copy_bootincluded_archives-2774"><a href="#XMLState.copy_bootincluded_archives-2774"><span class="linenos">2774</span></a>            <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_archives-2775"><a href="#XMLState.copy_bootincluded_archives-2775"><span class="linenos">2775</span></a>            <span class="k">for</span> <span class="n">packages_section</span> <span class="ow">in</span> <span class="n">packages_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_archives-2776"><a href="#XMLState.copy_bootincluded_archives-2776"><span class="linenos">2776</span></a>                <span class="n">archive_list</span> <span class="o">=</span> <span class="n">packages_section</span><span class="o">.</span><span class="n">get_archive</span><span class="p">()</span>
</span><span id="XMLState.copy_bootincluded_archives-2777"><a href="#XMLState.copy_bootincluded_archives-2777"><span class="linenos">2777</span></a>                <span class="k">if</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_archives-2778"><a href="#XMLState.copy_bootincluded_archives-2778"><span class="linenos">2778</span></a>                    <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">archive_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootincluded_archives-2779"><a href="#XMLState.copy_bootincluded_archives-2779"><span class="linenos">2779</span></a>                        <span class="k">if</span> <span class="n">archive</span><span class="o">.</span><span class="n">get_bootinclude</span><span class="p">():</span>
</span><span id="XMLState.copy_bootincluded_archives-2780"><a href="#XMLState.copy_bootincluded_archives-2780"><span class="linenos">2780</span></a>                            <span class="n">target_bootstrap_packages_section</span><span class="o">.</span><span class="n">add_archive</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_archives-2781"><a href="#XMLState.copy_bootincluded_archives-2781"><span class="linenos">2781</span></a>                                <span class="n">xml_parse</span><span class="o">.</span><span class="n">archive</span><span class="p">(</span>
</span><span id="XMLState.copy_bootincluded_archives-2782"><a href="#XMLState.copy_bootincluded_archives-2782"><span class="linenos">2782</span></a>                                    <span class="n">name</span><span class="o">=</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.copy_bootincluded_archives-2783"><a href="#XMLState.copy_bootincluded_archives-2783"><span class="linenos">2783</span></a>                                <span class="p">)</span>
</span><span id="XMLState.copy_bootincluded_archives-2784"><a href="#XMLState.copy_bootincluded_archives-2784"><span class="linenos">2784</span></a>                            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy archives marked as bootinclude to the packages type=bootstrap
section in the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.copy_bootdelete_packages" class="classattr">
                                        <input id="XMLState.copy_bootdelete_packages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_bootdelete_packages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.copy_bootdelete_packages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.copy_bootdelete_packages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.copy_bootdelete_packages-2786"><a href="#XMLState.copy_bootdelete_packages-2786"><span class="linenos">2786</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_bootdelete_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_state</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.copy_bootdelete_packages-2787"><a href="#XMLState.copy_bootdelete_packages-2787"><span class="linenos">2787</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootdelete_packages-2788"><a href="#XMLState.copy_bootdelete_packages-2788"><span class="linenos">2788</span></a><span class="sd">        Copy packages marked as bootdelete to the packages type=delete</span>
</span><span id="XMLState.copy_bootdelete_packages-2789"><a href="#XMLState.copy_bootdelete_packages-2789"><span class="linenos">2789</span></a><span class="sd">        section in the target xml state</span>
</span><span id="XMLState.copy_bootdelete_packages-2790"><a href="#XMLState.copy_bootdelete_packages-2790"><span class="linenos">2790</span></a>
</span><span id="XMLState.copy_bootdelete_packages-2791"><a href="#XMLState.copy_bootdelete_packages-2791"><span class="linenos">2791</span></a><span class="sd">        :param object target_state: XMLState instance</span>
</span><span id="XMLState.copy_bootdelete_packages-2792"><a href="#XMLState.copy_bootdelete_packages-2792"><span class="linenos">2792</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.copy_bootdelete_packages-2793"><a href="#XMLState.copy_bootdelete_packages-2793"><span class="linenos">2793</span></a>        <span class="n">target_delete_packages_sections</span> <span class="o">=</span> <span class="n">target_state</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootdelete_packages-2794"><a href="#XMLState.copy_bootdelete_packages-2794"><span class="linenos">2794</span></a>            <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">]</span>
</span><span id="XMLState.copy_bootdelete_packages-2795"><a href="#XMLState.copy_bootdelete_packages-2795"><span class="linenos">2795</span></a>        <span class="p">)</span>
</span><span id="XMLState.copy_bootdelete_packages-2796"><a href="#XMLState.copy_bootdelete_packages-2796"><span class="linenos">2796</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">target_delete_packages_sections</span><span class="p">:</span>
</span><span id="XMLState.copy_bootdelete_packages-2797"><a href="#XMLState.copy_bootdelete_packages-2797"><span class="linenos">2797</span></a>            <span class="n">target_delete_packages_sections</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="XMLState.copy_bootdelete_packages-2798"><a href="#XMLState.copy_bootdelete_packages-2798"><span class="linenos">2798</span></a>                <span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</span><span id="XMLState.copy_bootdelete_packages-2799"><a href="#XMLState.copy_bootdelete_packages-2799"><span class="linenos">2799</span></a>            <span class="p">]</span>
</span><span id="XMLState.copy_bootdelete_packages-2800"><a href="#XMLState.copy_bootdelete_packages-2800"><span class="linenos">2800</span></a>            <span class="n">target_state</span><span class="o">.</span><span class="n">xml_data</span><span class="o">.</span><span class="n">add_packages</span><span class="p">(</span>
</span><span id="XMLState.copy_bootdelete_packages-2801"><a href="#XMLState.copy_bootdelete_packages-2801"><span class="linenos">2801</span></a>                <span class="n">target_delete_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.copy_bootdelete_packages-2802"><a href="#XMLState.copy_bootdelete_packages-2802"><span class="linenos">2802</span></a>            <span class="p">)</span>
</span><span id="XMLState.copy_bootdelete_packages-2803"><a href="#XMLState.copy_bootdelete_packages-2803"><span class="linenos">2803</span></a>
</span><span id="XMLState.copy_bootdelete_packages-2804"><a href="#XMLState.copy_bootdelete_packages-2804"><span class="linenos">2804</span></a>        <span class="n">target_delete_packages_section</span> <span class="o">=</span> \
</span><span id="XMLState.copy_bootdelete_packages-2805"><a href="#XMLState.copy_bootdelete_packages-2805"><span class="linenos">2805</span></a>            <span class="n">target_delete_packages_sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="XMLState.copy_bootdelete_packages-2806"><a href="#XMLState.copy_bootdelete_packages-2806"><span class="linenos">2806</span></a>        <span class="n">packages_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootdelete_packages-2807"><a href="#XMLState.copy_bootdelete_packages-2807"><span class="linenos">2807</span></a>            <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()]</span>
</span><span id="XMLState.copy_bootdelete_packages-2808"><a href="#XMLState.copy_bootdelete_packages-2808"><span class="linenos">2808</span></a>        <span class="p">)</span>
</span><span id="XMLState.copy_bootdelete_packages-2809"><a href="#XMLState.copy_bootdelete_packages-2809"><span class="linenos">2809</span></a>        <span class="n">package_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_package_sections</span><span class="p">(</span>
</span><span id="XMLState.copy_bootdelete_packages-2810"><a href="#XMLState.copy_bootdelete_packages-2810"><span class="linenos">2810</span></a>            <span class="n">packages_sections</span>
</span><span id="XMLState.copy_bootdelete_packages-2811"><a href="#XMLState.copy_bootdelete_packages-2811"><span class="linenos">2811</span></a>        <span class="p">)</span>
</span><span id="XMLState.copy_bootdelete_packages-2812"><a href="#XMLState.copy_bootdelete_packages-2812"><span class="linenos">2812</span></a>        <span class="k">if</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootdelete_packages-2813"><a href="#XMLState.copy_bootdelete_packages-2813"><span class="linenos">2813</span></a>            <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
</span><span id="XMLState.copy_bootdelete_packages-2814"><a href="#XMLState.copy_bootdelete_packages-2814"><span class="linenos">2814</span></a>                <span class="k">if</span> <span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_bootdelete</span><span class="p">():</span>
</span><span id="XMLState.copy_bootdelete_packages-2815"><a href="#XMLState.copy_bootdelete_packages-2815"><span class="linenos">2815</span></a>                    <span class="n">target_delete_packages_section</span><span class="o">.</span><span class="n">add_package</span><span class="p">(</span>
</span><span id="XMLState.copy_bootdelete_packages-2816"><a href="#XMLState.copy_bootdelete_packages-2816"><span class="linenos">2816</span></a>                        <span class="n">xml_parse</span><span class="o">.</span><span class="n">package</span><span class="p">(</span>
</span><span id="XMLState.copy_bootdelete_packages-2817"><a href="#XMLState.copy_bootdelete_packages-2817"><span class="linenos">2817</span></a>                            <span class="n">name</span><span class="o">=</span><span class="n">package</span><span class="o">.</span><span class="n">package_section</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span id="XMLState.copy_bootdelete_packages-2818"><a href="#XMLState.copy_bootdelete_packages-2818"><span class="linenos">2818</span></a>                        <span class="p">)</span>
</span><span id="XMLState.copy_bootdelete_packages-2819"><a href="#XMLState.copy_bootdelete_packages-2819"><span class="linenos">2819</span></a>                    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy packages marked as bootdelete to the packages type=delete
section in the target xml state</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>object target_state</strong>:  XMLState instance</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.get_distribution_name_from_boot_attribute" class="classattr">
                                        <input id="XMLState.get_distribution_name_from_boot_attribute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_distribution_name_from_boot_attribute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_distribution_name_from_boot_attribute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_distribution_name_from_boot_attribute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_distribution_name_from_boot_attribute-2821"><a href="#XMLState.get_distribution_name_from_boot_attribute-2821"><span class="linenos">2821</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_distribution_name_from_boot_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2822"><a href="#XMLState.get_distribution_name_from_boot_attribute-2822"><span class="linenos">2822</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2823"><a href="#XMLState.get_distribution_name_from_boot_attribute-2823"><span class="linenos">2823</span></a><span class="sd">        Extract the distribution name from the boot attribute of the</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2824"><a href="#XMLState.get_distribution_name_from_boot_attribute-2824"><span class="linenos">2824</span></a><span class="sd">        build type section.</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2825"><a href="#XMLState.get_distribution_name_from_boot_attribute-2825"><span class="linenos">2825</span></a>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2826"><a href="#XMLState.get_distribution_name_from_boot_attribute-2826"><span class="linenos">2826</span></a><span class="sd">        If no boot attribute is configured or the contents does not</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2827"><a href="#XMLState.get_distribution_name_from_boot_attribute-2827"><span class="linenos">2827</span></a><span class="sd">        match the kiwi defined naming schema for boot image descriptions,</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2828"><a href="#XMLState.get_distribution_name_from_boot_attribute-2828"><span class="linenos">2828</span></a><span class="sd">        an exception is thrown</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2829"><a href="#XMLState.get_distribution_name_from_boot_attribute-2829"><span class="linenos">2829</span></a>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2830"><a href="#XMLState.get_distribution_name_from_boot_attribute-2830"><span class="linenos">2830</span></a><span class="sd">        :return: lowercase distribution name</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2831"><a href="#XMLState.get_distribution_name_from_boot_attribute-2831"><span class="linenos">2831</span></a>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2832"><a href="#XMLState.get_distribution_name_from_boot_attribute-2832"><span class="linenos">2832</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2833"><a href="#XMLState.get_distribution_name_from_boot_attribute-2833"><span class="linenos">2833</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2834"><a href="#XMLState.get_distribution_name_from_boot_attribute-2834"><span class="linenos">2834</span></a>        <span class="n">boot_attribute</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_boot</span><span class="p">()</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2835"><a href="#XMLState.get_distribution_name_from_boot_attribute-2835"><span class="linenos">2835</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">boot_attribute</span><span class="p">:</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2836"><a href="#XMLState.get_distribution_name_from_boot_attribute-2836"><span class="linenos">2836</span></a>            <span class="k">raise</span> <span class="n">KiwiDistributionNameError</span><span class="p">(</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2837"><a href="#XMLState.get_distribution_name_from_boot_attribute-2837"><span class="linenos">2837</span></a>                <span class="s1">&#39;No boot attribute to extract distribution name from found&#39;</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2838"><a href="#XMLState.get_distribution_name_from_boot_attribute-2838"><span class="linenos">2838</span></a>            <span class="p">)</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2839"><a href="#XMLState.get_distribution_name_from_boot_attribute-2839"><span class="linenos">2839</span></a>        <span class="n">boot_attribute_format</span> <span class="o">=</span> <span class="s1">&#39;^.*-(.*)$&#39;</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2840"><a href="#XMLState.get_distribution_name_from_boot_attribute-2840"><span class="linenos">2840</span></a>        <span class="n">boot_attribute_expression</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2841"><a href="#XMLState.get_distribution_name_from_boot_attribute-2841"><span class="linenos">2841</span></a>            <span class="n">boot_attribute_format</span><span class="p">,</span> <span class="n">boot_attribute</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2842"><a href="#XMLState.get_distribution_name_from_boot_attribute-2842"><span class="linenos">2842</span></a>        <span class="p">)</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2843"><a href="#XMLState.get_distribution_name_from_boot_attribute-2843"><span class="linenos">2843</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">boot_attribute_expression</span><span class="p">:</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2844"><a href="#XMLState.get_distribution_name_from_boot_attribute-2844"><span class="linenos">2844</span></a>            <span class="k">raise</span> <span class="n">KiwiDistributionNameError</span><span class="p">(</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2845"><a href="#XMLState.get_distribution_name_from_boot_attribute-2845"><span class="linenos">2845</span></a>                <span class="s1">&#39;Boot attribute &quot;</span><span class="si">%s</span><span class="s1">&quot; does not match expected format </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2846"><a href="#XMLState.get_distribution_name_from_boot_attribute-2846"><span class="linenos">2846</span></a>                <span class="p">(</span><span class="n">boot_attribute</span><span class="p">,</span> <span class="n">boot_attribute_format</span><span class="p">)</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2847"><a href="#XMLState.get_distribution_name_from_boot_attribute-2847"><span class="linenos">2847</span></a>            <span class="p">)</span>
</span><span id="XMLState.get_distribution_name_from_boot_attribute-2848"><a href="#XMLState.get_distribution_name_from_boot_attribute-2848"><span class="linenos">2848</span></a>        <span class="k">return</span> <span class="n">boot_attribute_expression</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Extract the distribution name from the boot attribute of the
build type section.</p>

<p>If no boot attribute is configured or the contents does not
match the kiwi defined naming schema for boot image descriptions,
an exception is thrown</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>lowercase distribution name</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_fs_mount_option_list" class="classattr">
                                        <input id="XMLState.get_fs_mount_option_list-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_fs_mount_option_list</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_fs_mount_option_list-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_fs_mount_option_list"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_fs_mount_option_list-2850"><a href="#XMLState.get_fs_mount_option_list-2850"><span class="linenos">2850</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_fs_mount_option_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_fs_mount_option_list-2851"><a href="#XMLState.get_fs_mount_option_list-2851"><span class="linenos">2851</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_fs_mount_option_list-2852"><a href="#XMLState.get_fs_mount_option_list-2852"><span class="linenos">2852</span></a><span class="sd">        List of root filesystem mount options</span>
</span><span id="XMLState.get_fs_mount_option_list-2853"><a href="#XMLState.get_fs_mount_option_list-2853"><span class="linenos">2853</span></a>
</span><span id="XMLState.get_fs_mount_option_list-2854"><a href="#XMLState.get_fs_mount_option_list-2854"><span class="linenos">2854</span></a><span class="sd">        The list contains one element with the information from the</span>
</span><span id="XMLState.get_fs_mount_option_list-2855"><a href="#XMLState.get_fs_mount_option_list-2855"><span class="linenos">2855</span></a><span class="sd">        fsmountoptions attribute. The value there is passed along to</span>
</span><span id="XMLState.get_fs_mount_option_list-2856"><a href="#XMLState.get_fs_mount_option_list-2856"><span class="linenos">2856</span></a><span class="sd">        the -o mount option</span>
</span><span id="XMLState.get_fs_mount_option_list-2857"><a href="#XMLState.get_fs_mount_option_list-2857"><span class="linenos">2857</span></a>
</span><span id="XMLState.get_fs_mount_option_list-2858"><a href="#XMLState.get_fs_mount_option_list-2858"><span class="linenos">2858</span></a><span class="sd">        :return: max one element list with mount option string</span>
</span><span id="XMLState.get_fs_mount_option_list-2859"><a href="#XMLState.get_fs_mount_option_list-2859"><span class="linenos">2859</span></a>
</span><span id="XMLState.get_fs_mount_option_list-2860"><a href="#XMLState.get_fs_mount_option_list-2860"><span class="linenos">2860</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_fs_mount_option_list-2861"><a href="#XMLState.get_fs_mount_option_list-2861"><span class="linenos">2861</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_fs_mount_option_list-2862"><a href="#XMLState.get_fs_mount_option_list-2862"><span class="linenos">2862</span></a>        <span class="n">option_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_fs_mount_option_list-2863"><a href="#XMLState.get_fs_mount_option_list-2863"><span class="linenos">2863</span></a>        <span class="n">mount_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_fsmountoptions</span><span class="p">()</span>
</span><span id="XMLState.get_fs_mount_option_list-2864"><a href="#XMLState.get_fs_mount_option_list-2864"><span class="linenos">2864</span></a>        <span class="k">if</span> <span class="n">mount_options</span><span class="p">:</span>
</span><span id="XMLState.get_fs_mount_option_list-2865"><a href="#XMLState.get_fs_mount_option_list-2865"><span class="linenos">2865</span></a>            <span class="n">option_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">mount_options</span><span class="p">]</span>
</span><span id="XMLState.get_fs_mount_option_list-2866"><a href="#XMLState.get_fs_mount_option_list-2866"><span class="linenos">2866</span></a>
</span><span id="XMLState.get_fs_mount_option_list-2867"><a href="#XMLState.get_fs_mount_option_list-2867"><span class="linenos">2867</span></a>        <span class="k">return</span> <span class="n">option_list</span>
</span></pre></div>


            <div class="docstring"><p>List of root filesystem mount options</p>

<p>The list contains one element with the information from the
fsmountoptions attribute. The value there is passed along to
the -o mount option</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>max one element list with mount option string</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_fs_create_option_list" class="classattr">
                                        <input id="XMLState.get_fs_create_option_list-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_fs_create_option_list</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_fs_create_option_list-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_fs_create_option_list"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_fs_create_option_list-2869"><a href="#XMLState.get_fs_create_option_list-2869"><span class="linenos">2869</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_fs_create_option_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
</span><span id="XMLState.get_fs_create_option_list-2870"><a href="#XMLState.get_fs_create_option_list-2870"><span class="linenos">2870</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_fs_create_option_list-2871"><a href="#XMLState.get_fs_create_option_list-2871"><span class="linenos">2871</span></a><span class="sd">        List of root filesystem creation options</span>
</span><span id="XMLState.get_fs_create_option_list-2872"><a href="#XMLState.get_fs_create_option_list-2872"><span class="linenos">2872</span></a>
</span><span id="XMLState.get_fs_create_option_list-2873"><a href="#XMLState.get_fs_create_option_list-2873"><span class="linenos">2873</span></a><span class="sd">        The list contains elements with the information from the</span>
</span><span id="XMLState.get_fs_create_option_list-2874"><a href="#XMLState.get_fs_create_option_list-2874"><span class="linenos">2874</span></a><span class="sd">        fscreateoptions attribute string that got split into its</span>
</span><span id="XMLState.get_fs_create_option_list-2875"><a href="#XMLState.get_fs_create_option_list-2875"><span class="linenos">2875</span></a><span class="sd">        substring components</span>
</span><span id="XMLState.get_fs_create_option_list-2876"><a href="#XMLState.get_fs_create_option_list-2876"><span class="linenos">2876</span></a>
</span><span id="XMLState.get_fs_create_option_list-2877"><a href="#XMLState.get_fs_create_option_list-2877"><span class="linenos">2877</span></a><span class="sd">        :return: list with create options</span>
</span><span id="XMLState.get_fs_create_option_list-2878"><a href="#XMLState.get_fs_create_option_list-2878"><span class="linenos">2878</span></a>
</span><span id="XMLState.get_fs_create_option_list-2879"><a href="#XMLState.get_fs_create_option_list-2879"><span class="linenos">2879</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_fs_create_option_list-2880"><a href="#XMLState.get_fs_create_option_list-2880"><span class="linenos">2880</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_fs_create_option_list-2881"><a href="#XMLState.get_fs_create_option_list-2881"><span class="linenos">2881</span></a>        <span class="n">option_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_fs_create_option_list-2882"><a href="#XMLState.get_fs_create_option_list-2882"><span class="linenos">2882</span></a>        <span class="n">create_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_fscreateoptions</span><span class="p">()</span>
</span><span id="XMLState.get_fs_create_option_list-2883"><a href="#XMLState.get_fs_create_option_list-2883"><span class="linenos">2883</span></a>        <span class="k">if</span> <span class="n">create_options</span><span class="p">:</span>
</span><span id="XMLState.get_fs_create_option_list-2884"><a href="#XMLState.get_fs_create_option_list-2884"><span class="linenos">2884</span></a>            <span class="n">option_list</span> <span class="o">=</span> <span class="n">create_options</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</span><span id="XMLState.get_fs_create_option_list-2885"><a href="#XMLState.get_fs_create_option_list-2885"><span class="linenos">2885</span></a>
</span><span id="XMLState.get_fs_create_option_list-2886"><a href="#XMLState.get_fs_create_option_list-2886"><span class="linenos">2886</span></a>        <span class="k">return</span> <span class="n">option_list</span>
</span></pre></div>


            <div class="docstring"><p>List of root filesystem creation options</p>

<p>The list contains elements with the information from the
fscreateoptions attribute string that got split into its
substring components</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list with create options</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_luks_credentials" class="classattr">
                                        <input id="XMLState.get_luks_credentials-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_luks_credentials</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_luks_credentials-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_luks_credentials"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_luks_credentials-2888"><a href="#XMLState.get_luks_credentials-2888"><span class="linenos">2888</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_luks_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_luks_credentials-2889"><a href="#XMLState.get_luks_credentials-2889"><span class="linenos">2889</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_luks_credentials-2890"><a href="#XMLState.get_luks_credentials-2890"><span class="linenos">2890</span></a><span class="sd">        Return key or passphrase credentials to open the luks pool</span>
</span><span id="XMLState.get_luks_credentials-2891"><a href="#XMLState.get_luks_credentials-2891"><span class="linenos">2891</span></a>
</span><span id="XMLState.get_luks_credentials-2892"><a href="#XMLState.get_luks_credentials-2892"><span class="linenos">2892</span></a><span class="sd">        :return: data</span>
</span><span id="XMLState.get_luks_credentials-2893"><a href="#XMLState.get_luks_credentials-2893"><span class="linenos">2893</span></a>
</span><span id="XMLState.get_luks_credentials-2894"><a href="#XMLState.get_luks_credentials-2894"><span class="linenos">2894</span></a><span class="sd">        :rtype: str</span>
</span><span id="XMLState.get_luks_credentials-2895"><a href="#XMLState.get_luks_credentials-2895"><span class="linenos">2895</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_luks_credentials-2896"><a href="#XMLState.get_luks_credentials-2896"><span class="linenos">2896</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks</span><span class="p">()</span>
</span><span id="XMLState.get_luks_credentials-2897"><a href="#XMLState.get_luks_credentials-2897"><span class="linenos">2897</span></a>        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
</span><span id="XMLState.get_luks_credentials-2898"><a href="#XMLState.get_luks_credentials-2898"><span class="linenos">2898</span></a>            <span class="n">keyfile_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="XMLState.get_luks_credentials-2899"><a href="#XMLState.get_luks_credentials-2899"><span class="linenos">2899</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="XMLState.get_luks_credentials-2900"><a href="#XMLState.get_luks_credentials-2900"><span class="linenos">2900</span></a>                <span class="c1"># try to interpret data as an URI</span>
</span><span id="XMLState.get_luks_credentials-2901"><a href="#XMLState.get_luks_credentials-2901"><span class="linenos">2901</span></a>                <span class="n">uri</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="XMLState.get_luks_credentials-2902"><a href="#XMLState.get_luks_credentials-2902"><span class="linenos">2902</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">is_remote</span><span class="p">():</span>
</span><span id="XMLState.get_luks_credentials-2903"><a href="#XMLState.get_luks_credentials-2903"><span class="linenos">2903</span></a>                    <span class="n">keyfile_name</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">translate</span><span class="p">()</span>
</span><span id="XMLState.get_luks_credentials-2904"><a href="#XMLState.get_luks_credentials-2904"><span class="linenos">2904</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="XMLState.get_luks_credentials-2905"><a href="#XMLState.get_luks_credentials-2905"><span class="linenos">2905</span></a>                <span class="c1"># this doesn&#39;t look like a valid URI, continue as just data</span>
</span><span id="XMLState.get_luks_credentials-2906"><a href="#XMLState.get_luks_credentials-2906"><span class="linenos">2906</span></a>                <span class="k">pass</span>
</span><span id="XMLState.get_luks_credentials-2907"><a href="#XMLState.get_luks_credentials-2907"><span class="linenos">2907</span></a>            <span class="k">if</span> <span class="n">keyfile_name</span><span class="p">:</span>
</span><span id="XMLState.get_luks_credentials-2908"><a href="#XMLState.get_luks_credentials-2908"><span class="linenos">2908</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="XMLState.get_luks_credentials-2909"><a href="#XMLState.get_luks_credentials-2909"><span class="linenos">2909</span></a>                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">keyfile_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">keyfile</span><span class="p">:</span>
</span><span id="XMLState.get_luks_credentials-2910"><a href="#XMLState.get_luks_credentials-2910"><span class="linenos">2910</span></a>                        <span class="k">return</span> <span class="n">keyfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="XMLState.get_luks_credentials-2911"><a href="#XMLState.get_luks_credentials-2911"><span class="linenos">2911</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">issue</span><span class="p">:</span>
</span><span id="XMLState.get_luks_credentials-2912"><a href="#XMLState.get_luks_credentials-2912"><span class="linenos">2912</span></a>                    <span class="k">raise</span> <span class="n">KiwiFileAccessError</span><span class="p">(</span>
</span><span id="XMLState.get_luks_credentials-2913"><a href="#XMLState.get_luks_credentials-2913"><span class="linenos">2913</span></a>                        <span class="sa">f</span><span class="s1">&#39;Failed to read from </span><span class="si">{</span><span class="n">keyfile_name</span><span class="si">!r}</span><span class="s1">: </span><span class="si">{</span><span class="n">issue</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="XMLState.get_luks_credentials-2914"><a href="#XMLState.get_luks_credentials-2914"><span class="linenos">2914</span></a>                    <span class="p">)</span>
</span><span id="XMLState.get_luks_credentials-2915"><a href="#XMLState.get_luks_credentials-2915"><span class="linenos">2915</span></a>        <span class="k">return</span> <span class="n">data</span>
</span></pre></div>


            <div class="docstring"><p>Return key or passphrase credentials to open the luks pool</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>data</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_luks_format_options" class="classattr">
                                        <input id="XMLState.get_luks_format_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_luks_format_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_luks_format_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_luks_format_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_luks_format_options-2917"><a href="#XMLState.get_luks_format_options-2917"><span class="linenos">2917</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_luks_format_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_luks_format_options-2918"><a href="#XMLState.get_luks_format_options-2918"><span class="linenos">2918</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_luks_format_options-2919"><a href="#XMLState.get_luks_format_options-2919"><span class="linenos">2919</span></a><span class="sd">        Return list of luks format options</span>
</span><span id="XMLState.get_luks_format_options-2920"><a href="#XMLState.get_luks_format_options-2920"><span class="linenos">2920</span></a>
</span><span id="XMLState.get_luks_format_options-2921"><a href="#XMLState.get_luks_format_options-2921"><span class="linenos">2921</span></a><span class="sd">        :return: list of options</span>
</span><span id="XMLState.get_luks_format_options-2922"><a href="#XMLState.get_luks_format_options-2922"><span class="linenos">2922</span></a>
</span><span id="XMLState.get_luks_format_options-2923"><a href="#XMLState.get_luks_format_options-2923"><span class="linenos">2923</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_luks_format_options-2924"><a href="#XMLState.get_luks_format_options-2924"><span class="linenos">2924</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_luks_format_options-2925"><a href="#XMLState.get_luks_format_options-2925"><span class="linenos">2925</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_luks_format_options-2926"><a href="#XMLState.get_luks_format_options-2926"><span class="linenos">2926</span></a>        <span class="n">luksversion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks_version</span><span class="p">()</span>
</span><span id="XMLState.get_luks_format_options-2927"><a href="#XMLState.get_luks_format_options-2927"><span class="linenos">2927</span></a>        <span class="n">luksformat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luksformat</span><span class="p">()</span>
</span><span id="XMLState.get_luks_format_options-2928"><a href="#XMLState.get_luks_format_options-2928"><span class="linenos">2928</span></a>        <span class="n">luks_pbkdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_luks_pbkdf</span><span class="p">()</span>
</span><span id="XMLState.get_luks_format_options-2929"><a href="#XMLState.get_luks_format_options-2929"><span class="linenos">2929</span></a>        <span class="k">if</span> <span class="n">luksversion</span><span class="p">:</span>
</span><span id="XMLState.get_luks_format_options-2930"><a href="#XMLState.get_luks_format_options-2930"><span class="linenos">2930</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--type&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_luks_format_options-2931"><a href="#XMLState.get_luks_format_options-2931"><span class="linenos">2931</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">luksversion</span><span class="p">)</span>
</span><span id="XMLState.get_luks_format_options-2932"><a href="#XMLState.get_luks_format_options-2932"><span class="linenos">2932</span></a>        <span class="k">if</span> <span class="n">luksformat</span><span class="p">:</span>
</span><span id="XMLState.get_luks_format_options-2933"><a href="#XMLState.get_luks_format_options-2933"><span class="linenos">2933</span></a>            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">luksformat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_option</span><span class="p">():</span>
</span><span id="XMLState.get_luks_format_options-2934"><a href="#XMLState.get_luks_format_options-2934"><span class="linenos">2934</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
</span><span id="XMLState.get_luks_format_options-2935"><a href="#XMLState.get_luks_format_options-2935"><span class="linenos">2935</span></a>                <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">():</span>
</span><span id="XMLState.get_luks_format_options-2936"><a href="#XMLState.get_luks_format_options-2936"><span class="linenos">2936</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
</span><span id="XMLState.get_luks_format_options-2937"><a href="#XMLState.get_luks_format_options-2937"><span class="linenos">2937</span></a>        <span class="k">if</span> <span class="n">luks_pbkdf</span><span class="p">:</span>
</span><span id="XMLState.get_luks_format_options-2938"><a href="#XMLState.get_luks_format_options-2938"><span class="linenos">2938</span></a>            <span class="c1"># Allow to override the pbkdf algorithm that cryptsetup</span>
</span><span id="XMLState.get_luks_format_options-2939"><a href="#XMLState.get_luks_format_options-2939"><span class="linenos">2939</span></a>            <span class="c1"># uses by default. Cryptsetup may use argon2i by default,</span>
</span><span id="XMLState.get_luks_format_options-2940"><a href="#XMLState.get_luks_format_options-2940"><span class="linenos">2940</span></a>            <span class="c1"># which is not supported by all bootloaders.</span>
</span><span id="XMLState.get_luks_format_options-2941"><a href="#XMLState.get_luks_format_options-2941"><span class="linenos">2941</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--pbkdf&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_luks_format_options-2942"><a href="#XMLState.get_luks_format_options-2942"><span class="linenos">2942</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">luks_pbkdf</span><span class="p">)</span>
</span><span id="XMLState.get_luks_format_options-2943"><a href="#XMLState.get_luks_format_options-2943"><span class="linenos">2943</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Return list of luks format options</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of options</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_derived_from_image_uri" class="classattr">
                                        <input id="XMLState.get_derived_from_image_uri-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_derived_from_image_uri</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n"><a href="system/uri.html#Uri">kiwi.system.uri.Uri</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_derived_from_image_uri-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_derived_from_image_uri"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_derived_from_image_uri-2945"><a href="#XMLState.get_derived_from_image_uri-2945"><span class="linenos">2945</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_derived_from_image_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Uri</span><span class="p">]:</span>
</span><span id="XMLState.get_derived_from_image_uri-2946"><a href="#XMLState.get_derived_from_image_uri-2946"><span class="linenos">2946</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_derived_from_image_uri-2947"><a href="#XMLState.get_derived_from_image_uri-2947"><span class="linenos">2947</span></a><span class="sd">        Uri object(s) of derived image if configured</span>
</span><span id="XMLState.get_derived_from_image_uri-2948"><a href="#XMLState.get_derived_from_image_uri-2948"><span class="linenos">2948</span></a>
</span><span id="XMLState.get_derived_from_image_uri-2949"><a href="#XMLState.get_derived_from_image_uri-2949"><span class="linenos">2949</span></a><span class="sd">        Specific image types can be based on one ore more derived</span>
</span><span id="XMLState.get_derived_from_image_uri-2950"><a href="#XMLState.get_derived_from_image_uri-2950"><span class="linenos">2950</span></a><span class="sd">        images. This method returns the location of this image(s)</span>
</span><span id="XMLState.get_derived_from_image_uri-2951"><a href="#XMLState.get_derived_from_image_uri-2951"><span class="linenos">2951</span></a><span class="sd">        when configured in the XML description</span>
</span><span id="XMLState.get_derived_from_image_uri-2952"><a href="#XMLState.get_derived_from_image_uri-2952"><span class="linenos">2952</span></a>
</span><span id="XMLState.get_derived_from_image_uri-2953"><a href="#XMLState.get_derived_from_image_uri-2953"><span class="linenos">2953</span></a><span class="sd">        :return: List of Uri instances</span>
</span><span id="XMLState.get_derived_from_image_uri-2954"><a href="#XMLState.get_derived_from_image_uri-2954"><span class="linenos">2954</span></a>
</span><span id="XMLState.get_derived_from_image_uri-2955"><a href="#XMLState.get_derived_from_image_uri-2955"><span class="linenos">2955</span></a><span class="sd">        :rtype: list</span>
</span><span id="XMLState.get_derived_from_image_uri-2956"><a href="#XMLState.get_derived_from_image_uri-2956"><span class="linenos">2956</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_derived_from_image_uri-2957"><a href="#XMLState.get_derived_from_image_uri-2957"><span class="linenos">2957</span></a>        <span class="n">image_uris</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="XMLState.get_derived_from_image_uri-2958"><a href="#XMLState.get_derived_from_image_uri-2958"><span class="linenos">2958</span></a>        <span class="n">derived_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_derived_from</span><span class="p">()</span>
</span><span id="XMLState.get_derived_from_image_uri-2959"><a href="#XMLState.get_derived_from_image_uri-2959"><span class="linenos">2959</span></a>        <span class="k">if</span> <span class="n">derived_images</span><span class="p">:</span>
</span><span id="XMLState.get_derived_from_image_uri-2960"><a href="#XMLState.get_derived_from_image_uri-2960"><span class="linenos">2960</span></a>            <span class="k">for</span> <span class="n">derived_image</span> <span class="ow">in</span> <span class="n">derived_images</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
</span><span id="XMLState.get_derived_from_image_uri-2961"><a href="#XMLState.get_derived_from_image_uri-2961"><span class="linenos">2961</span></a>                <span class="n">image_uris</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="XMLState.get_derived_from_image_uri-2962"><a href="#XMLState.get_derived_from_image_uri-2962"><span class="linenos">2962</span></a>                    <span class="n">Uri</span><span class="p">(</span><span class="n">derived_image</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span>
</span><span id="XMLState.get_derived_from_image_uri-2963"><a href="#XMLState.get_derived_from_image_uri-2963"><span class="linenos">2963</span></a>                <span class="p">)</span>
</span><span id="XMLState.get_derived_from_image_uri-2964"><a href="#XMLState.get_derived_from_image_uri-2964"><span class="linenos">2964</span></a>        <span class="k">return</span> <span class="n">image_uris</span>
</span></pre></div>


            <div class="docstring"><p>Uri object(s) of derived image if configured</p>

<p>Specific image types can be based on one ore more derived
images. This method returns the location of this image(s)
when configured in the XML description</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List of Uri instances</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.set_derived_from_image_uri" class="classattr">
                                        <input id="XMLState.set_derived_from_image_uri-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_derived_from_image_uri</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">uri</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.set_derived_from_image_uri-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.set_derived_from_image_uri"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.set_derived_from_image_uri-2966"><a href="#XMLState.set_derived_from_image_uri-2966"><span class="linenos">2966</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_derived_from_image_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.set_derived_from_image_uri-2967"><a href="#XMLState.set_derived_from_image_uri-2967"><span class="linenos">2967</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.set_derived_from_image_uri-2968"><a href="#XMLState.set_derived_from_image_uri-2968"><span class="linenos">2968</span></a><span class="sd">        Set derived_from attribute to a new value</span>
</span><span id="XMLState.set_derived_from_image_uri-2969"><a href="#XMLState.set_derived_from_image_uri-2969"><span class="linenos">2969</span></a>
</span><span id="XMLState.set_derived_from_image_uri-2970"><a href="#XMLState.set_derived_from_image_uri-2970"><span class="linenos">2970</span></a><span class="sd">        In order to set a new value the derived_from attribute</span>
</span><span id="XMLState.set_derived_from_image_uri-2971"><a href="#XMLState.set_derived_from_image_uri-2971"><span class="linenos">2971</span></a><span class="sd">        must be already present in the image configuration</span>
</span><span id="XMLState.set_derived_from_image_uri-2972"><a href="#XMLState.set_derived_from_image_uri-2972"><span class="linenos">2972</span></a>
</span><span id="XMLState.set_derived_from_image_uri-2973"><a href="#XMLState.set_derived_from_image_uri-2973"><span class="linenos">2973</span></a><span class="sd">        :param str uri: URI</span>
</span><span id="XMLState.set_derived_from_image_uri-2974"><a href="#XMLState.set_derived_from_image_uri-2974"><span class="linenos">2974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.set_derived_from_image_uri-2975"><a href="#XMLState.set_derived_from_image_uri-2975"><span class="linenos">2975</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">get_derived_from</span><span class="p">():</span>
</span><span id="XMLState.set_derived_from_image_uri-2976"><a href="#XMLState.set_derived_from_image_uri-2976"><span class="linenos">2976</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_type</span><span class="o">.</span><span class="n">set_derived_from</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
</span><span id="XMLState.set_derived_from_image_uri-2977"><a href="#XMLState.set_derived_from_image_uri-2977"><span class="linenos">2977</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="XMLState.set_derived_from_image_uri-2978"><a href="#XMLState.set_derived_from_image_uri-2978"><span class="linenos">2978</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span>
</span><span id="XMLState.set_derived_from_image_uri-2979"><a href="#XMLState.set_derived_from_image_uri-2979"><span class="linenos">2979</span></a><span class="s1">                No derived_from attribute configured in image &lt;type&gt;</span>
</span><span id="XMLState.set_derived_from_image_uri-2980"><a href="#XMLState.set_derived_from_image_uri-2980"><span class="linenos">2980</span></a>
</span><span id="XMLState.set_derived_from_image_uri-2981"><a href="#XMLState.set_derived_from_image_uri-2981"><span class="linenos">2981</span></a><span class="s1">                In order to set the uri </span><span class="si">{0}</span><span class="s1"> as base container reference</span>
</span><span id="XMLState.set_derived_from_image_uri-2982"><a href="#XMLState.set_derived_from_image_uri-2982"><span class="linenos">2982</span></a><span class="s1">                an initial derived_from attribute must be set in the</span>
</span><span id="XMLState.set_derived_from_image_uri-2983"><a href="#XMLState.set_derived_from_image_uri-2983"><span class="linenos">2983</span></a><span class="s1">                type section</span>
</span><span id="XMLState.set_derived_from_image_uri-2984"><a href="#XMLState.set_derived_from_image_uri-2984"><span class="linenos">2984</span></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="XMLState.set_derived_from_image_uri-2985"><a href="#XMLState.set_derived_from_image_uri-2985"><span class="linenos">2985</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Set derived_from attribute to a new value</p>

<p>In order to set a new value the derived_from attribute
must be already present in the image configuration</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str uri</strong>:  URI</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.set_root_partition_uuid" class="classattr">
                                        <input id="XMLState.set_root_partition_uuid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_root_partition_uuid</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.set_root_partition_uuid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.set_root_partition_uuid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.set_root_partition_uuid-2987"><a href="#XMLState.set_root_partition_uuid-2987"><span class="linenos">2987</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_root_partition_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.set_root_partition_uuid-2988"><a href="#XMLState.set_root_partition_uuid-2988"><span class="linenos">2988</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.set_root_partition_uuid-2989"><a href="#XMLState.set_root_partition_uuid-2989"><span class="linenos">2989</span></a><span class="sd">        Store PARTUUID provided in uuid as state information</span>
</span><span id="XMLState.set_root_partition_uuid-2990"><a href="#XMLState.set_root_partition_uuid-2990"><span class="linenos">2990</span></a>
</span><span id="XMLState.set_root_partition_uuid-2991"><a href="#XMLState.set_root_partition_uuid-2991"><span class="linenos">2991</span></a><span class="sd">        :param str uuid: PARTUUID</span>
</span><span id="XMLState.set_root_partition_uuid-2992"><a href="#XMLState.set_root_partition_uuid-2992"><span class="linenos">2992</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.set_root_partition_uuid-2993"><a href="#XMLState.set_root_partition_uuid-2993"><span class="linenos">2993</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span> <span class="o">=</span> <span class="n">uuid</span>
</span></pre></div>


            <div class="docstring"><p>Store PARTUUID provided in uuid as state information</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str uuid</strong>:  PARTUUID</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.get_root_partition_uuid" class="classattr">
                                        <input id="XMLState.get_root_partition_uuid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_root_partition_uuid</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_root_partition_uuid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_root_partition_uuid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_root_partition_uuid-2995"><a href="#XMLState.get_root_partition_uuid-2995"><span class="linenos">2995</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_partition_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_root_partition_uuid-2996"><a href="#XMLState.get_root_partition_uuid-2996"><span class="linenos">2996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_root_partition_uuid-2997"><a href="#XMLState.get_root_partition_uuid-2997"><span class="linenos">2997</span></a><span class="sd">        Return preserved PARTUUID</span>
</span><span id="XMLState.get_root_partition_uuid-2998"><a href="#XMLState.get_root_partition_uuid-2998"><span class="linenos">2998</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_root_partition_uuid-2999"><a href="#XMLState.get_root_partition_uuid-2999"><span class="linenos">2999</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_partition_uuid</span>
</span></pre></div>


            <div class="docstring"><p>Return preserved PARTUUID</p>
</div>


                            </div>
                            <div id="XMLState.set_root_filesystem_uuid" class="classattr">
                                        <input id="XMLState.set_root_filesystem_uuid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_root_filesystem_uuid</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="XMLState.set_root_filesystem_uuid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.set_root_filesystem_uuid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.set_root_filesystem_uuid-3001"><a href="#XMLState.set_root_filesystem_uuid-3001"><span class="linenos">3001</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_root_filesystem_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="XMLState.set_root_filesystem_uuid-3002"><a href="#XMLState.set_root_filesystem_uuid-3002"><span class="linenos">3002</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.set_root_filesystem_uuid-3003"><a href="#XMLState.set_root_filesystem_uuid-3003"><span class="linenos">3003</span></a><span class="sd">        Store UUID provided in uuid as state information</span>
</span><span id="XMLState.set_root_filesystem_uuid-3004"><a href="#XMLState.set_root_filesystem_uuid-3004"><span class="linenos">3004</span></a>
</span><span id="XMLState.set_root_filesystem_uuid-3005"><a href="#XMLState.set_root_filesystem_uuid-3005"><span class="linenos">3005</span></a><span class="sd">        :param str uuid: UUID</span>
</span><span id="XMLState.set_root_filesystem_uuid-3006"><a href="#XMLState.set_root_filesystem_uuid-3006"><span class="linenos">3006</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.set_root_filesystem_uuid-3007"><a href="#XMLState.set_root_filesystem_uuid-3007"><span class="linenos">3007</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span> <span class="o">=</span> <span class="n">uuid</span>
</span></pre></div>


            <div class="docstring"><p>Store UUID provided in uuid as state information</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str uuid</strong>:  UUID</li>
</ul>
</div>


                            </div>
                            <div id="XMLState.get_root_filesystem_uuid" class="classattr">
                                        <input id="XMLState.get_root_filesystem_uuid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_root_filesystem_uuid</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_root_filesystem_uuid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_root_filesystem_uuid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_root_filesystem_uuid-3009"><a href="#XMLState.get_root_filesystem_uuid-3009"><span class="linenos">3009</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_filesystem_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="XMLState.get_root_filesystem_uuid-3010"><a href="#XMLState.get_root_filesystem_uuid-3010"><span class="linenos">3010</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_root_filesystem_uuid-3011"><a href="#XMLState.get_root_filesystem_uuid-3011"><span class="linenos">3011</span></a><span class="sd">        Return preserved UUID</span>
</span><span id="XMLState.get_root_filesystem_uuid-3012"><a href="#XMLState.get_root_filesystem_uuid-3012"><span class="linenos">3012</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_root_filesystem_uuid-3013"><a href="#XMLState.get_root_filesystem_uuid-3013"><span class="linenos">3013</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_filesystem_uuid</span>
</span></pre></div>


            <div class="docstring"><p>Return preserved UUID</p>
</div>


                            </div>
                            <div id="XMLState.get_archives_target_dirs" class="classattr">
                                        <input id="XMLState.get_archives_target_dirs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">get_archives_target_dirs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">packages_sections_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">kiwi</span><span class="o">.</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="n">Dict</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_archives_target_dirs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_archives_target_dirs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_archives_target_dirs-3015"><a href="#XMLState.get_archives_target_dirs-3015"><span class="linenos">3015</span></a>    <span class="nd">@staticmethod</span>
</span><span id="XMLState.get_archives_target_dirs-3016"><a href="#XMLState.get_archives_target_dirs-3016"><span class="linenos">3016</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="XMLState.get_archives_target_dirs-3017"><a href="#XMLState.get_archives_target_dirs-3017"><span class="linenos">3017</span></a>        <span class="n">packages_sections_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">xml_parse</span><span class="o">.</span><span class="n">packages</span><span class="p">]]</span>
</span><span id="XMLState.get_archives_target_dirs-3018"><a href="#XMLState.get_archives_target_dirs-3018"><span class="linenos">3018</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState.get_archives_target_dirs-3019"><a href="#XMLState.get_archives_target_dirs-3019"><span class="linenos">3019</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_archives_target_dirs-3020"><a href="#XMLState.get_archives_target_dirs-3020"><span class="linenos">3020</span></a><span class="sd">        Dict of archive names and target dirs for packages section(s), if any</span>
</span><span id="XMLState.get_archives_target_dirs-3021"><a href="#XMLState.get_archives_target_dirs-3021"><span class="linenos">3021</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="XMLState.get_archives_target_dirs-3022"><a href="#XMLState.get_archives_target_dirs-3022"><span class="linenos">3022</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_archives_target_dirs-3023"><a href="#XMLState.get_archives_target_dirs-3023"><span class="linenos">3023</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_archives_target_dirs-3024"><a href="#XMLState.get_archives_target_dirs-3024"><span class="linenos">3024</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="XMLState.get_archives_target_dirs-3025"><a href="#XMLState.get_archives_target_dirs-3025"><span class="linenos">3025</span></a>        <span class="k">if</span> <span class="n">packages_sections_names</span><span class="p">:</span>
</span><span id="XMLState.get_archives_target_dirs-3026"><a href="#XMLState.get_archives_target_dirs-3026"><span class="linenos">3026</span></a>            <span class="k">for</span> <span class="n">package_section_name</span> <span class="ow">in</span> <span class="n">packages_sections_names</span><span class="p">:</span>
</span><span id="XMLState.get_archives_target_dirs-3027"><a href="#XMLState.get_archives_target_dirs-3027"><span class="linenos">3027</span></a>                <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">package_section_name</span><span class="o">.</span><span class="n">get_archive</span><span class="p">():</span>
</span><span id="XMLState.get_archives_target_dirs-3028"><a href="#XMLState.get_archives_target_dirs-3028"><span class="linenos">3028</span></a>                    <span class="n">result</span><span class="p">[</span><span class="n">archive</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="n">archive</span><span class="o">.</span><span class="n">get_target_dir</span><span class="p">()</span>
</span><span id="XMLState.get_archives_target_dirs-3029"><a href="#XMLState.get_archives_target_dirs-3029"><span class="linenos">3029</span></a>
</span><span id="XMLState.get_archives_target_dirs-3030"><a href="#XMLState.get_archives_target_dirs-3030"><span class="linenos">3030</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Dict of archive names and target dirs for packages section(s), if any</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>archive names and its target dir</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_bootstrap_archives_target_dirs" class="classattr">
                                        <input id="XMLState.get_bootstrap_archives_target_dirs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bootstrap_archives_target_dirs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_bootstrap_archives_target_dirs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_bootstrap_archives_target_dirs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_bootstrap_archives_target_dirs-3032"><a href="#XMLState.get_bootstrap_archives_target_dirs-3032"><span class="linenos">3032</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_bootstrap_archives_target_dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3033"><a href="#XMLState.get_bootstrap_archives_target_dirs-3033"><span class="linenos">3033</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3034"><a href="#XMLState.get_bootstrap_archives_target_dirs-3034"><span class="linenos">3034</span></a><span class="sd">        Dict of archive names and target dirs from the type=&quot;bootstrap&quot;</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3035"><a href="#XMLState.get_bootstrap_archives_target_dirs-3035"><span class="linenos">3035</span></a><span class="sd">        packages section(s)</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3036"><a href="#XMLState.get_bootstrap_archives_target_dirs-3036"><span class="linenos">3036</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3037"><a href="#XMLState.get_bootstrap_archives_target_dirs-3037"><span class="linenos">3037</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3038"><a href="#XMLState.get_bootstrap_archives_target_dirs-3038"><span class="linenos">3038</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3039"><a href="#XMLState.get_bootstrap_archives_target_dirs-3039"><span class="linenos">3039</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3040"><a href="#XMLState.get_bootstrap_archives_target_dirs-3040"><span class="linenos">3040</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">])</span>
</span><span id="XMLState.get_bootstrap_archives_target_dirs-3041"><a href="#XMLState.get_bootstrap_archives_target_dirs-3041"><span class="linenos">3041</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Dict of archive names and target dirs from the type="bootstrap"
packages section(s)</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>archive names and its target dir</p>
</blockquote>
</div>


                            </div>
                            <div id="XMLState.get_system_archives_target_dirs" class="classattr">
                                        <input id="XMLState.get_system_archives_target_dirs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_system_archives_target_dirs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span>:</span></span>

                <label class="view-source-button" for="XMLState.get_system_archives_target_dirs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#XMLState.get_system_archives_target_dirs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="XMLState.get_system_archives_target_dirs-3043"><a href="#XMLState.get_system_archives_target_dirs-3043"><span class="linenos">3043</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_system_archives_target_dirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="XMLState.get_system_archives_target_dirs-3044"><a href="#XMLState.get_system_archives_target_dirs-3044"><span class="linenos">3044</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_archives_target_dirs-3045"><a href="#XMLState.get_system_archives_target_dirs-3045"><span class="linenos">3045</span></a><span class="sd">        Dict of archive names and its target dir from the packages sections matching</span>
</span><span id="XMLState.get_system_archives_target_dirs-3046"><a href="#XMLState.get_system_archives_target_dirs-3046"><span class="linenos">3046</span></a><span class="sd">        type=&quot;image&quot; and type=build_type</span>
</span><span id="XMLState.get_system_archives_target_dirs-3047"><a href="#XMLState.get_system_archives_target_dirs-3047"><span class="linenos">3047</span></a><span class="sd">        :return: archive names and its target dir</span>
</span><span id="XMLState.get_system_archives_target_dirs-3048"><a href="#XMLState.get_system_archives_target_dirs-3048"><span class="linenos">3048</span></a><span class="sd">        :rtype: dict</span>
</span><span id="XMLState.get_system_archives_target_dirs-3049"><a href="#XMLState.get_system_archives_target_dirs-3049"><span class="linenos">3049</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="XMLState.get_system_archives_target_dirs-3050"><a href="#XMLState.get_system_archives_target_dirs-3050"><span class="linenos">3050</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_archives_target_dirs</span><span class="p">(</span>
</span><span id="XMLState.get_system_archives_target_dirs-3051"><a href="#XMLState.get_system_archives_target_dirs-3051"><span class="linenos">3051</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_packages_sections</span><span class="p">([</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_type_name</span><span class="p">()])</span>
</span><span id="XMLState.get_system_archives_target_dirs-3052"><a href="#XMLState.get_system_archives_target_dirs-3052"><span class="linenos">3052</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Dict of archive names and its target dir from the packages sections matching
type="image" and type=build_type</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>archive names and its target dir</p>
</blockquote>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>